/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["DashviewV2"] = factory();
	else
		root["DashviewV2"] = factory();
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 767:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ panel_entry)\n});\n\n// UNUSED EXPORTS: DASHVIEW_VERSION\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.mjs\nvar tslib_es6 = __webpack_require__(635);\n// EXTERNAL MODULE: ./node_modules/lit/index.js + 2 modules\nvar lit = __webpack_require__(174);\n// EXTERNAL MODULE: ./node_modules/lit/decorators.js + 3 modules\nvar decorators = __webpack_require__(791);\n;// ./src/core/base-element.ts\n\n\n\nclass DashviewBaseElement extends lit/* LitElement */.WF {\n    shouldUpdate(changedProps) {\n        if (!this.hass) {\n            console.warn('DashviewBaseElement: hass object not available');\n            return false;\n        }\n        return super.shouldUpdate(changedProps);\n    }\n    async callWebSocket(command, data) {\n        if (!this.hass) {\n            throw new Error('Home Assistant connection not available');\n        }\n        try {\n            const result = await this.hass.callWS({\n                type: `dashview_v2/${command}`,\n                ...data,\n            });\n            return result;\n        }\n        catch (error) {\n            console.error(`WebSocket call failed for ${command}:`, error);\n            throw error;\n        }\n    }\n    handleError(error, context) {\n        console.error(`[Dashview V2] Error in ${context}:`, error);\n        // In the future, we can show user-friendly error messages here\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        console.log('DashviewBaseElement connected');\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        console.log('DashviewBaseElement disconnected');\n    }\n}\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ attribute: false }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewBaseElement.prototype, \"hass\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: Object }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewBaseElement.prototype, \"config\", void 0);\n\n;// ./src/core/websocket-connection.ts\nclass WebSocketConnection {\n    constructor(hass) {\n        this.hass = hass;\n    }\n    async getHomeInfo() {\n        try {\n            const result = await this.hass.callWS({\n                type: 'dashview_v2/get_home_info',\n            });\n            return result;\n        }\n        catch (error) {\n            console.error('Failed to get home info:', error);\n            throw error;\n        }\n    }\n    async subscribeToStateChanges(callback, entityIds) {\n        if (!this.hass.connection) {\n            throw new Error('WebSocket connection not available');\n        }\n        const unsubscribe = await this.hass.connection.subscribeEvents((event) => {\n            if (!entityIds || entityIds.includes(event.data.entity_id)) {\n                callback(event);\n            }\n        }, 'state_changed');\n        return unsubscribe;\n    }\n    isConnected() {\n        return !!this.hass && !!this.hass.connection;\n    }\n}\n\n;// ./src/utils/logger.ts\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor() {\n        this.level = LogLevel.INFO;\n        this.prefix = '[Dashview V2]';\n        // Check if we're in development mode\n        if (false) // removed by dead control flow\n{}\n    }\n    static getInstance() {\n        if (!Logger.instance) {\n            Logger.instance = new Logger();\n        }\n        return Logger.instance;\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n    debug(...args) {\n        if (this.level <= LogLevel.DEBUG) {\n            console.debug(this.prefix, ...args);\n        }\n    }\n    info(...args) {\n        if (this.level <= LogLevel.INFO) {\n            console.info(this.prefix, ...args);\n        }\n    }\n    warn(...args) {\n        if (this.level <= LogLevel.WARN) {\n            console.warn(this.prefix, ...args);\n        }\n    }\n    error(...args) {\n        if (this.level <= LogLevel.ERROR) {\n            console.error(this.prefix, ...args);\n        }\n    }\n}\nconst logger = Logger.getInstance();\n\n;// ./src/core/state-manager.ts\n/**\n * State management for Dashview V2 dashboard.\n * Handles efficient state updates with diffing and batching.\n */\n\nconst state_manager_logger = new Logger('StateManager');\nclass StateManager {\n    constructor(config = {}) {\n        this.updateQueue = [];\n        this.rafId = null;\n        this.lastState = new Map();\n        this.listeners = new Map();\n        this.globalListeners = new Set();\n        this.config = {\n            batchInterval: config.batchInterval ?? 16, // 60fps\n            maxBatchSize: config.maxBatchSize ?? 100,\n        };\n    }\n    /**\n     * Compute differences between old and new state.\n     */\n    computeStateDiff(entityId, newState) {\n        const oldState = this.lastState.get(entityId);\n        if (!oldState) {\n            return {\n                type: 'added',\n                entityId,\n                newState,\n            };\n        }\n        // Quick equality check\n        if (oldState.state === newState.state &&\n            JSON.stringify(oldState.attributes) === JSON.stringify(newState.attributes)) {\n            return null;\n        }\n        // Find changed properties\n        const changedProps = this.getChangedProps(oldState, newState);\n        if (changedProps.length === 0) {\n            return null;\n        }\n        return {\n            type: 'changed',\n            entityId,\n            oldState,\n            newState,\n            changedProps,\n        };\n    }\n    /**\n     * Get list of changed properties between states.\n     */\n    getChangedProps(oldState, newState) {\n        const changed = [];\n        // Check main state\n        if (oldState.state !== newState.state) {\n            changed.push('state');\n        }\n        // Check attributes\n        const oldAttrs = oldState.attributes || {};\n        const newAttrs = newState.attributes || {};\n        const allKeys = new Set([...Object.keys(oldAttrs), ...Object.keys(newAttrs)]);\n        for (const key of allKeys) {\n            if (JSON.stringify(oldAttrs[key]) !== JSON.stringify(newAttrs[key])) {\n                changed.push(`attributes.${key}`);\n            }\n        }\n        // Check last_changed and last_updated\n        if (oldState.last_changed !== newState.last_changed) {\n            changed.push('last_changed');\n        }\n        if (oldState.last_updated !== newState.last_updated) {\n            changed.push('last_updated');\n        }\n        return changed;\n    }\n    /**\n     * Batch state updates for efficient rendering.\n     */\n    batchUpdate(updates) {\n        this.updateQueue.push(...updates);\n        // If we have too many updates, process immediately\n        if (this.updateQueue.length >= this.config.maxBatchSize) {\n            this.processBatch();\n            return;\n        }\n        // Otherwise, schedule processing\n        if (!this.rafId) {\n            this.rafId = requestAnimationFrame(() => {\n                this.processBatch();\n                this.rafId = null;\n            });\n        }\n    }\n    /**\n     * Process a single state update immediately.\n     */\n    updateState(entityId, newState) {\n        this.batchUpdate([{\n                entityId,\n                state: newState,\n                timestamp: Date.now(),\n            }]);\n    }\n    /**\n     * Process all batched updates.\n     */\n    processBatch() {\n        if (this.updateQueue.length === 0) {\n            return;\n        }\n        const startTime = performance.now();\n        const updateMap = new Map();\n        const diffs = [];\n        // Deduplicate updates (keep latest for each entity)\n        for (const update of this.updateQueue) {\n            updateMap.set(update.entityId, update);\n        }\n        // Process each unique update\n        for (const [entityId, update] of updateMap) {\n            const diff = this.computeStateDiff(entityId, update.state);\n            if (diff) {\n                diffs.push(diff);\n                this.lastState.set(entityId, update.state);\n                // Notify entity-specific listeners\n                const entityListeners = this.listeners.get(entityId);\n                if (entityListeners) {\n                    for (const listener of entityListeners) {\n                        try {\n                            listener(diff);\n                        }\n                        catch (error) {\n                            state_manager_logger.error(`Error in entity listener for ${entityId}:`, error);\n                        }\n                    }\n                }\n            }\n        }\n        // Notify global listeners\n        if (diffs.length > 0) {\n            for (const listener of this.globalListeners) {\n                try {\n                    listener(diffs);\n                }\n                catch (error) {\n                    state_manager_logger.error('Error in global state listener:', error);\n                }\n            }\n        }\n        // Clear queue\n        this.updateQueue = [];\n        // Log performance\n        const processingTime = performance.now() - startTime;\n        if (processingTime > this.config.batchInterval) {\n            state_manager_logger.warn(`Batch processing took ${processingTime.toFixed(2)}ms for ${updateMap.size} updates`);\n        }\n    }\n    /**\n     * Subscribe to state changes for a specific entity.\n     */\n    subscribeToEntity(entityId, callback) {\n        if (!this.listeners.has(entityId)) {\n            this.listeners.set(entityId, new Set());\n        }\n        this.listeners.get(entityId).add(callback);\n        // Return unsubscribe function\n        return () => {\n            const listeners = this.listeners.get(entityId);\n            if (listeners) {\n                listeners.delete(callback);\n                if (listeners.size === 0) {\n                    this.listeners.delete(entityId);\n                }\n            }\n        };\n    }\n    /**\n     * Subscribe to all state changes.\n     */\n    subscribeToAll(callback) {\n        this.globalListeners.add(callback);\n        // Return unsubscribe function\n        return () => {\n            this.globalListeners.delete(callback);\n        };\n    }\n    /**\n     * Get current state for an entity.\n     */\n    getState(entityId) {\n        return this.lastState.get(entityId);\n    }\n    /**\n     * Get all current states.\n     */\n    getAllStates() {\n        return new Map(this.lastState);\n    }\n    /**\n     * Initialize state from Home Assistant.\n     */\n    initializeFromHass(hass) {\n        const updates = [];\n        for (const [entityId, state] of Object.entries(hass.states)) {\n            updates.push({\n                entityId,\n                state,\n                timestamp: Date.now(),\n            });\n        }\n        this.batchUpdate(updates);\n        state_manager_logger.info(`Initialized state for ${updates.length} entities`);\n    }\n    /**\n     * Clear all state and listeners.\n     */\n    clear() {\n        if (this.rafId) {\n            cancelAnimationFrame(this.rafId);\n            this.rafId = null;\n        }\n        this.updateQueue = [];\n        this.lastState.clear();\n        this.listeners.clear();\n        this.globalListeners.clear();\n    }\n    /**\n     * Get statistics about the state manager.\n     */\n    getStats() {\n        return {\n            entityCount: this.lastState.size,\n            listenerCount: this.listeners.size + this.globalListeners.size,\n            queueSize: this.updateQueue.length,\n        };\n    }\n}\n\n;// ./src/core/subscription-manager.ts\n/**\n * Subscription manager for smart entity subscriptions.\n * Only subscribes to visible entities to optimize performance.\n */\n\nconst subscription_manager_logger = new Logger('SubscriptionManager');\nclass SubscriptionManager {\n    constructor(websocket, stateManager, config = {}) {\n        this.visibleEntities = new Set();\n        this.subscribedEntities = new Set();\n        this.debounceTimer = null;\n        this.unsubscribeHandler = null;\n        this.websocket = websocket;\n        this.stateManager = stateManager;\n        this.config = {\n            debounceDelay: config.debounceDelay ?? 300,\n            maxSubscriptions: config.maxSubscriptions ?? 500,\n        };\n    }\n    /**\n     * Update the list of visible entities.\n     * This will trigger subscription updates after debouncing.\n     */\n    updateVisibleEntities(entities) {\n        const newVisible = new Set(entities);\n        // Check if there's actually a change\n        const hasChanges = entities.length !== this.visibleEntities.size ||\n            entities.some(id => !this.visibleEntities.has(id));\n        if (!hasChanges) {\n            return;\n        }\n        // Update visible set\n        this.visibleEntities = newVisible;\n        // Debounce the sync operation\n        if (this.debounceTimer) {\n            clearTimeout(this.debounceTimer);\n        }\n        this.debounceTimer = window.setTimeout(() => {\n            this.syncSubscriptions();\n            this.debounceTimer = null;\n        }, this.config.debounceDelay);\n    }\n    /**\n     * Sync subscriptions with the backend.\n     * Subscribes to newly visible entities and unsubscribes from hidden ones.\n     */\n    async syncSubscriptions() {\n        if (!this.websocket.isConnected()) {\n            subscription_manager_logger.warn('WebSocket not connected, skipping subscription sync');\n            return;\n        }\n        try {\n            // Limit subscriptions if needed\n            const targetEntities = Array.from(this.visibleEntities).slice(0, this.config.maxSubscriptions);\n            // Call backend to update subscriptions\n            const result = await this.callUpdateSubscriptions(targetEntities);\n            // Update local tracking\n            this.subscribedEntities = new Set([\n                ...this.subscribedEntities,\n                ...result.subscribed\n            ]);\n            for (const entityId of result.unsubscribed) {\n                this.subscribedEntities.delete(entityId);\n            }\n            subscription_manager_logger.info(`Subscription sync complete: ${result.subscribed.length} added, ` +\n                `${result.unsubscribed.length} removed, ${this.subscribedEntities.size} total`);\n            // Log any failures\n            if (result.failed.length > 0) {\n                subscription_manager_logger.warn(`Failed to subscribe to ${result.failed.length} entities:`, result.failed);\n            }\n        }\n        catch (error) {\n            subscription_manager_logger.error('Failed to sync subscriptions:', error);\n        }\n    }\n    /**\n     * Call the backend WebSocket command to update subscriptions.\n     */\n    async callUpdateSubscriptions(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/update_subscriptions',\n            entities: entities,\n        });\n        return response;\n    }\n    /**\n     * Subscribe to specific entities immediately.\n     */\n    async subscribeToEntities(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/subscribe_visible_entities',\n            entities: entities,\n        });\n        // Update local tracking\n        for (const entityId of response.subscribed) {\n            this.subscribedEntities.add(entityId);\n        }\n        return {\n            subscribed: response.subscribed,\n            unsubscribed: [],\n            failed: response.failed || [],\n        };\n    }\n    /**\n     * Unsubscribe from specific entities immediately.\n     */\n    async unsubscribeFromEntities(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/unsubscribe_hidden_entities',\n            entities: entities,\n        });\n        // Update local tracking\n        for (const entityId of response.unsubscribed) {\n            this.subscribedEntities.delete(entityId);\n        }\n        return {\n            subscribed: [],\n            unsubscribed: response.unsubscribed,\n            failed: response.failed || [],\n        };\n    }\n    /**\n     * Start listening for state changes.\n     * This sets up the WebSocket event listener for state updates.\n     */\n    async startListening() {\n        if (this.unsubscribeHandler) {\n            subscription_manager_logger.warn('Already listening for state changes');\n            return;\n        }\n        try {\n            // Set up WebSocket event listener\n            this.unsubscribeHandler = await this.websocket.subscribeToStateChanges((event) => {\n                if (event.event_type === 'state_changed' && event.data) {\n                    const { entity_id, new_state } = event.data;\n                    // Only process if we're subscribed to this entity\n                    if (this.subscribedEntities.has(entity_id) && new_state) {\n                        this.stateManager.updateState(entity_id, new_state);\n                    }\n                }\n            });\n            subscription_manager_logger.info('Started listening for state changes');\n        }\n        catch (error) {\n            subscription_manager_logger.error('Failed to start listening:', error);\n            throw error;\n        }\n    }\n    /**\n     * Stop listening for state changes.\n     */\n    stopListening() {\n        if (this.unsubscribeHandler) {\n            this.unsubscribeHandler();\n            this.unsubscribeHandler = null;\n            subscription_manager_logger.info('Stopped listening for state changes');\n        }\n    }\n    /**\n     * Get the current list of subscribed entities.\n     */\n    getSubscribedEntities() {\n        return Array.from(this.subscribedEntities);\n    }\n    /**\n     * Get the current list of visible entities.\n     */\n    getVisibleEntities() {\n        return Array.from(this.visibleEntities);\n    }\n    /**\n     * Check if an entity is currently subscribed.\n     */\n    isSubscribed(entityId) {\n        return this.subscribedEntities.has(entityId);\n    }\n    /**\n     * Get subscription statistics.\n     */\n    getStats() {\n        return {\n            visibleCount: this.visibleEntities.size,\n            subscribedCount: this.subscribedEntities.size,\n            maxSubscriptions: this.config.maxSubscriptions,\n        };\n    }\n    /**\n     * Clear all subscriptions and stop listening.\n     */\n    async clear() {\n        // Stop listening\n        this.stopListening();\n        // Clear debounce timer\n        if (this.debounceTimer) {\n            clearTimeout(this.debounceTimer);\n            this.debounceTimer = null;\n        }\n        // Unsubscribe from all entities\n        if (this.subscribedEntities.size > 0) {\n            await this.unsubscribeFromEntities(Array.from(this.subscribedEntities));\n        }\n        // Clear sets\n        this.visibleEntities.clear();\n        this.subscribedEntities.clear();\n        subscription_manager_logger.info('Cleared all subscriptions');\n    }\n}\n\n;// ./src/layouts/base-layout.ts\n/**\n * Base layout class for Dashview V2 dashboard layouts.\n * Provides grid system and responsive breakpoint handling.\n */\nclass BaseLayout {\n    constructor() {\n        this.currentBreakpoint = 'desktop';\n        this.containerWidth = 0;\n        this.config = this.getLayoutConfig();\n    }\n    /**\n     * Get current breakpoint based on container width.\n     */\n    getBreakpoint(width) {\n        const w = width || this.containerWidth;\n        if (w < this.config.breakpoints.tablet) {\n            return 'mobile';\n        }\n        else if (w < this.config.breakpoints.desktop) {\n            return 'tablet';\n        }\n        else if (w < this.config.breakpoints.large) {\n            return 'desktop';\n        }\n        else {\n            return 'large';\n        }\n    }\n    /**\n     * Update container width and return if breakpoint changed.\n     */\n    updateContainerWidth(width) {\n        this.containerWidth = width;\n        const newBreakpoint = this.getBreakpoint(width);\n        if (newBreakpoint !== this.currentBreakpoint) {\n            this.currentBreakpoint = newBreakpoint;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Get number of columns for current breakpoint.\n     */\n    getColumnCount(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return 4;\n            case 'tablet':\n                return 8;\n            case 'desktop':\n                return 12;\n            case 'large':\n                return 12;\n            default:\n                return 12;\n        }\n    }\n    /**\n     * Get grid gap size for current breakpoint.\n     */\n    getGridGap(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return '8px';\n            case 'tablet':\n                return '12px';\n            case 'desktop':\n                return '16px';\n            case 'large':\n                return '20px';\n            default:\n                return '16px';\n        }\n    }\n    /**\n     * Get container padding for current breakpoint.\n     */\n    getContainerPadding(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return '8px';\n            case 'tablet':\n                return '16px';\n            case 'desktop':\n                return '24px';\n            case 'large':\n                return '32px';\n            default:\n                return '24px';\n        }\n    }\n    /**\n     * Check if layout is suitable for given area count.\n     */\n    isSuitableForAreaCount(areaCount) {\n        return areaCount >= this.config.minAreas &&\n            areaCount <= this.config.maxAreas;\n    }\n    /**\n     * Sort widgets by priority for placement.\n     */\n    sortWidgetsByPriority(widgets) {\n        // Priority order: room > climate > device-group > quick-controls\n        const priorityMap = {\n            'room': 4,\n            'climate': 3,\n            'device-group': 2,\n            'quick-controls': 1,\n        };\n        return [...widgets].sort((a, b) => {\n            const priorityA = priorityMap[a.type] || 0;\n            const priorityB = priorityMap[b.type] || 0;\n            // Sort by priority first\n            if (priorityA !== priorityB) {\n                return priorityB - priorityA;\n            }\n            // Then by entity count\n            return b.entities.length - a.entities.length;\n        });\n    }\n    /**\n     * Group widgets by type.\n     */\n    groupWidgetsByType(widgets) {\n        const groups = new Map();\n        for (const widget of widgets) {\n            const type = widget.type;\n            if (!groups.has(type)) {\n                groups.set(type, []);\n            }\n            groups.get(type).push(widget);\n        }\n        return groups;\n    }\n    /**\n     * Generate CSS for grid template.\n     */\n    generateGridCSS(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        const template = this.generateGridTemplate(bp);\n        const gap = this.getGridGap(bp);\n        const padding = this.getContainerPadding(bp);\n        return `\n      display: grid;\n      grid-template: ${template};\n      gap: ${gap};\n      padding: ${padding};\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n    `;\n    }\n    /**\n     * Get layout metadata.\n     */\n    getMetadata() {\n        return {\n            name: this.config.name,\n            description: this.config.description,\n            currentBreakpoint: this.currentBreakpoint,\n            supportedAreaRange: [this.config.minAreas, this.config.maxAreas],\n        };\n    }\n}\n\n;// ./src/layouts/standard-layout.ts\n/**\n * Standard layout for 2-3 bedroom homes.\n * Optimized grid layout with room widgets in main area,\n * device groups in sidebar, climate in header, and quick controls in footer.\n */\n\nclass StandardLayout extends BaseLayout {\n    getLayoutConfig() {\n        return {\n            name: 'Standard',\n            description: 'Optimized layout for 2-3 bedroom homes',\n            minAreas: 2,\n            maxAreas: 5,\n            breakpoints: {\n                mobile: 768,\n                tablet: 1024,\n                desktop: 1440,\n                large: 1920,\n            },\n        };\n    }\n    generateGridTemplate(breakpoint) {\n        switch (breakpoint) {\n            case 'mobile':\n                // Single column layout\n                return `\n          \"header\" auto\n          \"main\" 1fr\n          \"sidebar\" auto\n          \"footer\" auto\n          / 1fr\n        `;\n            case 'tablet':\n                // Two column layout\n                return `\n          \"header header\" auto\n          \"main main\" 1fr\n          \"sidebar sidebar\" auto\n          \"footer footer\" auto\n          / 1fr 1fr\n        `;\n            case 'desktop':\n                // Three column layout with sidebar\n                return `\n          \"header header header\" auto\n          \"main main sidebar\" 1fr\n          \"footer footer footer\" auto\n          / 1fr 1fr minmax(280px, 0.5fr)\n        `;\n            case 'large':\n                // Three column layout with larger sidebar\n                return `\n          \"header header header\" auto\n          \"main main sidebar\" 1fr\n          \"footer footer footer\" auto\n          / 1fr 1fr minmax(320px, 0.6fr)\n        `;\n            default:\n                return this.generateGridTemplate('desktop');\n        }\n    }\n    getGridAreas(breakpoint) {\n        const areas = [\n            {\n                name: 'header',\n                gridArea: 'header',\n                minWidgets: 0,\n                maxWidgets: 2,\n                widgetTypes: ['climate', 'quick-controls'],\n            },\n            {\n                name: 'main',\n                gridArea: 'main',\n                minWidgets: 1,\n                maxWidgets: 6,\n                widgetTypes: ['room'],\n            },\n            {\n                name: 'sidebar',\n                gridArea: 'sidebar',\n                minWidgets: 0,\n                maxWidgets: 4,\n                widgetTypes: ['device-group', 'quick-controls'],\n            },\n            {\n                name: 'footer',\n                gridArea: 'footer',\n                minWidgets: 0,\n                maxWidgets: 1,\n                widgetTypes: ['quick-controls'],\n            },\n        ];\n        // Adjust for mobile\n        if (breakpoint === 'mobile') {\n            // On mobile, everything stacks vertically\n            areas.forEach(area => {\n                if (area.name === 'main') {\n                    area.maxWidgets = 4; // Limit room widgets on mobile\n                }\n            });\n        }\n        return areas;\n    }\n    calculateWidgetPositions(widgets, areaCount) {\n        const positions = [];\n        const sortedWidgets = this.sortWidgetsByPriority(widgets);\n        const widgetsByType = this.groupWidgetsByType(sortedWidgets);\n        // Place climate widgets in header\n        const climateWidgets = widgetsByType.get('climate') || [];\n        climateWidgets.slice(0, 1).forEach((widget, index) => {\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'header',\n                order: index,\n            });\n        });\n        // Place room widgets in main area\n        const roomWidgets = widgetsByType.get('room') || [];\n        const mainColumns = this.currentBreakpoint === 'mobile' ? 1 : 2;\n        const mainRows = Math.ceil(roomWidgets.length / mainColumns);\n        roomWidgets.slice(0, 6).forEach((widget, index) => {\n            const col = (index % mainColumns) + 1;\n            const row = Math.floor(index / mainColumns) + 1;\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'main',\n                gridColumn: this.currentBreakpoint === 'mobile'\n                    ? '1'\n                    : `${col} / span 1`,\n                gridRow: `${row} / span 1`,\n                order: index,\n            });\n        });\n        // Place device groups in sidebar\n        const deviceGroups = widgetsByType.get('device-group') || [];\n        deviceGroups.slice(0, 3).forEach((widget, index) => {\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'sidebar',\n                order: index,\n            });\n        });\n        // Place quick controls\n        const quickControls = widgetsByType.get('quick-controls') || [];\n        if (quickControls.length > 0) {\n            // First quick controls in footer\n            positions.push({\n                widgetId: this.generateWidgetId(quickControls[0]),\n                gridArea: 'footer',\n                order: 0,\n            });\n            // Additional quick controls in sidebar\n            quickControls.slice(1, 3).forEach((widget, index) => {\n                positions.push({\n                    widgetId: this.generateWidgetId(widget),\n                    gridArea: 'sidebar',\n                    order: deviceGroups.length + index,\n                });\n            });\n        }\n        return positions;\n    }\n    /**\n     * Generate a unique widget ID.\n     */\n    generateWidgetId(widget) {\n        // Use type and first entity as ID\n        const firstEntity = widget.entities[0] || 'unknown';\n        return `${widget.type}-${firstEntity.replace(/\\./g, '_')}`;\n    }\n    /**\n     * Get recommended widget configuration for area count.\n     */\n    getRecommendedWidgets(areaCount) {\n        // Base recommendations\n        const config = {\n            roomWidgets: Math.min(areaCount, 4),\n            deviceGroups: 2,\n            climateWidgets: 1,\n            quickControls: 1,\n        };\n        // Adjust based on area count\n        if (areaCount <= 2) {\n            // Small home: fewer widgets\n            config.roomWidgets = areaCount;\n            config.deviceGroups = 1;\n        }\n        else if (areaCount >= 4) {\n            // Larger home: more widgets\n            config.deviceGroups = 3;\n            config.quickControls = 2;\n        }\n        // Adjust for breakpoint\n        if (this.currentBreakpoint === 'mobile') {\n            config.roomWidgets = Math.min(config.roomWidgets, 3);\n            config.deviceGroups = Math.min(config.deviceGroups, 2);\n        }\n        return config;\n    }\n    /**\n     * Get CSS for specific grid areas.\n     */\n    getAreaStyles(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        const baseStyles = {\n            header: `\n        grid-area: header;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 16px;\n        align-items: center;\n      `,\n            main: `\n        grid-area: main;\n        display: grid;\n        gap: 16px;\n        align-content: start;\n      `,\n            sidebar: `\n        grid-area: sidebar;\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      `,\n            footer: `\n        grid-area: footer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      `,\n        };\n        // Adjust main grid for different breakpoints\n        if (bp === 'mobile') {\n            baseStyles.main += `\n        grid-template-columns: 1fr;\n      `;\n        }\n        else {\n            baseStyles.main += `\n        grid-template-columns: repeat(2, 1fr);\n      `;\n        }\n        return baseStyles;\n    }\n}\n\n;// ./src/layouts/layout-engine.ts\n/**\n * Layout engine for Dashview V2.\n * Handles layout selection, widget organization, and overflow management.\n */\n\n\nconst layout_engine_logger = new Logger('LayoutEngine');\nclass LayoutEngine {\n    constructor(config = {}) {\n        this.currentLayout = null;\n        this.config = {\n            maxWidgetsPerArea: config.maxWidgetsPerArea ?? 2,\n            prioritizeByUsage: config.prioritizeByUsage ?? true,\n        };\n        // Initialize available layouts\n        this.layouts = new Map();\n        this.registerLayout('standard', new StandardLayout());\n        // Future layouts can be registered here:\n        // this.registerLayout('compact', new CompactLayout());\n        // this.registerLayout('complex', new ComplexLayout());\n        // this.registerLayout('estate', new EstateLayout());\n    }\n    /**\n     * Register a layout.\n     */\n    registerLayout(name, layout) {\n        this.layouts.set(name, layout);\n        layout_engine_logger.info(`Registered layout: ${name}`);\n    }\n    /**\n     * Select optimal layout based on complexity score.\n     */\n    selectLayout(complexityScore, areaCount) {\n        // For now, we only have StandardLayout\n        // In the future, this will select based on complexity\n        let selectedLayout;\n        let selectedName = '';\n        // Find suitable layout for area count\n        for (const [name, layout] of this.layouts) {\n            if (layout.isSuitableForAreaCount(areaCount)) {\n                selectedLayout = layout;\n                selectedName = name;\n                break;\n            }\n        }\n        // Fallback to standard if no suitable layout found\n        if (!selectedLayout) {\n            selectedLayout = this.layouts.get('standard');\n            selectedName = 'standard';\n            layout_engine_logger.warn(`No suitable layout for ${areaCount} areas, using standard layout`);\n        }\n        this.currentLayout = selectedLayout;\n        layout_engine_logger.info(`Selected ${selectedName} layout for complexity ${complexityScore} and ${areaCount} areas`);\n        return selectedLayout;\n    }\n    /**\n     * Organize widgets based on areas and layout.\n     */\n    organizeWidgets(areas) {\n        const widgets = [];\n        // Sort areas by entity count and priority\n        const sortedAreas = this.sortAreasByPriority(areas);\n        // Create room widgets for each area\n        for (const area of sortedAreas) {\n            if (area.entityCount === 0)\n                continue;\n            const roomWidget = {\n                type: 'room',\n                entities: area.entities,\n                title: area.name,\n            };\n            widgets.push(roomWidget);\n        }\n        // Create device group widgets\n        const deviceGroups = this.createDeviceGroups(areas);\n        widgets.push(...deviceGroups);\n        // Create climate widget if climate entities exist\n        const climateWidget = this.createClimateWidget(areas);\n        if (climateWidget) {\n            widgets.push(climateWidget);\n        }\n        // Create quick controls widget\n        const quickControls = this.createQuickControlsWidget(areas);\n        if (quickControls) {\n            widgets.push(quickControls);\n        }\n        layout_engine_logger.info(`Organized ${widgets.length} widgets from ${areas.length} areas`);\n        return widgets;\n    }\n    /**\n     * Handle widget overflow for current layout.\n     */\n    handleOverflow(widgets, layout, breakpoint) {\n        const areas = layout.getGridAreas(breakpoint);\n        const visible = [];\n        const overflow = [];\n        // Group widgets by type\n        const widgetsByType = new Map();\n        for (const widget of widgets) {\n            if (!widgetsByType.has(widget.type)) {\n                widgetsByType.set(widget.type, []);\n            }\n            widgetsByType.get(widget.type).push(widget);\n        }\n        // Place widgets according to area constraints\n        for (const area of areas) {\n            let remainingSlots = area.maxWidgets || 999;\n            for (const widgetType of area.widgetTypes || []) {\n                const availableWidgets = widgetsByType.get(widgetType) || [];\n                for (const widget of availableWidgets) {\n                    if (remainingSlots > 0 && !visible.includes(widget)) {\n                        visible.push(widget);\n                        remainingSlots--;\n                    }\n                    else if (!visible.includes(widget) && !overflow.includes(widget)) {\n                        overflow.push(widget);\n                    }\n                }\n            }\n        }\n        layout_engine_logger.info(`Layout overflow: ${visible.length} visible, ${overflow.length} overflow`);\n        return { visible, overflow };\n    }\n    /**\n     * Sort areas by priority.\n     */\n    sortAreasByPriority(areas) {\n        return [...areas].sort((a, b) => {\n            // Prioritize named areas over \"unassigned\"\n            if (a.areaId === 'unassigned')\n                return 1;\n            if (b.areaId === 'unassigned')\n                return -1;\n            // Prioritize by entity count\n            if (a.entityCount !== b.entityCount) {\n                return b.entityCount - a.entityCount;\n            }\n            // Then by device count\n            return b.deviceCount - a.deviceCount;\n        });\n    }\n    /**\n     * Create device group widgets.\n     */\n    createDeviceGroups(areas) {\n        const groups = [];\n        const allEntities = [];\n        // Collect all entities\n        for (const area of areas) {\n            allEntities.push(...area.entities);\n        }\n        // Group by domain\n        const entityByDomain = new Map();\n        for (const entityId of allEntities) {\n            const domain = entityId.split('.')[0];\n            if (!entityByDomain.has(domain)) {\n                entityByDomain.set(domain, []);\n            }\n            entityByDomain.get(domain).push(entityId);\n        }\n        // Create groups for specific domains\n        const groupableDomains = ['light', 'switch', 'cover', 'fan'];\n        for (const domain of groupableDomains) {\n            const entities = entityByDomain.get(domain) || [];\n            if (entities.length >= 3) { // Only create group if enough entities\n                groups.push({\n                    type: 'device-group',\n                    entities: entities,\n                    title: `All ${domain}s`,\n                });\n            }\n        }\n        return groups;\n    }\n    /**\n     * Create climate widget.\n     */\n    createClimateWidget(areas) {\n        const climateEntities = [];\n        for (const area of areas) {\n            for (const entityId of area.entities) {\n                if (entityId.startsWith('climate.') ||\n                    entityId.includes('temperature') ||\n                    entityId.includes('humidity')) {\n                    climateEntities.push(entityId);\n                }\n            }\n        }\n        if (climateEntities.length === 0) {\n            return null;\n        }\n        return {\n            type: 'climate',\n            entities: climateEntities,\n            title: 'Climate Control',\n        };\n    }\n    /**\n     * Create quick controls widget.\n     */\n    createQuickControlsWidget(areas) {\n        const quickEntities = [];\n        // Find most important entities (scenes, main lights, etc.)\n        for (const area of areas) {\n            for (const entityId of area.entities) {\n                if (entityId.startsWith('scene.') ||\n                    entityId.includes('main') ||\n                    entityId.includes('all')) {\n                    quickEntities.push(entityId);\n                }\n            }\n        }\n        // Limit to reasonable number\n        const limitedEntities = quickEntities.slice(0, 8);\n        if (limitedEntities.length === 0) {\n            return null;\n        }\n        return {\n            type: 'quick-controls',\n            entities: limitedEntities,\n            title: 'Quick Controls',\n        };\n    }\n    /**\n     * Get current layout.\n     */\n    getCurrentLayout() {\n        return this.currentLayout;\n    }\n    /**\n     * Calculate widget positions for current layout.\n     */\n    calculatePositions(widgets, areaCount) {\n        if (!this.currentLayout) {\n            layout_engine_logger.error('No layout selected');\n            return [];\n        }\n        return this.currentLayout.calculateWidgetPositions(widgets, areaCount);\n    }\n    /**\n     * Update container width and check for breakpoint changes.\n     */\n    updateContainerWidth(width) {\n        if (!this.currentLayout) {\n            return false;\n        }\n        return this.currentLayout.updateContainerWidth(width);\n    }\n}\n\n;// ./src/styles/theme.ts\n\nconst dashviewTheme = (0,lit/* css */.AH) `\n  :host {\n    --dashview-primary-color: var(--primary-color);\n    --dashview-primary-text-color: var(--primary-text-color);\n    --dashview-secondary-text-color: var(--secondary-text-color);\n    --dashview-disabled-text-color: var(--disabled-text-color);\n    --dashview-divider-color: var(--divider-color);\n    --dashview-error-color: var(--error-color);\n    --dashview-success-color: var(--success-color);\n    --dashview-warning-color: var(--warning-color);\n    --dashview-info-color: var(--info-color);\n    --dashview-background: var(--lovelace-background, var(--primary-background-color));\n    --dashview-card-background: var(--card-background-color);\n    --dashview-spacing-xs: 4px;\n    --dashview-spacing-sm: 8px;\n    --dashview-spacing-md: 16px;\n    --dashview-spacing-lg: 24px;\n    --dashview-spacing-xl: 32px;\n    --dashview-border-radius: var(--ha-card-border-radius, 12px);\n    --dashview-box-shadow: var(--ha-card-box-shadow, none);\n  }\n`;\nconst dashviewStyles = (0,lit/* css */.AH) `\n  * {\n    box-sizing: border-box;\n  }\n\n  .dashview-container {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    background: var(--dashview-background);\n  }\n\n  .dashview-header {\n    padding: var(--dashview-spacing-lg);\n    background: var(--dashview-card-background);\n    border-bottom: 1px solid var(--dashview-divider-color);\n    box-shadow: var(--dashview-box-shadow);\n  }\n\n  .dashview-content {\n    flex: 1;\n    padding: var(--dashview-spacing-lg);\n    overflow-y: auto;\n  }\n\n  .dashview-card {\n    background: var(--dashview-card-background);\n    border-radius: var(--dashview-border-radius);\n    padding: var(--dashview-spacing-lg);\n    margin-bottom: var(--dashview-spacing-md);\n    box-shadow: var(--dashview-box-shadow);\n  }\n\n  .dashview-loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    color: var(--dashview-secondary-text-color);\n  }\n\n  .dashview-error {\n    color: var(--dashview-error-color);\n    padding: var(--dashview-spacing-md);\n    text-align: center;\n  }\n\n  @media (max-width: 768px) {\n    .dashview-header {\n      padding: var(--dashview-spacing-md);\n    }\n\n    .dashview-content {\n      padding: var(--dashview-spacing-md);\n    }\n  }\n`;\n\n;// ./src/utils/gestures.ts\n/**\n * Touch gesture utilities for Dashview V2.\n * Provides swipe detection, long press handling, and haptic feedback.\n */\nconst DEFAULT_OPTIONS = {\n    swipeThreshold: 50,\n    longPressDelay: 500,\n    velocityThreshold: 0.3,\n    preventScroll: false\n};\nclass GestureHandler {\n    constructor(element, options = {}) {\n        this.startX = 0;\n        this.startY = 0;\n        this.startTime = 0;\n        this.isLongPress = false;\n        this.isSwiping = false;\n        this.element = element;\n        this.options = { ...DEFAULT_OPTIONS, ...options };\n        this.bindEvents();\n    }\n    onSwipeDetected(callback) {\n        this.onSwipe = callback;\n    }\n    onLongPressDetected(callback) {\n        this.onLongPress = callback;\n    }\n    onTapDetected(callback) {\n        this.onTap = callback;\n    }\n    bindEvents() {\n        this.element.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: !this.options.preventScroll });\n        this.element.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: !this.options.preventScroll });\n        this.element.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: true });\n        this.element.addEventListener('touchcancel', this.handleTouchCancel.bind(this), { passive: true });\n    }\n    handleTouchStart(event) {\n        const touch = event.touches[0];\n        this.startX = touch.clientX;\n        this.startY = touch.clientY;\n        this.startTime = Date.now();\n        this.isLongPress = false;\n        this.isSwiping = false;\n        // Start long press timer\n        if (this.onLongPress) {\n            this.longPressTimeout = window.setTimeout(() => {\n                this.isLongPress = true;\n                this.onLongPress({\n                    element: this.element,\n                    x: this.startX,\n                    y: this.startY\n                });\n                this.triggerHapticFeedback('medium');\n            }, this.options.longPressDelay);\n        }\n    }\n    handleTouchMove(event) {\n        if (this.isLongPress)\n            return;\n        const touch = event.touches[0];\n        const deltaX = Math.abs(touch.clientX - this.startX);\n        const deltaY = Math.abs(touch.clientY - this.startY);\n        // Cancel long press if moving too much\n        if ((deltaX > 10 || deltaY > 10) && this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        // Detect swipe start\n        if (!this.isSwiping && (deltaX > this.options.swipeThreshold || deltaY > this.options.swipeThreshold)) {\n            this.isSwiping = true;\n            if (this.options.preventScroll) {\n                event.preventDefault();\n            }\n        }\n    }\n    handleTouchEnd(event) {\n        const touch = event.changedTouches[0];\n        const endTime = Date.now();\n        const deltaX = touch.clientX - this.startX;\n        const deltaY = touch.clientY - this.startY;\n        const duration = endTime - this.startTime;\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        // Clear long press timer\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        if (this.isLongPress) {\n            // Long press already handled\n            return;\n        }\n        if (this.isSwiping && distance >= this.options.swipeThreshold) {\n            // Handle swipe\n            const velocity = distance / duration;\n            if (velocity >= this.options.velocityThreshold) {\n                const direction = this.getSwipeDirection(deltaX, deltaY);\n                if (this.onSwipe) {\n                    this.onSwipe({\n                        direction,\n                        distance,\n                        velocity,\n                        element: this.element\n                    });\n                }\n                this.triggerHapticFeedback('light');\n            }\n        }\n        else if (!this.isSwiping && duration < 200) {\n            // Handle tap\n            if (this.onTap) {\n                this.onTap(event);\n            }\n        }\n        this.reset();\n    }\n    handleTouchCancel() {\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        this.reset();\n    }\n    getSwipeDirection(deltaX, deltaY) {\n        const absDeltaX = Math.abs(deltaX);\n        const absDeltaY = Math.abs(deltaY);\n        if (absDeltaX > absDeltaY) {\n            return deltaX > 0 ? 'right' : 'left';\n        }\n        else {\n            return deltaY > 0 ? 'down' : 'up';\n        }\n    }\n    reset() {\n        this.isLongPress = false;\n        this.isSwiping = false;\n    }\n    triggerHapticFeedback(intensity) {\n        if ('vibrate' in navigator) {\n            const patterns = {\n                light: 10,\n                medium: 20,\n                heavy: 50\n            };\n            navigator.vibrate(patterns[intensity]);\n        }\n    }\n    destroy() {\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n        }\n        this.element.removeEventListener('touchstart', this.handleTouchStart.bind(this));\n        this.element.removeEventListener('touchmove', this.handleTouchMove.bind(this));\n        this.element.removeEventListener('touchend', this.handleTouchEnd.bind(this));\n        this.element.removeEventListener('touchcancel', this.handleTouchCancel.bind(this));\n    }\n}\n/**\n * Simple swipe detection for elements\n */\nfunction addSwipeListener(element, callback, options) {\n    const handler = new GestureHandler(element, options);\n    handler.onSwipeDetected(callback);\n    return () => handler.destroy();\n}\n/**\n * Simple long press detection for elements\n */\nfunction addLongPressListener(element, callback, options) {\n    const handler = new GestureHandler(element, options);\n    handler.onLongPressDetected(callback);\n    return () => handler.destroy();\n}\n/**\n * Haptic feedback utilities\n */\nclass HapticFeedback {\n    static isSupported() {\n        return 'vibrate' in navigator;\n    }\n    static light() {\n        if (this.isSupported()) {\n            navigator.vibrate(10);\n        }\n    }\n    static medium() {\n        if (this.isSupported()) {\n            navigator.vibrate(20);\n        }\n    }\n    static heavy() {\n        if (this.isSupported()) {\n            navigator.vibrate([50, 50, 50]);\n        }\n    }\n    static success() {\n        if (this.isSupported()) {\n            navigator.vibrate([10, 100, 10]);\n        }\n    }\n    static error() {\n        if (this.isSupported()) {\n            navigator.vibrate([100, 50, 100, 50, 100]);\n        }\n    }\n    static selection() {\n        if (this.isSupported()) {\n            navigator.vibrate(5);\n        }\n    }\n    static custom(pattern) {\n        if (this.isSupported()) {\n            navigator.vibrate(pattern);\n        }\n    }\n}\n/**\n * Touch target size helpers\n */\nconst TouchTarget = {\n    /**\n     * Minimum touch target size (44px) as per WCAG guidelines\n     */\n    MIN_SIZE: 44,\n    /**\n     * Check if an element meets minimum touch target requirements\n     */\n    meetsMinimumSize(element) {\n        const rect = element.getBoundingClientRect();\n        return rect.width >= this.MIN_SIZE && rect.height >= this.MIN_SIZE;\n    },\n    /**\n     * Add touch target padding to an element if needed\n     */\n    ensureMinimumSize(element) {\n        const rect = element.getBoundingClientRect();\n        if (rect.width < this.MIN_SIZE) {\n            const padding = (this.MIN_SIZE - rect.width) / 2;\n            element.style.paddingLeft = `${padding}px`;\n            element.style.paddingRight = `${padding}px`;\n        }\n        if (rect.height < this.MIN_SIZE) {\n            const padding = (this.MIN_SIZE - rect.height) / 2;\n            element.style.paddingTop = `${padding}px`;\n            element.style.paddingBottom = `${padding}px`;\n        }\n    }\n};\n/**\n * Gesture-enabled base class for Lit elements\n */\nclass GestureElement extends (/* unused pure expression or super */ null && (EventTarget)) {\n    enableGestures(element, options) {\n        this.gestureHandler = new GestureHandler(element, options);\n        this.gestureHandler.onSwipeDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-swipe', { detail: event }));\n        });\n        this.gestureHandler.onLongPressDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-longpress', { detail: event }));\n        });\n        this.gestureHandler.onTapDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-tap', { detail: event }));\n        });\n    }\n    disableGestures() {\n        if (this.gestureHandler) {\n            this.gestureHandler.destroy();\n            this.gestureHandler = undefined;\n        }\n    }\n}\n\n;// ./src/styles/animations.ts\n/**\n * Animation constants and utilities for Dashview V2 widgets.\n * Provides consistent timing, easing, and keyframe animations.\n */\n\nconst ANIMATION_DURATION = {\n    fast: '150ms',\n    normal: '250ms',\n    slow: '350ms'\n};\nconst EASING = {\n    standard: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\n    decelerate: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n    accelerate: 'cubic-bezier(0.4, 0.0, 1, 1)',\n    sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)'\n};\n/**\n * Skeleton loading animation styles\n */\nconst skeletonStyles = (0,lit/* css */.AH) `\n  @keyframes skeleton-loading {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n  }\n  \n  .skeleton {\n    background: linear-gradient(\n      90deg,\n      var(--card-background-color) 0%,\n      var(--divider-color) 50%,\n      var(--card-background-color) 100%\n    );\n    background-size: 200% 100%;\n    animation: skeleton-loading 1.5s ease-in-out infinite;\n    border-radius: 4px;\n  }\n  \n  .skeleton-text {\n    height: 16px;\n    margin: 4px 0;\n  }\n  \n  .skeleton-text.large {\n    height: 20px;\n  }\n  \n  .skeleton-text.small {\n    height: 12px;\n  }\n  \n  .skeleton-button {\n    height: 36px;\n    width: 100px;\n  }\n  \n  .skeleton-icon {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n  }\n  \n  .skeleton-card {\n    height: 120px;\n    width: 100%;\n    border-radius: 8px;\n  }\n`;\n/**\n * Smooth expand/collapse animation styles\n */\nconst expandCollapseStyles = (0,lit/* css */.AH) `\n  @keyframes expand {\n    from {\n      max-height: 0;\n      opacity: 0;\n    }\n    to {\n      max-height: 600px;\n      opacity: 1;\n    }\n  }\n  \n  @keyframes collapse {\n    from {\n      max-height: 600px;\n      opacity: 1;\n    }\n    to {\n      max-height: 0;\n      opacity: 0;\n    }\n  }\n  \n  .expand-enter {\n    animation: expand 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n    overflow: hidden;\n  }\n  \n  .collapse-exit {\n    animation: collapse 250ms cubic-bezier(0.4, 0.0, 1, 1);\n    overflow: hidden;\n  }\n  \n  .content-expandable {\n    overflow: hidden;\n    transition: max-height 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .content-collapsed {\n    max-height: 0;\n  }\n  \n  .content-expanded {\n    max-height: 600px;\n  }\n`;\n/**\n * Touch interaction animations\n */\nconst touchStyles = (0,lit/* css */.AH) `\n  @keyframes touch-feedback {\n    0% { transform: scale(1); }\n    50% { transform: scale(0.95); }\n    100% { transform: scale(1); }\n  }\n  \n  .touch-target {\n    min-height: 44px;\n    min-width: 44px;\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n    transition: transform 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n  \n  .touch-target:active {\n    animation: touch-feedback 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n  \n  .touch-target:hover {\n    background: var(--secondary-background-color);\n  }\n  \n  @media (prefers-reduced-motion: reduce) {\n    .touch-target:active {\n      animation: none;\n      transform: scale(0.98);\n    }\n  }\n`;\n/**\n * Loading spinner animation\n */\nconst spinnerStyles = (0,lit/* css */.AH) `\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n  \n  .spinner {\n    animation: spin 1s linear infinite;\n  }\n  \n  .loading-dots {\n    display: inline-flex;\n    gap: 4px;\n  }\n  \n  .loading-dots::after {\n    content: '';\n    animation: loading-dots 1.5s ease-in-out infinite;\n  }\n  \n  @keyframes loading-dots {\n    0%, 20% { content: ''; }\n    40% { content: '.'; }\n    60% { content: '..'; }\n    80%, 100% { content: '...'; }\n  }\n`;\n/**\n * Fade in/out animations\n */\nconst fadeStyles = (0,lit/* css */.AH) `\n  @keyframes fade-in {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  @keyframes fade-out {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  \n  .fade-in {\n    animation: fade-in 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .fade-out {\n    animation: fade-out 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n  \n  .fade-transition {\n    transition: opacity 250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n`;\n/**\n * Slide animations for mobile interactions\n */\nconst slideStyles = (0,lit/* css */.AH) `\n  @keyframes slide-in-right {\n    from { transform: translateX(100%); }\n    to { transform: translateX(0); }\n  }\n  \n  @keyframes slide-in-left {\n    from { transform: translateX(-100%); }\n    to { transform: translateX(0); }\n  }\n  \n  @keyframes slide-out-right {\n    from { transform: translateX(0); }\n    to { transform: translateX(100%); }\n  }\n  \n  @keyframes slide-out-left {\n    from { transform: translateX(0); }\n    to { transform: translateX(-100%); }\n  }\n  \n  .slide-in-right {\n    animation: slide-in-right 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .slide-in-left {\n    animation: slide-in-left 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .slide-out-right {\n    animation: slide-out-right 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n  \n  .slide-out-left {\n    animation: slide-out-left 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n`;\n/**\n * Combined animation styles for easy import\n */\nconst animationStyles = (0,lit/* css */.AH) `\n  ${skeletonStyles}\n  ${expandCollapseStyles}\n  ${touchStyles}\n  ${spinnerStyles}\n  ${fadeStyles}\n  ${slideStyles}\n  \n  /* Respect user's motion preferences */\n  @media (prefers-reduced-motion: reduce) {\n    * {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n    }\n  }\n`;\n\n;// ./src/core/widget-base.ts\n/**\n * Base class for all Dashview widgets.\n * Provides lifecycle management, state handling, and visibility tracking.\n */\nvar _a;\n\n\n\n\n\n\nclass DashviewWidget extends DashviewBaseElement {\n    constructor() {\n        super(...arguments);\n        this.entityStates = new Map();\n        this.isVisible = false;\n        this.isLoading = true;\n        this.error = null;\n        this.stateUnsubscribers = [];\n        this.keyboardHandlers = new Map();\n    }\n    /**\n     * Get the list of entity IDs this widget wants to subscribe to.\n     * Can be overridden by subclasses for dynamic subscriptions.\n     */\n    subscribedEntities() {\n        return this.widgetConfig?.entities || [];\n    }\n    /**\n     * Called when widget configuration is set.\n     * Subclasses should override to validate their specific config.\n     */\n    setConfig(config) {\n        if (!config) {\n            throw new Error('Invalid configuration');\n        }\n        const errors = this.validateConfig(config);\n        if (errors.length > 0) {\n            throw new Error(`Configuration errors: ${errors.join(', ')}`);\n        }\n        this.widgetConfig = config;\n    }\n    /**\n     * Validate widget configuration.\n     * Returns array of error messages, empty if valid.\n     */\n    validateConfig(config) {\n        const errors = [];\n        if (!config.type) {\n            errors.push('Widget type is required');\n        }\n        if (!config.entities || !Array.isArray(config.entities)) {\n            errors.push('Entities must be an array');\n        }\n        return errors;\n    }\n    /**\n     * Called when entity state changes.\n     * Subclasses can override to handle state changes.\n     */\n    onStateChanged(entityId, newState, oldState) {\n        // Default implementation updates the local state map\n        if (newState) {\n            this.entityStates.set(entityId, newState);\n        }\n        else {\n            this.entityStates.delete(entityId);\n        }\n    }\n    /**\n     * Lifecycle: Called when element is added to DOM.\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setupVisibilityObserver();\n        this.setupKeyboardHandlers();\n    }\n    /**\n     * Lifecycle: Called after first update.\n     */\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.initializeWidget();\n    }\n    /**\n     * Lifecycle: Called when element is removed from DOM.\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.cleanup();\n    }\n    /**\n     * Initialize the widget.\n     */\n    async initializeWidget() {\n        try {\n            this.isLoading = true;\n            this.error = null;\n            // Get managers from dashboard context\n            this.stateManager = this.getStateManager();\n            this.subscriptionManager = this.getSubscriptionManager();\n            if (!this.stateManager || !this.subscriptionManager) {\n                throw new Error('State or subscription manager not available');\n            }\n            // Load initial entity states\n            await this.loadInitialStates();\n            // Subscribe to state changes\n            this.subscribeToStateChanges();\n            this.isLoading = false;\n        }\n        catch (error) {\n            this.error = error instanceof Error ? error.message : 'Unknown error';\n            this.isLoading = false;\n            this.handleError(error, 'Widget initialization');\n        }\n    }\n    /**\n     * Get state manager from dashboard context.\n     * This should be provided by the parent dashboard.\n     */\n    getStateManager() {\n        // Try to get from parent dashboard element\n        const dashboard = this.closest('dashview-dashboard');\n        return dashboard?.stateManager;\n    }\n    /**\n     * Get subscription manager from dashboard context.\n     */\n    getSubscriptionManager() {\n        const dashboard = this.closest('dashview-dashboard');\n        return dashboard?.subscriptionManager;\n    }\n    /**\n     * Load initial states for all entities.\n     */\n    async loadInitialStates() {\n        const entities = this.subscribedEntities();\n        for (const entityId of entities) {\n            const state = this.hass.states[entityId];\n            if (state) {\n                this.entityStates.set(entityId, state);\n            }\n        }\n    }\n    /**\n     * Subscribe to state changes for our entities.\n     */\n    subscribeToStateChanges() {\n        if (!this.stateManager)\n            return;\n        const entities = this.subscribedEntities();\n        for (const entityId of entities) {\n            const unsubscribe = this.stateManager.subscribeToEntity(entityId, (diff) => {\n                this.onStateChanged(diff.entityId, diff.newState, diff.oldState);\n            });\n            this.stateUnsubscribers.push(unsubscribe);\n        }\n    }\n    /**\n     * Setup intersection observer for visibility tracking.\n     */\n    setupVisibilityObserver() {\n        this.intersectionObserver = new IntersectionObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === this) {\n                    this.handleVisibilityChange(entry.isIntersecting);\n                }\n            }\n        }, {\n            root: null,\n            rootMargin: '50px', // Start loading slightly before visible\n            threshold: 0.01,\n        });\n        this.intersectionObserver.observe(this);\n    }\n    /**\n     * Handle visibility changes.\n     */\n    handleVisibilityChange(isVisible) {\n        if (this.isVisible === isVisible)\n            return;\n        this.isVisible = isVisible;\n        if (isVisible) {\n            this.onBecameVisible();\n        }\n        else {\n            this.onBecameHidden();\n        }\n        // Update subscriptions based on visibility\n        this.updateSubscriptions();\n    }\n    /**\n     * Called when widget becomes visible.\n     * Subclasses can override for custom behavior.\n     */\n    onBecameVisible() {\n        // Default: no action\n    }\n    /**\n     * Called when widget becomes hidden.\n     * Subclasses can override for custom behavior.\n     */\n    onBecameHidden() {\n        // Default: no action\n    }\n    /**\n     * Update subscriptions based on current visibility.\n     */\n    updateSubscriptions() {\n        if (!this.subscriptionManager)\n            return;\n        const entities = this.subscribedEntities();\n        if (this.isVisible) {\n            // Widget is visible, ensure we're subscribed\n            const visibleEntities = this.subscriptionManager.getVisibleEntities();\n            const allVisible = new Set([...visibleEntities, ...entities]);\n            this.subscriptionManager.updateVisibleEntities(Array.from(allVisible));\n        }\n        else {\n            // Widget is hidden, we could unsubscribe\n            // But this is handled globally by the dashboard\n        }\n    }\n    /**\n     * Clean up resources.\n     */\n    cleanup() {\n        // Unsubscribe from state changes\n        for (const unsubscribe of this.stateUnsubscribers) {\n            unsubscribe();\n        }\n        this.stateUnsubscribers = [];\n        // Clean up intersection observer\n        if (this.intersectionObserver) {\n            this.intersectionObserver.disconnect();\n            this.intersectionObserver = undefined;\n        }\n        // Clean up keyboard handlers\n        this.removeKeyboardHandlers();\n        // Cancel any pending animation frames\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n        // Clear state\n        this.entityStates.clear();\n    }\n    /**\n     * Helper to call Home Assistant service.\n     */\n    async callService(domain, service, data) {\n        try {\n            await this.hass.callService(domain, service, data);\n        }\n        catch (error) {\n            this.handleError(error, `Service call ${domain}.${service}`);\n            throw error;\n        }\n    }\n    /**\n     * Helper to toggle an entity.\n     */\n    async toggleEntity(entityId) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'toggle', { entity_id: entityId });\n    }\n    /**\n     * Helper to turn on an entity.\n     */\n    async turnOn(entityId, data) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'turn_on', { entity_id: entityId, ...data });\n    }\n    /**\n     * Helper to turn off an entity.\n     */\n    async turnOff(entityId) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'turn_off', { entity_id: entityId });\n    }\n    /**\n     * Trigger haptic feedback with the specified intensity.\n     */\n    triggerHapticFeedback(intensity) {\n        HapticFeedback[intensity]();\n    }\n    /**\n     * Animate an element with the specified animation.\n     */\n    animateElement(element, animation, duration) {\n        return new Promise((resolve) => {\n            const animationDuration = duration || ANIMATION_DURATION.normal;\n            element.style.animation = `${animation} ${animationDuration} ${EASING.standard}`;\n            const handleAnimationEnd = () => {\n                element.style.animation = '';\n                element.removeEventListener('animationend', handleAnimationEnd);\n                resolve();\n            };\n            element.addEventListener('animationend', handleAnimationEnd);\n        });\n    }\n    /**\n     * Focus management helper.\n     */\n    focusElement(element, options) {\n        element.focus(options);\n    }\n    /**\n     * Set up keyboard event handlers for accessibility.\n     */\n    setupKeyboardHandlers() {\n        // Default keyboard handlers\n        this.addKeyboardHandler('Escape', this.handleEscapeKey.bind(this));\n        this.addKeyboardHandler('Tab', this.handleTabKey.bind(this));\n        this.addEventListener('keydown', this.handleKeydown.bind(this));\n    }\n    /**\n     * Remove keyboard event handlers.\n     */\n    removeKeyboardHandlers() {\n        this.keyboardHandlers.clear();\n        this.removeEventListener('keydown', this.handleKeydown.bind(this));\n    }\n    /**\n     * Add a keyboard event handler.\n     */\n    addKeyboardHandler(key, handler) {\n        this.keyboardHandlers.set(key, handler);\n    }\n    /**\n     * Handle keyboard events.\n     */\n    handleKeydown(event) {\n        const handler = this.keyboardHandlers.get(event.key);\n        if (handler) {\n            handler(event);\n        }\n    }\n    /**\n     * Handle Escape key (default: blur active element).\n     */\n    handleEscapeKey(_event) {\n        const activeElement = this.shadowRoot?.activeElement;\n        if (activeElement) {\n            activeElement.blur();\n        }\n    }\n    /**\n     * Handle Tab key for focus management.\n     */\n    handleTabKey(_event) {\n        // Default behavior - could be overridden by subclasses\n    }\n    /**\n     * Get all focusable elements within the widget.\n     */\n    getFocusableElements() {\n        const focusableSelectors = [\n            'button:not([disabled])',\n            'input:not([disabled])',\n            'select:not([disabled])',\n            'textarea:not([disabled])',\n            'a[href]',\n            '[tabindex]:not([tabindex=\"-1\"])',\n            'ha-icon-button:not([disabled])',\n            'mwc-button:not([disabled])',\n            'ha-switch:not([disabled])'\n        ].join(', ');\n        const elements = this.shadowRoot?.querySelectorAll(focusableSelectors) || [];\n        return Array.from(elements);\n    }\n}\n/**\n * Base styles for all widgets.\n */\nDashviewWidget.styles = (0,lit/* css */.AH) `\n    :host {\n      display: block;\n      position: relative;\n    }\n\n    .widget-container {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .widget-loading {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--primary-text-color);\n    }\n\n    .widget-error {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--error-color, #f44336);\n      padding: 16px;\n      text-align: center;\n    }\n  `;\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: Object }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewWidget.prototype, \"widgetConfig\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", typeof (_a = typeof Map !== \"undefined\" && Map) === \"function\" ? _a : Object)\n], DashviewWidget.prototype, \"entityStates\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewWidget.prototype, \"isVisible\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewWidget.prototype, \"isLoading\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewWidget.prototype, \"error\", void 0);\n\n;// ./src/utils/icons.ts\n/**\n * Entity type to icon mapping utility.\n * Maps entity types and domains to Material Design Icons.\n */\nconst ENTITY_ICONS = {\n    // Lights\n    'light': 'mdi:lightbulb',\n    'light.ceiling': 'mdi:ceiling-light',\n    'light.floor': 'mdi:floor-lamp',\n    'light.desk': 'mdi:desk-lamp',\n    'light.strip': 'mdi:led-strip-variant',\n    'light.spot': 'mdi:spotlight-beam',\n    // Climate\n    'climate': 'mdi:thermostat',\n    'temperature': 'mdi:thermometer',\n    'humidity': 'mdi:water-percent',\n    'air_quality': 'mdi:air-filter',\n    // Security\n    'lock': 'mdi:lock',\n    'door': 'mdi:door',\n    'window': 'mdi:window-closed',\n    'motion': 'mdi:motion-sensor',\n    'presence': 'mdi:home-account',\n    'camera': 'mdi:cctv',\n    'alarm': 'mdi:shield-home',\n    // Media\n    'media_player': 'mdi:television',\n    'speaker': 'mdi:speaker',\n    'remote': 'mdi:remote',\n    // Switches & Controls\n    'switch': 'mdi:light-switch',\n    'fan': 'mdi:fan',\n    'cover': 'mdi:window-shutter',\n    'blind': 'mdi:blinds',\n    'curtain': 'mdi:curtains',\n    // Sensors\n    'sensor': 'mdi:eye',\n    'binary_sensor': 'mdi:radiobox-marked',\n    'battery': 'mdi:battery',\n    'power': 'mdi:flash',\n    'energy': 'mdi:lightning-bolt',\n    // Other devices\n    'vacuum': 'mdi:robot-vacuum',\n    'person': 'mdi:account',\n    'device_tracker': 'mdi:cellphone',\n    'sun': 'mdi:weather-sunny',\n    'weather': 'mdi:weather-partly-cloudy',\n    // Default\n    'default': 'mdi:home-assistant'\n};\nfunction getEntityIcon(entityId, state) {\n    // Check custom icon first\n    if (state?.attributes?.icon) {\n        return state.attributes.icon;\n    }\n    // Check device class for more specific icons\n    const deviceClass = state?.attributes?.device_class;\n    if (deviceClass && ENTITY_ICONS[deviceClass]) {\n        return ENTITY_ICONS[deviceClass];\n    }\n    // Match by entity ID patterns\n    for (const [pattern, icon] of Object.entries(ENTITY_ICONS)) {\n        if (entityId.includes(pattern)) {\n            return icon;\n        }\n    }\n    // Domain fallback\n    const domain = entityId.split('.')[0];\n    return ENTITY_ICONS[domain] || ENTITY_ICONS.default;\n}\n/**\n * Get icon color based on entity state and domain.\n */\nfunction getEntityIconColor(entityId, state) {\n    const domain = entityId.split('.')[0];\n    const isOn = state?.state === 'on';\n    const isActive = ['playing', 'open', 'unlocked', 'home', 'detected'].includes(state?.state);\n    const isUnavailable = state?.state === 'unavailable';\n    if (isUnavailable) {\n        return 'var(--disabled-text-color)';\n    }\n    // Domain-specific colors when active\n    if (isOn || isActive) {\n        switch (domain) {\n            case 'light':\n                return state?.attributes?.rgb_color\n                    ? `rgb(${state.attributes.rgb_color.join(',')})`\n                    : 'var(--primary-color)';\n            case 'climate':\n                const mode = state?.state;\n                if (mode === 'heat')\n                    return '#ff6b00';\n                if (mode === 'cool')\n                    return '#0288d1';\n                if (mode === 'heat_cool' || mode === 'auto')\n                    return '#388e3c';\n                return 'var(--primary-color)';\n            case 'lock':\n                return state?.state === 'locked' ? '#4caf50' : '#f44336';\n            case 'alarm_control_panel':\n                if (state?.state === 'armed_away')\n                    return '#f44336';\n                if (state?.state === 'armed_home')\n                    return '#ff9800';\n                if (state?.state === 'disarmed')\n                    return '#4caf50';\n                return 'var(--primary-color)';\n            default:\n                return 'var(--primary-color)';\n        }\n    }\n    return 'var(--secondary-text-color)';\n}\n/**\n * Get a mini icon for entity summaries.\n */\nfunction getMiniIcon(entityType) {\n    const miniIcons = {\n        'lights': 'mdi:lightbulb',\n        'temperature': 'mdi:thermometer',\n        'humidity': 'mdi:water-percent',\n        'motion': 'mdi:motion-sensor',\n        'doors': 'mdi:door',\n        'windows': 'mdi:window-closed',\n        'media': 'mdi:television',\n        'climate': 'mdi:thermostat'\n    };\n    return miniIcons[entityType] || 'mdi:circle';\n}\n\n;// ./src/widgets/room-widget.ts\n/**\n * Room widget for Dashview V2.\n * Displays all entities in a room with summary and controls.\n */\nvar room_widget_a, _b;\n\n\n\n\n\n\nlet RoomWidget = class RoomWidget extends DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.expanded = false;\n        this.lightCount = 0;\n        this.lightsOn = 0;\n        this.groupedEntities = {};\n    }\n    subscribedEntities() {\n        // Subscribe to all entities when expanded, or just key entities when collapsed\n        if (this.expanded || this.entityStates.size < 10) {\n            return this.widgetConfig?.entities || [];\n        }\n        // When collapsed with many entities, only subscribe to key entities\n        const entities = this.widgetConfig?.entities || [];\n        return entities.filter(id => id.includes('motion') ||\n            id.includes('door') ||\n            id.includes('presence') ||\n            id.includes('temperature') ||\n            id.includes('humidity') ||\n            id.startsWith('light.'));\n    }\n    getDefaultConfig() {\n        return {\n            type: 'room',\n            entities: [],\n            showEmpty: false,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateSummary();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateSummary();\n    }\n    updateSummary() {\n        let lightCount = 0;\n        let lightsOn = 0;\n        let temperature;\n        let humidity;\n        let lastMotion;\n        // Group entities by type for better organization\n        this.groupedEntities = this.groupEntitiesByType();\n        for (const [entityId, state] of this.entityStates) {\n            if (entityId.startsWith('light.')) {\n                lightCount++;\n                if (state.state === 'on') {\n                    lightsOn++;\n                }\n            }\n            else if (entityId.includes('temperature') && state.state !== 'unavailable') {\n                const temp = parseFloat(state.state);\n                if (!isNaN(temp)) {\n                    temperature = temp;\n                }\n            }\n            else if (entityId.includes('humidity') && state.state !== 'unavailable') {\n                const hum = parseFloat(state.state);\n                if (!isNaN(hum)) {\n                    humidity = hum;\n                }\n            }\n            else if (entityId.includes('motion') || entityId.includes('presence')) {\n                if (state.state === 'on' && state.last_changed) {\n                    const motionTime = new Date(state.last_changed);\n                    if (!lastMotion || motionTime > lastMotion) {\n                        lastMotion = motionTime;\n                    }\n                }\n            }\n        }\n        this.lightCount = lightCount;\n        this.lightsOn = lightsOn;\n        this.temperature = temperature;\n        this.humidity = humidity;\n        this.lastMotion = lastMotion;\n    }\n    render() {\n        const roomName = this.areaName || this.widgetConfig?.title || 'Unknown Room';\n        if (this.isLoading) {\n            return this.renderSkeleton();\n        }\n        if (this.error) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-error\">\n          ${this.error}\n        </div>\n      `;\n        }\n        return (0,lit/* html */.qy) `\n      <ha-card role=\"region\" aria-label=\"${roomName} room controls\">\n        <div class=\"header touch-target\" @click=${this.toggleExpanded} @keydown=${this.handleHeaderKeydown}>\n          <h2>${roomName}</h2>\n          <div class=\"summary\">\n            ${this.renderSummary()}\n          </div>\n          <ha-icon\n            class=\"expand-icon ${this.expanded ? 'expanded' : ''}\"\n            icon=\"mdi:chevron-down\"\n            aria-label=\"${this.expanded ? 'Collapse' : 'Expand'} room details\"\n          ></ha-icon>\n        </div>\n        \n        <div class=\"content ${this.expanded ? 'expanded' : 'collapsed'}\">\n          ${this.renderExpanded()}\n        </div>\n        \n        <div class=\"actions\">\n          ${this.lightCount > 0 ? (0,lit/* html */.qy) `\n            <mwc-button @click=${this.turnAllLightsOff} aria-label=\"Turn all lights off\">\n              <ha-icon icon=\"mdi:lightbulb-off\"></ha-icon>\n              All Off\n            </mwc-button>\n          ` : ''}\n        </div>\n      </ha-card>\n    `;\n    }\n    renderSummary() {\n        const summary = [];\n        // Light status\n        if (this.lightCount > 0) {\n            summary.push((0,lit/* html */.qy) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:lightbulb\"></ha-icon>\n          ${this.lightsOn}/${this.lightCount}\n        </span>\n      `);\n        }\n        // Temperature\n        if (this.temperature !== undefined) {\n            summary.push((0,lit/* html */.qy) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:thermometer\"></ha-icon>\n          ${this.temperature.toFixed(1)}°\n        </span>\n      `);\n        }\n        // Humidity\n        if (this.humidity !== undefined) {\n            summary.push((0,lit/* html */.qy) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:water-percent\"></ha-icon>\n          ${this.humidity.toFixed(0)}%\n        </span>\n      `);\n        }\n        // Last motion\n        if (this.lastMotion) {\n            const minutesAgo = Math.floor((Date.now() - this.lastMotion.getTime()) / 60000);\n            const timeStr = minutesAgo < 1 ? 'now' :\n                minutesAgo < 60 ? `${minutesAgo}m ago` :\n                    `${Math.floor(minutesAgo / 60)}h ago`;\n            summary.push((0,lit/* html */.qy) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:motion-sensor\"></ha-icon>\n          ${timeStr}\n        </span>\n      `);\n        }\n        return summary;\n    }\n    renderExpanded() {\n        return (0,lit/* html */.qy) `\n      <div class=\"entity-list\">\n        ${Object.entries(this.groupedEntities).map(([type, entities]) => this.renderEntityGroup(type, entities))}\n      </div>\n    `;\n    }\n    renderEntity(entityId) {\n        const state = this.entityStates.get(entityId);\n        if (!state)\n            return (0,lit/* html */.qy) ``;\n        const name = state.attributes.friendly_name || entityId;\n        const domain = entityId.split('.')[0];\n        const isToggleable = ['light', 'switch', 'fan', 'input_boolean'].includes(domain);\n        const icon = getEntityIcon(entityId, state);\n        const iconColor = getEntityIconColor(entityId, state);\n        return (0,lit/* html */.qy) `\n      <div class=\"entity-item touch-target\" @click=${isToggleable ? () => this.toggleEntity(entityId) : undefined}>\n        <ha-icon \n          class=\"entity-icon ${state.state} ${state.state === 'unavailable' ? 'unavailable' : ''}\"\n          icon=\"${icon}\"\n          style=\"color: ${iconColor}\"\n        ></ha-icon>\n        <span class=\"entity-name\">${name}</span>\n        <div class=\"entity-controls\">\n          ${isToggleable ? (0,lit/* html */.qy) `\n            <ha-switch\n              .checked=${state.state === 'on'}\n              @change=${(e) => {\n            e.stopPropagation();\n            this.toggleEntity(entityId);\n        }}\n              aria-label=\"Toggle ${name}\"\n            ></ha-switch>\n          ` : (0,lit/* html */.qy) `\n            <span class=\"entity-state\">${state.state}</span>\n          `}\n        </div>\n      </div>\n    `;\n    }\n    getSortedEntities() {\n        const entities = Array.from(this.entityStates.keys());\n        // Sort by domain priority, then by name\n        const domainPriority = {\n            'light': 1,\n            'switch': 2,\n            'fan': 3,\n            'climate': 4,\n            'cover': 5,\n            'sensor': 6,\n            'binary_sensor': 7,\n        };\n        return entities.sort((a, b) => {\n            const domainA = a.split('.')[0];\n            const domainB = b.split('.')[0];\n            const priorityA = domainPriority[domainA] || 999;\n            const priorityB = domainPriority[domainB] || 999;\n            if (priorityA !== priorityB) {\n                return priorityA - priorityB;\n            }\n            return a.localeCompare(b);\n        });\n    }\n    toggleExpanded() {\n        this.expanded = !this.expanded;\n        // Update subscriptions when expanding/collapsing\n        if (this.expanded) {\n            this.updateSubscriptions();\n        }\n    }\n    handleHeaderKeydown(event) {\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            this.toggleExpanded();\n        }\n    }\n    groupEntitiesByType() {\n        const groups = {};\n        for (const entityId of this.entityStates.keys()) {\n            const domain = entityId.split('.')[0];\n            // Group by domain with friendly names\n            const groupName = this.getDomainGroupName(domain);\n            if (!groups[groupName]) {\n                groups[groupName] = [];\n            }\n            groups[groupName].push(entityId);\n        }\n        // Sort entities within each group\n        for (const [groupName, entities] of Object.entries(groups)) {\n            groups[groupName] = entities.sort((a, b) => {\n                const stateA = this.entityStates.get(a);\n                const stateB = this.entityStates.get(b);\n                const nameA = stateA?.attributes?.friendly_name || a;\n                const nameB = stateB?.attributes?.friendly_name || b;\n                return nameA.localeCompare(nameB);\n            });\n        }\n        return groups;\n    }\n    getDomainGroupName(domain) {\n        const domainNames = {\n            'light': 'Lights',\n            'switch': 'Switches',\n            'fan': 'Fans',\n            'climate': 'Climate',\n            'cover': 'Covers',\n            'lock': 'Locks',\n            'sensor': 'Sensors',\n            'binary_sensor': 'Binary Sensors',\n            'media_player': 'Media',\n            'camera': 'Cameras',\n            'alarm_control_panel': 'Security'\n        };\n        return domainNames[domain] || domain.charAt(0).toUpperCase() + domain.slice(1);\n    }\n    renderEntityGroup(type, entities) {\n        if (entities.length === 0)\n            return (0,lit/* html */.qy) ``;\n        const typeIcons = {\n            'Lights': 'mdi:lightbulb',\n            'Switches': 'mdi:light-switch',\n            'Sensors': 'mdi:eye',\n            'Climate': 'mdi:thermostat',\n            'Media': 'mdi:television',\n            'Covers': 'mdi:window-shutter',\n            'Locks': 'mdi:lock',\n            'Fans': 'mdi:fan',\n            'Cameras': 'mdi:cctv',\n            'Security': 'mdi:shield-home'\n        };\n        return (0,lit/* html */.qy) `\n      <div class=\"entity-group\">\n        <div class=\"entity-group-header\">\n          <ha-icon icon=${typeIcons[type] || 'mdi:home'}></ha-icon>\n          <span>${type}</span>\n          <span class=\"count\">(${entities.length})</span>\n        </div>\n        ${entities.map(entity => this.renderEntity(entity))}\n      </div>\n    `;\n    }\n    renderSkeleton() {\n        return (0,lit/* html */.qy) `\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"skeleton skeleton-text large\" style=\"width: 120px;\"></div>\n          <div class=\"summary\">\n            <div class=\"skeleton skeleton-text\" style=\"width: 40px;\"></div>\n            <div class=\"skeleton skeleton-text\" style=\"width: 50px;\"></div>\n            <div class=\"skeleton skeleton-text\" style=\"width: 45px;\"></div>\n          </div>\n          <div class=\"skeleton skeleton-icon\"></div>\n        </div>\n      </ha-card>\n    `;\n    }\n    async turnAllLightsOff() {\n        const lights = Array.from(this.entityStates.keys()).filter(id => id.startsWith('light.') && this.entityStates.get(id)?.state === 'on');\n        for (const light of lights) {\n            await this.turnOff(light);\n        }\n    }\n};\nRoomWidget.styles = (0,lit/* css */.AH) `\n    ${DashviewWidget.styles}\n    ${skeletonStyles}\n    ${touchStyles}\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        border-radius: 8px;\n        -webkit-tap-highlight-color: transparent;\n        transition: background 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n      }\n\n      .header:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .header:focus {\n        outline: 2px solid var(--primary-color);\n        outline-offset: 2px;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n        flex: 1;\n      }\n\n      .summary {\n        display: flex;\n        gap: 16px;\n        align-items: center;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .summary-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n\n      .summary-item ha-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      .expand-icon {\n        transition: transform 250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        --mdc-icon-size: 24px;\n      }\n\n      .expand-icon.expanded {\n        transform: rotate(180deg);\n      }\n\n      /* Enhanced content with smooth animations */\n      .content {\n        overflow: hidden;\n        transition: max-height 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n      }\n\n      .content.collapsed {\n        max-height: 0;\n      }\n\n      .content.expanded {\n        max-height: 600px;\n      }\n\n      .entity-list {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n        max-height: 400px;\n        overflow-y: auto;\n        scrollbar-width: thin;\n        padding: 0 16px 16px;\n      }\n\n      .entity-group {\n        margin-bottom: 16px;\n      }\n\n      .entity-group:last-child {\n        margin-bottom: 0;\n      }\n\n      .entity-group-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 0;\n        font-weight: 500;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        border-bottom: 1px solid var(--divider-color);\n        margin-bottom: 8px;\n      }\n\n      .entity-group-header ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .count {\n        opacity: 0.7;\n        font-size: 0.85em;\n      }\n\n      .entity-item {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px;\n        border-radius: 8px;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        min-height: 44px;\n        cursor: pointer;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      .entity-item:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .entity-item:active {\n        transform: scale(0.98);\n      }\n\n      .entity-icon {\n        --mdc-icon-size: 24px;\n        transition: color 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        flex-shrink: 0;\n      }\n\n      .entity-icon.unavailable {\n        color: var(--disabled-text-color);\n      }\n\n      .entity-name {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 0.95em;\n      }\n\n      .entity-controls {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n      }\n\n      .entity-state {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        text-align: right;\n        min-width: 60px;\n      }\n\n      .actions {\n        padding: 8px 16px;\n        border-top: 1px solid var(--divider-color);\n        display: flex;\n        justify-content: flex-end;\n        gap: 8px;\n      }\n\n      .actions:empty {\n        display: none;\n      }\n\n      mwc-button {\n        --mdc-theme-primary: var(--primary-color);\n        min-height: 44px;\n      }\n\n      mwc-button ha-icon {\n        margin-right: 4px;\n      }\n\n      /* Mobile optimizations */\n      @media (max-width: 768px) {\n        .header {\n          padding: 12px;\n        }\n\n        .summary {\n          gap: 12px;\n          font-size: 0.85em;\n        }\n\n        .entity-item {\n          padding: 10px 12px;\n        }\n\n        .entity-name {\n          font-size: 0.9em;\n        }\n      }\n\n      /* Accessibility enhancements */\n      @media (prefers-reduced-motion: reduce) {\n        .header,\n        .expand-icon,\n        .entity-item,\n        .entity-icon,\n        .content {\n          transition: none;\n        }\n\n        .entity-item:active {\n          transform: none;\n        }\n      }\n\n      /* Focus indicators */\n      .entity-item:focus,\n      ha-switch:focus {\n        outline: 2px solid var(--primary-color);\n        outline-offset: 2px;\n      }\n    `;\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: String }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], RoomWidget.prototype, \"areaId\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: String }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], RoomWidget.prototype, \"areaName\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], RoomWidget.prototype, \"expanded\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], RoomWidget.prototype, \"lightCount\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], RoomWidget.prototype, \"lightsOn\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], RoomWidget.prototype, \"temperature\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], RoomWidget.prototype, \"humidity\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", typeof (room_widget_a = typeof Date !== \"undefined\" && Date) === \"function\" ? room_widget_a : Object)\n], RoomWidget.prototype, \"lastMotion\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", typeof (_b = typeof Record !== \"undefined\" && Record) === \"function\" ? _b : Object)\n], RoomWidget.prototype, \"groupedEntities\", void 0);\nRoomWidget = (0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* customElement */.EM)('dashview-room-widget')\n], RoomWidget);\n\n\n;// ./src/widgets/device-group-widget.ts\n/**\n * Device group widget for Dashview V2.\n * Groups and displays devices by type (switches, sensors, etc).\n */\n\n\n\n\nlet DeviceGroupWidget = class DeviceGroupWidget extends DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.deviceType = 'switch';\n        this.expanded = false;\n        this.groupedEntities = [];\n        this.onlineCount = 0;\n        this.activeCount = 0;\n    }\n    subscribedEntities() {\n        // Subscribe to all entities when expanded, or just active ones when collapsed\n        const entities = this.widgetConfig?.entities || [];\n        if (this.expanded) {\n            return entities;\n        }\n        // When collapsed, only subscribe to active entities\n        return entities.filter(id => {\n            const state = this.entityStates.get(id);\n            return state && state.state !== 'unavailable' && state.state !== 'unknown';\n        });\n    }\n    getDefaultConfig() {\n        return {\n            type: 'device-group',\n            deviceType: 'switch',\n            entities: [],\n            showOffline: false,\n            showGroupControls: true,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateGroupedEntities();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateGroupedEntities();\n    }\n    updateGroupedEntities() {\n        const grouped = [];\n        let onlineCount = 0;\n        let activeCount = 0;\n        for (const [entityId, state] of this.entityStates) {\n            const isOnline = state.state !== 'unavailable' && state.state !== 'unknown';\n            const isToggleable = this.isToggleableEntity(entityId);\n            const isActive = isToggleable ? state.state === 'on' : isOnline;\n            if (isOnline)\n                onlineCount++;\n            if (isActive)\n                activeCount++;\n            grouped.push({\n                entityId,\n                name: state.attributes.friendly_name || entityId.split('.')[1].replace(/_/g, ' '),\n                state: state.state,\n                icon: state.attributes.icon || this.getDefaultIcon(entityId),\n                lastChanged: state.last_changed ? new Date(state.last_changed) : undefined,\n                isToggleable,\n                isOnline,\n            });\n        }\n        // Sort by online status, then by state, then by name\n        grouped.sort((a, b) => {\n            if (a.isOnline !== b.isOnline)\n                return b.isOnline ? 1 : -1;\n            if (a.state !== b.state) {\n                if (a.state === 'on')\n                    return -1;\n                if (b.state === 'on')\n                    return 1;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        this.groupedEntities = grouped;\n        this.onlineCount = onlineCount;\n        this.activeCount = activeCount;\n    }\n    isToggleableEntity(entityId) {\n        const domain = entityId.split('.')[0];\n        return ['switch', 'light', 'fan', 'input_boolean', 'cover'].includes(domain);\n    }\n    getDefaultIcon(entityId) {\n        const domain = entityId.split('.')[0];\n        const iconMap = {\n            'switch': 'mdi:toggle-switch',\n            'sensor': 'mdi:eye',\n            'binary_sensor': 'mdi:radiobox-blank',\n            'cover': 'mdi:window-shutter',\n            'fan': 'mdi:fan',\n            'light': 'mdi:lightbulb',\n        };\n        return iconMap[domain] || 'mdi:devices';\n    }\n    render() {\n        const title = this.groupName ||\n            this.widgetConfig?.title ||\n            `${this.deviceType.charAt(0).toUpperCase() + this.deviceType.slice(1)}s`;\n        if (this.isLoading) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-loading\">\n          Loading devices...\n        </div>\n      `;\n        }\n        if (this.error) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-error\">\n          ${this.error}\n        </div>\n      `;\n        }\n        const config = this.widgetConfig;\n        const showOffline = config?.showOffline ?? false;\n        const filteredEntities = showOffline ?\n            this.groupedEntities :\n            this.groupedEntities.filter(e => e.isOnline);\n        return (0,lit/* html */.qy) `\n      <ha-card>\n        <div class=\"header\" @click=${this.toggleExpanded}>\n          <div class=\"header-content\">\n            <h2>${title}</h2>\n            <div class=\"device-count\">\n              ${this.activeCount}/${this.onlineCount}\n            </div>\n          </div>\n          <ha-icon\n            class=\"expand-icon ${this.expanded ? 'expanded' : ''}\"\n            icon=\"mdi:chevron-down\"\n          ></ha-icon>\n        </div>\n\n        ${this.expanded ? (0,lit/* html */.qy) `\n          <div class=\"entities\">\n            ${filteredEntities.length === 0 ? (0,lit/* html */.qy) `\n              <div class=\"empty-state\">\n                No ${showOffline ? '' : 'online'} devices found\n              </div>\n            ` : filteredEntities.map(entity => this.renderEntity(entity))}\n          </div>\n        ` : ''}\n\n        ${this.renderActions()}\n      </ha-card>\n    `;\n    }\n    renderEntity(entity) {\n        const stateDisplay = this.getStateDisplay(entity);\n        const stateClass = entity.isOnline ? '' : 'offline';\n        return (0,lit/* html */.qy) `\n      <div class=\"entity-row ${stateClass}\">\n        <ha-icon \n          icon=\"${entity.icon}\"\n          class=\"entity-icon ${entity.state === 'on' ? 'active' : ''}\"\n        ></ha-icon>\n        <span class=\"entity-name\">${entity.name}</span>\n        ${entity.isToggleable && entity.isOnline ? (0,lit/* html */.qy) `\n          <ha-switch\n            .checked=${entity.state === 'on'}\n            @change=${() => this.toggleEntity(entity.entityId)}\n          ></ha-switch>\n        ` : (0,lit/* html */.qy) `\n          <span class=\"entity-state\">${stateDisplay}</span>\n        `}\n      </div>\n    `;\n    }\n    getStateDisplay(entity) {\n        if (!entity.isOnline)\n            return 'Offline';\n        // For sensors, show the value with unit\n        if (entity.entityId.includes('sensor')) {\n            const state = this.entityStates.get(entity.entityId);\n            const unit = state?.attributes?.unit_of_measurement || '';\n            return `${entity.state}${unit ? ' ' + unit : ''}`;\n        }\n        // For binary sensors, show more descriptive text\n        if (entity.entityId.includes('binary_sensor')) {\n            return entity.state === 'on' ? 'Detected' : 'Clear';\n        }\n        return entity.state;\n    }\n    renderActions() {\n        const config = this.widgetConfig;\n        const showGroupControls = config?.showGroupControls ?? true;\n        if (!showGroupControls || !this.hasToggleableEntities()) {\n            return (0,lit/* html */.qy) ``;\n        }\n        const hasActiveDevices = this.groupedEntities.some(e => e.isToggleable && e.isOnline && e.state === 'on');\n        return (0,lit/* html */.qy) `\n      <div class=\"actions\">\n        ${hasActiveDevices ? (0,lit/* html */.qy) `\n          <mwc-button @click=${this.turnAllOff}>\n            <ha-icon icon=\"mdi:power-off\"></ha-icon>\n            All Off\n          </mwc-button>\n        ` : ''}\n        <mwc-button @click=${this.turnAllOn}>\n          <ha-icon icon=\"mdi:power-on\"></ha-icon>\n          All On\n        </mwc-button>\n      </div>\n    `;\n    }\n    hasToggleableEntities() {\n        return this.groupedEntities.some(e => e.isToggleable && e.isOnline);\n    }\n    toggleExpanded() {\n        this.expanded = !this.expanded;\n        // Update subscriptions when expanding/collapsing\n        if (this.expanded) {\n            this.updateSubscriptions();\n        }\n    }\n    async turnAllOff() {\n        const toggleable = this.groupedEntities.filter(e => e.isToggleable && e.isOnline && e.state === 'on');\n        for (const entity of toggleable) {\n            await this.turnOff(entity.entityId);\n        }\n    }\n    async turnAllOn() {\n        const toggleable = this.groupedEntities.filter(e => e.isToggleable && e.isOnline && e.state === 'off');\n        for (const entity of toggleable) {\n            await this.turnOn(entity.entityId);\n        }\n    }\n};\nDeviceGroupWidget.styles = [\n    DashviewWidget.styles,\n    (0,lit/* css */.AH) `\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: linear-gradient(to bottom, rgba(var(--rgb-primary-color), 0.05), transparent);\n      }\n\n      .header-content {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .device-count {\n        background: var(--primary-color);\n        color: var(--text-primary-color, white);\n        padding: 2px 8px;\n        border-radius: 12px;\n        font-size: 0.8em;\n        font-weight: 500;\n      }\n\n      .expand-icon {\n        transition: transform 0.3s ease;\n        color: var(--secondary-text-color);\n      }\n\n      .expand-icon.expanded {\n        transform: rotate(180deg);\n      }\n\n      .entities {\n        flex: 1;\n        overflow-y: auto;\n        padding: 0 16px;\n        max-height: 400px;\n      }\n\n      .entity-row {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px 0;\n        border-bottom: 1px solid var(--divider-color);\n        transition: opacity 0.2s ease;\n      }\n\n      .entity-row:last-child {\n        border-bottom: none;\n      }\n\n      .entity-row.offline {\n        opacity: 0.5;\n      }\n\n      .entity-icon {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n        transition: color 0.2s ease;\n      }\n\n      .entity-icon.active {\n        color: var(--primary-color);\n      }\n\n      .entity-name {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .entity-state {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        min-width: 60px;\n        text-align: right;\n      }\n\n      .empty-state {\n        padding: 32px;\n        text-align: center;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      .actions {\n        padding: 8px 16px;\n        border-top: 1px solid var(--divider-color);\n        display: flex;\n        justify-content: flex-end;\n        gap: 8px;\n      }\n\n      .actions:empty {\n        display: none;\n      }\n\n      mwc-button {\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      mwc-button ha-icon {\n        margin-right: 4px;\n      }\n    `\n];\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: String }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], DeviceGroupWidget.prototype, \"deviceType\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: String }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], DeviceGroupWidget.prototype, \"groupName\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"expanded\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Array)\n], DeviceGroupWidget.prototype, \"groupedEntities\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"onlineCount\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"activeCount\", void 0);\nDeviceGroupWidget = (0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* customElement */.EM)('dashview-device-group-widget')\n], DeviceGroupWidget);\n\n\n;// ./src/widgets/climate-widget.ts\n/**\n * Climate widget for Dashview V2.\n * Controls HVAC systems, thermostats, and climate entities.\n */\n\n\n\n\n\nlet ClimateWidget = class ClimateWidget extends DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.hvacMode = 'off';\n        this.availableModes = [];\n        this.availablePresets = [];\n        this.isAdjusting = false;\n        this.showTempDial = true;\n    }\n    subscribedEntities() {\n        const entities = [];\n        // Primary climate entity\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (climateId) {\n            entities.push(climateId);\n        }\n        // Related humidity sensor if any\n        const humidityEntity = this.widgetConfig?.entities?.find(e => e.includes('humidity') && !e.includes('climate'));\n        if (humidityEntity) {\n            entities.push(humidityEntity);\n        }\n        return entities;\n    }\n    getDefaultConfig() {\n        return {\n            type: 'climate',\n            entities: [],\n            showHumidity: true,\n            showPresets: true,\n            temperatureStep: 0.5,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateClimateState();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateClimateState();\n    }\n    updateClimateState() {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        const climateState = this.entityStates.get(climateId);\n        if (!climateState)\n            return;\n        // Update temperature values\n        this.currentTemp = climateState.attributes.current_temperature;\n        this.hvacMode = climateState.state;\n        this.presetMode = climateState.attributes.preset_mode;\n        // Handle different temperature control modes\n        if (climateState.attributes.target_temp_low && climateState.attributes.target_temp_high) {\n            this.targetTempLow = climateState.attributes.target_temp_low;\n            this.targetTempHigh = climateState.attributes.target_temp_high;\n            this.targetTemp = undefined;\n        }\n        else {\n            this.targetTemp = climateState.attributes.temperature;\n            this.targetTempLow = undefined;\n            this.targetTempHigh = undefined;\n        }\n        // Available modes\n        this.availableModes = climateState.attributes.hvac_modes || [];\n        this.availablePresets = climateState.attributes.preset_modes || [];\n        // Check for humidity sensor\n        const humidityEntity = this.widgetConfig?.entities?.find(e => e.includes('humidity') && !e.includes('climate'));\n        if (humidityEntity) {\n            const humidityState = this.entityStates.get(humidityEntity);\n            if (humidityState && humidityState.state !== 'unavailable') {\n                this.humidity = parseFloat(humidityState.state);\n            }\n        }\n    }\n    render() {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        const title = this.widgetConfig?.title || 'Climate Control';\n        if (this.isLoading) {\n            return this.renderSkeleton();\n        }\n        if (this.error || !climateId) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-error\">\n          ${this.error || 'No climate entity configured'}\n        </div>\n      `;\n        }\n        return (0,lit/* html */.qy) `\n      <ha-card>\n        <div class=\"header\">\n          <h2>${title}</h2>\n          <div class=\"hvac-mode ${this.hvacMode}\">\n            ${this.hvacMode.toUpperCase()}\n          </div>\n        </div>\n\n        <div class=\"temperature-display\">\n          ${this.showTempDial ? this.renderTemperatureDial() : this.renderTemperatureDisplay()}\n        </div>\n\n        ${this.renderTemperatureControls()}\n        ${this.renderModeSelector()}\n        ${this.renderPresetSelector()}\n        ${this.renderHumidity()}\n      </ha-card>\n    `;\n    }\n    renderTemperatureDisplay() {\n        if (this.currentTemp === undefined) {\n            return (0,lit/* html */.qy) `<span class=\"temp-unavailable\">--</span>`;\n        }\n        return (0,lit/* html */.qy) `\n      <div class=\"current-temp\">\n        <span class=\"temp-value\">${this.currentTemp.toFixed(1)}</span>\n        <span class=\"temp-unit\">°C</span>\n      </div>\n      ${this.renderTargetTemp()}\n    `;\n    }\n    renderTemperatureDial() {\n        if (this.currentTemp === undefined) {\n            return (0,lit/* html */.qy) `<div class=\"temp-dial-unavailable\">Temperature Unavailable</div>`;\n        }\n        const minTemp = 10;\n        const maxTemp = 35;\n        const currentPercent = Math.max(0, Math.min(100, ((this.currentTemp - minTemp) / (maxTemp - minTemp)) * 100));\n        const targetPercent = this.targetTemp ? Math.max(0, Math.min(100, ((this.targetTemp - minTemp) / (maxTemp - minTemp)) * 100)) : currentPercent;\n        return (0,lit/* html */.qy) `\n      <div class=\"temp-dial-container\">\n        <div class=\"temp-dial\">\n          <svg viewBox=\"0 0 200 200\" class=\"dial-svg\">\n            <!-- Background circle -->\n            <circle cx=\"100\" cy=\"100\" r=\"80\" class=\"dial-bg\" />\n            <!-- Current temperature arc -->\n            <circle \n              cx=\"100\" \n              cy=\"100\" \n              r=\"80\" \n              class=\"dial-current\"\n              stroke-dasharray=\"${(currentPercent / 100) * 502.6} 502.6\"\n              transform=\"rotate(-90 100 100)\"\n            />\n            <!-- Target temperature indicator -->\n            ${this.targetTemp ? (0,lit/* html */.qy) `\n              <circle \n                cx=\"100\" \n                cy=\"100\" \n                r=\"80\" \n                class=\"dial-target\"\n                stroke-dasharray=\"3 502.6\"\n                stroke-dashoffset=\"${-((targetPercent / 100) * 502.6)}\"\n                transform=\"rotate(-90 100 100)\"\n              />\n            ` : ''}\n          </svg>\n          <div class=\"dial-center\">\n            <div class=\"current-temp-dial\">\n              <span class=\"temp-value-dial\">${this.currentTemp.toFixed(1)}</span>\n              <span class=\"temp-unit-dial\">°C</span>\n            </div>\n            ${this.targetTemp ? (0,lit/* html */.qy) `\n              <div class=\"target-temp-dial\">\n                Target: ${this.targetTemp.toFixed(1)}°C\n              </div>\n            ` : ''}\n          </div>\n        </div>\n        <div class=\"temp-trend\">\n          ${this.renderTemperatureTrend()}\n        </div>\n      </div>\n    `;\n    }\n    renderTemperatureTrend() {\n        // Placeholder for temperature trend mini-graph\n        // In a real implementation, this would show historical data\n        return (0,lit/* html */.qy) `\n      <div class=\"trend-indicator\">\n        <ha-icon icon=\"mdi:trending-up\" class=\"trend-icon\"></ha-icon>\n        <span class=\"trend-text\">Trending up</span>\n      </div>\n    `;\n    }\n    renderTargetTemp() {\n        if (this.hvacMode === 'off') {\n            return (0,lit/* html */.qy) ``;\n        }\n        if (this.targetTempLow !== undefined && this.targetTempHigh !== undefined) {\n            return (0,lit/* html */.qy) `\n        <div class=\"target-temp-range\">\n          <span class=\"target-label\">Target:</span>\n          <span class=\"target-value\">${this.targetTempLow.toFixed(1)} - ${this.targetTempHigh.toFixed(1)}°C</span>\n        </div>\n      `;\n        }\n        if (this.targetTemp !== undefined) {\n            return (0,lit/* html */.qy) `\n        <div class=\"target-temp\">\n          <span class=\"target-label\">Target:</span>\n          <span class=\"target-value\">${this.targetTemp.toFixed(1)}°C</span>\n        </div>\n      `;\n        }\n        return (0,lit/* html */.qy) ``;\n    }\n    renderTemperatureControls() {\n        if (this.hvacMode === 'off' || this.hvacMode === 'fan_only') {\n            return (0,lit/* html */.qy) ``;\n        }\n        const config = this.widgetConfig;\n        const step = config?.temperatureStep || 0.5;\n        if (this.targetTempLow !== undefined && this.targetTempHigh !== undefined) {\n            return (0,lit/* html */.qy) `\n        <div class=\"temp-controls-dual\">\n          <div class=\"temp-control\">\n            <span class=\"control-label\">Cool to</span>\n            <div class=\"control-buttons\">\n              <ha-icon-button\n                icon=\"mdi:minus\"\n                @click=${() => this.adjustTargetTemp('low', -step)}\n              ></ha-icon-button>\n              <span class=\"control-value\">${this.targetTempLow.toFixed(1)}°C</span>\n              <ha-icon-button\n                icon=\"mdi:plus\"\n                @click=${() => this.adjustTargetTemp('low', step)}\n              ></ha-icon-button>\n            </div>\n          </div>\n          <div class=\"temp-control\">\n            <span class=\"control-label\">Heat to</span>\n            <div class=\"control-buttons\">\n              <ha-icon-button\n                icon=\"mdi:minus\"\n                @click=${() => this.adjustTargetTemp('high', -step)}\n              ></ha-icon-button>\n              <span class=\"control-value\">${this.targetTempHigh.toFixed(1)}°C</span>\n              <ha-icon-button\n                icon=\"mdi:plus\"\n                @click=${() => this.adjustTargetTemp('high', step)}\n              ></ha-icon-button>\n            </div>\n          </div>\n        </div>\n      `;\n        }\n        if (this.targetTemp !== undefined) {\n            return (0,lit/* html */.qy) `\n        <div class=\"temp-controls\">\n          <ha-icon-button\n            icon=\"mdi:minus\"\n            @click=${() => this.adjustTargetTemp('single', -step)}\n          ></ha-icon-button>\n          <span class=\"control-value\">${this.targetTemp.toFixed(1)}°C</span>\n          <ha-icon-button\n            icon=\"mdi:plus\"\n            @click=${() => this.adjustTargetTemp('single', step)}\n          ></ha-icon-button>\n        </div>\n      `;\n        }\n        return (0,lit/* html */.qy) ``;\n    }\n    renderModeSelector() {\n        if (this.availableModes.length <= 1) {\n            return (0,lit/* html */.qy) ``;\n        }\n        const modeIcons = {\n            'off': 'mdi:power',\n            'heat': 'mdi:fire',\n            'cool': 'mdi:snowflake',\n            'heat_cool': 'mdi:autorenew',\n            'auto': 'mdi:calendar-sync',\n            'dry': 'mdi:water-percent',\n            'fan_only': 'mdi:fan',\n        };\n        const modeColors = {\n            'off': 'var(--secondary-text-color)',\n            'heat': '#ff6b00',\n            'cool': '#0288d1',\n            'heat_cool': '#388e3c',\n            'auto': '#388e3c',\n            'dry': '#9c27b0',\n            'fan_only': '#607d8b',\n        };\n        return (0,lit/* html */.qy) `\n      <div class=\"mode-selector\">\n        ${this.availableModes.map(mode => (0,lit/* html */.qy) `\n          <button\n            class=\"mode-button touch-target ${mode === this.hvacMode ? 'active' : ''}\"\n            @click=${() => this.setHvacMode(mode)}\n            aria-label=\"Set ${mode.replace('_', ' ')} mode\"\n            style=\"--mode-color: ${modeColors[mode]}\"\n          >\n            <ha-icon icon=\"${modeIcons[mode]}\"></ha-icon>\n            <span>${mode.replace('_', ' ')}</span>\n          </button>\n        `)}\n      </div>\n    `;\n    }\n    renderPresetSelector() {\n        const config = this.widgetConfig;\n        if (!config?.showPresets || this.availablePresets.length === 0) {\n            return (0,lit/* html */.qy) ``;\n        }\n        const presetIcons = {\n            'eco': 'mdi:leaf',\n            'away': 'mdi:home-export-outline',\n            'boost': 'mdi:rocket-launch',\n            'comfort': 'mdi:sofa',\n            'home': 'mdi:home',\n            'sleep': 'mdi:sleep',\n            'activity': 'mdi:run'\n        };\n        return (0,lit/* html */.qy) `\n      <div class=\"preset-selector\">\n        <span class=\"preset-label\">Presets:</span>\n        <div class=\"preset-buttons\">\n          <button \n            class=\"preset-button touch-target ${!this.presetMode ? 'active' : ''}\"\n            @click=${() => this.setPresetMode(null)}\n            aria-label=\"No preset\"\n          >\n            <ha-icon icon=\"mdi:close\"></ha-icon>\n            <span>None</span>\n          </button>\n          ${this.availablePresets.map(preset => (0,lit/* html */.qy) `\n            <button\n              class=\"preset-button touch-target ${preset === this.presetMode ? 'active' : ''}\"\n              @click=${() => this.setPresetMode(preset)}\n              aria-label=\"Set ${preset} preset\"\n            >\n              <ha-icon icon=\"${presetIcons[preset] || 'mdi:cog'}\"></ha-icon>\n              <span>${preset}</span>\n            </button>\n          `)}\n        </div>\n      </div>\n    `;\n    }\n    renderHumidity() {\n        const config = this.widgetConfig;\n        if (!config?.showHumidity || this.humidity === undefined) {\n            return (0,lit/* html */.qy) ``;\n        }\n        return (0,lit/* html */.qy) `\n      <div class=\"humidity-display\">\n        <ha-icon icon=\"mdi:water-percent\"></ha-icon>\n        <span>Humidity: ${this.humidity.toFixed(0)}%</span>\n      </div>\n    `;\n    }\n    async adjustTargetTemp(type, change) {\n        if (this.isAdjusting)\n            return;\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        this.isAdjusting = true;\n        try {\n            const service_data = {};\n            if (type === 'single' && this.targetTemp !== undefined) {\n                service_data.temperature = Math.round((this.targetTemp + change) * 2) / 2;\n            }\n            else if (type === 'low' && this.targetTempLow !== undefined) {\n                service_data.target_temp_low = Math.round((this.targetTempLow + change) * 2) / 2;\n                service_data.target_temp_high = this.targetTempHigh;\n            }\n            else if (type === 'high' && this.targetTempHigh !== undefined) {\n                service_data.target_temp_low = this.targetTempLow;\n                service_data.target_temp_high = Math.round((this.targetTempHigh + change) * 2) / 2;\n            }\n            await this.hass.callService('climate', 'set_temperature', {\n                entity_id: climateId,\n                ...service_data\n            });\n        }\n        catch (error) {\n            console.error('Failed to adjust temperature:', error);\n        }\n        finally {\n            this.isAdjusting = false;\n        }\n    }\n    async setHvacMode(mode) {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        try {\n            await this.hass.callService('climate', 'set_hvac_mode', {\n                entity_id: climateId,\n                hvac_mode: mode\n            });\n        }\n        catch (error) {\n            console.error('Failed to set HVAC mode:', error);\n        }\n    }\n    async setPresetMode(preset) {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        try {\n            await this.hass.callService('climate', 'set_preset_mode', {\n                entity_id: climateId,\n                preset_mode: preset\n            });\n        }\n        catch (error) {\n            console.error('Failed to set preset mode:', error);\n        }\n    }\n    renderSkeleton() {\n        return (0,lit/* html */.qy) `\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"skeleton skeleton-text large\" style=\"width: 140px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"width: 80px; height: 28px;\"></div>\n        </div>\n        <div class=\"temperature-display\">\n          <div class=\"skeleton skeleton-card\" style=\"height: 200px; margin: 16px;\"></div>\n        </div>\n        <div class=\"mode-selector\">\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n        </div>\n      </ha-card>\n    `;\n    }\n};\nClimateWidget.styles = (0,lit/* css */.AH) `\n    ${DashviewWidget.styles}\n    ${skeletonStyles}\n    ${touchStyles}\n      ha-card {\n        height: 100%;\n        min-height: 250px;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .hvac-mode {\n        padding: 4px 12px;\n        border-radius: 16px;\n        font-size: 0.8em;\n        font-weight: 500;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .hvac-mode.off {\n        background: var(--secondary-background-color);\n        color: var(--secondary-text-color);\n      }\n\n      .hvac-mode.heat {\n        background: rgba(255, 152, 0, 0.2);\n        color: #ff6b00;\n      }\n\n      .hvac-mode.cool {\n        background: rgba(33, 150, 243, 0.2);\n        color: #0288d1;\n      }\n\n      .hvac-mode.heat_cool,\n      .hvac-mode.auto {\n        background: rgba(76, 175, 80, 0.2);\n        color: #388e3c;\n      }\n\n      .temperature-display {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 16px;\n      }\n\n      .current-temp {\n        display: flex;\n        align-items: baseline;\n        gap: 4px;\n      }\n\n      .temp-value {\n        font-size: 3.5em;\n        font-weight: 300;\n        color: var(--primary-color);\n        line-height: 1;\n      }\n\n      .temp-unit {\n        font-size: 1.5em;\n        color: var(--secondary-text-color);\n      }\n\n      .temp-unavailable {\n        font-size: 3em;\n        color: var(--secondary-text-color);\n      }\n\n      .target-temp,\n      .target-temp-range {\n        margin-top: 8px;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .target-label {\n        opacity: 0.8;\n        margin-right: 4px;\n      }\n\n      .temp-controls {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 16px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .temp-controls-dual {\n        display: flex;\n        gap: 24px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .temp-control {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .control-label {\n        font-size: 0.85em;\n        color: var(--secondary-text-color);\n      }\n\n      .control-buttons {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .control-value {\n        font-size: 1.4em;\n        min-width: 60px;\n        text-align: center;\n      }\n\n      .mode-selector {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));\n        gap: 8px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .mode-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 4px;\n        padding: 12px 8px;\n        border: 2px solid var(--divider-color);\n        border-radius: 12px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        font-size: 0.75em;\n        text-transform: capitalize;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      .mode-button:hover {\n        background: var(--secondary-background-color);\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .mode-button.active {\n        background: var(--mode-color, var(--primary-color));\n        color: white;\n        border-color: var(--mode-color, var(--primary-color));\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n      }\n\n      .mode-button:active {\n        transform: translateY(0) scale(0.95);\n      }\n\n      .mode-button ha-icon {\n        --mdc-icon-size: 24px;\n      }\n\n      .preset-selector {\n        padding: 12px 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .preset-label {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        margin-bottom: 8px;\n        display: block;\n      }\n\n      .preset-buttons {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n\n      .preset-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 2px;\n        padding: 8px 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        font-size: 0.7em;\n        text-transform: capitalize;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      .preset-button:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .preset-button.active {\n        background: var(--primary-color);\n        color: white;\n        border-color: var(--primary-color);\n      }\n\n      .preset-button ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .humidity-display {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 12px 16px;\n        border-top: 1px solid var(--divider-color);\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .humidity-display ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      ha-icon-button {\n        --mdc-icon-button-size: 48px;\n        --mdc-icon-size: 24px;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      /* Temperature dial styles */\n      .temp-dial-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 16px;\n      }\n\n      .temp-dial {\n        position: relative;\n        width: 200px;\n        height: 200px;\n      }\n\n      .dial-svg {\n        width: 100%;\n        height: 100%;\n      }\n\n      .dial-bg {\n        fill: none;\n        stroke: var(--divider-color);\n        stroke-width: 8;\n      }\n\n      .dial-current {\n        fill: none;\n        stroke: var(--primary-color);\n        stroke-width: 8;\n        stroke-linecap: round;\n        transition: stroke-dasharray 350ms cubic-bezier(0.0, 0.0, 0.2, 1);\n      }\n\n      .dial-target {\n        fill: none;\n        stroke: var(--secondary-text-color);\n        stroke-width: 4;\n        stroke-linecap: round;\n      }\n\n      .dial-center {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        text-align: center;\n      }\n\n      .current-temp-dial {\n        display: flex;\n        align-items: baseline;\n        justify-content: center;\n        gap: 4px;\n      }\n\n      .temp-value-dial {\n        font-size: 2.5em;\n        font-weight: 300;\n        color: var(--primary-color);\n        line-height: 1;\n      }\n\n      .temp-unit-dial {\n        font-size: 1.2em;\n        color: var(--secondary-text-color);\n      }\n\n      .target-temp-dial {\n        margin-top: 8px;\n        color: var(--secondary-text-color);\n        font-size: 0.8em;\n      }\n\n      .temp-dial-unavailable {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 200px;\n        color: var(--secondary-text-color);\n        font-size: 1.1em;\n      }\n\n      .trend-indicator {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        color: var(--secondary-text-color);\n        font-size: 0.85em;\n      }\n\n      .trend-icon {\n        --mdc-icon-size: 16px;\n        color: var(--success-color, #4caf50);\n      }\n\n      /* Mobile optimizations */\n      @media (max-width: 768px) {\n        .temp-dial {\n          width: 160px;\n          height: 160px;\n        }\n\n        .temp-value-dial {\n          font-size: 2em;\n        }\n\n        .temp-unit-dial {\n          font-size: 1em;\n        }\n\n        .mode-selector {\n          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));\n        }\n\n        .preset-buttons {\n          justify-content: center;\n        }\n      }\n\n      /* Accessibility */\n      @media (prefers-reduced-motion: reduce) {\n        .mode-button:hover {\n          transform: none;\n        }\n\n        .mode-button:active {\n          transform: scale(0.98);\n        }\n\n        .dial-current {\n          transition: none;\n        }\n      }\n    `;\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* property */.MZ)({ type: String }),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], ClimateWidget.prototype, \"climateEntityId\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], ClimateWidget.prototype, \"currentTemp\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTemp\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTempLow\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTempHigh\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Number)\n], ClimateWidget.prototype, \"humidity\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], ClimateWidget.prototype, \"hvacMode\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", String)\n], ClimateWidget.prototype, \"presetMode\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Array)\n], ClimateWidget.prototype, \"availableModes\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Array)\n], ClimateWidget.prototype, \"availablePresets\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], ClimateWidget.prototype, \"isAdjusting\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], ClimateWidget.prototype, \"showTempDial\", void 0);\nClimateWidget = (0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* customElement */.EM)('dashview-climate-widget')\n], ClimateWidget);\n\n\n;// ./src/widgets/quick-controls-widget.ts\n/**\n * Quick controls widget for Dashview V2.\n * Provides fast access to frequently used controls and scenes.\n */\nvar quick_controls_widget_a;\n\n\n\n\nlet QuickControlsWidget = class QuickControlsWidget extends DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.controlStates = new Map();\n        this.executingControl = null;\n    }\n    subscribedEntities() {\n        const config = this.widgetConfig;\n        if (!config?.controls)\n            return [];\n        // Subscribe to all control entities\n        return config.controls\n            .map(control => control.entityId)\n            .filter(id => id && !id.startsWith('script.') && !id.startsWith('scene.'));\n    }\n    getDefaultConfig() {\n        return {\n            type: 'quick-controls',\n            controls: [],\n            columns: 4,\n            showLabels: true,\n            iconSize: 'medium',\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateControlStates();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateControlStates();\n    }\n    updateControlStates() {\n        const config = this.widgetConfig;\n        if (!config?.controls)\n            return;\n        const newStates = new Map();\n        for (const control of config.controls) {\n            const entityId = control.entityId;\n            if (!entityId)\n                continue;\n            const state = this.entityStates.get(entityId);\n            if (state) {\n                // For toggleable entities, track on/off state\n                const domain = entityId.split('.')[0];\n                if (['light', 'switch', 'fan', 'input_boolean'].includes(domain)) {\n                    newStates.set(entityId, state.state === 'on');\n                }\n            }\n        }\n        this.controlStates = newStates;\n    }\n    render() {\n        const config = this.widgetConfig;\n        const title = this.widgetConfig?.title || 'Quick Controls';\n        if (this.isLoading) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-loading\">\n          Loading controls...\n        </div>\n      `;\n        }\n        if (this.error || !config?.controls || config.controls.length === 0) {\n            return (0,lit/* html */.qy) `\n        <div class=\"widget-error\">\n          ${this.error || 'No controls configured'}\n        </div>\n      `;\n        }\n        const columns = config.columns || 4;\n        const iconSize = config.iconSize || 'medium';\n        return (0,lit/* html */.qy) `\n      <ha-card>\n        <div class=\"header\">\n          <h2>${title}</h2>\n        </div>\n\n        <div \n          class=\"controls-grid\"\n          style=\"grid-template-columns: repeat(${columns}, 1fr)\"\n        >\n          ${config.controls.map(control => this.renderControl(control, iconSize))}\n        </div>\n      </ha-card>\n    `;\n    }\n    renderControl(control, iconSize) {\n        const config = this.widgetConfig;\n        const showLabels = config?.showLabels ?? true;\n        const entityId = control.entityId;\n        const state = entityId ? this.entityStates.get(entityId) : null;\n        const isActive = this.controlStates.get(entityId) || false;\n        const isExecuting = this.executingControl === entityId;\n        // Determine icon\n        let icon = control.icon;\n        if (!icon && state) {\n            icon = state.attributes.icon || this.getDefaultIcon(entityId);\n        }\n        // Determine label\n        let label = control.label;\n        if (!label && state) {\n            label = state.attributes.friendly_name || entityId.split('.')[1].replace(/_/g, ' ');\n        }\n        // Determine color\n        let color = control.color || 'var(--primary-color)';\n        if (isActive && !control.color) {\n            color = this.getActiveColor(entityId);\n        }\n        const buttonClass = `control-button ${iconSize} ${isActive ? 'active' : ''} ${isExecuting ? 'executing' : ''}`;\n        return (0,lit/* html */.qy) `\n      <button\n        class=\"${buttonClass}\"\n        style=\"--control-color: ${color}\"\n        @click=${() => this.handleControlClick(control)}\n        ?disabled=${isExecuting}\n      >\n        ${isExecuting ? (0,lit/* html */.qy) `\n          <div class=\"spinner\"></div>\n        ` : (0,lit/* html */.qy) `\n          <ha-icon icon=\"${icon}\"></ha-icon>\n        `}\n        ${showLabels && label ? (0,lit/* html */.qy) `\n          <span class=\"control-label\">${label}</span>\n        ` : ''}\n      </button>\n    `;\n    }\n    getDefaultIcon(entityId) {\n        const [domain, name] = entityId.split('.');\n        // Domain-based icons\n        const domainIcons = {\n            'light': 'mdi:lightbulb',\n            'switch': 'mdi:toggle-switch',\n            'fan': 'mdi:fan',\n            'scene': 'mdi:palette',\n            'script': 'mdi:script-text',\n            'automation': 'mdi:robot',\n            'input_boolean': 'mdi:toggle-switch-outline',\n        };\n        // Name-based icons\n        if (name.includes('morning'))\n            return 'mdi:weather-sunset-up';\n        if (name.includes('night') || name.includes('bedtime'))\n            return 'mdi:weather-night';\n        if (name.includes('away'))\n            return 'mdi:home-export-outline';\n        if (name.includes('home'))\n            return 'mdi:home';\n        if (name.includes('party'))\n            return 'mdi:party-popper';\n        if (name.includes('movie') || name.includes('tv'))\n            return 'mdi:television';\n        if (name.includes('dinner') || name.includes('dining'))\n            return 'mdi:silverware-fork-knife';\n        if (name.includes('reading'))\n            return 'mdi:book-open-page-variant';\n        return domainIcons[domain] || 'mdi:gesture-tap';\n    }\n    getActiveColor(entityId) {\n        const [domain] = entityId.split('.');\n        switch (domain) {\n            case 'light':\n                return 'var(--warning-color)';\n            case 'fan':\n                return 'var(--info-color)';\n            case 'switch':\n                return 'var(--success-color)';\n            default:\n                return 'var(--primary-color)';\n        }\n    }\n    async handleControlClick(control) {\n        if (this.executingControl)\n            return;\n        const entityId = control.entityId;\n        if (!entityId)\n            return;\n        // Handle confirmation if required\n        if (control.confirmAction) {\n            const label = control.label || entityId.split('.')[1].replace(/_/g, ' ');\n            if (!confirm(`Execute \"${label}\"?`)) {\n                return;\n            }\n        }\n        this.executingControl = entityId;\n        try {\n            // Custom service call\n            if (control.service) {\n                await this.hass.callService(control.service.domain, control.service.service, {\n                    entity_id: entityId,\n                    ...control.service.data\n                });\n            }\n            else {\n                // Default behavior based on entity type\n                const [domain] = entityId.split('.');\n                switch (domain) {\n                    case 'scene':\n                        await this.hass.callService('scene', 'turn_on', { entity_id: entityId });\n                        break;\n                    case 'script':\n                        await this.hass.callService('script', 'turn_on', { entity_id: entityId });\n                        break;\n                    case 'automation':\n                        await this.hass.callService('automation', 'trigger', { entity_id: entityId });\n                        break;\n                    case 'light':\n                    case 'switch':\n                    case 'fan':\n                    case 'input_boolean':\n                        await this.toggleEntity(entityId);\n                        break;\n                    default:\n                        console.warn(`Unknown entity domain: ${domain}`);\n                }\n            }\n            // Visual feedback for non-toggleable entities\n            if (['scene', 'script'].includes(entityId.split('.')[0])) {\n                // Keep spinner for a moment to show execution\n                setTimeout(() => {\n                    this.executingControl = null;\n                }, 1000);\n                return;\n            }\n        }\n        catch (error) {\n            console.error(`Failed to execute control ${entityId}:`, error);\n        }\n        this.executingControl = null;\n    }\n};\nQuickControlsWidget.styles = [\n    DashviewWidget.styles,\n    (0,lit/* css */.AH) `\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .controls-grid {\n        display: grid;\n        gap: 12px;\n        padding: 16px;\n        align-content: start;\n      }\n\n      .control-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 16px 8px;\n        border: 2px solid var(--divider-color);\n        border-radius: 12px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 0.2s ease;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .control-button:hover {\n        background: var(--secondary-background-color);\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .control-button:active {\n        transform: translateY(0);\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      }\n\n      .control-button.active {\n        background: var(--control-color);\n        color: var(--text-primary-color, white);\n        border-color: var(--control-color);\n      }\n\n      .control-button.active ha-icon {\n        color: var(--text-primary-color, white);\n      }\n\n      .control-button:disabled {\n        cursor: not-allowed;\n        opacity: 0.7;\n      }\n\n      .control-button.executing {\n        pointer-events: none;\n      }\n\n      /* Icon sizes */\n      .control-button.small {\n        padding: 12px 8px;\n      }\n\n      .control-button.small ha-icon {\n        --mdc-icon-size: 24px;\n      }\n\n      .control-button.medium ha-icon {\n        --mdc-icon-size: 32px;\n      }\n\n      .control-button.large {\n        padding: 20px 12px;\n      }\n\n      .control-button.large ha-icon {\n        --mdc-icon-size: 40px;\n      }\n\n      .control-label {\n        font-size: 0.75em;\n        text-align: center;\n        line-height: 1.2;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n      }\n\n      .control-button.large .control-label {\n        font-size: 0.85em;\n      }\n\n      /* Spinner animation */\n      .spinner {\n        width: 24px;\n        height: 24px;\n        border: 3px solid var(--divider-color);\n        border-top-color: var(--primary-color);\n        border-radius: 50%;\n        animation: spin 0.8s linear infinite;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Responsive adjustments */\n      @media (max-width: 480px) {\n        .controls-grid {\n          gap: 8px;\n          padding: 12px;\n        }\n\n        .control-button {\n          padding: 12px 6px;\n        }\n\n        .control-button.medium ha-icon {\n          --mdc-icon-size: 28px;\n        }\n\n        .control-label {\n          font-size: 0.7em;\n        }\n      }\n\n      /* Pulse animation for scenes/scripts */\n      @keyframes pulse {\n        0% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.6;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      .control-button.executing ha-icon {\n        animation: pulse 1s ease-in-out infinite;\n      }\n    `\n];\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", typeof (quick_controls_widget_a = typeof Map !== \"undefined\" && Map) === \"function\" ? quick_controls_widget_a : Object)\n], QuickControlsWidget.prototype, \"controlStates\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], QuickControlsWidget.prototype, \"executingControl\", void 0);\nQuickControlsWidget = (0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* customElement */.EM)('dashview-quick-controls-widget')\n], QuickControlsWidget);\n\n\n;// ./src/dashboard/dashview-dashboard.ts\nvar dashview_dashboard_a, dashview_dashboard_b, _c, _d;\n\n\n\n\n\n\n\n\n\n\n// Import widgets\n\n\n\n\nlet DashviewDashboard = class DashviewDashboard extends DashviewBaseElement {\n    constructor() {\n        super(...arguments);\n        // Private state\n        this._stateManager = null;\n        this._subscriptionManager = null;\n        this.loading = true;\n        this.error = null;\n        this.homeInfo = null;\n        this.wsConnection = null;\n        this.layoutEngine = null;\n        this.currentLayout = null;\n        this.widgets = [];\n        this.currentBreakpoint = 'desktop';\n        this.areas = new Map();\n    }\n    // Public getters for child components\n    get stateManager() {\n        return this._stateManager;\n    }\n    get subscriptionManager() {\n        return this._subscriptionManager;\n    }\n    async firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        await this.initializeDashboard();\n        this.setupResizeObserver();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.cleanup();\n    }\n    async initializeDashboard() {\n        try {\n            logger.info('Initializing Dashview dashboard');\n            if (!this.hass) {\n                throw new Error('Home Assistant connection not available');\n            }\n            // Initialize core services\n            this.wsConnection = new WebSocketConnection(this.hass);\n            this._stateManager = new StateManager();\n            this._subscriptionManager = new SubscriptionManager(this.wsConnection, this._stateManager);\n            this.layoutEngine = new LayoutEngine();\n            // Load home information\n            await this.loadHomeInfo();\n            // Analyze home and set up dashboard\n            await this.analyzeHome();\n            this.selectOptimalLayout();\n            await this.initializeWidgets();\n            // Start state management\n            this._stateManager.initializeFromHass(this.hass);\n            await this._subscriptionManager.startListening();\n            logger.info('Dashboard initialized successfully');\n            this.loading = false;\n        }\n        catch (error) {\n            logger.error('Failed to initialize dashboard:', error);\n            this.error = error instanceof Error ? error.message : 'Failed to initialize dashboard';\n            this.loading = false;\n        }\n    }\n    async loadHomeInfo() {\n        if (!this.wsConnection)\n            return;\n        try {\n            this.loading = true;\n            this.error = null;\n            logger.debug('Loading home information');\n            this.homeInfo = await this.wsConnection.getHomeInfo();\n            logger.info('Home info loaded:', this.homeInfo);\n            this.loading = false;\n        }\n        catch (error) {\n            logger.error('Failed to load home info:', error);\n            this.error = 'Failed to load home information';\n            this.loading = false;\n        }\n    }\n    render() {\n        if (this.loading) {\n            return (0,lit/* html */.qy) `\n        <div class=\"dashview-container\">\n          <div class=\"dashview-loading\">\n            <div class=\"loading-spinner\"></div>\n            <p>Loading your dashboard...</p>\n          </div>\n        </div>\n      `;\n        }\n        if (this.error) {\n            return (0,lit/* html */.qy) `\n        <div class=\"dashview-container\">\n          <div class=\"dashview-error\">\n            <h2>Error</h2>\n            <p>${this.error}</p>\n            <button @click=${() => this.initializeDashboard()}>Retry</button>\n          </div>\n        </div>\n      `;\n        }\n        // If we have widgets, show the dashboard view\n        if (this.widgets.length > 0) {\n            return this.renderDashboard();\n        }\n        // Otherwise show the welcome/info view\n        return (0,lit/* html */.qy) `\n      <div class=\"dashview-container\">\n        <div class=\"dashview-content\">\n          <div class=\"welcome-header\">\n            <h1 class=\"welcome-title\">Welcome to Dashview V2</h1>\n            <p class=\"welcome-subtitle\">\n              Your intelligent home dashboard for ${this.homeInfo?.entityCount || 0} entities\n            </p>\n          </div>\n\n          ${this.homeInfo ? this.renderHomeInfo() : this.renderNoData()}\n        </div>\n      </div>\n    `;\n    }\n    renderHomeInfo() {\n        if (!this.homeInfo)\n            return null;\n        const complexityPercentage = Math.min(100, this.homeInfo.complexityScore * 10);\n        return (0,lit/* html */.qy) `\n      <div class=\"info-grid\">\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.roomCount}</p>\n          <p class=\"info-label\">Rooms</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.entityCount}</p>\n          <p class=\"info-label\">Entities</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.areas.length}</p>\n          <p class=\"info-label\">Areas</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.complexityScore}/10</p>\n          <p class=\"info-label\">Complexity Score</p>\n          <div class=\"complexity-meter\">\n            <div class=\"complexity-fill\" style=\"width: ${complexityPercentage}%\"></div>\n          </div>\n        </div>\n      </div>\n\n      ${this.homeInfo.areas.length > 0 ? (0,lit/* html */.qy) `\n        <div class=\"dashview-card\">\n          <h3>Detected Areas</h3>\n          <div class=\"areas-list\">\n            ${this.homeInfo.areas.map(area => (0,lit/* html */.qy) `\n              <span class=\"area-tag\">${area}</span>\n            `)}\n          </div>\n        </div>\n      ` : ''}\n    `;\n    }\n    renderNoData() {\n        return (0,lit/* html */.qy) `\n      <div class=\"dashview-card\">\n        <p>No home information available. Make sure your Home Assistant is configured with areas and entities.</p>\n      </div>\n    `;\n    }\n    /**\n     * Analyze home complexity and areas.\n     */\n    async analyzeHome() {\n        if (!this.homeInfo || !this.wsConnection)\n            return;\n        try {\n            // Get detailed area information\n            const areaData = await this.callWebSocket('get_area_entities', {});\n            // Convert to AreaInfo format\n            for (const [areaId, data] of Object.entries(areaData)) {\n                this.areas.set(areaId, {\n                    areaId,\n                    name: data.name,\n                    entities: data.entities || [],\n                    entityCount: data.entity_count || 0,\n                    deviceCount: data.device_count || 0,\n                });\n            }\n            logger.info(`Analyzed ${this.areas.size} areas`);\n        }\n        catch (error) {\n            logger.error('Failed to analyze home:', error);\n        }\n    }\n    /**\n     * Select optimal layout based on complexity score and area count.\n     */\n    selectOptimalLayout() {\n        if (!this.homeInfo || !this.layoutEngine)\n            return;\n        const complexityScore = this.homeInfo.complexityScore;\n        const areaCount = this.areas.size;\n        this.currentLayout = this.layoutEngine.selectLayout(complexityScore, areaCount);\n        // Update breakpoint\n        const containerWidth = this.offsetWidth || window.innerWidth;\n        this.currentBreakpoint = this.currentLayout.getBreakpoint(containerWidth);\n    }\n    /**\n     * Initialize widgets based on areas and layout.\n     */\n    async initializeWidgets() {\n        if (!this.layoutEngine || !this.currentLayout)\n            return;\n        // Organize widgets from areas\n        const areaInfos = Array.from(this.areas.values());\n        this.widgets = this.layoutEngine.organizeWidgets(areaInfos);\n        // Handle overflow\n        const { visible } = this.layoutEngine.handleOverflow(this.widgets, this.currentLayout, this.currentBreakpoint);\n        this.widgets = visible;\n        logger.info(`Initialized ${this.widgets.length} widgets`);\n        // Update subscriptions for visible entities\n        await this.updateVisibleSubscriptions();\n    }\n    /**\n     * Update subscriptions based on visible widgets.\n     */\n    async updateVisibleSubscriptions() {\n        if (!this._subscriptionManager)\n            return;\n        const visibleEntities = new Set();\n        for (const widget of this.widgets) {\n            for (const entity of widget.entities) {\n                visibleEntities.add(entity);\n            }\n        }\n        this._subscriptionManager.updateVisibleEntities(Array.from(visibleEntities));\n    }\n    /**\n     * Set up resize observer for responsive behavior.\n     */\n    setupResizeObserver() {\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === this) {\n                    this.handleResize(entry.contentRect.width);\n                }\n            }\n        });\n        resizeObserver.observe(this);\n    }\n    /**\n     * Handle container resize.\n     */\n    handleResize(width) {\n        if (!this.currentLayout)\n            return;\n        const breakpointChanged = this.currentLayout.updateContainerWidth(width);\n        if (breakpointChanged) {\n            this.currentBreakpoint = this.currentLayout.getBreakpoint();\n            this.requestUpdate();\n        }\n    }\n    /**\n     * Render the dashboard grid with widgets.\n     */\n    renderDashboard() {\n        if (!this.currentLayout || this.widgets.length === 0) {\n            return (0,lit/* html */.qy) `\n        <div class=\"dashboard-loading\">\n          <p>Setting up your dashboard...</p>\n        </div>\n      `;\n        }\n        const gridCSS = this.currentLayout.generateGridCSS(this.currentBreakpoint);\n        const positions = this.layoutEngine.calculatePositions(this.widgets, this.areas.size);\n        return (0,lit/* html */.qy) `\n      <div class=\"dashboard-grid\" style=\"${gridCSS}\">\n        ${positions.map(pos => {\n            const widget = this.widgets.find(w => this.getWidgetId(w) === pos.widgetId);\n            if (!widget)\n                return '';\n            return this.renderWidget(widget, pos);\n        })}\n      </div>\n    `;\n    }\n    /**\n     * Render a single widget.\n     */\n    renderWidget(widget, position) {\n        const style = `\n      grid-area: ${position.gridArea};\n      ${position.gridColumn ? `grid-column: ${position.gridColumn};` : ''}\n      ${position.gridRow ? `grid-row: ${position.gridRow};` : ''}\n    `;\n        switch (widget.type) {\n            case 'room':\n                const area = Array.from(this.areas.values()).find(a => a.entities.some(e => widget.entities.includes(e)));\n                return (0,lit/* html */.qy) `\n          <div class=\"widget-container\" style=\"${style}\">\n            <dashview-room-widget\n              .hass=${this.hass}\n              .widgetConfig=${widget}\n              .areaId=${area?.areaId}\n              .areaName=${area?.name || widget.title}\n            ></dashview-room-widget>\n          </div>\n        `;\n            // TODO: Add other widget types when implemented\n            default:\n                return (0,lit/* html */.qy) `\n          <div class=\"widget-container\" style=\"${style}\">\n            <div class=\"dashview-card\">\n              <p>Widget type '${widget.type}' not implemented yet</p>\n            </div>\n          </div>\n        `;\n        }\n    }\n    /**\n     * Generate widget ID.\n     */\n    getWidgetId(widget) {\n        const firstEntity = widget.entities[0] || 'unknown';\n        return `${widget.type}-${firstEntity.replace(/\\./g, '_')}`;\n    }\n    /**\n     * Clean up resources.\n     */\n    cleanup() {\n        if (this._subscriptionManager) {\n            this._subscriptionManager.clear();\n        }\n        if (this._stateManager) {\n            this._stateManager.clear();\n        }\n    }\n};\nDashviewDashboard.styles = [\n    dashviewTheme,\n    dashviewStyles,\n    (0,lit/* css */.AH) `\n      :host {\n        display: block;\n        height: 100%;\n        width: 100%;\n      }\n\n      .welcome-header {\n        text-align: center;\n        margin-bottom: var(--dashview-spacing-xl);\n      }\n\n      .welcome-title {\n        font-size: 2.5rem;\n        font-weight: 300;\n        color: var(--dashview-primary-text-color);\n        margin: 0 0 var(--dashview-spacing-sm);\n      }\n\n      .welcome-subtitle {\n        font-size: 1.2rem;\n        color: var(--dashview-secondary-text-color);\n        margin: 0;\n      }\n\n      .info-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: var(--dashview-spacing-md);\n        margin-top: var(--dashview-spacing-xl);\n      }\n\n      .info-card {\n        background: var(--dashview-card-background);\n        border-radius: var(--dashview-border-radius);\n        padding: var(--dashview-spacing-lg);\n        text-align: center;\n        box-shadow: var(--dashview-box-shadow);\n        transition: transform 0.2s ease;\n      }\n\n      .info-card:hover {\n        transform: translateY(-2px);\n      }\n\n      .info-value {\n        font-size: 3rem;\n        font-weight: 300;\n        color: var(--primary-color);\n        margin: 0;\n      }\n\n      .info-label {\n        font-size: 1rem;\n        color: var(--dashview-secondary-text-color);\n        margin: var(--dashview-spacing-sm) 0 0;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .complexity-meter {\n        width: 100%;\n        height: 20px;\n        background: var(--divider-color);\n        border-radius: 10px;\n        margin-top: var(--dashview-spacing-md);\n        overflow: hidden;\n      }\n\n      .complexity-fill {\n        height: 100%;\n        background: linear-gradient(90deg, \n          var(--success-color) 0%, \n          var(--warning-color) 50%, \n          var(--error-color) 100%\n        );\n        transition: width 0.5s ease;\n      }\n\n      .areas-list {\n        display: flex;\n        flex-wrap: wrap;\n        gap: var(--dashview-spacing-sm);\n        margin-top: var(--dashview-spacing-md);\n      }\n\n      .area-tag {\n        background: var(--primary-color);\n        color: var(--text-primary-color, white);\n        padding: var(--dashview-spacing-xs) var(--dashview-spacing-sm);\n        border-radius: var(--dashview-border-radius);\n        font-size: 0.9rem;\n      }\n\n      .loading-spinner {\n        animation: spin 1s linear infinite;\n        width: 48px;\n        height: 48px;\n        border: 3px solid var(--divider-color);\n        border-top-color: var(--primary-color);\n        border-radius: 50%;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Dashboard grid layout */\n      .dashboard-grid {\n        display: grid;\n        height: 100%;\n        width: 100%;\n        overflow: auto;\n      }\n\n      .widget-container {\n        position: relative;\n        min-height: 200px;\n      }\n\n      /* Loading state for dashboard mode */\n      .dashboard-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        flex-direction: column;\n        gap: var(--dashview-spacing-md);\n      }\n\n      .dashboard-loading p {\n        color: var(--dashview-secondary-text-color);\n      }\n    `,\n];\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"loading\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"error\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"homeInfo\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"wsConnection\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"layoutEngine\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"currentLayout\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Array)\n], DashviewDashboard.prototype, \"widgets\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"currentBreakpoint\", void 0);\n(0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* state */.wk)(),\n    (0,tslib_es6/* __metadata */.Sn)(\"design:type\", typeof (_d = typeof Map !== \"undefined\" && Map) === \"function\" ? _d : Object)\n], DashviewDashboard.prototype, \"areas\", void 0);\nDashviewDashboard = (0,tslib_es6/* __decorate */.Cg)([\n    (0,decorators/* customElement */.EM)('dashview-dashboard')\n], DashviewDashboard);\n\n\n;// ./src/panel-entry.ts\n/**\n * Home Assistant Panel Entry Point\n * This file creates the proper panel structure that Home Assistant expects\n */\n\n\n// Set up logger based on environment\nif (false) // removed by dead control flow\n{}\n// Export version for debugging\nconst DASHVIEW_VERSION = '0.2.6';\n/**\n * Create Home Assistant panel function\n * This is the function that Home Assistant will call to create the panel\n */\nfunction createDashviewPanel(hass, narrow, route, panel) {\n    logger.info(`Creating Dashview V2 Panel v${DASHVIEW_VERSION}`);\n    // Create container element\n    const container = document.createElement('div');\n    container.style.cssText = `\n    height: 100vh;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    background: var(--primary-background-color);\n  `;\n    // Create dashboard element\n    const dashboard = document.createElement('dashview-dashboard');\n    dashboard.hass = hass;\n    dashboard.narrow = narrow;\n    dashboard.route = route;\n    dashboard.panel = panel;\n    // Style the dashboard to fill the container\n    dashboard.style.cssText = `\n    flex: 1;\n    width: 100%;\n    height: 100%;\n  `;\n    // Add dashboard to container\n    container.appendChild(dashboard);\n    // Return object with required methods\n    return {\n        render: () => container,\n        update: (newHass, newNarrow, newRoute) => {\n            dashboard.hass = newHass;\n            dashboard.narrow = newNarrow;\n            dashboard.route = newRoute;\n        },\n        destroy: () => {\n            if (container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n        }\n    };\n}\n// Verify dashboard element is registered\nconst dashboardElement = customElements.get('dashview-dashboard');\nif (dashboardElement) {\n    logger.info('Dashview V2 dashboard element registered successfully');\n}\nelse {\n    logger.error('Failed to register dashview-dashboard element');\n}\n// Set up global error handler for debugging\nwindow.addEventListener('error', (event) => {\n    logger.error('Global error:', event.error);\n});\n// Set up unhandled rejection handler\nwindow.addEventListener('unhandledrejection', (event) => {\n    logger.error('Unhandled promise rejection:', event.reason);\n});\n// Log initialization\nlogger.info(`Dashview V2 Panel Entry v${DASHVIEW_VERSION} initialized`);\n// Export the panel creation function as default\n/* harmony default export */ const panel_entry = (createDashviewPanel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUUsRUFBRTtJQUN6QyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0MsQ0FBQyxDQUFDLENBQUM7QUFFSCxxQ0FBcUM7QUFDckMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7SUFDdEQsTUFBTSxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0QsQ0FBQyxDQUFDLENBQUM7QUFFSCxxQkFBcUI7QUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsZ0JBQWdCLGNBQWMsQ0FBQyxDQUFDO0FBRXhFLGdEQUFnRDtBQUNoRCxrREFBZSxtQkFBbUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvY29yZS9iYXNlLWVsZW1lbnQudHM/YjVkNyIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL2NvcmUvd2Vic29ja2V0LWNvbm5lY3Rpb24udHM/ZDJmMyIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3V0aWxzL2xvZ2dlci50cz84ZDZhIiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvY29yZS9zdGF0ZS1tYW5hZ2VyLnRzPzcyY2YiLCJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9jb3JlL3N1YnNjcmlwdGlvbi1tYW5hZ2VyLnRzPzk3MWIiLCJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9sYXlvdXRzL2Jhc2UtbGF5b3V0LnRzP2ViNzkiLCJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9sYXlvdXRzL3N0YW5kYXJkLWxheW91dC50cz9lN2JhIiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvbGF5b3V0cy9sYXlvdXQtZW5naW5lLnRzPzM1YzEiLCJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9zdHlsZXMvdGhlbWUudHM/OTRjZSIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3V0aWxzL2dlc3R1cmVzLnRzPzE3ZGQiLCJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9zdHlsZXMvYW5pbWF0aW9ucy50cz9hMzVkIiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvY29yZS93aWRnZXQtYmFzZS50cz9hNWQ0Iiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvdXRpbHMvaWNvbnMudHM/ZTc4ZiIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3dpZGdldHMvcm9vbS13aWRnZXQudHM/YTAxZSIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3dpZGdldHMvZGV2aWNlLWdyb3VwLXdpZGdldC50cz82ZDQyIiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvd2lkZ2V0cy9jbGltYXRlLXdpZGdldC50cz8zYjAxIiwid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvd2lkZ2V0cy9xdWljay1jb250cm9scy13aWRnZXQudHM/N2ZmNyIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL2Rhc2hib2FyZC9kYXNodmlldy1kYXNoYm9hcmQudHM/YmI2NyIsIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3BhbmVsLWVudHJ5LnRzP2ZlYzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGl0RWxlbWVudCwgUHJvcGVydHlWYWx1ZXMgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgdHlwZSB7IERhc2h2aWV3Q29uZmlnLCBIb21lQXNzaXN0YW50IH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEYXNodmlld0Jhc2VFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IE9iamVjdCB9KSBjb25maWchOiBEYXNodmlld0NvbmZpZztcbiAgXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5oYXNzKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Rhc2h2aWV3QmFzZUVsZW1lbnQ6IGhhc3Mgb2JqZWN0IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLnNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGNhbGxXZWJTb2NrZXQ8VD4oY29tbWFuZDogc3RyaW5nLCBkYXRhPzogYW55KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLmhhc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSG9tZSBBc3Npc3RhbnQgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaGFzcy5jYWxsV1M8VD4oe1xuICAgICAgICB0eXBlOiBgZGFzaHZpZXdfdjIvJHtjb21tYW5kfWAsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFdlYlNvY2tldCBjYWxsIGZhaWxlZCBmb3IgJHtjb21tYW5kfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBbRGFzaHZpZXcgVjJdIEVycm9yIGluICR7Y29udGV4dH06YCwgZXJyb3IpO1xuICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIGNhbiBzaG93IHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZXMgaGVyZVxuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBjb25zb2xlLmxvZygnRGFzaHZpZXdCYXNlRWxlbWVudCBjb25uZWN0ZWQnKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgY29uc29sZS5sb2coJ0Rhc2h2aWV3QmFzZUVsZW1lbnQgZGlzY29ubmVjdGVkJyk7XG4gIH1cbn0iLCJpbXBvcnQgdHlwZSB7IEhvbWVBc3Npc3RhbnQsIEhvbWVJbmZvIH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRDb25uZWN0aW9uIHtcbiAgcHJpdmF0ZSBoYXNzOiBIb21lQXNzaXN0YW50O1xuXG4gIGNvbnN0cnVjdG9yKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICB0aGlzLmhhc3MgPSBoYXNzO1xuICB9XG5cbiAgYXN5bmMgZ2V0SG9tZUluZm8oKTogUHJvbWlzZTxIb21lSW5mbz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmhhc3MuY2FsbFdTPEhvbWVJbmZvPih7XG4gICAgICAgIHR5cGU6ICdkYXNodmlld192Mi9nZXRfaG9tZV9pbmZvJyxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBob21lIGluZm86JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMoXG4gICAgY2FsbGJhY2s6IChldmVudDogYW55KSA9PiB2b2lkLFxuICAgIGVudGl0eUlkcz86IHN0cmluZ1tdXG4gICk6IFByb21pc2U8KCkgPT4gdm9pZD4ge1xuICAgIGlmICghdGhpcy5oYXNzLmNvbm5lY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gYXdhaXQgdGhpcy5oYXNzLmNvbm5lY3Rpb24uc3Vic2NyaWJlRXZlbnRzKFxuICAgICAgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKCFlbnRpdHlJZHMgfHwgZW50aXR5SWRzLmluY2x1ZGVzKGV2ZW50LmRhdGEuZW50aXR5X2lkKSkge1xuICAgICAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdGF0ZV9jaGFuZ2VkJ1xuICAgICk7XG5cbiAgICByZXR1cm4gdW5zdWJzY3JpYmUgYXMgKCkgPT4gdm9pZDtcbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuaGFzcyAmJiAhIXRoaXMuaGFzcy5jb25uZWN0aW9uO1xuICB9XG59IiwiZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xuICBERUJVRyA9IDAsXG4gIElORk8gPSAxLFxuICBXQVJOID0gMixcbiAgRVJST1IgPSAzLFxufVxuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IExvZ2dlcjtcbiAgcHJpdmF0ZSBsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xuICBwcml2YXRlIHByZWZpeCA9ICdbRGFzaHZpZXcgVjJdJztcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRldmVsb3BtZW50IG1vZGVcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIHRoaXMubGV2ZWwgPSBMb2dMZXZlbC5ERUJVRztcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogTG9nZ2VyIHtcbiAgICBpZiAoIUxvZ2dlci5pbnN0YW5jZSkge1xuICAgICAgTG9nZ2VyLmluc3RhbmNlID0gbmV3IExvZ2dlcigpO1xuICAgIH1cbiAgICByZXR1cm4gTG9nZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgc2V0TGV2ZWwobGV2ZWw6IExvZ0xldmVsKTogdm9pZCB7XG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICB9XG5cbiAgZGVidWcoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgY29uc29sZS5kZWJ1Zyh0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgaW5mbyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxldmVsIDw9IExvZ0xldmVsLklORk8pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyh0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgd2FybiguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgIGNvbnNvbGUud2Fybih0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgY29uc29sZS5lcnJvcih0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoKTsiLCIvKipcbiAqIFN0YXRlIG1hbmFnZW1lbnQgZm9yIERhc2h2aWV3IFYyIGRhc2hib2FyZC5cbiAqIEhhbmRsZXMgZWZmaWNpZW50IHN0YXRlIHVwZGF0ZXMgd2l0aCBkaWZmaW5nIGFuZCBiYXRjaGluZy5cbiAqL1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignU3RhdGVNYW5hZ2VyJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVVcGRhdGUge1xuICBlbnRpdHlJZDogc3RyaW5nO1xuICBzdGF0ZTogYW55O1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZURpZmYge1xuICB0eXBlOiAnYWRkZWQnIHwgJ2NoYW5nZWQnIHwgJ3JlbW92ZWQnO1xuICBlbnRpdHlJZDogc3RyaW5nO1xuICBvbGRTdGF0ZT86IGFueTtcbiAgbmV3U3RhdGU/OiBhbnk7XG4gIGNoYW5nZWRQcm9wcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlTWFuYWdlckNvbmZpZyB7XG4gIGJhdGNoSW50ZXJ2YWw/OiBudW1iZXI7ICAvLyBNaWxsaXNlY29uZHMgdG8gYmF0Y2ggdXBkYXRlcyAoZGVmYXVsdDogMTZtcyBmb3IgNjBmcHMpXG4gIG1heEJhdGNoU2l6ZT86IG51bWJlcjsgICAvLyBNYXhpbXVtIHVwZGF0ZXMgcGVyIGJhdGNoIChkZWZhdWx0OiAxMDApXG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZU1hbmFnZXIge1xuICBwcml2YXRlIHVwZGF0ZVF1ZXVlOiBTdGF0ZVVwZGF0ZVtdID0gW107XG4gIHByaXZhdGUgcmFmSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3RTdGF0ZTogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIFNldDwoZGlmZjogU3RhdGVEaWZmKSA9PiB2b2lkPj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZ2xvYmFsTGlzdGVuZXJzOiBTZXQ8KGRpZmZzOiBTdGF0ZURpZmZbXSkgPT4gdm9pZD4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgY29uZmlnOiBSZXF1aXJlZDxTdGF0ZU1hbmFnZXJDb25maWc+O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU3RhdGVNYW5hZ2VyQ29uZmlnID0ge30pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGJhdGNoSW50ZXJ2YWw6IGNvbmZpZy5iYXRjaEludGVydmFsID8/IDE2LCAgLy8gNjBmcHNcbiAgICAgIG1heEJhdGNoU2l6ZTogY29uZmlnLm1heEJhdGNoU2l6ZSA/PyAxMDAsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlIGRpZmZlcmVuY2VzIGJldHdlZW4gb2xkIGFuZCBuZXcgc3RhdGUuXG4gICAqL1xuICBjb21wdXRlU3RhdGVEaWZmKGVudGl0eUlkOiBzdHJpbmcsIG5ld1N0YXRlOiBhbnkpOiBTdGF0ZURpZmYgfCBudWxsIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMubGFzdFN0YXRlLmdldChlbnRpdHlJZCk7XG4gICAgXG4gICAgaWYgKCFvbGRTdGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FkZGVkJyxcbiAgICAgICAgZW50aXR5SWQsXG4gICAgICAgIG5ld1N0YXRlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBRdWljayBlcXVhbGl0eSBjaGVja1xuICAgIGlmIChvbGRTdGF0ZS5zdGF0ZSA9PT0gbmV3U3RhdGUuc3RhdGUgJiYgXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZFN0YXRlLmF0dHJpYnV0ZXMpID09PSBKU09OLnN0cmluZ2lmeShuZXdTdGF0ZS5hdHRyaWJ1dGVzKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gRmluZCBjaGFuZ2VkIHByb3BlcnRpZXNcbiAgICBjb25zdCBjaGFuZ2VkUHJvcHMgPSB0aGlzLmdldENoYW5nZWRQcm9wcyhvbGRTdGF0ZSwgbmV3U3RhdGUpO1xuICAgIFxuICAgIGlmIChjaGFuZ2VkUHJvcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NoYW5nZWQnLFxuICAgICAgZW50aXR5SWQsXG4gICAgICBvbGRTdGF0ZSxcbiAgICAgIG5ld1N0YXRlLFxuICAgICAgY2hhbmdlZFByb3BzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3Qgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIGJldHdlZW4gc3RhdGVzLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRDaGFuZ2VkUHJvcHMob2xkU3RhdGU6IGFueSwgbmV3U3RhdGU6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjaGFuZ2VkOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgbWFpbiBzdGF0ZVxuICAgIGlmIChvbGRTdGF0ZS5zdGF0ZSAhPT0gbmV3U3RhdGUuc3RhdGUpIHtcbiAgICAgIGNoYW5nZWQucHVzaCgnc3RhdGUnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBhdHRyaWJ1dGVzXG4gICAgY29uc3Qgb2xkQXR0cnMgPSBvbGRTdGF0ZS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAgIGNvbnN0IG5ld0F0dHJzID0gbmV3U3RhdGUuYXR0cmlidXRlcyB8fCB7fTtcbiAgICBjb25zdCBhbGxLZXlzID0gbmV3IFNldChbLi4uT2JqZWN0LmtleXMob2xkQXR0cnMpLCAuLi5PYmplY3Qua2V5cyhuZXdBdHRycyldKTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGFsbEtleXMpIHtcbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShvbGRBdHRyc1trZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3QXR0cnNba2V5XSkpIHtcbiAgICAgICAgY2hhbmdlZC5wdXNoKGBhdHRyaWJ1dGVzLiR7a2V5fWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGxhc3RfY2hhbmdlZCBhbmQgbGFzdF91cGRhdGVkXG4gICAgaWYgKG9sZFN0YXRlLmxhc3RfY2hhbmdlZCAhPT0gbmV3U3RhdGUubGFzdF9jaGFuZ2VkKSB7XG4gICAgICBjaGFuZ2VkLnB1c2goJ2xhc3RfY2hhbmdlZCcpO1xuICAgIH1cbiAgICBpZiAob2xkU3RhdGUubGFzdF91cGRhdGVkICE9PSBuZXdTdGF0ZS5sYXN0X3VwZGF0ZWQpIHtcbiAgICAgIGNoYW5nZWQucHVzaCgnbGFzdF91cGRhdGVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZWQ7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2ggc3RhdGUgdXBkYXRlcyBmb3IgZWZmaWNpZW50IHJlbmRlcmluZy5cbiAgICovXG4gIGJhdGNoVXBkYXRlKHVwZGF0ZXM6IFN0YXRlVXBkYXRlW10pOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVF1ZXVlLnB1c2goLi4udXBkYXRlcyk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlIHRvbyBtYW55IHVwZGF0ZXMsIHByb2Nlc3MgaW1tZWRpYXRlbHlcbiAgICBpZiAodGhpcy51cGRhdGVRdWV1ZS5sZW5ndGggPj0gdGhpcy5jb25maWcubWF4QmF0Y2hTaXplKSB7XG4gICAgICB0aGlzLnByb2Nlc3NCYXRjaCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSwgc2NoZWR1bGUgcHJvY2Vzc2luZ1xuICAgIGlmICghdGhpcy5yYWZJZCkge1xuICAgICAgdGhpcy5yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0JhdGNoKCk7XG4gICAgICAgIHRoaXMucmFmSWQgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBzaW5nbGUgc3RhdGUgdXBkYXRlIGltbWVkaWF0ZWx5LlxuICAgKi9cbiAgdXBkYXRlU3RhdGUoZW50aXR5SWQ6IHN0cmluZywgbmV3U3RhdGU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuYmF0Y2hVcGRhdGUoW3tcbiAgICAgIGVudGl0eUlkLFxuICAgICAgc3RhdGU6IG5ld1N0YXRlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH1dKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGFsbCBiYXRjaGVkIHVwZGF0ZXMuXG4gICAqL1xuICBwcml2YXRlIHByb2Nlc3NCYXRjaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51cGRhdGVRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCB1cGRhdGVNYXAgPSBuZXcgTWFwPHN0cmluZywgU3RhdGVVcGRhdGU+KCk7XG4gICAgY29uc3QgZGlmZnM6IFN0YXRlRGlmZltdID0gW107XG5cbiAgICAvLyBEZWR1cGxpY2F0ZSB1cGRhdGVzIChrZWVwIGxhdGVzdCBmb3IgZWFjaCBlbnRpdHkpXG4gICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdGhpcy51cGRhdGVRdWV1ZSkge1xuICAgICAgdXBkYXRlTWFwLnNldCh1cGRhdGUuZW50aXR5SWQsIHVwZGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyBlYWNoIHVuaXF1ZSB1cGRhdGVcbiAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgdXBkYXRlXSBvZiB1cGRhdGVNYXApIHtcbiAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmNvbXB1dGVTdGF0ZURpZmYoZW50aXR5SWQsIHVwZGF0ZS5zdGF0ZSk7XG4gICAgICBcbiAgICAgIGlmIChkaWZmKSB7XG4gICAgICAgIGRpZmZzLnB1c2goZGlmZik7XG4gICAgICAgIHRoaXMubGFzdFN0YXRlLnNldChlbnRpdHlJZCwgdXBkYXRlLnN0YXRlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5vdGlmeSBlbnRpdHktc3BlY2lmaWMgbGlzdGVuZXJzXG4gICAgICAgIGNvbnN0IGVudGl0eUxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzLmdldChlbnRpdHlJZCk7XG4gICAgICAgIGlmIChlbnRpdHlMaXN0ZW5lcnMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIGVudGl0eUxpc3RlbmVycykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbGlzdGVuZXIoZGlmZik7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGluIGVudGl0eSBsaXN0ZW5lciBmb3IgJHtlbnRpdHlJZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdGlmeSBnbG9iYWwgbGlzdGVuZXJzXG4gICAgaWYgKGRpZmZzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5nbG9iYWxMaXN0ZW5lcnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsaXN0ZW5lcihkaWZmcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBnbG9iYWwgc3RhdGUgbGlzdGVuZXI6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgcXVldWVcbiAgICB0aGlzLnVwZGF0ZVF1ZXVlID0gW107XG5cbiAgICAvLyBMb2cgcGVyZm9ybWFuY2VcbiAgICBjb25zdCBwcm9jZXNzaW5nVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgIGlmIChwcm9jZXNzaW5nVGltZSA+IHRoaXMuY29uZmlnLmJhdGNoSW50ZXJ2YWwpIHtcbiAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICBgQmF0Y2ggcHJvY2Vzc2luZyB0b29rICR7cHJvY2Vzc2luZ1RpbWUudG9GaXhlZCgyKX1tcyBmb3IgJHt1cGRhdGVNYXAuc2l6ZX0gdXBkYXRlc2BcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byBzdGF0ZSBjaGFuZ2VzIGZvciBhIHNwZWNpZmljIGVudGl0eS5cbiAgICovXG4gIHN1YnNjcmliZVRvRW50aXR5KFxuICAgIGVudGl0eUlkOiBzdHJpbmcsIFxuICAgIGNhbGxiYWNrOiAoZGlmZjogU3RhdGVEaWZmKSA9PiB2b2lkXG4gICk6ICgpID0+IHZvaWQge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnMuaGFzKGVudGl0eUlkKSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGVudGl0eUlkLCBuZXcgU2V0KCkpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmxpc3RlbmVycy5nZXQoZW50aXR5SWQpIS5hZGQoY2FsbGJhY2spO1xuXG4gICAgLy8gUmV0dXJuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzLmdldChlbnRpdHlJZCk7XG4gICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVycy5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgICBpZiAobGlzdGVuZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUoZW50aXR5SWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYWxsIHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBzdWJzY3JpYmVUb0FsbChjYWxsYmFjazogKGRpZmZzOiBTdGF0ZURpZmZbXSkgPT4gdm9pZCk6ICgpID0+IHZvaWQge1xuICAgIHRoaXMuZ2xvYmFsTGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG5cbiAgICAvLyBSZXR1cm4gdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHN0YXRlIGZvciBhbiBlbnRpdHkuXG4gICAqL1xuICBnZXRTdGF0ZShlbnRpdHlJZDogc3RyaW5nKTogYW55IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5sYXN0U3RhdGUuZ2V0KGVudGl0eUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGN1cnJlbnQgc3RhdGVzLlxuICAgKi9cbiAgZ2V0QWxsU3RhdGVzKCk6IE1hcDxzdHJpbmcsIGFueT4ge1xuICAgIHJldHVybiBuZXcgTWFwKHRoaXMubGFzdFN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHN0YXRlIGZyb20gSG9tZSBBc3Npc3RhbnQuXG4gICAqL1xuICBpbml0aWFsaXplRnJvbUhhc3MoaGFzczogSG9tZUFzc2lzdGFudCk6IHZvaWQge1xuICAgIGNvbnN0IHVwZGF0ZXM6IFN0YXRlVXBkYXRlW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVdIG9mIE9iamVjdC5lbnRyaWVzKGhhc3Muc3RhdGVzKSkge1xuICAgICAgdXBkYXRlcy5wdXNoKHtcbiAgICAgICAgZW50aXR5SWQsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmJhdGNoVXBkYXRlKHVwZGF0ZXMpO1xuICAgIGxvZ2dlci5pbmZvKGBJbml0aWFsaXplZCBzdGF0ZSBmb3IgJHt1cGRhdGVzLmxlbmd0aH0gZW50aXRpZXNgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgc3RhdGUgYW5kIGxpc3RlbmVycy5cbiAgICovXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJhZklkKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZklkKTtcbiAgICAgIHRoaXMucmFmSWQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlUXVldWUgPSBbXTtcbiAgICB0aGlzLmxhc3RTdGF0ZS5jbGVhcigpO1xuICAgIHRoaXMubGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5nbG9iYWxMaXN0ZW5lcnMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RhdGlzdGljcyBhYm91dCB0aGUgc3RhdGUgbWFuYWdlci5cbiAgICovXG4gIGdldFN0YXRzKCk6IHtcbiAgICBlbnRpdHlDb3VudDogbnVtYmVyO1xuICAgIGxpc3RlbmVyQ291bnQ6IG51bWJlcjtcbiAgICBxdWV1ZVNpemU6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVudGl0eUNvdW50OiB0aGlzLmxhc3RTdGF0ZS5zaXplLFxuICAgICAgbGlzdGVuZXJDb3VudDogdGhpcy5saXN0ZW5lcnMuc2l6ZSArIHRoaXMuZ2xvYmFsTGlzdGVuZXJzLnNpemUsXG4gICAgICBxdWV1ZVNpemU6IHRoaXMudXBkYXRlUXVldWUubGVuZ3RoLFxuICAgIH07XG4gIH1cbn0iLCIvKipcbiAqIFN1YnNjcmlwdGlvbiBtYW5hZ2VyIGZvciBzbWFydCBlbnRpdHkgc3Vic2NyaXB0aW9ucy5cbiAqIE9ubHkgc3Vic2NyaWJlcyB0byB2aXNpYmxlIGVudGl0aWVzIHRvIG9wdGltaXplIHBlcmZvcm1hbmNlLlxuICovXG5cbmltcG9ydCB7IFdlYlNvY2tldENvbm5lY3Rpb24gfSBmcm9tICcuL3dlYnNvY2tldC1jb25uZWN0aW9uJztcbmltcG9ydCB7IFN0YXRlTWFuYWdlciB9IGZyb20gJy4vc3RhdGUtbWFuYWdlcic7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInO1xuaW1wb3J0IHR5cGUgeyBIb21lQXNzaXN0YW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdTdWJzY3JpcHRpb25NYW5hZ2VyJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uQ29uZmlnIHtcbiAgZGVib3VuY2VEZWxheT86IG51bWJlcjsgIC8vIE1pbGxpc2Vjb25kcyB0byBkZWJvdW5jZSB2aXNpYmlsaXR5IGNoYW5nZXNcbiAgbWF4U3Vic2NyaXB0aW9ucz86IG51bWJlcjsgIC8vIE1heGltdW0gY29uY3VycmVudCBzdWJzY3JpcHRpb25zXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uUmVzdWx0IHtcbiAgc3Vic2NyaWJlZDogc3RyaW5nW107XG4gIHVuc3Vic2NyaWJlZDogc3RyaW5nW107XG4gIGZhaWxlZDogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ6IFdlYlNvY2tldENvbm5lY3Rpb247XG4gIHByaXZhdGUgc3RhdGVNYW5hZ2VyOiBTdGF0ZU1hbmFnZXI7XG4gIHByaXZhdGUgdmlzaWJsZUVudGl0aWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBzdWJzY3JpYmVkRW50aXRpZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGRlYm91bmNlVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogUmVxdWlyZWQ8U3Vic2NyaXB0aW9uQ29uZmlnPjtcbiAgcHJpdmF0ZSB1bnN1YnNjcmliZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHdlYnNvY2tldDogV2ViU29ja2V0Q29ubmVjdGlvbixcbiAgICBzdGF0ZU1hbmFnZXI6IFN0YXRlTWFuYWdlcixcbiAgICBjb25maWc6IFN1YnNjcmlwdGlvbkNvbmZpZyA9IHt9XG4gICkge1xuICAgIHRoaXMud2Vic29ja2V0ID0gd2Vic29ja2V0O1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gc3RhdGVNYW5hZ2VyO1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZGVib3VuY2VEZWxheTogY29uZmlnLmRlYm91bmNlRGVsYXkgPz8gMzAwLFxuICAgICAgbWF4U3Vic2NyaXB0aW9uczogY29uZmlnLm1heFN1YnNjcmlwdGlvbnMgPz8gNTAwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBsaXN0IG9mIHZpc2libGUgZW50aXRpZXMuXG4gICAqIFRoaXMgd2lsbCB0cmlnZ2VyIHN1YnNjcmlwdGlvbiB1cGRhdGVzIGFmdGVyIGRlYm91bmNpbmcuXG4gICAqL1xuICB1cGRhdGVWaXNpYmxlRW50aXRpZXMoZW50aXRpZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3QgbmV3VmlzaWJsZSA9IG5ldyBTZXQoZW50aXRpZXMpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYWN0dWFsbHkgYSBjaGFuZ2VcbiAgICBjb25zdCBoYXNDaGFuZ2VzID0gZW50aXRpZXMubGVuZ3RoICE9PSB0aGlzLnZpc2libGVFbnRpdGllcy5zaXplIHx8XG4gICAgICBlbnRpdGllcy5zb21lKGlkID0+ICF0aGlzLnZpc2libGVFbnRpdGllcy5oYXMoaWQpKTtcbiAgICBcbiAgICBpZiAoIWhhc0NoYW5nZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdmlzaWJsZSBzZXRcbiAgICB0aGlzLnZpc2libGVFbnRpdGllcyA9IG5ld1Zpc2libGU7XG5cbiAgICAvLyBEZWJvdW5jZSB0aGUgc3luYyBvcGVyYXRpb25cbiAgICBpZiAodGhpcy5kZWJvdW5jZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVRpbWVyKTtcbiAgICB9XG5cbiAgICB0aGlzLmRlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNTdWJzY3JpcHRpb25zKCk7XG4gICAgICB0aGlzLmRlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH0sIHRoaXMuY29uZmlnLmRlYm91bmNlRGVsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bmMgc3Vic2NyaXB0aW9ucyB3aXRoIHRoZSBiYWNrZW5kLlxuICAgKiBTdWJzY3JpYmVzIHRvIG5ld2x5IHZpc2libGUgZW50aXRpZXMgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIGhpZGRlbiBvbmVzLlxuICAgKi9cbiAgYXN5bmMgc3luY1N1YnNjcmlwdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLndlYnNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICBsb2dnZXIud2FybignV2ViU29ja2V0IG5vdCBjb25uZWN0ZWQsIHNraXBwaW5nIHN1YnNjcmlwdGlvbiBzeW5jJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIExpbWl0IHN1YnNjcmlwdGlvbnMgaWYgbmVlZGVkXG4gICAgICBjb25zdCB0YXJnZXRFbnRpdGllcyA9IEFycmF5LmZyb20odGhpcy52aXNpYmxlRW50aXRpZXMpLnNsaWNlKDAsIHRoaXMuY29uZmlnLm1heFN1YnNjcmlwdGlvbnMpO1xuICAgICAgXG4gICAgICAvLyBDYWxsIGJhY2tlbmQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbnNcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2FsbFVwZGF0ZVN1YnNjcmlwdGlvbnModGFyZ2V0RW50aXRpZXMpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgbG9jYWwgdHJhY2tpbmdcbiAgICAgIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzID0gbmV3IFNldChbXG4gICAgICAgIC4uLnRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLFxuICAgICAgICAuLi5yZXN1bHQuc3Vic2NyaWJlZFxuICAgICAgXSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgcmVzdWx0LnVuc3Vic2NyaWJlZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5kZWxldGUoZW50aXR5SWQpO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgYFN1YnNjcmlwdGlvbiBzeW5jIGNvbXBsZXRlOiAke3Jlc3VsdC5zdWJzY3JpYmVkLmxlbmd0aH0gYWRkZWQsIGAgK1xuICAgICAgICBgJHtyZXN1bHQudW5zdWJzY3JpYmVkLmxlbmd0aH0gcmVtb3ZlZCwgJHt0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5zaXplfSB0b3RhbGBcbiAgICAgICk7XG5cbiAgICAgIC8vIExvZyBhbnkgZmFpbHVyZXNcbiAgICAgIGlmIChyZXN1bHQuZmFpbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBzdWJzY3JpYmUgdG8gJHtyZXN1bHQuZmFpbGVkLmxlbmd0aH0gZW50aXRpZXM6YCwgcmVzdWx0LmZhaWxlZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHN5bmMgc3Vic2NyaXB0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGJhY2tlbmQgV2ViU29ja2V0IGNvbW1hbmQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbnMuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNhbGxVcGRhdGVTdWJzY3JpcHRpb25zKGVudGl0aWVzOiBzdHJpbmdbXSk6IFByb21pc2U8U3Vic2NyaXB0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgaGFzcyA9ICh0aGlzLndlYnNvY2tldCBhcyBhbnkpLmhhc3MgYXMgSG9tZUFzc2lzdGFudDtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhc3MuY2FsbFdTPFN1YnNjcmlwdGlvblJlc3VsdD4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3VwZGF0ZV9zdWJzY3JpcHRpb25zJyxcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllcyxcbiAgICB9KTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gc3BlY2lmaWMgZW50aXRpZXMgaW1tZWRpYXRlbHkuXG4gICAqL1xuICBhc3luYyBzdWJzY3JpYmVUb0VudGl0aWVzKGVudGl0aWVzOiBzdHJpbmdbXSk6IFByb21pc2U8U3Vic2NyaXB0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgaGFzcyA9ICh0aGlzLndlYnNvY2tldCBhcyBhbnkpLmhhc3MgYXMgSG9tZUFzc2lzdGFudDtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhc3MuY2FsbFdTPHtcbiAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgICBzdWJzY3JpYmVkOiBzdHJpbmdbXTtcbiAgICAgIGZhaWxlZDogc3RyaW5nW107XG4gICAgfT4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3N1YnNjcmliZV92aXNpYmxlX2VudGl0aWVzJyxcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllcyxcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBsb2NhbCB0cmFja2luZ1xuICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgcmVzcG9uc2Uuc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuYWRkKGVudGl0eUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3Vic2NyaWJlZDogcmVzcG9uc2Uuc3Vic2NyaWJlZCxcbiAgICAgIHVuc3Vic2NyaWJlZDogW10sXG4gICAgICBmYWlsZWQ6IHJlc3BvbnNlLmZhaWxlZCB8fCBbXSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gc3BlY2lmaWMgZW50aXRpZXMgaW1tZWRpYXRlbHkuXG4gICAqL1xuICBhc3luYyB1bnN1YnNjcmliZUZyb21FbnRpdGllcyhlbnRpdGllczogc3RyaW5nW10pOiBQcm9taXNlPFN1YnNjcmlwdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGhhc3MgPSAodGhpcy53ZWJzb2NrZXQgYXMgYW55KS5oYXNzIGFzIEhvbWVBc3Npc3RhbnQ7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYXNzLmNhbGxXUzx7XG4gICAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgICAgdW5zdWJzY3JpYmVkOiBzdHJpbmdbXTtcbiAgICAgIGZhaWxlZDogc3RyaW5nW107XG4gICAgfT4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3Vuc3Vic2NyaWJlX2hpZGRlbl9lbnRpdGllcycsXG4gICAgICBlbnRpdGllczogZW50aXRpZXMsXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgbG9jYWwgdHJhY2tpbmdcbiAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHJlc3BvbnNlLnVuc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuZGVsZXRlKGVudGl0eUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3Vic2NyaWJlZDogW10sXG4gICAgICB1bnN1YnNjcmliZWQ6IHJlc3BvbnNlLnVuc3Vic2NyaWJlZCxcbiAgICAgIGZhaWxlZDogcmVzcG9uc2UuZmFpbGVkIHx8IFtdLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzLlxuICAgKiBUaGlzIHNldHMgdXAgdGhlIFdlYlNvY2tldCBldmVudCBsaXN0ZW5lciBmb3Igc3RhdGUgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIHN0YXJ0TGlzdGVuaW5nKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0FscmVhZHkgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNldCB1cCBXZWJTb2NrZXQgZXZlbnQgbGlzdGVuZXJcbiAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gYXdhaXQgdGhpcy53ZWJzb2NrZXQuc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMoXG4gICAgICAgIChldmVudCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudC5ldmVudF90eXBlID09PSAnc3RhdGVfY2hhbmdlZCcgJiYgZXZlbnQuZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgeyBlbnRpdHlfaWQsIG5ld19zdGF0ZSB9ID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIGlmIHdlJ3JlIHN1YnNjcmliZWQgdG8gdGhpcyBlbnRpdHlcbiAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5oYXMoZW50aXR5X2lkKSAmJiBuZXdfc3RhdGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlU3RhdGUoZW50aXR5X2lkLCBuZXdfc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ1N0YXJ0ZWQgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHN0YXJ0IGxpc3RlbmluZzonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBzdG9wTGlzdGVuaW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcikge1xuICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIoKTtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gbnVsbDtcbiAgICAgIGxvZ2dlci5pbmZvKCdTdG9wcGVkIGxpc3RlbmluZyBmb3Igc3RhdGUgY2hhbmdlcycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbGlzdCBvZiBzdWJzY3JpYmVkIGVudGl0aWVzLlxuICAgKi9cbiAgZ2V0U3Vic2NyaWJlZEVudGl0aWVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnN1YnNjcmliZWRFbnRpdGllcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGxpc3Qgb2YgdmlzaWJsZSBlbnRpdGllcy5cbiAgICovXG4gIGdldFZpc2libGVFbnRpdGllcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy52aXNpYmxlRW50aXRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVudGl0eSBpcyBjdXJyZW50bHkgc3Vic2NyaWJlZC5cbiAgICovXG4gIGlzU3Vic2NyaWJlZChlbnRpdHlJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLmhhcyhlbnRpdHlJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN1YnNjcmlwdGlvbiBzdGF0aXN0aWNzLlxuICAgKi9cbiAgZ2V0U3RhdHMoKToge1xuICAgIHZpc2libGVDb3VudDogbnVtYmVyO1xuICAgIHN1YnNjcmliZWRDb3VudDogbnVtYmVyO1xuICAgIG1heFN1YnNjcmlwdGlvbnM6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpc2libGVDb3VudDogdGhpcy52aXNpYmxlRW50aXRpZXMuc2l6ZSxcbiAgICAgIHN1YnNjcmliZWRDb3VudDogdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuc2l6ZSxcbiAgICAgIG1heFN1YnNjcmlwdGlvbnM6IHRoaXMuY29uZmlnLm1heFN1YnNjcmlwdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgc3Vic2NyaXB0aW9ucyBhbmQgc3RvcCBsaXN0ZW5pbmcuXG4gICAqL1xuICBhc3luYyBjbGVhcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTdG9wIGxpc3RlbmluZ1xuICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuXG4gICAgLy8gQ2xlYXIgZGVib3VuY2UgdGltZXJcbiAgICBpZiAodGhpcy5kZWJvdW5jZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVRpbWVyKTtcbiAgICAgIHRoaXMuZGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gVW5zdWJzY3JpYmUgZnJvbSBhbGwgZW50aXRpZXNcbiAgICBpZiAodGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuc2l6ZSA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMudW5zdWJzY3JpYmVGcm9tRW50aXRpZXMoQXJyYXkuZnJvbSh0aGlzLnN1YnNjcmliZWRFbnRpdGllcykpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHNldHNcbiAgICB0aGlzLnZpc2libGVFbnRpdGllcy5jbGVhcigpO1xuICAgIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLmNsZWFyKCk7XG4gICAgXG4gICAgbG9nZ2VyLmluZm8oJ0NsZWFyZWQgYWxsIHN1YnNjcmlwdGlvbnMnKTtcbiAgfVxufSIsIi8qKlxuICogQmFzZSBsYXlvdXQgY2xhc3MgZm9yIERhc2h2aWV3IFYyIGRhc2hib2FyZCBsYXlvdXRzLlxuICogUHJvdmlkZXMgZ3JpZCBzeXN0ZW0gYW5kIHJlc3BvbnNpdmUgYnJlYWtwb2ludCBoYW5kbGluZy5cbiAqL1xuXG5pbXBvcnQgeyBXaWRnZXRDb25maWcgfSBmcm9tICcuLi9jb3JlL3dpZGdldC1iYXNlJztcblxuZXhwb3J0IHR5cGUgQnJlYWtwb2ludCA9ICdtb2JpbGUnIHwgJ3RhYmxldCcgfCAnZGVza3RvcCcgfCAnbGFyZ2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dENvbmZpZyB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgbWluQXJlYXM6IG51bWJlcjtcbiAgbWF4QXJlYXM6IG51bWJlcjtcbiAgYnJlYWtwb2ludHM6IHtcbiAgICBtb2JpbGU6IG51bWJlcjsgICAgLy8gPCA3NjhweFxuICAgIHRhYmxldDogbnVtYmVyOyAgICAvLyA3NjhweCAtIDEwMjNweFxuICAgIGRlc2t0b3A6IG51bWJlcjsgICAvLyAxMDI0cHggLSAxNDM5cHhcbiAgICBsYXJnZTogbnVtYmVyOyAgICAgLy8gPj0gMTQ0MHB4XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZEFyZWEge1xuICBuYW1lOiBzdHJpbmc7XG4gIGdyaWRBcmVhOiBzdHJpbmc7XG4gIG1pbldpZGdldHM/OiBudW1iZXI7XG4gIG1heFdpZGdldHM/OiBudW1iZXI7XG4gIHdpZGdldFR5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2lkZ2V0UG9zaXRpb24ge1xuICB3aWRnZXRJZDogc3RyaW5nO1xuICBncmlkQXJlYTogc3RyaW5nO1xuICBncmlkQ29sdW1uPzogc3RyaW5nO1xuICBncmlkUm93Pzogc3RyaW5nO1xuICBvcmRlcj86IG51bWJlcjtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VMYXlvdXQge1xuICBwcm90ZWN0ZWQgY29uZmlnOiBMYXlvdXRDb25maWc7XG4gIHByb3RlY3RlZCBjdXJyZW50QnJlYWtwb2ludDogQnJlYWtwb2ludCA9ICdkZXNrdG9wJztcbiAgcHJvdGVjdGVkIGNvbnRhaW5lcldpZHRoID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0TGF5b3V0Q29uZmlnKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxheW91dCBjb25maWd1cmF0aW9uLlxuICAgKiBNdXN0IGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0TGF5b3V0Q29uZmlnKCk6IExheW91dENvbmZpZztcblxuICAvKipcbiAgICogR2VuZXJhdGUgQ1NTIGdyaWQgdGVtcGxhdGUgZm9yIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICovXG4gIGFic3RyYWN0IGdlbmVyYXRlR3JpZFRlbXBsYXRlKGJyZWFrcG9pbnQ6IEJyZWFrcG9pbnQpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB3aWRnZXQgcG9zaXRpb25zIGJhc2VkIG9uIGF2YWlsYWJsZSB3aWRnZXRzIGFuZCBhcmVhcy5cbiAgICovXG4gIGFic3RyYWN0IGNhbGN1bGF0ZVdpZGdldFBvc2l0aW9ucyhcbiAgICB3aWRnZXRzOiBXaWRnZXRDb25maWdbXSxcbiAgICBhcmVhQ291bnQ6IG51bWJlclxuICApOiBXaWRnZXRQb3NpdGlvbltdO1xuXG4gIC8qKlxuICAgKiBHZXQgZ3JpZCBhcmVhcyBkZWZpbml0aW9uIGZvciBjdXJyZW50IGJyZWFrcG9pbnQuXG4gICAqL1xuICBhYnN0cmFjdCBnZXRHcmlkQXJlYXMoYnJlYWtwb2ludDogQnJlYWtwb2ludCk6IEdyaWRBcmVhW107XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGJyZWFrcG9pbnQgYmFzZWQgb24gY29udGFpbmVyIHdpZHRoLlxuICAgKi9cbiAgZ2V0QnJlYWtwb2ludCh3aWR0aD86IG51bWJlcik6IEJyZWFrcG9pbnQge1xuICAgIGNvbnN0IHcgPSB3aWR0aCB8fCB0aGlzLmNvbnRhaW5lcldpZHRoO1xuICAgIFxuICAgIGlmICh3IDwgdGhpcy5jb25maWcuYnJlYWtwb2ludHMudGFibGV0KSB7XG4gICAgICByZXR1cm4gJ21vYmlsZSc7XG4gICAgfSBlbHNlIGlmICh3IDwgdGhpcy5jb25maWcuYnJlYWtwb2ludHMuZGVza3RvcCkge1xuICAgICAgcmV0dXJuICd0YWJsZXQnO1xuICAgIH0gZWxzZSBpZiAodyA8IHRoaXMuY29uZmlnLmJyZWFrcG9pbnRzLmxhcmdlKSB7XG4gICAgICByZXR1cm4gJ2Rlc2t0b3AnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2xhcmdlJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbnRhaW5lciB3aWR0aCBhbmQgcmV0dXJuIGlmIGJyZWFrcG9pbnQgY2hhbmdlZC5cbiAgICovXG4gIHVwZGF0ZUNvbnRhaW5lcldpZHRoKHdpZHRoOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gd2lkdGg7XG4gICAgY29uc3QgbmV3QnJlYWtwb2ludCA9IHRoaXMuZ2V0QnJlYWtwb2ludCh3aWR0aCk7XG4gICAgXG4gICAgaWYgKG5ld0JyZWFrcG9pbnQgIT09IHRoaXMuY3VycmVudEJyZWFrcG9pbnQpIHtcbiAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSBuZXdCcmVha3BvaW50O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbnVtYmVyIG9mIGNvbHVtbnMgZm9yIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICovXG4gIGdldENvbHVtbkNvdW50KGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogbnVtYmVyIHtcbiAgICBjb25zdCBicCA9IGJyZWFrcG9pbnQgfHwgdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcbiAgICBcbiAgICBzd2l0Y2ggKGJwKSB7XG4gICAgICBjYXNlICdtb2JpbGUnOlxuICAgICAgICByZXR1cm4gNDtcbiAgICAgIGNhc2UgJ3RhYmxldCc6XG4gICAgICAgIHJldHVybiA4O1xuICAgICAgY2FzZSAnZGVza3RvcCc6XG4gICAgICAgIHJldHVybiAxMjtcbiAgICAgIGNhc2UgJ2xhcmdlJzpcbiAgICAgICAgcmV0dXJuIDEyO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDEyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZ3JpZCBnYXAgc2l6ZSBmb3IgY3VycmVudCBicmVha3BvaW50LlxuICAgKi9cbiAgZ2V0R3JpZEdhcChicmVha3BvaW50PzogQnJlYWtwb2ludCk6IHN0cmluZyB7XG4gICAgY29uc3QgYnAgPSBicmVha3BvaW50IHx8IHRoaXMuY3VycmVudEJyZWFrcG9pbnQ7XG4gICAgXG4gICAgc3dpdGNoIChicCkge1xuICAgICAgY2FzZSAnbW9iaWxlJzpcbiAgICAgICAgcmV0dXJuICc4cHgnO1xuICAgICAgY2FzZSAndGFibGV0JzpcbiAgICAgICAgcmV0dXJuICcxMnB4JztcbiAgICAgIGNhc2UgJ2Rlc2t0b3AnOlxuICAgICAgICByZXR1cm4gJzE2cHgnO1xuICAgICAgY2FzZSAnbGFyZ2UnOlxuICAgICAgICByZXR1cm4gJzIwcHgnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICcxNnB4JztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnRhaW5lciBwYWRkaW5nIGZvciBjdXJyZW50IGJyZWFrcG9pbnQuXG4gICAqL1xuICBnZXRDb250YWluZXJQYWRkaW5nKGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogc3RyaW5nIHtcbiAgICBjb25zdCBicCA9IGJyZWFrcG9pbnQgfHwgdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcbiAgICBcbiAgICBzd2l0Y2ggKGJwKSB7XG4gICAgICBjYXNlICdtb2JpbGUnOlxuICAgICAgICByZXR1cm4gJzhweCc7XG4gICAgICBjYXNlICd0YWJsZXQnOlxuICAgICAgICByZXR1cm4gJzE2cHgnO1xuICAgICAgY2FzZSAnZGVza3RvcCc6XG4gICAgICAgIHJldHVybiAnMjRweCc7XG4gICAgICBjYXNlICdsYXJnZSc6XG4gICAgICAgIHJldHVybiAnMzJweCc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJzI0cHgnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBsYXlvdXQgaXMgc3VpdGFibGUgZm9yIGdpdmVuIGFyZWEgY291bnQuXG4gICAqL1xuICBpc1N1aXRhYmxlRm9yQXJlYUNvdW50KGFyZWFDb3VudDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGFyZWFDb3VudCA+PSB0aGlzLmNvbmZpZy5taW5BcmVhcyAmJiBcbiAgICAgICAgICAgYXJlYUNvdW50IDw9IHRoaXMuY29uZmlnLm1heEFyZWFzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgd2lkZ2V0cyBieSBwcmlvcml0eSBmb3IgcGxhY2VtZW50LlxuICAgKi9cbiAgcHJvdGVjdGVkIHNvcnRXaWRnZXRzQnlQcmlvcml0eSh3aWRnZXRzOiBXaWRnZXRDb25maWdbXSk6IFdpZGdldENvbmZpZ1tdIHtcbiAgICAvLyBQcmlvcml0eSBvcmRlcjogcm9vbSA+IGNsaW1hdGUgPiBkZXZpY2UtZ3JvdXAgPiBxdWljay1jb250cm9sc1xuICAgIGNvbnN0IHByaW9yaXR5TWFwOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgJ3Jvb20nOiA0LFxuICAgICAgJ2NsaW1hdGUnOiAzLFxuICAgICAgJ2RldmljZS1ncm91cCc6IDIsXG4gICAgICAncXVpY2stY29udHJvbHMnOiAxLFxuICAgIH07XG5cbiAgICByZXR1cm4gWy4uLndpZGdldHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IHByaW9yaXR5QSA9IHByaW9yaXR5TWFwW2EudHlwZV0gfHwgMDtcbiAgICAgIGNvbnN0IHByaW9yaXR5QiA9IHByaW9yaXR5TWFwW2IudHlwZV0gfHwgMDtcbiAgICAgIFxuICAgICAgLy8gU29ydCBieSBwcmlvcml0eSBmaXJzdFxuICAgICAgaWYgKHByaW9yaXR5QSAhPT0gcHJpb3JpdHlCKSB7XG4gICAgICAgIHJldHVybiBwcmlvcml0eUIgLSBwcmlvcml0eUE7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRoZW4gYnkgZW50aXR5IGNvdW50XG4gICAgICByZXR1cm4gYi5lbnRpdGllcy5sZW5ndGggLSBhLmVudGl0aWVzLmxlbmd0aDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHcm91cCB3aWRnZXRzIGJ5IHR5cGUuXG4gICAqL1xuICBwcm90ZWN0ZWQgZ3JvdXBXaWRnZXRzQnlUeXBlKHdpZGdldHM6IFdpZGdldENvbmZpZ1tdKTogTWFwPHN0cmluZywgV2lkZ2V0Q29uZmlnW10+IHtcbiAgICBjb25zdCBncm91cHMgPSBuZXcgTWFwPHN0cmluZywgV2lkZ2V0Q29uZmlnW10+KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCB3aWRnZXQgb2Ygd2lkZ2V0cykge1xuICAgICAgY29uc3QgdHlwZSA9IHdpZGdldC50eXBlO1xuICAgICAgaWYgKCFncm91cHMuaGFzKHR5cGUpKSB7XG4gICAgICAgIGdyb3Vwcy5zZXQodHlwZSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBzLmdldCh0eXBlKSEucHVzaCh3aWRnZXQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ3JvdXBzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIENTUyBmb3IgZ3JpZCB0ZW1wbGF0ZS5cbiAgICovXG4gIGdlbmVyYXRlR3JpZENTUyhicmVha3BvaW50PzogQnJlYWtwb2ludCk6IHN0cmluZyB7XG4gICAgY29uc3QgYnAgPSBicmVha3BvaW50IHx8IHRoaXMuY3VycmVudEJyZWFrcG9pbnQ7XG4gICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmdlbmVyYXRlR3JpZFRlbXBsYXRlKGJwKTtcbiAgICBjb25zdCBnYXAgPSB0aGlzLmdldEdyaWRHYXAoYnApO1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmdldENvbnRhaW5lclBhZGRpbmcoYnApO1xuICAgIFxuICAgIHJldHVybiBgXG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgZ3JpZC10ZW1wbGF0ZTogJHt0ZW1wbGF0ZX07XG4gICAgICBnYXA6ICR7Z2FwfTtcbiAgICAgIHBhZGRpbmc6ICR7cGFkZGluZ307XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGF5b3V0IG1ldGFkYXRhLlxuICAgKi9cbiAgZ2V0TWV0YWRhdGEoKToge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGN1cnJlbnRCcmVha3BvaW50OiBCcmVha3BvaW50O1xuICAgIHN1cHBvcnRlZEFyZWFSYW5nZTogW251bWJlciwgbnVtYmVyXTtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuY29uZmlnLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb25maWcuZGVzY3JpcHRpb24sXG4gICAgICBjdXJyZW50QnJlYWtwb2ludDogdGhpcy5jdXJyZW50QnJlYWtwb2ludCxcbiAgICAgIHN1cHBvcnRlZEFyZWFSYW5nZTogW3RoaXMuY29uZmlnLm1pbkFyZWFzLCB0aGlzLmNvbmZpZy5tYXhBcmVhc10sXG4gICAgfTtcbiAgfVxufSIsIi8qKlxuICogU3RhbmRhcmQgbGF5b3V0IGZvciAyLTMgYmVkcm9vbSBob21lcy5cbiAqIE9wdGltaXplZCBncmlkIGxheW91dCB3aXRoIHJvb20gd2lkZ2V0cyBpbiBtYWluIGFyZWEsXG4gKiBkZXZpY2UgZ3JvdXBzIGluIHNpZGViYXIsIGNsaW1hdGUgaW4gaGVhZGVyLCBhbmQgcXVpY2sgY29udHJvbHMgaW4gZm9vdGVyLlxuICovXG5cbmltcG9ydCB7IEJhc2VMYXlvdXQsIEJyZWFrcG9pbnQsIEdyaWRBcmVhLCBMYXlvdXRDb25maWcsIFdpZGdldFBvc2l0aW9uIH0gZnJvbSAnLi9iYXNlLWxheW91dCc7XG5pbXBvcnQgeyBXaWRnZXRDb25maWcgfSBmcm9tICcuLi9jb3JlL3dpZGdldC1iYXNlJztcblxuZXhwb3J0IGNsYXNzIFN0YW5kYXJkTGF5b3V0IGV4dGVuZHMgQmFzZUxheW91dCB7XG4gIHByb3RlY3RlZCBnZXRMYXlvdXRDb25maWcoKTogTGF5b3V0Q29uZmlnIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJ1N0YW5kYXJkJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnT3B0aW1pemVkIGxheW91dCBmb3IgMi0zIGJlZHJvb20gaG9tZXMnLFxuICAgICAgbWluQXJlYXM6IDIsXG4gICAgICBtYXhBcmVhczogNSxcbiAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIG1vYmlsZTogNzY4LFxuICAgICAgICB0YWJsZXQ6IDEwMjQsXG4gICAgICAgIGRlc2t0b3A6IDE0NDAsXG4gICAgICAgIGxhcmdlOiAxOTIwLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgZ2VuZXJhdGVHcmlkVGVtcGxhdGUoYnJlYWtwb2ludDogQnJlYWtwb2ludCk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChicmVha3BvaW50KSB7XG4gICAgICBjYXNlICdtb2JpbGUnOlxuICAgICAgICAvLyBTaW5nbGUgY29sdW1uIGxheW91dFxuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIFwiaGVhZGVyXCIgYXV0b1xuICAgICAgICAgIFwibWFpblwiIDFmclxuICAgICAgICAgIFwic2lkZWJhclwiIGF1dG9cbiAgICAgICAgICBcImZvb3RlclwiIGF1dG9cbiAgICAgICAgICAvIDFmclxuICAgICAgICBgO1xuICAgICAgXG4gICAgICBjYXNlICd0YWJsZXQnOlxuICAgICAgICAvLyBUd28gY29sdW1uIGxheW91dFxuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIFwiaGVhZGVyIGhlYWRlclwiIGF1dG9cbiAgICAgICAgICBcIm1haW4gbWFpblwiIDFmclxuICAgICAgICAgIFwic2lkZWJhciBzaWRlYmFyXCIgYXV0b1xuICAgICAgICAgIFwiZm9vdGVyIGZvb3RlclwiIGF1dG9cbiAgICAgICAgICAvIDFmciAxZnJcbiAgICAgICAgYDtcbiAgICAgIFxuICAgICAgY2FzZSAnZGVza3RvcCc6XG4gICAgICAgIC8vIFRocmVlIGNvbHVtbiBsYXlvdXQgd2l0aCBzaWRlYmFyXG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgXCJoZWFkZXIgaGVhZGVyIGhlYWRlclwiIGF1dG9cbiAgICAgICAgICBcIm1haW4gbWFpbiBzaWRlYmFyXCIgMWZyXG4gICAgICAgICAgXCJmb290ZXIgZm9vdGVyIGZvb3RlclwiIGF1dG9cbiAgICAgICAgICAvIDFmciAxZnIgbWlubWF4KDI4MHB4LCAwLjVmcilcbiAgICAgICAgYDtcbiAgICAgIFxuICAgICAgY2FzZSAnbGFyZ2UnOlxuICAgICAgICAvLyBUaHJlZSBjb2x1bW4gbGF5b3V0IHdpdGggbGFyZ2VyIHNpZGViYXJcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICBcImhlYWRlciBoZWFkZXIgaGVhZGVyXCIgYXV0b1xuICAgICAgICAgIFwibWFpbiBtYWluIHNpZGViYXJcIiAxZnJcbiAgICAgICAgICBcImZvb3RlciBmb290ZXIgZm9vdGVyXCIgYXV0b1xuICAgICAgICAgIC8gMWZyIDFmciBtaW5tYXgoMzIwcHgsIDAuNmZyKVxuICAgICAgICBgO1xuICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUdyaWRUZW1wbGF0ZSgnZGVza3RvcCcpO1xuICAgIH1cbiAgfVxuXG4gIGdldEdyaWRBcmVhcyhicmVha3BvaW50OiBCcmVha3BvaW50KTogR3JpZEFyZWFbXSB7XG4gICAgY29uc3QgYXJlYXM6IEdyaWRBcmVhW10gPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdoZWFkZXInLFxuICAgICAgICBncmlkQXJlYTogJ2hlYWRlcicsXG4gICAgICAgIG1pbldpZGdldHM6IDAsXG4gICAgICAgIG1heFdpZGdldHM6IDIsXG4gICAgICAgIHdpZGdldFR5cGVzOiBbJ2NsaW1hdGUnLCAncXVpY2stY29udHJvbHMnXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdtYWluJyxcbiAgICAgICAgZ3JpZEFyZWE6ICdtYWluJyxcbiAgICAgICAgbWluV2lkZ2V0czogMSxcbiAgICAgICAgbWF4V2lkZ2V0czogNixcbiAgICAgICAgd2lkZ2V0VHlwZXM6IFsncm9vbSddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3NpZGViYXInLFxuICAgICAgICBncmlkQXJlYTogJ3NpZGViYXInLFxuICAgICAgICBtaW5XaWRnZXRzOiAwLFxuICAgICAgICBtYXhXaWRnZXRzOiA0LFxuICAgICAgICB3aWRnZXRUeXBlczogWydkZXZpY2UtZ3JvdXAnLCAncXVpY2stY29udHJvbHMnXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdmb290ZXInLFxuICAgICAgICBncmlkQXJlYTogJ2Zvb3RlcicsXG4gICAgICAgIG1pbldpZGdldHM6IDAsXG4gICAgICAgIG1heFdpZGdldHM6IDEsXG4gICAgICAgIHdpZGdldFR5cGVzOiBbJ3F1aWNrLWNvbnRyb2xzJ10sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICAvLyBBZGp1c3QgZm9yIG1vYmlsZVxuICAgIGlmIChicmVha3BvaW50ID09PSAnbW9iaWxlJykge1xuICAgICAgLy8gT24gbW9iaWxlLCBldmVyeXRoaW5nIHN0YWNrcyB2ZXJ0aWNhbGx5XG4gICAgICBhcmVhcy5mb3JFYWNoKGFyZWEgPT4ge1xuICAgICAgICBpZiAoYXJlYS5uYW1lID09PSAnbWFpbicpIHtcbiAgICAgICAgICBhcmVhLm1heFdpZGdldHMgPSA0OyAvLyBMaW1pdCByb29tIHdpZGdldHMgb24gbW9iaWxlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhcmVhcztcbiAgfVxuXG4gIGNhbGN1bGF0ZVdpZGdldFBvc2l0aW9ucyhcbiAgICB3aWRnZXRzOiBXaWRnZXRDb25maWdbXSxcbiAgICBhcmVhQ291bnQ6IG51bWJlclxuICApOiBXaWRnZXRQb3NpdGlvbltdIHtcbiAgICBjb25zdCBwb3NpdGlvbnM6IFdpZGdldFBvc2l0aW9uW10gPSBbXTtcbiAgICBjb25zdCBzb3J0ZWRXaWRnZXRzID0gdGhpcy5zb3J0V2lkZ2V0c0J5UHJpb3JpdHkod2lkZ2V0cyk7XG4gICAgY29uc3Qgd2lkZ2V0c0J5VHlwZSA9IHRoaXMuZ3JvdXBXaWRnZXRzQnlUeXBlKHNvcnRlZFdpZGdldHMpO1xuICAgIFxuICAgIC8vIFBsYWNlIGNsaW1hdGUgd2lkZ2V0cyBpbiBoZWFkZXJcbiAgICBjb25zdCBjbGltYXRlV2lkZ2V0cyA9IHdpZGdldHNCeVR5cGUuZ2V0KCdjbGltYXRlJykgfHwgW107XG4gICAgY2xpbWF0ZVdpZGdldHMuc2xpY2UoMCwgMSkuZm9yRWFjaCgod2lkZ2V0LCBpbmRleCkgPT4ge1xuICAgICAgcG9zaXRpb25zLnB1c2goe1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5nZW5lcmF0ZVdpZGdldElkKHdpZGdldCksXG4gICAgICAgIGdyaWRBcmVhOiAnaGVhZGVyJyxcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBQbGFjZSByb29tIHdpZGdldHMgaW4gbWFpbiBhcmVhXG4gICAgY29uc3Qgcm9vbVdpZGdldHMgPSB3aWRnZXRzQnlUeXBlLmdldCgncm9vbScpIHx8IFtdO1xuICAgIGNvbnN0IG1haW5Db2x1bW5zID0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9PT0gJ21vYmlsZScgPyAxIDogMjtcbiAgICBjb25zdCBtYWluUm93cyA9IE1hdGguY2VpbChyb29tV2lkZ2V0cy5sZW5ndGggLyBtYWluQ29sdW1ucyk7XG4gICAgXG4gICAgcm9vbVdpZGdldHMuc2xpY2UoMCwgNikuZm9yRWFjaCgod2lkZ2V0LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY29sID0gKGluZGV4ICUgbWFpbkNvbHVtbnMpICsgMTtcbiAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyBtYWluQ29sdW1ucykgKyAxO1xuICAgICAgXG4gICAgICBwb3NpdGlvbnMucHVzaCh7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLmdlbmVyYXRlV2lkZ2V0SWQod2lkZ2V0KSxcbiAgICAgICAgZ3JpZEFyZWE6ICdtYWluJyxcbiAgICAgICAgZ3JpZENvbHVtbjogdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9PT0gJ21vYmlsZScgXG4gICAgICAgICAgPyAnMScgXG4gICAgICAgICAgOiBgJHtjb2x9IC8gc3BhbiAxYCxcbiAgICAgICAgZ3JpZFJvdzogYCR7cm93fSAvIHNwYW4gMWAsXG4gICAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gUGxhY2UgZGV2aWNlIGdyb3VwcyBpbiBzaWRlYmFyXG4gICAgY29uc3QgZGV2aWNlR3JvdXBzID0gd2lkZ2V0c0J5VHlwZS5nZXQoJ2RldmljZS1ncm91cCcpIHx8IFtdO1xuICAgIGRldmljZUdyb3Vwcy5zbGljZSgwLCAzKS5mb3JFYWNoKCh3aWRnZXQsIGluZGV4KSA9PiB7XG4gICAgICBwb3NpdGlvbnMucHVzaCh7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLmdlbmVyYXRlV2lkZ2V0SWQod2lkZ2V0KSxcbiAgICAgICAgZ3JpZEFyZWE6ICdzaWRlYmFyJyxcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBQbGFjZSBxdWljayBjb250cm9sc1xuICAgIGNvbnN0IHF1aWNrQ29udHJvbHMgPSB3aWRnZXRzQnlUeXBlLmdldCgncXVpY2stY29udHJvbHMnKSB8fCBbXTtcbiAgICBpZiAocXVpY2tDb250cm9scy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBGaXJzdCBxdWljayBjb250cm9scyBpbiBmb290ZXJcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMuZ2VuZXJhdGVXaWRnZXRJZChxdWlja0NvbnRyb2xzWzBdKSxcbiAgICAgICAgZ3JpZEFyZWE6ICdmb290ZXInLFxuICAgICAgICBvcmRlcjogMCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBZGRpdGlvbmFsIHF1aWNrIGNvbnRyb2xzIGluIHNpZGViYXJcbiAgICAgIHF1aWNrQ29udHJvbHMuc2xpY2UoMSwgMykuZm9yRWFjaCgod2lkZ2V0LCBpbmRleCkgPT4ge1xuICAgICAgICBwb3NpdGlvbnMucHVzaCh7XG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMuZ2VuZXJhdGVXaWRnZXRJZCh3aWRnZXQpLFxuICAgICAgICAgIGdyaWRBcmVhOiAnc2lkZWJhcicsXG4gICAgICAgICAgb3JkZXI6IGRldmljZUdyb3Vwcy5sZW5ndGggKyBpbmRleCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgdW5pcXVlIHdpZGdldCBJRC5cbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVXaWRnZXRJZCh3aWRnZXQ6IFdpZGdldENvbmZpZyk6IHN0cmluZyB7XG4gICAgLy8gVXNlIHR5cGUgYW5kIGZpcnN0IGVudGl0eSBhcyBJRFxuICAgIGNvbnN0IGZpcnN0RW50aXR5ID0gd2lkZ2V0LmVudGl0aWVzWzBdIHx8ICd1bmtub3duJztcbiAgICByZXR1cm4gYCR7d2lkZ2V0LnR5cGV9LSR7Zmlyc3RFbnRpdHkucmVwbGFjZSgvXFwuL2csICdfJyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVjb21tZW5kZWQgd2lkZ2V0IGNvbmZpZ3VyYXRpb24gZm9yIGFyZWEgY291bnQuXG4gICAqL1xuICBnZXRSZWNvbW1lbmRlZFdpZGdldHMoYXJlYUNvdW50OiBudW1iZXIpOiB7XG4gICAgcm9vbVdpZGdldHM6IG51bWJlcjtcbiAgICBkZXZpY2VHcm91cHM6IG51bWJlcjtcbiAgICBjbGltYXRlV2lkZ2V0czogbnVtYmVyO1xuICAgIHF1aWNrQ29udHJvbHM6IG51bWJlcjtcbiAgfSB7XG4gICAgLy8gQmFzZSByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICByb29tV2lkZ2V0czogTWF0aC5taW4oYXJlYUNvdW50LCA0KSxcbiAgICAgIGRldmljZUdyb3VwczogMixcbiAgICAgIGNsaW1hdGVXaWRnZXRzOiAxLFxuICAgICAgcXVpY2tDb250cm9sczogMSxcbiAgICB9O1xuXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIGFyZWEgY291bnRcbiAgICBpZiAoYXJlYUNvdW50IDw9IDIpIHtcbiAgICAgIC8vIFNtYWxsIGhvbWU6IGZld2VyIHdpZGdldHNcbiAgICAgIGNvbmZpZy5yb29tV2lkZ2V0cyA9IGFyZWFDb3VudDtcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSAxO1xuICAgIH0gZWxzZSBpZiAoYXJlYUNvdW50ID49IDQpIHtcbiAgICAgIC8vIExhcmdlciBob21lOiBtb3JlIHdpZGdldHNcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSAzO1xuICAgICAgY29uZmlnLnF1aWNrQ29udHJvbHMgPSAyO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBmb3IgYnJlYWtwb2ludFxuICAgIGlmICh0aGlzLmN1cnJlbnRCcmVha3BvaW50ID09PSAnbW9iaWxlJykge1xuICAgICAgY29uZmlnLnJvb21XaWRnZXRzID0gTWF0aC5taW4oY29uZmlnLnJvb21XaWRnZXRzLCAzKTtcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSBNYXRoLm1pbihjb25maWcuZGV2aWNlR3JvdXBzLCAyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDU1MgZm9yIHNwZWNpZmljIGdyaWQgYXJlYXMuXG4gICAqL1xuICBnZXRBcmVhU3R5bGVzKGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgY29uc3QgYnAgPSBicmVha3BvaW50IHx8IHRoaXMuY3VycmVudEJyZWFrcG9pbnQ7XG4gICAgXG4gICAgY29uc3QgYmFzZVN0eWxlcyA9IHtcbiAgICAgIGhlYWRlcjogYFxuICAgICAgICBncmlkLWFyZWE6IGhlYWRlcjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBgLFxuICAgICAgbWFpbjogYFxuICAgICAgICBncmlkLWFyZWE6IG1haW47XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgYWxpZ24tY29udGVudDogc3RhcnQ7XG4gICAgICBgLFxuICAgICAgc2lkZWJhcjogYFxuICAgICAgICBncmlkLWFyZWE6IHNpZGViYXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgIGAsXG4gICAgICBmb290ZXI6IGBcbiAgICAgICAgZ3JpZC1hcmVhOiBmb290ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgYCxcbiAgICB9O1xuXG4gICAgLy8gQWRqdXN0IG1haW4gZ3JpZCBmb3IgZGlmZmVyZW50IGJyZWFrcG9pbnRzXG4gICAgaWYgKGJwID09PSAnbW9iaWxlJykge1xuICAgICAgYmFzZVN0eWxlcy5tYWluICs9IGBcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICBgO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlU3R5bGVzLm1haW4gKz0gYFxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpO1xuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZVN0eWxlcztcbiAgfVxufSIsIi8qKlxuICogTGF5b3V0IGVuZ2luZSBmb3IgRGFzaHZpZXcgVjIuXG4gKiBIYW5kbGVzIGxheW91dCBzZWxlY3Rpb24sIHdpZGdldCBvcmdhbml6YXRpb24sIGFuZCBvdmVyZmxvdyBtYW5hZ2VtZW50LlxuICovXG5cbmltcG9ydCB7IEJhc2VMYXlvdXQsIEJyZWFrcG9pbnQsIFdpZGdldFBvc2l0aW9uIH0gZnJvbSAnLi9iYXNlLWxheW91dCc7XG5pbXBvcnQgeyBTdGFuZGFyZExheW91dCB9IGZyb20gJy4vc3RhbmRhcmQtbGF5b3V0JztcbmltcG9ydCB7IFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignTGF5b3V0RW5naW5lJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXJlYUluZm8ge1xuICBhcmVhSWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbnRpdGllczogc3RyaW5nW107XG4gIGVudGl0eUNvdW50OiBudW1iZXI7XG4gIGRldmljZUNvdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF5b3V0RW5naW5lQ29uZmlnIHtcbiAgbWF4V2lkZ2V0c1BlckFyZWE6IG51bWJlcjtcbiAgcHJpb3JpdGl6ZUJ5VXNhZ2U6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBMYXlvdXRFbmdpbmUge1xuICBwcml2YXRlIGxheW91dHM6IE1hcDxzdHJpbmcsIEJhc2VMYXlvdXQ+O1xuICBwcml2YXRlIGN1cnJlbnRMYXlvdXQ6IEJhc2VMYXlvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb25maWc6IFJlcXVpcmVkPExheW91dEVuZ2luZUNvbmZpZz47XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPExheW91dEVuZ2luZUNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbWF4V2lkZ2V0c1BlckFyZWE6IGNvbmZpZy5tYXhXaWRnZXRzUGVyQXJlYSA/PyAyLFxuICAgICAgcHJpb3JpdGl6ZUJ5VXNhZ2U6IGNvbmZpZy5wcmlvcml0aXplQnlVc2FnZSA/PyB0cnVlLFxuICAgIH07XG5cbiAgICAvLyBJbml0aWFsaXplIGF2YWlsYWJsZSBsYXlvdXRzXG4gICAgdGhpcy5sYXlvdXRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJMYXlvdXQoJ3N0YW5kYXJkJywgbmV3IFN0YW5kYXJkTGF5b3V0KCkpO1xuICAgIFxuICAgIC8vIEZ1dHVyZSBsYXlvdXRzIGNhbiBiZSByZWdpc3RlcmVkIGhlcmU6XG4gICAgLy8gdGhpcy5yZWdpc3RlckxheW91dCgnY29tcGFjdCcsIG5ldyBDb21wYWN0TGF5b3V0KCkpO1xuICAgIC8vIHRoaXMucmVnaXN0ZXJMYXlvdXQoJ2NvbXBsZXgnLCBuZXcgQ29tcGxleExheW91dCgpKTtcbiAgICAvLyB0aGlzLnJlZ2lzdGVyTGF5b3V0KCdlc3RhdGUnLCBuZXcgRXN0YXRlTGF5b3V0KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgbGF5b3V0LlxuICAgKi9cbiAgcmVnaXN0ZXJMYXlvdXQobmFtZTogc3RyaW5nLCBsYXlvdXQ6IEJhc2VMYXlvdXQpOiB2b2lkIHtcbiAgICB0aGlzLmxheW91dHMuc2V0KG5hbWUsIGxheW91dCk7XG4gICAgbG9nZ2VyLmluZm8oYFJlZ2lzdGVyZWQgbGF5b3V0OiAke25hbWV9YCk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IG9wdGltYWwgbGF5b3V0IGJhc2VkIG9uIGNvbXBsZXhpdHkgc2NvcmUuXG4gICAqL1xuICBzZWxlY3RMYXlvdXQoY29tcGxleGl0eVNjb3JlOiBudW1iZXIsIGFyZWFDb3VudDogbnVtYmVyKTogQmFzZUxheW91dCB7XG4gICAgLy8gRm9yIG5vdywgd2Ugb25seSBoYXZlIFN0YW5kYXJkTGF5b3V0XG4gICAgLy8gSW4gdGhlIGZ1dHVyZSwgdGhpcyB3aWxsIHNlbGVjdCBiYXNlZCBvbiBjb21wbGV4aXR5XG4gICAgXG4gICAgbGV0IHNlbGVjdGVkTGF5b3V0OiBCYXNlTGF5b3V0IHwgdW5kZWZpbmVkO1xuICAgIGxldCBzZWxlY3RlZE5hbWUgPSAnJztcblxuICAgIC8vIEZpbmQgc3VpdGFibGUgbGF5b3V0IGZvciBhcmVhIGNvdW50XG4gICAgZm9yIChjb25zdCBbbmFtZSwgbGF5b3V0XSBvZiB0aGlzLmxheW91dHMpIHtcbiAgICAgIGlmIChsYXlvdXQuaXNTdWl0YWJsZUZvckFyZWFDb3VudChhcmVhQ291bnQpKSB7XG4gICAgICAgIHNlbGVjdGVkTGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICBzZWxlY3RlZE5hbWUgPSBuYW1lO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBzdGFuZGFyZCBpZiBubyBzdWl0YWJsZSBsYXlvdXQgZm91bmRcbiAgICBpZiAoIXNlbGVjdGVkTGF5b3V0KSB7XG4gICAgICBzZWxlY3RlZExheW91dCA9IHRoaXMubGF5b3V0cy5nZXQoJ3N0YW5kYXJkJykhO1xuICAgICAgc2VsZWN0ZWROYW1lID0gJ3N0YW5kYXJkJztcbiAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICBgTm8gc3VpdGFibGUgbGF5b3V0IGZvciAke2FyZWFDb3VudH0gYXJlYXMsIHVzaW5nIHN0YW5kYXJkIGxheW91dGBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50TGF5b3V0ID0gc2VsZWN0ZWRMYXlvdXQ7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgU2VsZWN0ZWQgJHtzZWxlY3RlZE5hbWV9IGxheW91dCBmb3IgY29tcGxleGl0eSAke2NvbXBsZXhpdHlTY29yZX0gYW5kICR7YXJlYUNvdW50fSBhcmVhc2BcbiAgICApO1xuXG4gICAgcmV0dXJuIHNlbGVjdGVkTGF5b3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIE9yZ2FuaXplIHdpZGdldHMgYmFzZWQgb24gYXJlYXMgYW5kIGxheW91dC5cbiAgICovXG4gIG9yZ2FuaXplV2lkZ2V0cyhhcmVhczogQXJlYUluZm9bXSk6IFdpZGdldENvbmZpZ1tdIHtcbiAgICBjb25zdCB3aWRnZXRzOiBXaWRnZXRDb25maWdbXSA9IFtdO1xuXG4gICAgLy8gU29ydCBhcmVhcyBieSBlbnRpdHkgY291bnQgYW5kIHByaW9yaXR5XG4gICAgY29uc3Qgc29ydGVkQXJlYXMgPSB0aGlzLnNvcnRBcmVhc0J5UHJpb3JpdHkoYXJlYXMpO1xuXG4gICAgLy8gQ3JlYXRlIHJvb20gd2lkZ2V0cyBmb3IgZWFjaCBhcmVhXG4gICAgZm9yIChjb25zdCBhcmVhIG9mIHNvcnRlZEFyZWFzKSB7XG4gICAgICBpZiAoYXJlYS5lbnRpdHlDb3VudCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHJvb21XaWRnZXQ6IFdpZGdldENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogJ3Jvb20nLFxuICAgICAgICBlbnRpdGllczogYXJlYS5lbnRpdGllcyxcbiAgICAgICAgdGl0bGU6IGFyZWEubmFtZSxcbiAgICAgIH07XG4gICAgICB3aWRnZXRzLnB1c2gocm9vbVdpZGdldCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRldmljZSBncm91cCB3aWRnZXRzXG4gICAgY29uc3QgZGV2aWNlR3JvdXBzID0gdGhpcy5jcmVhdGVEZXZpY2VHcm91cHMoYXJlYXMpO1xuICAgIHdpZGdldHMucHVzaCguLi5kZXZpY2VHcm91cHMpO1xuXG4gICAgLy8gQ3JlYXRlIGNsaW1hdGUgd2lkZ2V0IGlmIGNsaW1hdGUgZW50aXRpZXMgZXhpc3RcbiAgICBjb25zdCBjbGltYXRlV2lkZ2V0ID0gdGhpcy5jcmVhdGVDbGltYXRlV2lkZ2V0KGFyZWFzKTtcbiAgICBpZiAoY2xpbWF0ZVdpZGdldCkge1xuICAgICAgd2lkZ2V0cy5wdXNoKGNsaW1hdGVXaWRnZXQpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBxdWljayBjb250cm9scyB3aWRnZXRcbiAgICBjb25zdCBxdWlja0NvbnRyb2xzID0gdGhpcy5jcmVhdGVRdWlja0NvbnRyb2xzV2lkZ2V0KGFyZWFzKTtcbiAgICBpZiAocXVpY2tDb250cm9scykge1xuICAgICAgd2lkZ2V0cy5wdXNoKHF1aWNrQ29udHJvbHMpO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKGBPcmdhbml6ZWQgJHt3aWRnZXRzLmxlbmd0aH0gd2lkZ2V0cyBmcm9tICR7YXJlYXMubGVuZ3RofSBhcmVhc2ApO1xuICAgIHJldHVybiB3aWRnZXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB3aWRnZXQgb3ZlcmZsb3cgZm9yIGN1cnJlbnQgbGF5b3V0LlxuICAgKi9cbiAgaGFuZGxlT3ZlcmZsb3coXG4gICAgd2lkZ2V0czogV2lkZ2V0Q29uZmlnW10sXG4gICAgbGF5b3V0OiBCYXNlTGF5b3V0LFxuICAgIGJyZWFrcG9pbnQ6IEJyZWFrcG9pbnRcbiAgKToge1xuICAgIHZpc2libGU6IFdpZGdldENvbmZpZ1tdO1xuICAgIG92ZXJmbG93OiBXaWRnZXRDb25maWdbXTtcbiAgfSB7XG4gICAgY29uc3QgYXJlYXMgPSBsYXlvdXQuZ2V0R3JpZEFyZWFzKGJyZWFrcG9pbnQpO1xuICAgIGNvbnN0IHZpc2libGU6IFdpZGdldENvbmZpZ1tdID0gW107XG4gICAgY29uc3Qgb3ZlcmZsb3c6IFdpZGdldENvbmZpZ1tdID0gW107XG4gICAgXG4gICAgLy8gR3JvdXAgd2lkZ2V0cyBieSB0eXBlXG4gICAgY29uc3Qgd2lkZ2V0c0J5VHlwZSA9IG5ldyBNYXA8c3RyaW5nLCBXaWRnZXRDb25maWdbXT4oKTtcbiAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiB3aWRnZXRzKSB7XG4gICAgICBpZiAoIXdpZGdldHNCeVR5cGUuaGFzKHdpZGdldC50eXBlKSkge1xuICAgICAgICB3aWRnZXRzQnlUeXBlLnNldCh3aWRnZXQudHlwZSwgW10pO1xuICAgICAgfVxuICAgICAgd2lkZ2V0c0J5VHlwZS5nZXQod2lkZ2V0LnR5cGUpIS5wdXNoKHdpZGdldCk7XG4gICAgfVxuXG4gICAgLy8gUGxhY2Ugd2lkZ2V0cyBhY2NvcmRpbmcgdG8gYXJlYSBjb25zdHJhaW50c1xuICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgbGV0IHJlbWFpbmluZ1Nsb3RzID0gYXJlYS5tYXhXaWRnZXRzIHx8IDk5OTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCB3aWRnZXRUeXBlIG9mIGFyZWEud2lkZ2V0VHlwZXMgfHwgW10pIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkZ2V0cyA9IHdpZGdldHNCeVR5cGUuZ2V0KHdpZGdldFR5cGUpIHx8IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB3aWRnZXQgb2YgYXZhaWxhYmxlV2lkZ2V0cykge1xuICAgICAgICAgIGlmIChyZW1haW5pbmdTbG90cyA+IDAgJiYgIXZpc2libGUuaW5jbHVkZXMod2lkZ2V0KSkge1xuICAgICAgICAgICAgdmlzaWJsZS5wdXNoKHdpZGdldCk7XG4gICAgICAgICAgICByZW1haW5pbmdTbG90cy0tO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZpc2libGUuaW5jbHVkZXMod2lkZ2V0KSAmJiAhb3ZlcmZsb3cuaW5jbHVkZXMod2lkZ2V0KSkge1xuICAgICAgICAgICAgb3ZlcmZsb3cucHVzaCh3aWRnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKFxuICAgICAgYExheW91dCBvdmVyZmxvdzogJHt2aXNpYmxlLmxlbmd0aH0gdmlzaWJsZSwgJHtvdmVyZmxvdy5sZW5ndGh9IG92ZXJmbG93YFxuICAgICk7XG5cbiAgICByZXR1cm4geyB2aXNpYmxlLCBvdmVyZmxvdyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgYXJlYXMgYnkgcHJpb3JpdHkuXG4gICAqL1xuICBwcml2YXRlIHNvcnRBcmVhc0J5UHJpb3JpdHkoYXJlYXM6IEFyZWFJbmZvW10pOiBBcmVhSW5mb1tdIHtcbiAgICByZXR1cm4gWy4uLmFyZWFzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBQcmlvcml0aXplIG5hbWVkIGFyZWFzIG92ZXIgXCJ1bmFzc2lnbmVkXCJcbiAgICAgIGlmIChhLmFyZWFJZCA9PT0gJ3VuYXNzaWduZWQnKSByZXR1cm4gMTtcbiAgICAgIGlmIChiLmFyZWFJZCA9PT0gJ3VuYXNzaWduZWQnKSByZXR1cm4gLTE7XG5cbiAgICAgIC8vIFByaW9yaXRpemUgYnkgZW50aXR5IGNvdW50XG4gICAgICBpZiAoYS5lbnRpdHlDb3VudCAhPT0gYi5lbnRpdHlDb3VudCkge1xuICAgICAgICByZXR1cm4gYi5lbnRpdHlDb3VudCAtIGEuZW50aXR5Q291bnQ7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZW4gYnkgZGV2aWNlIGNvdW50XG4gICAgICByZXR1cm4gYi5kZXZpY2VDb3VudCAtIGEuZGV2aWNlQ291bnQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGRldmljZSBncm91cCB3aWRnZXRzLlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVEZXZpY2VHcm91cHMoYXJlYXM6IEFyZWFJbmZvW10pOiBXaWRnZXRDb25maWdbXSB7XG4gICAgY29uc3QgZ3JvdXBzOiBXaWRnZXRDb25maWdbXSA9IFtdO1xuICAgIGNvbnN0IGFsbEVudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ29sbGVjdCBhbGwgZW50aXRpZXNcbiAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgIGFsbEVudGl0aWVzLnB1c2goLi4uYXJlYS5lbnRpdGllcyk7XG4gICAgfVxuXG4gICAgLy8gR3JvdXAgYnkgZG9tYWluXG4gICAgY29uc3QgZW50aXR5QnlEb21haW4gPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG4gICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiBhbGxFbnRpdGllcykge1xuICAgICAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgICAgIGlmICghZW50aXR5QnlEb21haW4uaGFzKGRvbWFpbikpIHtcbiAgICAgICAgZW50aXR5QnlEb21haW4uc2V0KGRvbWFpbiwgW10pO1xuICAgICAgfVxuICAgICAgZW50aXR5QnlEb21haW4uZ2V0KGRvbWFpbikhLnB1c2goZW50aXR5SWQpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBncm91cHMgZm9yIHNwZWNpZmljIGRvbWFpbnNcbiAgICBjb25zdCBncm91cGFibGVEb21haW5zID0gWydsaWdodCcsICdzd2l0Y2gnLCAnY292ZXInLCAnZmFuJ107XG4gICAgXG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgZ3JvdXBhYmxlRG9tYWlucykge1xuICAgICAgY29uc3QgZW50aXRpZXMgPSBlbnRpdHlCeURvbWFpbi5nZXQoZG9tYWluKSB8fCBbXTtcbiAgICAgIGlmIChlbnRpdGllcy5sZW5ndGggPj0gMykgeyAgLy8gT25seSBjcmVhdGUgZ3JvdXAgaWYgZW5vdWdoIGVudGl0aWVzXG4gICAgICAgIGdyb3Vwcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnZGV2aWNlLWdyb3VwJyxcbiAgICAgICAgICBlbnRpdGllczogZW50aXRpZXMsXG4gICAgICAgICAgdGl0bGU6IGBBbGwgJHtkb21haW59c2AsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBncm91cHM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGNsaW1hdGUgd2lkZ2V0LlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDbGltYXRlV2lkZ2V0KGFyZWFzOiBBcmVhSW5mb1tdKTogV2lkZ2V0Q29uZmlnIHwgbnVsbCB7XG4gICAgY29uc3QgY2xpbWF0ZUVudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBhcmVhIG9mIGFyZWFzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGFyZWEuZW50aXRpZXMpIHtcbiAgICAgICAgaWYgKGVudGl0eUlkLnN0YXJ0c1dpdGgoJ2NsaW1hdGUuJykgfHxcbiAgICAgICAgICAgIGVudGl0eUlkLmluY2x1ZGVzKCd0ZW1wZXJhdHVyZScpIHx8XG4gICAgICAgICAgICBlbnRpdHlJZC5pbmNsdWRlcygnaHVtaWRpdHknKSkge1xuICAgICAgICAgIGNsaW1hdGVFbnRpdGllcy5wdXNoKGVudGl0eUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbGltYXRlRW50aXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NsaW1hdGUnLFxuICAgICAgZW50aXRpZXM6IGNsaW1hdGVFbnRpdGllcyxcbiAgICAgIHRpdGxlOiAnQ2xpbWF0ZSBDb250cm9sJyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBxdWljayBjb250cm9scyB3aWRnZXQuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVF1aWNrQ29udHJvbHNXaWRnZXQoYXJlYXM6IEFyZWFJbmZvW10pOiBXaWRnZXRDb25maWcgfCBudWxsIHtcbiAgICBjb25zdCBxdWlja0VudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gRmluZCBtb3N0IGltcG9ydGFudCBlbnRpdGllcyAoc2NlbmVzLCBtYWluIGxpZ2h0cywgZXRjLilcbiAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgYXJlYS5lbnRpdGllcykge1xuICAgICAgICBpZiAoZW50aXR5SWQuc3RhcnRzV2l0aCgnc2NlbmUuJykgfHxcbiAgICAgICAgICAgIGVudGl0eUlkLmluY2x1ZGVzKCdtYWluJykgfHxcbiAgICAgICAgICAgIGVudGl0eUlkLmluY2x1ZGVzKCdhbGwnKSkge1xuICAgICAgICAgIHF1aWNrRW50aXRpZXMucHVzaChlbnRpdHlJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMaW1pdCB0byByZWFzb25hYmxlIG51bWJlclxuICAgIGNvbnN0IGxpbWl0ZWRFbnRpdGllcyA9IHF1aWNrRW50aXRpZXMuc2xpY2UoMCwgOCk7XG5cbiAgICBpZiAobGltaXRlZEVudGl0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdxdWljay1jb250cm9scycsXG4gICAgICBlbnRpdGllczogbGltaXRlZEVudGl0aWVzLFxuICAgICAgdGl0bGU6ICdRdWljayBDb250cm9scycsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBsYXlvdXQuXG4gICAqL1xuICBnZXRDdXJyZW50TGF5b3V0KCk6IEJhc2VMYXlvdXQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TGF5b3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB3aWRnZXQgcG9zaXRpb25zIGZvciBjdXJyZW50IGxheW91dC5cbiAgICovXG4gIGNhbGN1bGF0ZVBvc2l0aW9ucyhcbiAgICB3aWRnZXRzOiBXaWRnZXRDb25maWdbXSxcbiAgICBhcmVhQ291bnQ6IG51bWJlclxuICApOiBXaWRnZXRQb3NpdGlvbltdIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudExheW91dCkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdObyBsYXlvdXQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TGF5b3V0LmNhbGN1bGF0ZVdpZGdldFBvc2l0aW9ucyh3aWRnZXRzLCBhcmVhQ291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb250YWluZXIgd2lkdGggYW5kIGNoZWNrIGZvciBicmVha3BvaW50IGNoYW5nZXMuXG4gICAqL1xuICB1cGRhdGVDb250YWluZXJXaWR0aCh3aWR0aDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRMYXlvdXQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TGF5b3V0LnVwZGF0ZUNvbnRhaW5lcldpZHRoKHdpZHRoKTtcbiAgfVxufSIsImltcG9ydCB7IGNzcyB9IGZyb20gJ2xpdCc7XG5cbmV4cG9ydCBjb25zdCBkYXNodmlld1RoZW1lID0gY3NzYFxuICA6aG9zdCB7XG4gICAgLS1kYXNodmlldy1wcmltYXJ5LWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LXByaW1hcnktdGV4dC1jb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LXNlY29uZGFyeS10ZXh0LWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgLS1kYXNodmlldy1kaXNhYmxlZC10ZXh0LWNvbG9yOiB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LWRpdmlkZXItY29sb3I6IHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgIC0tZGFzaHZpZXctZXJyb3ItY29sb3I6IHZhcigtLWVycm9yLWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LXN1Y2Nlc3MtY29sb3I6IHZhcigtLXN1Y2Nlc3MtY29sb3IpO1xuICAgIC0tZGFzaHZpZXctd2FybmluZy1jb2xvcjogdmFyKC0td2FybmluZy1jb2xvcik7XG4gICAgLS1kYXNodmlldy1pbmZvLWNvbG9yOiB2YXIoLS1pbmZvLWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LWJhY2tncm91bmQ6IHZhcigtLWxvdmVsYWNlLWJhY2tncm91bmQsIHZhcigtLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcikpO1xuICAgIC0tZGFzaHZpZXctY2FyZC1iYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWJhY2tncm91bmQtY29sb3IpO1xuICAgIC0tZGFzaHZpZXctc3BhY2luZy14czogNHB4O1xuICAgIC0tZGFzaHZpZXctc3BhY2luZy1zbTogOHB4O1xuICAgIC0tZGFzaHZpZXctc3BhY2luZy1tZDogMTZweDtcbiAgICAtLWRhc2h2aWV3LXNwYWNpbmctbGc6IDI0cHg7XG4gICAgLS1kYXNodmlldy1zcGFjaW5nLXhsOiAzMnB4O1xuICAgIC0tZGFzaHZpZXctYm9yZGVyLXJhZGl1czogdmFyKC0taGEtY2FyZC1ib3JkZXItcmFkaXVzLCAxMnB4KTtcbiAgICAtLWRhc2h2aWV3LWJveC1zaGFkb3c6IHZhcigtLWhhLWNhcmQtYm94LXNoYWRvdywgbm9uZSk7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBkYXNodmlld1N0eWxlcyA9IGNzc2BcbiAgKiB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgfVxuXG4gIC5kYXNodmlldy1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tZGFzaHZpZXctYmFja2dyb3VuZCk7XG4gIH1cblxuICAuZGFzaHZpZXctaGVhZGVyIHtcbiAgICBwYWRkaW5nOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLWxnKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kYXNodmlldy1jYXJkLWJhY2tncm91bmQpO1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1kYXNodmlldy1kaXZpZGVyLWNvbG9yKTtcbiAgICBib3gtc2hhZG93OiB2YXIoLS1kYXNodmlldy1ib3gtc2hhZG93KTtcbiAgfVxuXG4gIC5kYXNodmlldy1jb250ZW50IHtcbiAgICBmbGV4OiAxO1xuICAgIHBhZGRpbmc6IHZhcigtLWRhc2h2aWV3LXNwYWNpbmctbGcpO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gIH1cblxuICAuZGFzaHZpZXctY2FyZCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tZGFzaHZpZXctY2FyZC1iYWNrZ3JvdW5kKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1kYXNodmlldy1ib3JkZXItcmFkaXVzKTtcbiAgICBwYWRkaW5nOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLWxnKTtcbiAgICBtYXJnaW4tYm90dG9tOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICBib3gtc2hhZG93OiB2YXIoLS1kYXNodmlldy1ib3gtc2hhZG93KTtcbiAgfVxuXG4gIC5kYXNodmlldy1sb2FkaW5nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGNvbG9yOiB2YXIoLS1kYXNodmlldy1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gIH1cblxuICAuZGFzaHZpZXctZXJyb3Ige1xuICAgIGNvbG9yOiB2YXIoLS1kYXNodmlldy1lcnJvci1jb2xvcik7XG4gICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1tZCk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG5cbiAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgLmRhc2h2aWV3LWhlYWRlciB7XG4gICAgICBwYWRkaW5nOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICB9XG5cbiAgICAuZGFzaHZpZXctY29udGVudCB7XG4gICAgICBwYWRkaW5nOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICB9XG4gIH1cbmA7IiwiLyoqXG4gKiBUb3VjaCBnZXN0dXJlIHV0aWxpdGllcyBmb3IgRGFzaHZpZXcgVjIuXG4gKiBQcm92aWRlcyBzd2lwZSBkZXRlY3Rpb24sIGxvbmcgcHJlc3MgaGFuZGxpbmcsIGFuZCBoYXB0aWMgZmVlZGJhY2suXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBTd2lwZUV2ZW50IHtcbiAgZGlyZWN0aW9uOiAnbGVmdCcgfCAncmlnaHQnIHwgJ3VwJyB8ICdkb3duJztcbiAgZGlzdGFuY2U6IG51bWJlcjtcbiAgdmVsb2NpdHk6IG51bWJlcjtcbiAgZWxlbWVudDogRWxlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb25nUHJlc3NFdmVudCB7XG4gIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlc3R1cmVPcHRpb25zIHtcbiAgc3dpcGVUaHJlc2hvbGQ/OiBudW1iZXI7XG4gIGxvbmdQcmVzc0RlbGF5PzogbnVtYmVyO1xuICB2ZWxvY2l0eVRocmVzaG9sZD86IG51bWJlcjtcbiAgcHJldmVudFNjcm9sbD86IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogUmVxdWlyZWQ8R2VzdHVyZU9wdGlvbnM+ID0ge1xuICBzd2lwZVRocmVzaG9sZDogNTAsXG4gIGxvbmdQcmVzc0RlbGF5OiA1MDAsXG4gIHZlbG9jaXR5VGhyZXNob2xkOiAwLjMsXG4gIHByZXZlbnRTY3JvbGw6IGZhbHNlXG59O1xuXG5leHBvcnQgY2xhc3MgR2VzdHVyZUhhbmRsZXIge1xuICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8R2VzdHVyZU9wdGlvbnM+O1xuICBwcml2YXRlIHN0YXJ0WCA9IDA7XG4gIHByaXZhdGUgc3RhcnRZID0gMDtcbiAgcHJpdmF0ZSBzdGFydFRpbWUgPSAwO1xuICBwcml2YXRlIGxvbmdQcmVzc1RpbWVvdXQ/OiBudW1iZXI7XG4gIHByaXZhdGUgaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1N3aXBpbmcgPSBmYWxzZTtcblxuICBwcml2YXRlIG9uU3dpcGU/OiAoZXZlbnQ6IFN3aXBlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgb25Mb25nUHJlc3M/OiAoZXZlbnQ6IExvbmdQcmVzc0V2ZW50KSA9PiB2b2lkO1xuICBwcml2YXRlIG9uVGFwPzogKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnQsIG9wdGlvbnM6IEdlc3R1cmVPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH07XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gIH1cblxuICBwdWJsaWMgb25Td2lwZURldGVjdGVkKGNhbGxiYWNrOiAoZXZlbnQ6IFN3aXBlRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLm9uU3dpcGUgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyBvbkxvbmdQcmVzc0RldGVjdGVkKGNhbGxiYWNrOiAoZXZlbnQ6IExvbmdQcmVzc0V2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5vbkxvbmdQcmVzcyA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcHVibGljIG9uVGFwRGV0ZWN0ZWQoY2FsbGJhY2s6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25UYXAgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHByaXZhdGUgYmluZEV2ZW50cygpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogIXRoaXMub3B0aW9ucy5wcmV2ZW50U2Nyb2xsIH0pO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogIXRoaXMub3B0aW9ucy5wcmV2ZW50U2Nyb2xsIH0pO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSBhcyBFdmVudExpc3RlbmVyLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5oYW5kbGVUb3VjaENhbmNlbC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlVG91Y2hTdGFydChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcbiAgICB0aGlzLnN0YXJ0WCA9IHRvdWNoLmNsaWVudFg7XG4gICAgdGhpcy5zdGFydFkgPSB0b3VjaC5jbGllbnRZO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmlzTG9uZ1ByZXNzID0gZmFsc2U7XG4gICAgdGhpcy5pc1N3aXBpbmcgPSBmYWxzZTtcblxuICAgIC8vIFN0YXJ0IGxvbmcgcHJlc3MgdGltZXJcbiAgICBpZiAodGhpcy5vbkxvbmdQcmVzcykge1xuICAgICAgdGhpcy5sb25nUHJlc3NUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmlzTG9uZ1ByZXNzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkxvbmdQcmVzcyEoe1xuICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICB4OiB0aGlzLnN0YXJ0WCxcbiAgICAgICAgICB5OiB0aGlzLnN0YXJ0WVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cmlnZ2VySGFwdGljRmVlZGJhY2soJ21lZGl1bScpO1xuICAgICAgfSwgdGhpcy5vcHRpb25zLmxvbmdQcmVzc0RlbGF5KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoTW92ZShldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzTG9uZ1ByZXNzKSByZXR1cm47XG5cbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XG4gICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnModG91Y2guY2xpZW50WCAtIHRoaXMuc3RhcnRYKTtcbiAgICBjb25zdCBkZWx0YVkgPSBNYXRoLmFicyh0b3VjaC5jbGllbnRZIC0gdGhpcy5zdGFydFkpO1xuXG4gICAgLy8gQ2FuY2VsIGxvbmcgcHJlc3MgaWYgbW92aW5nIHRvbyBtdWNoXG4gICAgaWYgKChkZWx0YVggPiAxMCB8fCBkZWx0YVkgPiAxMCkgJiYgdGhpcy5sb25nUHJlc3NUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NUaW1lb3V0KTtcbiAgICAgIHRoaXMubG9uZ1ByZXNzVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBEZXRlY3Qgc3dpcGUgc3RhcnRcbiAgICBpZiAoIXRoaXMuaXNTd2lwaW5nICYmIChkZWx0YVggPiB0aGlzLm9wdGlvbnMuc3dpcGVUaHJlc2hvbGQgfHwgZGVsdGFZID4gdGhpcy5vcHRpb25zLnN3aXBlVGhyZXNob2xkKSkge1xuICAgICAgdGhpcy5pc1N3aXBpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnRTY3JvbGwpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoRW5kKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkZWx0YVggPSB0b3VjaC5jbGllbnRYIC0gdGhpcy5zdGFydFg7XG4gICAgY29uc3QgZGVsdGFZID0gdG91Y2guY2xpZW50WSAtIHRoaXMuc3RhcnRZO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSk7XG5cbiAgICAvLyBDbGVhciBsb25nIHByZXNzIHRpbWVyXG4gICAgaWYgKHRoaXMubG9uZ1ByZXNzVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzVGltZW91dCk7XG4gICAgICB0aGlzLmxvbmdQcmVzc1RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNMb25nUHJlc3MpIHtcbiAgICAgIC8vIExvbmcgcHJlc3MgYWxyZWFkeSBoYW5kbGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNTd2lwaW5nICYmIGRpc3RhbmNlID49IHRoaXMub3B0aW9ucy5zd2lwZVRocmVzaG9sZCkge1xuICAgICAgLy8gSGFuZGxlIHN3aXBlXG4gICAgICBjb25zdCB2ZWxvY2l0eSA9IGRpc3RhbmNlIC8gZHVyYXRpb247XG4gICAgICBcbiAgICAgIGlmICh2ZWxvY2l0eSA+PSB0aGlzLm9wdGlvbnMudmVsb2NpdHlUaHJlc2hvbGQpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5nZXRTd2lwZURpcmVjdGlvbihkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5vblN3aXBlKSB7XG4gICAgICAgICAgdGhpcy5vblN3aXBlKHtcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgIGRpc3RhbmNlLFxuICAgICAgICAgICAgdmVsb2NpdHksXG4gICAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlckhhcHRpY0ZlZWRiYWNrKCdsaWdodCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTd2lwaW5nICYmIGR1cmF0aW9uIDwgMjAwKSB7XG4gICAgICAvLyBIYW5kbGUgdGFwXG4gICAgICBpZiAodGhpcy5vblRhcCkge1xuICAgICAgICB0aGlzLm9uVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoQ2FuY2VsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgdGhpcy5sb25nUHJlc3NUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwcml2YXRlIGdldFN3aXBlRGlyZWN0aW9uKGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcik6ICdsZWZ0JyB8ICdyaWdodCcgfCAndXAnIHwgJ2Rvd24nIHtcbiAgICBjb25zdCBhYnNEZWx0YVggPSBNYXRoLmFicyhkZWx0YVgpO1xuICAgIGNvbnN0IGFic0RlbHRhWSA9IE1hdGguYWJzKGRlbHRhWSk7XG5cbiAgICBpZiAoYWJzRGVsdGFYID4gYWJzRGVsdGFZKSB7XG4gICAgICByZXR1cm4gZGVsdGFYID4gMCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWx0YVkgPiAwID8gJ2Rvd24nIDogJ3VwJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgICB0aGlzLmlzU3dpcGluZyA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VySGFwdGljRmVlZGJhY2soaW50ZW5zaXR5OiAnbGlnaHQnIHwgJ21lZGl1bScgfCAnaGVhdnknKTogdm9pZCB7XG4gICAgaWYgKCd2aWJyYXRlJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgIGNvbnN0IHBhdHRlcm5zID0ge1xuICAgICAgICBsaWdodDogMTAsXG4gICAgICAgIG1lZGl1bTogMjAsXG4gICAgICAgIGhlYXZ5OiA1MFxuICAgICAgfTtcbiAgICAgIG5hdmlnYXRvci52aWJyYXRlKHBhdHRlcm5zW2ludGVuc2l0eV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIpO1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIpO1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSBhcyBFdmVudExpc3RlbmVyKTtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLmhhbmRsZVRvdWNoQ2FuY2VsLmJpbmQodGhpcykgYXMgRXZlbnRMaXN0ZW5lcik7XG4gIH1cbn1cblxuLyoqXG4gKiBTaW1wbGUgc3dpcGUgZGV0ZWN0aW9uIGZvciBlbGVtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkU3dpcGVMaXN0ZW5lcihcbiAgZWxlbWVudDogRWxlbWVudCxcbiAgY2FsbGJhY2s6IChldmVudDogU3dpcGVFdmVudCkgPT4gdm9pZCxcbiAgb3B0aW9ucz86IEdlc3R1cmVPcHRpb25zXG4pOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgaGFuZGxlciA9IG5ldyBHZXN0dXJlSGFuZGxlcihlbGVtZW50LCBvcHRpb25zKTtcbiAgaGFuZGxlci5vblN3aXBlRGV0ZWN0ZWQoY2FsbGJhY2spO1xuICBcbiAgcmV0dXJuICgpID0+IGhhbmRsZXIuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIFNpbXBsZSBsb25nIHByZXNzIGRldGVjdGlvbiBmb3IgZWxlbWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExvbmdQcmVzc0xpc3RlbmVyKFxuICBlbGVtZW50OiBFbGVtZW50LFxuICBjYWxsYmFjazogKGV2ZW50OiBMb25nUHJlc3NFdmVudCkgPT4gdm9pZCxcbiAgb3B0aW9ucz86IEdlc3R1cmVPcHRpb25zXG4pOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgaGFuZGxlciA9IG5ldyBHZXN0dXJlSGFuZGxlcihlbGVtZW50LCBvcHRpb25zKTtcbiAgaGFuZGxlci5vbkxvbmdQcmVzc0RldGVjdGVkKGNhbGxiYWNrKTtcbiAgXG4gIHJldHVybiAoKSA9PiBoYW5kbGVyLmRlc3Ryb3koKTtcbn1cblxuLyoqXG4gKiBIYXB0aWMgZmVlZGJhY2sgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBIYXB0aWNGZWVkYmFjayB7XG4gIHByaXZhdGUgc3RhdGljIGlzU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAndmlicmF0ZScgaW4gbmF2aWdhdG9yO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZSgxMCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBtZWRpdW0oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoMjApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgaGVhdnkoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoWzUwLCA1MCwgNTBdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHN1Y2Nlc3MoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoWzEwLCAxMDAsIDEwXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBlcnJvcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZShbMTAwLCA1MCwgMTAwLCA1MCwgMTAwXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBzZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoNSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjdXN0b20ocGF0dGVybjogbnVtYmVyIHwgbnVtYmVyW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZShwYXR0ZXJuKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUb3VjaCB0YXJnZXQgc2l6ZSBoZWxwZXJzXG4gKi9cbmV4cG9ydCBjb25zdCBUb3VjaFRhcmdldCA9IHtcbiAgLyoqXG4gICAqIE1pbmltdW0gdG91Y2ggdGFyZ2V0IHNpemUgKDQ0cHgpIGFzIHBlciBXQ0FHIGd1aWRlbGluZXNcbiAgICovXG4gIE1JTl9TSVpFOiA0NCxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBtZWV0cyBtaW5pbXVtIHRvdWNoIHRhcmdldCByZXF1aXJlbWVudHNcbiAgICovXG4gIG1lZXRzTWluaW11bVNpemUoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiByZWN0LndpZHRoID49IHRoaXMuTUlOX1NJWkUgJiYgcmVjdC5oZWlnaHQgPj0gdGhpcy5NSU5fU0laRTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkIHRvdWNoIHRhcmdldCBwYWRkaW5nIHRvIGFuIGVsZW1lbnQgaWYgbmVlZGVkXG4gICAqL1xuICBlbnN1cmVNaW5pbXVtU2l6ZShlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIFxuICAgIGlmIChyZWN0LndpZHRoIDwgdGhpcy5NSU5fU0laRSkge1xuICAgICAgY29uc3QgcGFkZGluZyA9ICh0aGlzLk1JTl9TSVpFIC0gcmVjdC53aWR0aCkgLyAyO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtwYWRkaW5nfXB4YDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlY3QuaGVpZ2h0IDwgdGhpcy5NSU5fU0laRSkge1xuICAgICAgY29uc3QgcGFkZGluZyA9ICh0aGlzLk1JTl9TSVpFIC0gcmVjdC5oZWlnaHQpIC8gMjtcbiAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7cGFkZGluZ31weGA7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdlc3R1cmUtZW5hYmxlZCBiYXNlIGNsYXNzIGZvciBMaXQgZWxlbWVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEdlc3R1cmVFbGVtZW50IGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICBwcml2YXRlIGdlc3R1cmVIYW5kbGVyPzogR2VzdHVyZUhhbmRsZXI7XG5cbiAgcHJvdGVjdGVkIGVuYWJsZUdlc3R1cmVzKGVsZW1lbnQ6IEVsZW1lbnQsIG9wdGlvbnM/OiBHZXN0dXJlT3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuZ2VzdHVyZUhhbmRsZXIgPSBuZXcgR2VzdHVyZUhhbmRsZXIoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgXG4gICAgdGhpcy5nZXN0dXJlSGFuZGxlci5vblN3aXBlRGV0ZWN0ZWQoKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdnZXN0dXJlLXN3aXBlJywgeyBkZXRhaWw6IGV2ZW50IH0pKTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmdlc3R1cmVIYW5kbGVyLm9uTG9uZ1ByZXNzRGV0ZWN0ZWQoKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdnZXN0dXJlLWxvbmdwcmVzcycsIHsgZGV0YWlsOiBldmVudCB9KSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5nZXN0dXJlSGFuZGxlci5vblRhcERldGVjdGVkKChldmVudCkgPT4ge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZ2VzdHVyZS10YXAnLCB7IGRldGFpbDogZXZlbnQgfSkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRpc2FibGVHZXN0dXJlcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nZXN0dXJlSGFuZGxlcikge1xuICAgICAgdGhpcy5nZXN0dXJlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICB0aGlzLmdlc3R1cmVIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufSIsIi8qKlxuICogQW5pbWF0aW9uIGNvbnN0YW50cyBhbmQgdXRpbGl0aWVzIGZvciBEYXNodmlldyBWMiB3aWRnZXRzLlxuICogUHJvdmlkZXMgY29uc2lzdGVudCB0aW1pbmcsIGVhc2luZywgYW5kIGtleWZyYW1lIGFuaW1hdGlvbnMuXG4gKi9cblxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnbGl0JztcblxuZXhwb3J0IGNvbnN0IEFOSU1BVElPTl9EVVJBVElPTiA9IHtcbiAgZmFzdDogJzE1MG1zJyxcbiAgbm9ybWFsOiAnMjUwbXMnLFxuICBzbG93OiAnMzUwbXMnXG59O1xuXG5leHBvcnQgY29uc3QgRUFTSU5HID0ge1xuICBzdGFuZGFyZDogJ2N1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKScsXG4gIGRlY2VsZXJhdGU6ICdjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSknLFxuICBhY2NlbGVyYXRlOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKScsXG4gIHNoYXJwOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjYsIDEpJ1xufTtcblxuLyoqXG4gKiBTa2VsZXRvbiBsb2FkaW5nIGFuaW1hdGlvbiBzdHlsZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHNrZWxldG9uU3R5bGVzID0gY3NzYFxuICBAa2V5ZnJhbWVzIHNrZWxldG9uLWxvYWRpbmcge1xuICAgIDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwMCUgMDsgfVxuICAgIDEwMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAyMDAlIDA7IH1cbiAgfVxuICBcbiAgLnNrZWxldG9uIHtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICA5MGRlZyxcbiAgICAgIHZhcigtLWNhcmQtYmFja2dyb3VuZC1jb2xvcikgMCUsXG4gICAgICB2YXIoLS1kaXZpZGVyLWNvbG9yKSA1MCUsXG4gICAgICB2YXIoLS1jYXJkLWJhY2tncm91bmQtY29sb3IpIDEwMCVcbiAgICApO1xuICAgIGJhY2tncm91bmQtc2l6ZTogMjAwJSAxMDAlO1xuICAgIGFuaW1hdGlvbjogc2tlbGV0b24tbG9hZGluZyAxLjVzIGVhc2UtaW4tb3V0IGluZmluaXRlO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgfVxuICBcbiAgLnNrZWxldG9uLXRleHQge1xuICAgIGhlaWdodDogMTZweDtcbiAgICBtYXJnaW46IDRweCAwO1xuICB9XG4gIFxuICAuc2tlbGV0b24tdGV4dC5sYXJnZSB7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICB9XG4gIFxuICAuc2tlbGV0b24tdGV4dC5zbWFsbCB7XG4gICAgaGVpZ2h0OiAxMnB4O1xuICB9XG4gIFxuICAuc2tlbGV0b24tYnV0dG9uIHtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgd2lkdGg6IDEwMHB4O1xuICB9XG4gIFxuICAuc2tlbGV0b24taWNvbiB7XG4gICAgd2lkdGg6IDI0cHg7XG4gICAgaGVpZ2h0OiAyNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgfVxuICBcbiAgLnNrZWxldG9uLWNhcmQge1xuICAgIGhlaWdodDogMTIwcHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICB9XG5gO1xuXG4vKipcbiAqIFNtb290aCBleHBhbmQvY29sbGFwc2UgYW5pbWF0aW9uIHN0eWxlc1xuICovXG5leHBvcnQgY29uc3QgZXhwYW5kQ29sbGFwc2VTdHlsZXMgPSBjc3NgXG4gIEBrZXlmcmFtZXMgZXhwYW5kIHtcbiAgICBmcm9tIHtcbiAgICAgIG1heC1oZWlnaHQ6IDA7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgIH1cbiAgICB0byB7XG4gICAgICBtYXgtaGVpZ2h0OiA2MDBweDtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG4gIFxuICBAa2V5ZnJhbWVzIGNvbGxhcHNlIHtcbiAgICBmcm9tIHtcbiAgICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgdG8ge1xuICAgICAgbWF4LWhlaWdodDogMDtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICB9XG4gIFxuICAuZXhwYW5kLWVudGVyIHtcbiAgICBhbmltYXRpb246IGV4cGFuZCAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgfVxuICBcbiAgLmNvbGxhcHNlLWV4aXQge1xuICAgIGFuaW1hdGlvbjogY29sbGFwc2UgMjUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG4gIFxuICAuY29udGVudC1leHBhbmRhYmxlIHtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRyYW5zaXRpb246IG1heC1oZWlnaHQgMjUwbXMgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpO1xuICB9XG4gIFxuICAuY29udGVudC1jb2xsYXBzZWQge1xuICAgIG1heC1oZWlnaHQ6IDA7XG4gIH1cbiAgXG4gIC5jb250ZW50LWV4cGFuZGVkIHtcbiAgICBtYXgtaGVpZ2h0OiA2MDBweDtcbiAgfVxuYDtcblxuLyoqXG4gKiBUb3VjaCBpbnRlcmFjdGlvbiBhbmltYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCB0b3VjaFN0eWxlcyA9IGNzc2BcbiAgQGtleWZyYW1lcyB0b3VjaC1mZWVkYmFjayB7XG4gICAgMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9XG4gICAgNTAlIHsgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsgfVxuICAgIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9XG4gIH1cbiAgXG4gIC50b3VjaC10YXJnZXQge1xuICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgbWluLXdpZHRoOiA0NHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gIH1cbiAgXG4gIC50b3VjaC10YXJnZXQ6YWN0aXZlIHtcbiAgICBhbmltYXRpb246IHRvdWNoLWZlZWRiYWNrIDE1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKTtcbiAgfVxuICBcbiAgLnRvdWNoLXRhcmdldDpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IpO1xuICB9XG4gIFxuICBAbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xuICAgIC50b3VjaC10YXJnZXQ6YWN0aXZlIHtcbiAgICAgIGFuaW1hdGlvbjogbm9uZTtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45OCk7XG4gICAgfVxuICB9XG5gO1xuXG4vKipcbiAqIExvYWRpbmcgc3Bpbm5lciBhbmltYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHNwaW5uZXJTdHlsZXMgPSBjc3NgXG4gIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gIH1cbiAgXG4gIC5zcGlubmVyIHtcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICB9XG4gIFxuICAubG9hZGluZy1kb3RzIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBnYXA6IDRweDtcbiAgfVxuICBcbiAgLmxvYWRpbmctZG90czo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIGFuaW1hdGlvbjogbG9hZGluZy1kb3RzIDEuNXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgbG9hZGluZy1kb3RzIHtcbiAgICAwJSwgMjAlIHsgY29udGVudDogJyc7IH1cbiAgICA0MCUgeyBjb250ZW50OiAnLic7IH1cbiAgICA2MCUgeyBjb250ZW50OiAnLi4nOyB9XG4gICAgODAlLCAxMDAlIHsgY29udGVudDogJy4uLic7IH1cbiAgfVxuYDtcblxuLyoqXG4gKiBGYWRlIGluL291dCBhbmltYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBmYWRlU3R5bGVzID0gY3NzYFxuICBAa2V5ZnJhbWVzIGZhZGUtaW4ge1xuICAgIGZyb20geyBvcGFjaXR5OiAwOyB9XG4gICAgdG8geyBvcGFjaXR5OiAxOyB9XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgZmFkZS1vdXQge1xuICAgIGZyb20geyBvcGFjaXR5OiAxOyB9XG4gICAgdG8geyBvcGFjaXR5OiAwOyB9XG4gIH1cbiAgXG4gIC5mYWRlLWluIHtcbiAgICBhbmltYXRpb246IGZhZGUtaW4gMjUwbXMgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpO1xuICB9XG4gIFxuICAuZmFkZS1vdXQge1xuICAgIGFuaW1hdGlvbjogZmFkZS1vdXQgMjUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKTtcbiAgfVxuICBcbiAgLmZhZGUtdHJhbnNpdGlvbiB7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gIH1cbmA7XG5cbi8qKlxuICogU2xpZGUgYW5pbWF0aW9ucyBmb3IgbW9iaWxlIGludGVyYWN0aW9uc1xuICovXG5leHBvcnQgY29uc3Qgc2xpZGVTdHlsZXMgPSBjc3NgXG4gIEBrZXlmcmFtZXMgc2xpZGUtaW4tcmlnaHQge1xuICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfVxuICB9XG4gIFxuICBAa2V5ZnJhbWVzIHNsaWRlLWluLWxlZnQge1xuICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOyB9XG4gICAgdG8geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH1cbiAgfVxuICBcbiAgQGtleWZyYW1lcyBzbGlkZS1vdXQtcmlnaHQge1xuICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsgfVxuICB9XG4gIFxuICBAa2V5ZnJhbWVzIHNsaWRlLW91dC1sZWZ0IHtcbiAgICBmcm9tIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOyB9XG4gICAgdG8geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOyB9XG4gIH1cbiAgXG4gIC5zbGlkZS1pbi1yaWdodCB7XG4gICAgYW5pbWF0aW9uOiBzbGlkZS1pbi1yaWdodCAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gIH1cbiAgXG4gIC5zbGlkZS1pbi1sZWZ0IHtcbiAgICBhbmltYXRpb246IHNsaWRlLWluLWxlZnQgMjUwbXMgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpO1xuICB9XG4gIFxuICAuc2xpZGUtb3V0LXJpZ2h0IHtcbiAgICBhbmltYXRpb246IHNsaWRlLW91dC1yaWdodCAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpO1xuICB9XG4gIFxuICAuc2xpZGUtb3V0LWxlZnQge1xuICAgIGFuaW1hdGlvbjogc2xpZGUtb3V0LWxlZnQgMjUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKTtcbiAgfVxuYDtcblxuLyoqXG4gKiBDb21iaW5lZCBhbmltYXRpb24gc3R5bGVzIGZvciBlYXN5IGltcG9ydFxuICovXG5leHBvcnQgY29uc3QgYW5pbWF0aW9uU3R5bGVzID0gY3NzYFxuICAke3NrZWxldG9uU3R5bGVzfVxuICAke2V4cGFuZENvbGxhcHNlU3R5bGVzfVxuICAke3RvdWNoU3R5bGVzfVxuICAke3NwaW5uZXJTdHlsZXN9XG4gICR7ZmFkZVN0eWxlc31cbiAgJHtzbGlkZVN0eWxlc31cbiAgXG4gIC8qIFJlc3BlY3QgdXNlcidzIG1vdGlvbiBwcmVmZXJlbmNlcyAqL1xuICBAbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xuICAgICoge1xuICAgICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAwLjAxbXMgIWltcG9ydGFudDtcbiAgICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IDEgIWltcG9ydGFudDtcbiAgICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDAuMDFtcyAhaW1wb3J0YW50O1xuICAgIH1cbiAgfVxuYDsiLCIvKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBEYXNodmlldyB3aWRnZXRzLlxuICogUHJvdmlkZXMgbGlmZWN5Y2xlIG1hbmFnZW1lbnQsIHN0YXRlIGhhbmRsaW5nLCBhbmQgdmlzaWJpbGl0eSB0cmFja2luZy5cbiAqL1xuXG5pbXBvcnQgeyBQcm9wZXJ0eVZhbHVlcywgY3NzIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IERhc2h2aWV3QmFzZUVsZW1lbnQgfSBmcm9tICcuL2Jhc2UtZWxlbWVudCc7XG5pbXBvcnQgeyBTdGF0ZURpZmYsIFN0YXRlTWFuYWdlciB9IGZyb20gJy4vc3RhdGUtbWFuYWdlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NYW5hZ2VyIH0gZnJvbSAnLi9zdWJzY3JpcHRpb24tbWFuYWdlcic7XG5pbXBvcnQgeyBIYXB0aWNGZWVkYmFjayB9IGZyb20gJy4uL3V0aWxzL2dlc3R1cmVzJztcbmltcG9ydCB7IEFOSU1BVElPTl9EVVJBVElPTiwgRUFTSU5HIH0gZnJvbSAnLi4vc3R5bGVzL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHR5cGUgeyBIb21lQXNzaXN0YW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdpZGdldENvbmZpZyB7XG4gIHR5cGU6ICdyb29tJyB8ICdkZXZpY2UtZ3JvdXAnIHwgJ2NsaW1hdGUnIHwgJ3F1aWNrLWNvbnRyb2xzJztcbiAgZW50aXRpZXM6IHN0cmluZ1tdO1xuICB0aXRsZT86IHN0cmluZztcbiAgbGF5b3V0Pzoge1xuICAgIGdyaWRDb2x1bW4/OiBzdHJpbmc7XG4gICAgZ3JpZFJvdz86IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERhc2h2aWV3V2lkZ2V0IGV4dGVuZHMgRGFzaHZpZXdCYXNlRWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IE9iamVjdCB9KSB3aWRnZXRDb25maWchOiBXaWRnZXRDb25maWc7XG4gIEBzdGF0ZSgpIHByb3RlY3RlZCBlbnRpdHlTdGF0ZXM6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwKCk7XG4gIEBzdGF0ZSgpIHByb3RlY3RlZCBpc1Zpc2libGUgPSBmYWxzZTtcbiAgQHN0YXRlKCkgcHJvdGVjdGVkIGlzTG9hZGluZyA9IHRydWU7XG4gIEBzdGF0ZSgpIHByb3RlY3RlZCBlcnJvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBzdGF0ZU1hbmFnZXI/OiBTdGF0ZU1hbmFnZXI7XG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uTWFuYWdlcj86IFN1YnNjcmlwdGlvbk1hbmFnZXI7XG4gIHByaXZhdGUgaW50ZXJzZWN0aW9uT2JzZXJ2ZXI/OiBJbnRlcnNlY3Rpb25PYnNlcnZlcjtcbiAgcHJpdmF0ZSBzdGF0ZVVuc3Vic2NyaWJlcnM6ICgoKSA9PiB2b2lkKVtdID0gW107XG4gIHByaXZhdGUga2V5Ym9hcmRIYW5kbGVyczogTWFwPHN0cmluZywgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhbmltYXRpb25GcmFtZUlkPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgZW50aXR5IElEcyB0aGlzIHdpZGdldCB3YW50cyB0byBzdWJzY3JpYmUgdG8uXG4gICAqIENhbiBiZSBvdmVycmlkZGVuIGJ5IHN1YmNsYXNzZXMgZm9yIGR5bmFtaWMgc3Vic2NyaXB0aW9ucy5cbiAgICovXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXMgfHwgW107XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gd2lkZ2V0IGNvbmZpZ3VyYXRpb24gaXMgc2V0LlxuICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0byB2YWxpZGF0ZSB0aGVpciBzcGVjaWZpYyBjb25maWcuXG4gICAqL1xuICBzZXRDb25maWcoY29uZmlnOiBXaWRnZXRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbmZpZ3VyYXRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy52YWxpZGF0ZUNvbmZpZyhjb25maWcpO1xuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25maWd1cmF0aW9uIGVycm9yczogJHtlcnJvcnMuam9pbignLCAnKX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLndpZGdldENvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB3aWRnZXQgY29uZmlndXJhdGlvbi5cbiAgICogUmV0dXJucyBhcnJheSBvZiBlcnJvciBtZXNzYWdlcywgZW1wdHkgaWYgdmFsaWQuXG4gICAqL1xuICBwcm90ZWN0ZWQgdmFsaWRhdGVDb25maWcoY29uZmlnOiBXaWRnZXRDb25maWcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCFjb25maWcudHlwZSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1dpZGdldCB0eXBlIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZW50aXRpZXMgfHwgIUFycmF5LmlzQXJyYXkoY29uZmlnLmVudGl0aWVzKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ0VudGl0aWVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgd2lkZ2V0IHR5cGUuXG4gICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRvIHByb3ZpZGUgc2Vuc2libGUgZGVmYXVsdHMuXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RGVmYXVsdENvbmZpZygpOiBQYXJ0aWFsPFdpZGdldENvbmZpZz47XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGVudGl0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0byBoYW5kbGUgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIHByb3RlY3RlZCBvblN0YXRlQ2hhbmdlZChcbiAgICBlbnRpdHlJZDogc3RyaW5nLFxuICAgIG5ld1N0YXRlOiBhbnksXG4gICAgb2xkU3RhdGU6IGFueVxuICApOiB2b2lkIHtcbiAgICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHVwZGF0ZXMgdGhlIGxvY2FsIHN0YXRlIG1hcFxuICAgIGlmIChuZXdTdGF0ZSkge1xuICAgICAgdGhpcy5lbnRpdHlTdGF0ZXMuc2V0KGVudGl0eUlkLCBuZXdTdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW50aXR5U3RhdGVzLmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZTogQ2FsbGVkIHdoZW4gZWxlbWVudCBpcyBhZGRlZCB0byBET00uXG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuc2V0dXBWaXNpYmlsaXR5T2JzZXJ2ZXIoKTtcbiAgICB0aGlzLnNldHVwS2V5Ym9hcmRIYW5kbGVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZTogQ2FsbGVkIGFmdGVyIGZpcnN0IHVwZGF0ZS5cbiAgICovXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVdpZGdldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZTogQ2FsbGVkIHdoZW4gZWxlbWVudCBpcyByZW1vdmVkIGZyb20gRE9NLlxuICAgKi9cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmNsZWFudXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSB3aWRnZXQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVXaWRnZXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuXG4gICAgICAvLyBHZXQgbWFuYWdlcnMgZnJvbSBkYXNoYm9hcmQgY29udGV4dFxuICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIgPSB0aGlzLmdldFN0YXRlTWFuYWdlcigpO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyID0gdGhpcy5nZXRTdWJzY3JpcHRpb25NYW5hZ2VyKCk7XG5cbiAgICAgIGlmICghdGhpcy5zdGF0ZU1hbmFnZXIgfHwgIXRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0YXRlIG9yIHN1YnNjcmlwdGlvbiBtYW5hZ2VyIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCBpbml0aWFsIGVudGl0eSBzdGF0ZXNcbiAgICAgIGF3YWl0IHRoaXMubG9hZEluaXRpYWxTdGF0ZXMoKTtcblxuICAgICAgLy8gU3Vic2NyaWJlIHRvIHN0YXRlIGNoYW5nZXNcbiAgICAgIHRoaXMuc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMoKTtcblxuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IgYXMgRXJyb3IsICdXaWRnZXQgaW5pdGlhbGl6YXRpb24nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0YXRlIG1hbmFnZXIgZnJvbSBkYXNoYm9hcmQgY29udGV4dC5cbiAgICogVGhpcyBzaG91bGQgYmUgcHJvdmlkZWQgYnkgdGhlIHBhcmVudCBkYXNoYm9hcmQuXG4gICAqL1xuICBwcml2YXRlIGdldFN0YXRlTWFuYWdlcigpOiBTdGF0ZU1hbmFnZXIgfCB1bmRlZmluZWQge1xuICAgIC8vIFRyeSB0byBnZXQgZnJvbSBwYXJlbnQgZGFzaGJvYXJkIGVsZW1lbnRcbiAgICBjb25zdCBkYXNoYm9hcmQgPSB0aGlzLmNsb3Nlc3QoJ2Rhc2h2aWV3LWRhc2hib2FyZCcpO1xuICAgIHJldHVybiAoZGFzaGJvYXJkIGFzIGFueSk/LnN0YXRlTWFuYWdlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3Vic2NyaXB0aW9uIG1hbmFnZXIgZnJvbSBkYXNoYm9hcmQgY29udGV4dC5cbiAgICovXG4gIHByaXZhdGUgZ2V0U3Vic2NyaXB0aW9uTWFuYWdlcigpOiBTdWJzY3JpcHRpb25NYW5hZ2VyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBkYXNoYm9hcmQgPSB0aGlzLmNsb3Nlc3QoJ2Rhc2h2aWV3LWRhc2hib2FyZCcpO1xuICAgIHJldHVybiAoZGFzaGJvYXJkIGFzIGFueSk/LnN1YnNjcmlwdGlvbk1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBpbml0aWFsIHN0YXRlcyBmb3IgYWxsIGVudGl0aWVzLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBsb2FkSW5pdGlhbFN0YXRlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiBlbnRpdGllcykge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmhhc3Muc3RhdGVzW2VudGl0eUlkXTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICB0aGlzLmVudGl0eVN0YXRlcy5zZXQoZW50aXR5SWQsIHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHN0YXRlIGNoYW5nZXMgZm9yIG91ciBlbnRpdGllcy5cbiAgICovXG4gIHByaXZhdGUgc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0YXRlTWFuYWdlcikgcmV0dXJuO1xuXG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLnN1YnNjcmliZWRFbnRpdGllcygpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgZW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5zdGF0ZU1hbmFnZXIuc3Vic2NyaWJlVG9FbnRpdHkoXG4gICAgICAgIGVudGl0eUlkLFxuICAgICAgICAoZGlmZjogU3RhdGVEaWZmKSA9PiB7XG4gICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlZChcbiAgICAgICAgICAgIGRpZmYuZW50aXR5SWQsXG4gICAgICAgICAgICBkaWZmLm5ld1N0YXRlLFxuICAgICAgICAgICAgZGlmZi5vbGRTdGF0ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB0aGlzLnN0YXRlVW5zdWJzY3JpYmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW50ZXJzZWN0aW9uIG9ic2VydmVyIGZvciB2aXNpYmlsaXR5IHRyYWNraW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cFZpc2liaWxpdHlPYnNlcnZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKGVudHJ5LnRhcmdldCA9PT0gdGhpcykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKGVudHJ5LmlzSW50ZXJzZWN0aW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvb3Q6IG51bGwsXG4gICAgICAgIHJvb3RNYXJnaW46ICc1MHB4JywgIC8vIFN0YXJ0IGxvYWRpbmcgc2xpZ2h0bHkgYmVmb3JlIHZpc2libGVcbiAgICAgICAgdGhyZXNob2xkOiAwLjAxLFxuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHZpc2liaWxpdHkgY2hhbmdlcy5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1Zpc2libGUgPT09IGlzVmlzaWJsZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5pc1Zpc2libGUgPSBpc1Zpc2libGU7XG5cbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICB0aGlzLm9uQmVjYW1lVmlzaWJsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uQmVjYW1lSGlkZGVuKCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdmlzaWJpbGl0eVxuICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHdpZGdldCBiZWNvbWVzIHZpc2libGUuXG4gICAqIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlIGZvciBjdXN0b20gYmVoYXZpb3IuXG4gICAqL1xuICBwcm90ZWN0ZWQgb25CZWNhbWVWaXNpYmxlKCk6IHZvaWQge1xuICAgIC8vIERlZmF1bHQ6IG5vIGFjdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHdpZGdldCBiZWNvbWVzIGhpZGRlbi5cbiAgICogU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgZm9yIGN1c3RvbSBiZWhhdmlvci5cbiAgICovXG4gIHByb3RlY3RlZCBvbkJlY2FtZUhpZGRlbigpOiB2b2lkIHtcbiAgICAvLyBEZWZhdWx0OiBubyBhY3Rpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgc3Vic2NyaXB0aW9ucyBiYXNlZCBvbiBjdXJyZW50IHZpc2liaWxpdHkuXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMoKTtcbiAgICBcbiAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcbiAgICAgIC8vIFdpZGdldCBpcyB2aXNpYmxlLCBlbnN1cmUgd2UncmUgc3Vic2NyaWJlZFxuICAgICAgY29uc3QgdmlzaWJsZUVudGl0aWVzID0gdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmdldFZpc2libGVFbnRpdGllcygpO1xuICAgICAgY29uc3QgYWxsVmlzaWJsZSA9IG5ldyBTZXQoWy4uLnZpc2libGVFbnRpdGllcywgLi4uZW50aXRpZXNdKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci51cGRhdGVWaXNpYmxlRW50aXRpZXMoQXJyYXkuZnJvbShhbGxWaXNpYmxlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdpZGdldCBpcyBoaWRkZW4sIHdlIGNvdWxkIHVuc3Vic2NyaWJlXG4gICAgICAvLyBCdXQgdGhpcyBpcyBoYW5kbGVkIGdsb2JhbGx5IGJ5IHRoZSBkYXNoYm9hcmRcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgcmVzb3VyY2VzLlxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIFVuc3Vic2NyaWJlIGZyb20gc3RhdGUgY2hhbmdlc1xuICAgIGZvciAoY29uc3QgdW5zdWJzY3JpYmUgb2YgdGhpcy5zdGF0ZVVuc3Vic2NyaWJlcnMpIHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGVVbnN1YnNjcmliZXJzID0gW107XG5cbiAgICAvLyBDbGVhbiB1cCBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXJcbiAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIGtleWJvYXJkIGhhbmRsZXJzXG4gICAgdGhpcy5yZW1vdmVLZXlib2FyZEhhbmRsZXJzKCk7XG5cbiAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYW5pbWF0aW9uIGZyYW1lc1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbkZyYW1lSWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgc3RhdGVcbiAgICB0aGlzLmVudGl0eVN0YXRlcy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBjYWxsIEhvbWUgQXNzaXN0YW50IHNlcnZpY2UuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgY2FsbFNlcnZpY2UoXG4gICAgZG9tYWluOiBzdHJpbmcsXG4gICAgc2VydmljZTogc3RyaW5nLFxuICAgIGRhdGE/OiBhbnlcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIGRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yIGFzIEVycm9yLCBgU2VydmljZSBjYWxsICR7ZG9tYWlufS4ke3NlcnZpY2V9YCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIHRvZ2dsZSBhbiBlbnRpdHkuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgdG9nZ2xlRW50aXR5KGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgIGF3YWl0IHRoaXMuY2FsbFNlcnZpY2UoZG9tYWluLCAndG9nZ2xlJywgeyBlbnRpdHlfaWQ6IGVudGl0eUlkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byB0dXJuIG9uIGFuIGVudGl0eS5cbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyB0dXJuT24oZW50aXR5SWQ6IHN0cmluZywgZGF0YT86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgYXdhaXQgdGhpcy5jYWxsU2VydmljZShkb21haW4sICd0dXJuX29uJywgeyBlbnRpdHlfaWQ6IGVudGl0eUlkLCAuLi5kYXRhIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byB0dXJuIG9mZiBhbiBlbnRpdHkuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgdHVybk9mZihlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgICBhd2FpdCB0aGlzLmNhbGxTZXJ2aWNlKGRvbWFpbiwgJ3R1cm5fb2ZmJywgeyBlbnRpdHlfaWQ6IGVudGl0eUlkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgaGFwdGljIGZlZWRiYWNrIHdpdGggdGhlIHNwZWNpZmllZCBpbnRlbnNpdHkuXG4gICAqL1xuICBwcm90ZWN0ZWQgdHJpZ2dlckhhcHRpY0ZlZWRiYWNrKGludGVuc2l0eTogJ2xpZ2h0JyB8ICdtZWRpdW0nIHwgJ2hlYXZ5JyB8ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnc2VsZWN0aW9uJyk6IHZvaWQge1xuICAgIEhhcHRpY0ZlZWRiYWNrW2ludGVuc2l0eV0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGFuaW1hdGlvbi5cbiAgICovXG4gIHByb3RlY3RlZCBhbmltYXRlRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgYW5pbWF0aW9uOiBzdHJpbmcsIGR1cmF0aW9uPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uIHx8IEFOSU1BVElPTl9EVVJBVElPTi5ub3JtYWw7XG4gICAgICBcbiAgICAgIGVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9ufSAke2FuaW1hdGlvbkR1cmF0aW9ufSAke0VBU0lORy5zdGFuZGFyZH1gO1xuICAgICAgXG4gICAgICBjb25zdCBoYW5kbGVBbmltYXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gJyc7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgaGFuZGxlQW5pbWF0aW9uRW5kKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBoYW5kbGVBbmltYXRpb25FbmQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzIG1hbmFnZW1lbnQgaGVscGVyLlxuICAgKi9cbiAgcHJvdGVjdGVkIGZvY3VzRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgb3B0aW9ucz86IEZvY3VzT3B0aW9ucyk6IHZvaWQge1xuICAgIGVsZW1lbnQuZm9jdXMob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIGtleWJvYXJkIGV2ZW50IGhhbmRsZXJzIGZvciBhY2Nlc3NpYmlsaXR5LlxuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEtleWJvYXJkSGFuZGxlcnMoKTogdm9pZCB7XG4gICAgLy8gRGVmYXVsdCBrZXlib2FyZCBoYW5kbGVyc1xuICAgIHRoaXMuYWRkS2V5Ym9hcmRIYW5kbGVyKCdFc2NhcGUnLCB0aGlzLmhhbmRsZUVzY2FwZUtleS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmFkZEtleWJvYXJkSGFuZGxlcignVGFiJywgdGhpcy5oYW5kbGVUYWJLZXkuYmluZCh0aGlzKSk7XG4gICAgXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlkb3duLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBrZXlib2FyZCBldmVudCBoYW5kbGVycy5cbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlS2V5Ym9hcmRIYW5kbGVycygpOiB2b2lkIHtcbiAgICB0aGlzLmtleWJvYXJkSGFuZGxlcnMuY2xlYXIoKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEga2V5Ym9hcmQgZXZlbnQgaGFuZGxlci5cbiAgICovXG4gIHByb3RlY3RlZCBhZGRLZXlib2FyZEhhbmRsZXIoa2V5OiBzdHJpbmcsIGhhbmRsZXI6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMua2V5Ym9hcmRIYW5kbGVycy5zZXQoa2V5LCBoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUga2V5Ym9hcmQgZXZlbnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlciA9IHRoaXMua2V5Ym9hcmRIYW5kbGVycy5nZXQoZXZlbnQua2V5KTtcbiAgICBpZiAoaGFuZGxlcikge1xuICAgICAgaGFuZGxlcihldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBFc2NhcGUga2V5IChkZWZhdWx0OiBibHVyIGFjdGl2ZSBlbGVtZW50KS5cbiAgICovXG4gIHByb3RlY3RlZCBoYW5kbGVFc2NhcGVLZXkoX2V2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdD8uYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoYWN0aXZlRWxlbWVudCkge1xuICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBUYWIga2V5IGZvciBmb2N1cyBtYW5hZ2VtZW50LlxuICAgKi9cbiAgcHJvdGVjdGVkIGhhbmRsZVRhYktleShfZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBEZWZhdWx0IGJlaGF2aW9yIC0gY291bGQgYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzXG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBmb2N1c2FibGUgZWxlbWVudHMgd2l0aGluIHRoZSB3aWRnZXQuXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Rm9jdXNhYmxlRWxlbWVudHMoKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgY29uc3QgZm9jdXNhYmxlU2VsZWN0b3JzID0gW1xuICAgICAgJ2J1dHRvbjpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgJ2lucHV0Om5vdChbZGlzYWJsZWRdKScsXG4gICAgICAnc2VsZWN0Om5vdChbZGlzYWJsZWRdKScsXG4gICAgICAndGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pJyxcbiAgICAgICdhW2hyZWZdJyxcbiAgICAgICdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9XCItMVwiXSknLFxuICAgICAgJ2hhLWljb24tYnV0dG9uOm5vdChbZGlzYWJsZWRdKScsXG4gICAgICAnbXdjLWJ1dHRvbjpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgJ2hhLXN3aXRjaDpub3QoW2Rpc2FibGVkXSknXG4gICAgXS5qb2luKCcsICcpO1xuXG4gICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3JBbGwoZm9jdXNhYmxlU2VsZWN0b3JzKSB8fCBbXTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50cykgYXMgSFRNTEVsZW1lbnRbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXNlIHN0eWxlcyBmb3IgYWxsIHdpZGdldHMuXG4gICAqL1xuICBzdGF0aWMgc3R5bGVzID0gY3NzYFxuICAgIDpob3N0IHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC53aWRnZXQtY29udGFpbmVyIHtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIH1cblxuICAgIC53aWRnZXQtbG9hZGluZyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgfVxuXG4gICAgLndpZGdldC1lcnJvciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgY29sb3I6IHZhcigtLWVycm9yLWNvbG9yLCAjZjQ0MzM2KTtcbiAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICBgO1xufSIsIi8qKlxuICogRW50aXR5IHR5cGUgdG8gaWNvbiBtYXBwaW5nIHV0aWxpdHkuXG4gKiBNYXBzIGVudGl0eSB0eXBlcyBhbmQgZG9tYWlucyB0byBNYXRlcmlhbCBEZXNpZ24gSWNvbnMuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEVOVElUWV9JQ09OUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gTGlnaHRzXG4gICdsaWdodCc6ICdtZGk6bGlnaHRidWxiJyxcbiAgJ2xpZ2h0LmNlaWxpbmcnOiAnbWRpOmNlaWxpbmctbGlnaHQnLFxuICAnbGlnaHQuZmxvb3InOiAnbWRpOmZsb29yLWxhbXAnLFxuICAnbGlnaHQuZGVzayc6ICdtZGk6ZGVzay1sYW1wJyxcbiAgJ2xpZ2h0LnN0cmlwJzogJ21kaTpsZWQtc3RyaXAtdmFyaWFudCcsXG4gICdsaWdodC5zcG90JzogJ21kaTpzcG90bGlnaHQtYmVhbScsXG4gIFxuICAvLyBDbGltYXRlXG4gICdjbGltYXRlJzogJ21kaTp0aGVybW9zdGF0JyxcbiAgJ3RlbXBlcmF0dXJlJzogJ21kaTp0aGVybW9tZXRlcicsXG4gICdodW1pZGl0eSc6ICdtZGk6d2F0ZXItcGVyY2VudCcsXG4gICdhaXJfcXVhbGl0eSc6ICdtZGk6YWlyLWZpbHRlcicsXG4gIFxuICAvLyBTZWN1cml0eVxuICAnbG9jayc6ICdtZGk6bG9jaycsXG4gICdkb29yJzogJ21kaTpkb29yJyxcbiAgJ3dpbmRvdyc6ICdtZGk6d2luZG93LWNsb3NlZCcsXG4gICdtb3Rpb24nOiAnbWRpOm1vdGlvbi1zZW5zb3InLFxuICAncHJlc2VuY2UnOiAnbWRpOmhvbWUtYWNjb3VudCcsXG4gICdjYW1lcmEnOiAnbWRpOmNjdHYnLFxuICAnYWxhcm0nOiAnbWRpOnNoaWVsZC1ob21lJyxcbiAgXG4gIC8vIE1lZGlhXG4gICdtZWRpYV9wbGF5ZXInOiAnbWRpOnRlbGV2aXNpb24nLFxuICAnc3BlYWtlcic6ICdtZGk6c3BlYWtlcicsXG4gICdyZW1vdGUnOiAnbWRpOnJlbW90ZScsXG4gIFxuICAvLyBTd2l0Y2hlcyAmIENvbnRyb2xzXG4gICdzd2l0Y2gnOiAnbWRpOmxpZ2h0LXN3aXRjaCcsXG4gICdmYW4nOiAnbWRpOmZhbicsXG4gICdjb3Zlcic6ICdtZGk6d2luZG93LXNodXR0ZXInLFxuICAnYmxpbmQnOiAnbWRpOmJsaW5kcycsXG4gICdjdXJ0YWluJzogJ21kaTpjdXJ0YWlucycsXG4gIFxuICAvLyBTZW5zb3JzXG4gICdzZW5zb3InOiAnbWRpOmV5ZScsXG4gICdiaW5hcnlfc2Vuc29yJzogJ21kaTpyYWRpb2JveC1tYXJrZWQnLFxuICAnYmF0dGVyeSc6ICdtZGk6YmF0dGVyeScsXG4gICdwb3dlcic6ICdtZGk6Zmxhc2gnLFxuICAnZW5lcmd5JzogJ21kaTpsaWdodG5pbmctYm9sdCcsXG4gIFxuICAvLyBPdGhlciBkZXZpY2VzXG4gICd2YWN1dW0nOiAnbWRpOnJvYm90LXZhY3V1bScsXG4gICdwZXJzb24nOiAnbWRpOmFjY291bnQnLFxuICAnZGV2aWNlX3RyYWNrZXInOiAnbWRpOmNlbGxwaG9uZScsXG4gICdzdW4nOiAnbWRpOndlYXRoZXItc3VubnknLFxuICAnd2VhdGhlcic6ICdtZGk6d2VhdGhlci1wYXJ0bHktY2xvdWR5JyxcbiAgXG4gIC8vIERlZmF1bHRcbiAgJ2RlZmF1bHQnOiAnbWRpOmhvbWUtYXNzaXN0YW50J1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudGl0eUljb24oZW50aXR5SWQ6IHN0cmluZywgc3RhdGU/OiBhbnkpOiBzdHJpbmcge1xuICAvLyBDaGVjayBjdXN0b20gaWNvbiBmaXJzdFxuICBpZiAoc3RhdGU/LmF0dHJpYnV0ZXM/Lmljb24pIHtcbiAgICByZXR1cm4gc3RhdGUuYXR0cmlidXRlcy5pY29uO1xuICB9XG4gIFxuICAvLyBDaGVjayBkZXZpY2UgY2xhc3MgZm9yIG1vcmUgc3BlY2lmaWMgaWNvbnNcbiAgY29uc3QgZGV2aWNlQ2xhc3MgPSBzdGF0ZT8uYXR0cmlidXRlcz8uZGV2aWNlX2NsYXNzO1xuICBpZiAoZGV2aWNlQ2xhc3MgJiYgRU5USVRZX0lDT05TW2RldmljZUNsYXNzXSkge1xuICAgIHJldHVybiBFTlRJVFlfSUNPTlNbZGV2aWNlQ2xhc3NdO1xuICB9XG4gIFxuICAvLyBNYXRjaCBieSBlbnRpdHkgSUQgcGF0dGVybnNcbiAgZm9yIChjb25zdCBbcGF0dGVybiwgaWNvbl0gb2YgT2JqZWN0LmVudHJpZXMoRU5USVRZX0lDT05TKSkge1xuICAgIGlmIChlbnRpdHlJZC5pbmNsdWRlcyhwYXR0ZXJuKSkge1xuICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuICB9XG4gIFxuICAvLyBEb21haW4gZmFsbGJhY2tcbiAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgcmV0dXJuIEVOVElUWV9JQ09OU1tkb21haW5dIHx8IEVOVElUWV9JQ09OUy5kZWZhdWx0O1xufVxuXG4vKipcbiAqIEdldCBpY29uIGNvbG9yIGJhc2VkIG9uIGVudGl0eSBzdGF0ZSBhbmQgZG9tYWluLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50aXR5SWNvbkNvbG9yKGVudGl0eUlkOiBzdHJpbmcsIHN0YXRlPzogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgY29uc3QgaXNPbiA9IHN0YXRlPy5zdGF0ZSA9PT0gJ29uJztcbiAgY29uc3QgaXNBY3RpdmUgPSBbJ3BsYXlpbmcnLCAnb3BlbicsICd1bmxvY2tlZCcsICdob21lJywgJ2RldGVjdGVkJ10uaW5jbHVkZXMoc3RhdGU/LnN0YXRlKTtcbiAgY29uc3QgaXNVbmF2YWlsYWJsZSA9IHN0YXRlPy5zdGF0ZSA9PT0gJ3VuYXZhaWxhYmxlJztcbiAgXG4gIGlmIChpc1VuYXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuICd2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKSc7XG4gIH1cbiAgXG4gIC8vIERvbWFpbi1zcGVjaWZpYyBjb2xvcnMgd2hlbiBhY3RpdmVcbiAgaWYgKGlzT24gfHwgaXNBY3RpdmUpIHtcbiAgICBzd2l0Y2ggKGRvbWFpbikge1xuICAgICAgY2FzZSAnbGlnaHQnOlxuICAgICAgICByZXR1cm4gc3RhdGU/LmF0dHJpYnV0ZXM/LnJnYl9jb2xvciBcbiAgICAgICAgICA/IGByZ2IoJHtzdGF0ZS5hdHRyaWJ1dGVzLnJnYl9jb2xvci5qb2luKCcsJyl9KWAgXG4gICAgICAgICAgOiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgICAgY2FzZSAnY2xpbWF0ZSc6XG4gICAgICAgIGNvbnN0IG1vZGUgPSBzdGF0ZT8uc3RhdGU7XG4gICAgICAgIGlmIChtb2RlID09PSAnaGVhdCcpIHJldHVybiAnI2ZmNmIwMCc7XG4gICAgICAgIGlmIChtb2RlID09PSAnY29vbCcpIHJldHVybiAnIzAyODhkMSc7XG4gICAgICAgIGlmIChtb2RlID09PSAnaGVhdF9jb29sJyB8fCBtb2RlID09PSAnYXV0bycpIHJldHVybiAnIzM4OGUzYyc7XG4gICAgICAgIHJldHVybiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgICAgY2FzZSAnbG9jayc6XG4gICAgICAgIHJldHVybiBzdGF0ZT8uc3RhdGUgPT09ICdsb2NrZWQnID8gJyM0Y2FmNTAnIDogJyNmNDQzMzYnO1xuICAgICAgY2FzZSAnYWxhcm1fY29udHJvbF9wYW5lbCc6XG4gICAgICAgIGlmIChzdGF0ZT8uc3RhdGUgPT09ICdhcm1lZF9hd2F5JykgcmV0dXJuICcjZjQ0MzM2JztcbiAgICAgICAgaWYgKHN0YXRlPy5zdGF0ZSA9PT0gJ2FybWVkX2hvbWUnKSByZXR1cm4gJyNmZjk4MDAnO1xuICAgICAgICBpZiAoc3RhdGU/LnN0YXRlID09PSAnZGlzYXJtZWQnKSByZXR1cm4gJyM0Y2FmNTAnO1xuICAgICAgICByZXR1cm4gJ3ZhcigtLXByaW1hcnktY29sb3IpJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuICd2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvciknO1xufVxuXG4vKipcbiAqIEdldCBhIG1pbmkgaWNvbiBmb3IgZW50aXR5IHN1bW1hcmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1pbmlJY29uKGVudGl0eVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG1pbmlJY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnbGlnaHRzJzogJ21kaTpsaWdodGJ1bGInLFxuICAgICd0ZW1wZXJhdHVyZSc6ICdtZGk6dGhlcm1vbWV0ZXInLFxuICAgICdodW1pZGl0eSc6ICdtZGk6d2F0ZXItcGVyY2VudCcsXG4gICAgJ21vdGlvbic6ICdtZGk6bW90aW9uLXNlbnNvcicsXG4gICAgJ2Rvb3JzJzogJ21kaTpkb29yJyxcbiAgICAnd2luZG93cyc6ICdtZGk6d2luZG93LWNsb3NlZCcsXG4gICAgJ21lZGlhJzogJ21kaTp0ZWxldmlzaW9uJyxcbiAgICAnY2xpbWF0ZSc6ICdtZGk6dGhlcm1vc3RhdCdcbiAgfTtcbiAgXG4gIHJldHVybiBtaW5pSWNvbnNbZW50aXR5VHlwZV0gfHwgJ21kaTpjaXJjbGUnO1xufSIsIi8qKlxuICogUm9vbSB3aWRnZXQgZm9yIERhc2h2aWV3IFYyLlxuICogRGlzcGxheXMgYWxsIGVudGl0aWVzIGluIGEgcm9vbSB3aXRoIHN1bW1hcnkgYW5kIGNvbnRyb2xzLlxuICovXG5cbmltcG9ydCB7IFByb3BlcnR5VmFsdWVzLCBUZW1wbGF0ZVJlc3VsdCwgY3NzLCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IERhc2h2aWV3V2lkZ2V0LCBXaWRnZXRDb25maWcgfSBmcm9tICcuLi9jb3JlL3dpZGdldC1iYXNlJztcbmltcG9ydCB7IGdldEVudGl0eUljb24sIGdldEVudGl0eUljb25Db2xvciB9IGZyb20gJy4uL3V0aWxzL2ljb25zJztcbmltcG9ydCB7IHNrZWxldG9uU3R5bGVzLCB0b3VjaFN0eWxlcyB9IGZyb20gJy4uL3N0eWxlcy9hbmltYXRpb25zJztcblxuaW50ZXJmYWNlIFJvb21XaWRnZXRDb25maWcgZXh0ZW5kcyBXaWRnZXRDb25maWcge1xuICB0eXBlOiAncm9vbSc7XG4gIGFyZWFJZD86IHN0cmluZztcbiAgYXJlYU5hbWU/OiBzdHJpbmc7XG4gIHNob3dFbXB0eT86IGJvb2xlYW47XG59XG5cbkBjdXN0b21FbGVtZW50KCdkYXNodmlldy1yb29tLXdpZGdldCcpXG5leHBvcnQgY2xhc3MgUm9vbVdpZGdldCBleHRlbmRzIERhc2h2aWV3V2lkZ2V0IHtcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIGFyZWFJZD86IHN0cmluZztcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIGFyZWFOYW1lPzogc3RyaW5nO1xuICBAc3RhdGUoKSBwcml2YXRlIGV4cGFuZGVkID0gZmFsc2U7XG4gIEBzdGF0ZSgpIHByaXZhdGUgbGlnaHRDb3VudCA9IDA7XG4gIEBzdGF0ZSgpIHByaXZhdGUgbGlnaHRzT24gPSAwO1xuICBAc3RhdGUoKSBwcml2YXRlIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIGh1bWlkaXR5PzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIGxhc3RNb3Rpb24/OiBEYXRlO1xuICBAc3RhdGUoKSBwcml2YXRlIGdyb3VwZWRFbnRpdGllczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmliZWRFbnRpdGllcygpOiBzdHJpbmdbXSB7XG4gICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBlbnRpdGllcyB3aGVuIGV4cGFuZGVkLCBvciBqdXN0IGtleSBlbnRpdGllcyB3aGVuIGNvbGxhcHNlZFxuICAgIGlmICh0aGlzLmV4cGFuZGVkIHx8IHRoaXMuZW50aXR5U3RhdGVzLnNpemUgPCAxMCkge1xuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcyB8fCBbXTtcbiAgICB9XG4gICAgXG4gICAgLy8gV2hlbiBjb2xsYXBzZWQgd2l0aCBtYW55IGVudGl0aWVzLCBvbmx5IHN1YnNjcmliZSB0byBrZXkgZW50aXRpZXNcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcyB8fCBbXTtcbiAgICByZXR1cm4gZW50aXRpZXMuZmlsdGVyKGlkID0+IFxuICAgICAgaWQuaW5jbHVkZXMoJ21vdGlvbicpIHx8IFxuICAgICAgaWQuaW5jbHVkZXMoJ2Rvb3InKSB8fCBcbiAgICAgIGlkLmluY2x1ZGVzKCdwcmVzZW5jZScpIHx8XG4gICAgICBpZC5pbmNsdWRlcygndGVtcGVyYXR1cmUnKSB8fFxuICAgICAgaWQuaW5jbHVkZXMoJ2h1bWlkaXR5JykgfHxcbiAgICAgIGlkLnN0YXJ0c1dpdGgoJ2xpZ2h0LicpXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZWZhdWx0Q29uZmlnKCk6IFBhcnRpYWw8Um9vbVdpZGdldENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAncm9vbScsXG4gICAgICBlbnRpdGllczogW10sXG4gICAgICBzaG93RW1wdHk6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICB0aGlzLnVwZGF0ZVN1bW1hcnkoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblN0YXRlQ2hhbmdlZChlbnRpdHlJZDogc3RyaW5nLCBuZXdTdGF0ZTogYW55LCBvbGRTdGF0ZTogYW55KTogdm9pZCB7XG4gICAgc3VwZXIub25TdGF0ZUNoYW5nZWQoZW50aXR5SWQsIG5ld1N0YXRlLCBvbGRTdGF0ZSk7XG4gICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN1bW1hcnkoKTogdm9pZCB7XG4gICAgbGV0IGxpZ2h0Q291bnQgPSAwO1xuICAgIGxldCBsaWdodHNPbiA9IDA7XG4gICAgbGV0IHRlbXBlcmF0dXJlOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGh1bWlkaXR5OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGxhc3RNb3Rpb246IERhdGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBHcm91cCBlbnRpdGllcyBieSB0eXBlIGZvciBiZXR0ZXIgb3JnYW5pemF0aW9uXG4gICAgdGhpcy5ncm91cGVkRW50aXRpZXMgPSB0aGlzLmdyb3VwRW50aXRpZXNCeVR5cGUoKTtcblxuICAgIGZvciAoY29uc3QgW2VudGl0eUlkLCBzdGF0ZV0gb2YgdGhpcy5lbnRpdHlTdGF0ZXMpIHtcbiAgICAgIGlmIChlbnRpdHlJZC5zdGFydHNXaXRoKCdsaWdodC4nKSkge1xuICAgICAgICBsaWdodENvdW50Kys7XG4gICAgICAgIGlmIChzdGF0ZS5zdGF0ZSA9PT0gJ29uJykge1xuICAgICAgICAgIGxpZ2h0c09uKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5SWQuaW5jbHVkZXMoJ3RlbXBlcmF0dXJlJykgJiYgc3RhdGUuc3RhdGUgIT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHBhcnNlRmxvYXQoc3RhdGUuc3RhdGUpO1xuICAgICAgICBpZiAoIWlzTmFOKHRlbXApKSB7XG4gICAgICAgICAgdGVtcGVyYXR1cmUgPSB0ZW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUlkLmluY2x1ZGVzKCdodW1pZGl0eScpICYmIHN0YXRlLnN0YXRlICE9PSAndW5hdmFpbGFibGUnKSB7XG4gICAgICAgIGNvbnN0IGh1bSA9IHBhcnNlRmxvYXQoc3RhdGUuc3RhdGUpO1xuICAgICAgICBpZiAoIWlzTmFOKGh1bSkpIHtcbiAgICAgICAgICBodW1pZGl0eSA9IGh1bTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRpdHlJZC5pbmNsdWRlcygnbW90aW9uJykgfHwgZW50aXR5SWQuaW5jbHVkZXMoJ3ByZXNlbmNlJykpIHtcbiAgICAgICAgaWYgKHN0YXRlLnN0YXRlID09PSAnb24nICYmIHN0YXRlLmxhc3RfY2hhbmdlZCkge1xuICAgICAgICAgIGNvbnN0IG1vdGlvblRpbWUgPSBuZXcgRGF0ZShzdGF0ZS5sYXN0X2NoYW5nZWQpO1xuICAgICAgICAgIGlmICghbGFzdE1vdGlvbiB8fCBtb3Rpb25UaW1lID4gbGFzdE1vdGlvbikge1xuICAgICAgICAgICAgbGFzdE1vdGlvbiA9IG1vdGlvblRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5saWdodENvdW50ID0gbGlnaHRDb3VudDtcbiAgICB0aGlzLmxpZ2h0c09uID0gbGlnaHRzT247XG4gICAgdGhpcy50ZW1wZXJhdHVyZSA9IHRlbXBlcmF0dXJlO1xuICAgIHRoaXMuaHVtaWRpdHkgPSBodW1pZGl0eTtcbiAgICB0aGlzLmxhc3RNb3Rpb24gPSBsYXN0TW90aW9uO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3Qgcm9vbU5hbWUgPSB0aGlzLmFyZWFOYW1lIHx8IHRoaXMud2lkZ2V0Q29uZmlnPy50aXRsZSB8fCAnVW5rbm93biBSb29tJztcblxuICAgIGlmICh0aGlzLmlzTG9hZGluZykge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyU2tlbGV0b24oKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtZXJyb3JcIj5cbiAgICAgICAgICAke3RoaXMuZXJyb3J9XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIHJvbGU9XCJyZWdpb25cIiBhcmlhLWxhYmVsPVwiJHtyb29tTmFtZX0gcm9vbSBjb250cm9sc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyIHRvdWNoLXRhcmdldFwiIEBjbGljaz0ke3RoaXMudG9nZ2xlRXhwYW5kZWR9IEBrZXlkb3duPSR7dGhpcy5oYW5kbGVIZWFkZXJLZXlkb3dufT5cbiAgICAgICAgICA8aDI+JHtyb29tTmFtZX08L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdW1tYXJ5XCI+XG4gICAgICAgICAgICAke3RoaXMucmVuZGVyU3VtbWFyeSgpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImV4cGFuZC1pY29uICR7dGhpcy5leHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnJ31cIlxuICAgICAgICAgICAgaWNvbj1cIm1kaTpjaGV2cm9uLWRvd25cIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIiR7dGhpcy5leHBhbmRlZCA/ICdDb2xsYXBzZScgOiAnRXhwYW5kJ30gcm9vbSBkZXRhaWxzXCJcbiAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50ICR7dGhpcy5leHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnY29sbGFwc2VkJ31cIj5cbiAgICAgICAgICAke3RoaXMucmVuZGVyRXhwYW5kZWQoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICR7dGhpcy5saWdodENvdW50ID4gMCA/IGh0bWxgXG4gICAgICAgICAgICA8bXdjLWJ1dHRvbiBAY2xpY2s9JHt0aGlzLnR1cm5BbGxMaWdodHNPZmZ9IGFyaWEtbGFiZWw9XCJUdXJuIGFsbCBsaWdodHMgb2ZmXCI+XG4gICAgICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6bGlnaHRidWxiLW9mZlwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgQWxsIE9mZlxuICAgICAgICAgICAgPC9td2MtYnV0dG9uPlxuICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU3VtbWFyeSgpOiBUZW1wbGF0ZVJlc3VsdFtdIHtcbiAgICBjb25zdCBzdW1tYXJ5OiBUZW1wbGF0ZVJlc3VsdFtdID0gW107XG5cbiAgICAvLyBMaWdodCBzdGF0dXNcbiAgICBpZiAodGhpcy5saWdodENvdW50ID4gMCkge1xuICAgICAgc3VtbWFyeS5wdXNoKGh0bWxgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1pdGVtXCI+XG4gICAgICAgICAgPGhhLWljb24gaWNvbj1cIm1kaTpsaWdodGJ1bGJcIj48L2hhLWljb24+XG4gICAgICAgICAgJHt0aGlzLmxpZ2h0c09ufS8ke3RoaXMubGlnaHRDb3VudH1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgYCk7XG4gICAgfVxuXG4gICAgLy8gVGVtcGVyYXR1cmVcbiAgICBpZiAodGhpcy50ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdW1tYXJ5LnB1c2goaHRtbGBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LWl0ZW1cIj5cbiAgICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOnRoZXJtb21ldGVyXCI+PC9oYS1pY29uPlxuICAgICAgICAgICR7dGhpcy50ZW1wZXJhdHVyZS50b0ZpeGVkKDEpfcKwXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIGApO1xuICAgIH1cblxuICAgIC8vIEh1bWlkaXR5XG4gICAgaWYgKHRoaXMuaHVtaWRpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3VtbWFyeS5wdXNoKGh0bWxgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1pdGVtXCI+XG4gICAgICAgICAgPGhhLWljb24gaWNvbj1cIm1kaTp3YXRlci1wZXJjZW50XCI+PC9oYS1pY29uPlxuICAgICAgICAgICR7dGhpcy5odW1pZGl0eS50b0ZpeGVkKDApfSVcbiAgICAgICAgPC9zcGFuPlxuICAgICAgYCk7XG4gICAgfVxuXG4gICAgLy8gTGFzdCBtb3Rpb25cbiAgICBpZiAodGhpcy5sYXN0TW90aW9uKSB7XG4gICAgICBjb25zdCBtaW51dGVzQWdvID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHRoaXMubGFzdE1vdGlvbi5nZXRUaW1lKCkpIC8gNjAwMDApO1xuICAgICAgY29uc3QgdGltZVN0ciA9IG1pbnV0ZXNBZ28gPCAxID8gJ25vdycgOiBcbiAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzQWdvIDwgNjAgPyBgJHttaW51dGVzQWdvfW0gYWdvYCA6XG4gICAgICAgICAgICAgICAgICAgICAgYCR7TWF0aC5mbG9vcihtaW51dGVzQWdvIC8gNjApfWggYWdvYDtcbiAgICAgIHN1bW1hcnkucHVzaChodG1sYFxuICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktaXRlbVwiPlxuICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6bW90aW9uLXNlbnNvclwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAke3RpbWVTdHJ9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIGApO1xuICAgIH1cblxuICAgIHJldHVybiBzdW1tYXJ5O1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFeHBhbmRlZCgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW50aXR5LWxpc3RcIj5cbiAgICAgICAgJHtPYmplY3QuZW50cmllcyh0aGlzLmdyb3VwZWRFbnRpdGllcykubWFwKChbdHlwZSwgZW50aXRpZXNdKSA9PiBcbiAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eUdyb3VwKHR5cGUsIGVudGl0aWVzKVxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRW50aXR5KGVudGl0eUlkOiBzdHJpbmcpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLmVudGl0eVN0YXRlcy5nZXQoZW50aXR5SWQpO1xuICAgIGlmICghc3RhdGUpIHJldHVybiBodG1sYGA7XG5cbiAgICBjb25zdCBuYW1lID0gc3RhdGUuYXR0cmlidXRlcy5mcmllbmRseV9uYW1lIHx8IGVudGl0eUlkO1xuICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgY29uc3QgaXNUb2dnbGVhYmxlID0gWydsaWdodCcsICdzd2l0Y2gnLCAnZmFuJywgJ2lucHV0X2Jvb2xlYW4nXS5pbmNsdWRlcyhkb21haW4pO1xuICAgIGNvbnN0IGljb24gPSBnZXRFbnRpdHlJY29uKGVudGl0eUlkLCBzdGF0ZSk7XG4gICAgY29uc3QgaWNvbkNvbG9yID0gZ2V0RW50aXR5SWNvbkNvbG9yKGVudGl0eUlkLCBzdGF0ZSk7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnRpdHktaXRlbSB0b3VjaC10YXJnZXRcIiBAY2xpY2s9JHtpc1RvZ2dsZWFibGUgPyAoKSA9PiB0aGlzLnRvZ2dsZUVudGl0eShlbnRpdHlJZCkgOiB1bmRlZmluZWR9PlxuICAgICAgICA8aGEtaWNvbiBcbiAgICAgICAgICBjbGFzcz1cImVudGl0eS1pY29uICR7c3RhdGUuc3RhdGV9ICR7c3RhdGUuc3RhdGUgPT09ICd1bmF2YWlsYWJsZScgPyAndW5hdmFpbGFibGUnIDogJyd9XCJcbiAgICAgICAgICBpY29uPVwiJHtpY29ufVwiXG4gICAgICAgICAgc3R5bGU9XCJjb2xvcjogJHtpY29uQ29sb3J9XCJcbiAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlbnRpdHktbmFtZVwiPiR7bmFtZX08L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbnRpdHktY29udHJvbHNcIj5cbiAgICAgICAgICAke2lzVG9nZ2xlYWJsZSA/IGh0bWxgXG4gICAgICAgICAgICA8aGEtc3dpdGNoXG4gICAgICAgICAgICAgIC5jaGVja2VkPSR7c3RhdGUuc3RhdGUgPT09ICdvbid9XG4gICAgICAgICAgICAgIEBjaGFuZ2U9JHsoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRW50aXR5KGVudGl0eUlkKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlRvZ2dsZSAke25hbWV9XCJcbiAgICAgICAgICAgID48L2hhLXN3aXRjaD5cbiAgICAgICAgICBgIDogaHRtbGBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW50aXR5LXN0YXRlXCI+JHtzdGF0ZS5zdGF0ZX08L3NwYW4+XG4gICAgICAgICAgYH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTb3J0ZWRFbnRpdGllcygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZW50aXRpZXMgPSBBcnJheS5mcm9tKHRoaXMuZW50aXR5U3RhdGVzLmtleXMoKSk7XG4gICAgXG4gICAgLy8gU29ydCBieSBkb21haW4gcHJpb3JpdHksIHRoZW4gYnkgbmFtZVxuICAgIGNvbnN0IGRvbWFpblByaW9yaXR5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgJ2xpZ2h0JzogMSxcbiAgICAgICdzd2l0Y2gnOiAyLFxuICAgICAgJ2Zhbic6IDMsXG4gICAgICAnY2xpbWF0ZSc6IDQsXG4gICAgICAnY292ZXInOiA1LFxuICAgICAgJ3NlbnNvcic6IDYsXG4gICAgICAnYmluYXJ5X3NlbnNvcic6IDcsXG4gICAgfTtcblxuICAgIHJldHVybiBlbnRpdGllcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBkb21haW5BID0gYS5zcGxpdCgnLicpWzBdO1xuICAgICAgY29uc3QgZG9tYWluQiA9IGIuc3BsaXQoJy4nKVswXTtcbiAgICAgIGNvbnN0IHByaW9yaXR5QSA9IGRvbWFpblByaW9yaXR5W2RvbWFpbkFdIHx8IDk5OTtcbiAgICAgIGNvbnN0IHByaW9yaXR5QiA9IGRvbWFpblByaW9yaXR5W2RvbWFpbkJdIHx8IDk5OTtcbiAgICAgIFxuICAgICAgaWYgKHByaW9yaXR5QSAhPT0gcHJpb3JpdHlCKSB7XG4gICAgICAgIHJldHVybiBwcmlvcml0eUEgLSBwcmlvcml0eUI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZUV4cGFuZGVkKCk6IHZvaWQge1xuICAgIHRoaXMuZXhwYW5kZWQgPSAhdGhpcy5leHBhbmRlZDtcbiAgICBcbiAgICAvLyBVcGRhdGUgc3Vic2NyaXB0aW9ucyB3aGVuIGV4cGFuZGluZy9jb2xsYXBzaW5nXG4gICAgaWYgKHRoaXMuZXhwYW5kZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9ucygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlSGVhZGVyS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgfHwgZXZlbnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnRvZ2dsZUV4cGFuZGVkKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBncm91cEVudGl0aWVzQnlUeXBlKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiB7XG4gICAgY29uc3QgZ3JvdXBzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHRoaXMuZW50aXR5U3RhdGVzLmtleXMoKSkge1xuICAgICAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgICAgIFxuICAgICAgLy8gR3JvdXAgYnkgZG9tYWluIHdpdGggZnJpZW5kbHkgbmFtZXNcbiAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IHRoaXMuZ2V0RG9tYWluR3JvdXBOYW1lKGRvbWFpbik7XG4gICAgICBpZiAoIWdyb3Vwc1tncm91cE5hbWVdKSB7XG4gICAgICAgIGdyb3Vwc1tncm91cE5hbWVdID0gW107XG4gICAgICB9XG4gICAgICBncm91cHNbZ3JvdXBOYW1lXS5wdXNoKGVudGl0eUlkKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU29ydCBlbnRpdGllcyB3aXRoaW4gZWFjaCBncm91cFxuICAgIGZvciAoY29uc3QgW2dyb3VwTmFtZSwgZW50aXRpZXNdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwcykpIHtcbiAgICAgIGdyb3Vwc1tncm91cE5hbWVdID0gZW50aXRpZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBzdGF0ZUEgPSB0aGlzLmVudGl0eVN0YXRlcy5nZXQoYSk7XG4gICAgICAgIGNvbnN0IHN0YXRlQiA9IHRoaXMuZW50aXR5U3RhdGVzLmdldChiKTtcbiAgICAgICAgY29uc3QgbmFtZUEgPSBzdGF0ZUE/LmF0dHJpYnV0ZXM/LmZyaWVuZGx5X25hbWUgfHwgYTtcbiAgICAgICAgY29uc3QgbmFtZUIgPSBzdGF0ZUI/LmF0dHJpYnV0ZXM/LmZyaWVuZGx5X25hbWUgfHwgYjtcbiAgICAgICAgcmV0dXJuIG5hbWVBLmxvY2FsZUNvbXBhcmUobmFtZUIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBncm91cHM7XG4gIH1cblxuICBwcml2YXRlIGdldERvbWFpbkdyb3VwTmFtZShkb21haW46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZG9tYWluTmFtZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnbGlnaHQnOiAnTGlnaHRzJyxcbiAgICAgICdzd2l0Y2gnOiAnU3dpdGNoZXMnLFxuICAgICAgJ2Zhbic6ICdGYW5zJyxcbiAgICAgICdjbGltYXRlJzogJ0NsaW1hdGUnLFxuICAgICAgJ2NvdmVyJzogJ0NvdmVycycsXG4gICAgICAnbG9jayc6ICdMb2NrcycsXG4gICAgICAnc2Vuc29yJzogJ1NlbnNvcnMnLFxuICAgICAgJ2JpbmFyeV9zZW5zb3InOiAnQmluYXJ5IFNlbnNvcnMnLFxuICAgICAgJ21lZGlhX3BsYXllcic6ICdNZWRpYScsXG4gICAgICAnY2FtZXJhJzogJ0NhbWVyYXMnLFxuICAgICAgJ2FsYXJtX2NvbnRyb2xfcGFuZWwnOiAnU2VjdXJpdHknXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gZG9tYWluTmFtZXNbZG9tYWluXSB8fCBkb21haW4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkb21haW4uc2xpY2UoMSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVudGl0eUdyb3VwKHR5cGU6IHN0cmluZywgZW50aXRpZXM6IHN0cmluZ1tdKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmIChlbnRpdGllcy5sZW5ndGggPT09IDApIHJldHVybiBodG1sYGA7XG4gICAgXG4gICAgY29uc3QgdHlwZUljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0xpZ2h0cyc6ICdtZGk6bGlnaHRidWxiJyxcbiAgICAgICdTd2l0Y2hlcyc6ICdtZGk6bGlnaHQtc3dpdGNoJyxcbiAgICAgICdTZW5zb3JzJzogJ21kaTpleWUnLFxuICAgICAgJ0NsaW1hdGUnOiAnbWRpOnRoZXJtb3N0YXQnLFxuICAgICAgJ01lZGlhJzogJ21kaTp0ZWxldmlzaW9uJyxcbiAgICAgICdDb3ZlcnMnOiAnbWRpOndpbmRvdy1zaHV0dGVyJyxcbiAgICAgICdMb2Nrcyc6ICdtZGk6bG9jaycsXG4gICAgICAnRmFucyc6ICdtZGk6ZmFuJyxcbiAgICAgICdDYW1lcmFzJzogJ21kaTpjY3R2JyxcbiAgICAgICdTZWN1cml0eSc6ICdtZGk6c2hpZWxkLWhvbWUnXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnRpdHktZ3JvdXBcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVudGl0eS1ncm91cC1oZWFkZXJcIj5cbiAgICAgICAgICA8aGEtaWNvbiBpY29uPSR7dHlwZUljb25zW3R5cGVdIHx8ICdtZGk6aG9tZSd9PjwvaGEtaWNvbj5cbiAgICAgICAgICA8c3Bhbj4ke3R5cGV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY291bnRcIj4oJHtlbnRpdGllcy5sZW5ndGh9KTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7ZW50aXRpZXMubWFwKGVudGl0eSA9PiB0aGlzLnJlbmRlckVudGl0eShlbnRpdHkpKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNrZWxldG9uKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLXRleHQgbGFyZ2VcIiBzdHlsZT1cIndpZHRoOiAxMjBweDtcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VtbWFyeVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLXRleHRcIiBzdHlsZT1cIndpZHRoOiA0MHB4O1wiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLXRleHRcIiBzdHlsZT1cIndpZHRoOiA1MHB4O1wiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLXRleHRcIiBzdHlsZT1cIndpZHRoOiA0NXB4O1wiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1pY29uXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHR1cm5BbGxMaWdodHNPZmYoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbGlnaHRzID0gQXJyYXkuZnJvbSh0aGlzLmVudGl0eVN0YXRlcy5rZXlzKCkpLmZpbHRlcihpZCA9PiBcbiAgICAgIGlkLnN0YXJ0c1dpdGgoJ2xpZ2h0LicpICYmIHRoaXMuZW50aXR5U3RhdGVzLmdldChpZCk/LnN0YXRlID09PSAnb24nXG4gICAgKTtcblxuICAgIGZvciAoY29uc3QgbGlnaHQgb2YgbGlnaHRzKSB7XG4gICAgICBhd2FpdCB0aGlzLnR1cm5PZmYobGlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzdHlsZXMgPSBjc3NgXG4gICAgJHtEYXNodmlld1dpZGdldC5zdHlsZXN9XG4gICAgJHtza2VsZXRvblN0eWxlc31cbiAgICAke3RvdWNoU3R5bGVzfVxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXI6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnktYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXI6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIgaDIge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5zdW1tYXJ5IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuc3VtbWFyeS1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5zdW1tYXJ5LWl0ZW0gaGEtaWNvbiB7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMTZweDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1pY29uIHtcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDI1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKTtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgfVxuXG4gICAgICAuZXhwYW5kLWljb24uZXhwYW5kZWQge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpO1xuICAgICAgfVxuXG4gICAgICAvKiBFbmhhbmNlZCBjb250ZW50IHdpdGggc21vb3RoIGFuaW1hdGlvbnMgKi9cbiAgICAgIC5jb250ZW50IHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdHJhbnNpdGlvbjogbWF4LWhlaWdodCAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LmNvbGxhcHNlZCB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDA7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LmV4cGFuZGVkIHtcbiAgICAgICAgbWF4LWhlaWdodDogNjAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktbGlzdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMnB4O1xuICAgICAgICBtYXgtaGVpZ2h0OiA0MDBweDtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgc2Nyb2xsYmFyLXdpZHRoOiB0aGluO1xuICAgICAgICBwYWRkaW5nOiAwIDE2cHggMTZweDtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1ncm91cCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktZ3JvdXA6bGFzdC1jaGlsZCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktZ3JvdXAtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCAwO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1ncm91cC1oZWFkZXIgaGEtaWNvbiB7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMThweDtcbiAgICAgIH1cblxuICAgICAgLmNvdW50IHtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWl0ZW06YWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk4KTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBjb2xvciAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWljb24udW5hdmFpbGFibGUge1xuICAgICAgICBjb2xvcjogdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktbmFtZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1jb250cm9scyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LXN0YXRlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICAgIG1pbi13aWR0aDogNjBweDtcbiAgICAgIH1cblxuICAgICAgLmFjdGlvbnMge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmFjdGlvbnM6ZW1wdHkge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgLS1tZGMtdGhlbWUtcHJpbWFyeTogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgICB9XG5cbiAgICAgIG13Yy1idXR0b24gaGEtaWNvbiB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgICAgfVxuXG4gICAgICAvKiBNb2JpbGUgb3B0aW1pemF0aW9ucyAqL1xuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAgIC5oZWFkZXIge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuc3VtbWFyeSB7XG4gICAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmVudGl0eS1pdGVtIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZW50aXR5LW5hbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogQWNjZXNzaWJpbGl0eSBlbmhhbmNlbWVudHMgKi9cbiAgICAgIEBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICAgICAgIC5oZWFkZXIsXG4gICAgICAgIC5leHBhbmQtaWNvbixcbiAgICAgICAgLmVudGl0eS1pdGVtLFxuICAgICAgICAuZW50aXR5LWljb24sXG4gICAgICAgIC5jb250ZW50IHtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmVudGl0eS1pdGVtOmFjdGl2ZSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIEZvY3VzIGluZGljYXRvcnMgKi9cbiAgICAgIC5lbnRpdHktaXRlbTpmb2N1cyxcbiAgICAgIGhhLXN3aXRjaDpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgICAgIH1cbiAgICBgO1xufSIsIi8qKlxuICogRGV2aWNlIGdyb3VwIHdpZGdldCBmb3IgRGFzaHZpZXcgVjIuXG4gKiBHcm91cHMgYW5kIGRpc3BsYXlzIGRldmljZXMgYnkgdHlwZSAoc3dpdGNoZXMsIHNlbnNvcnMsIGV0YykuXG4gKi9cblxuaW1wb3J0IHsgUHJvcGVydHlWYWx1ZXMsIFRlbXBsYXRlUmVzdWx0LCBjc3MsIGh0bWwgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgRGFzaHZpZXdXaWRnZXQsIFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuXG5pbnRlcmZhY2UgRGV2aWNlR3JvdXBXaWRnZXRDb25maWcgZXh0ZW5kcyBXaWRnZXRDb25maWcge1xuICB0eXBlOiAnZGV2aWNlLWdyb3VwJztcbiAgZGV2aWNlVHlwZTogJ3N3aXRjaCcgfCAnc2Vuc29yJyB8ICdiaW5hcnlfc2Vuc29yJyB8ICdjb3ZlcicgfCAnZmFuJztcbiAgZ3JvdXBOYW1lPzogc3RyaW5nO1xuICBzaG93T2ZmbGluZT86IGJvb2xlYW47XG4gIHNob3dHcm91cENvbnRyb2xzPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEdyb3VwZWRFbnRpdHkge1xuICBlbnRpdHlJZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHN0YXRlOiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIGxhc3RDaGFuZ2VkPzogRGF0ZTtcbiAgaXNUb2dnbGVhYmxlOiBib29sZWFuO1xuICBpc09ubGluZTogYm9vbGVhbjtcbn1cblxuQGN1c3RvbUVsZW1lbnQoJ2Rhc2h2aWV3LWRldmljZS1ncm91cC13aWRnZXQnKVxuZXhwb3J0IGNsYXNzIERldmljZUdyb3VwV2lkZ2V0IGV4dGVuZHMgRGFzaHZpZXdXaWRnZXQge1xuICBAcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSkgZGV2aWNlVHlwZTogc3RyaW5nID0gJ3N3aXRjaCc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBncm91cE5hbWU/OiBzdHJpbmc7XG4gIEBzdGF0ZSgpIHByaXZhdGUgZXhwYW5kZWQgPSBmYWxzZTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBncm91cGVkRW50aXRpZXM6IEdyb3VwZWRFbnRpdHlbXSA9IFtdO1xuICBAc3RhdGUoKSBwcml2YXRlIG9ubGluZUNvdW50ID0gMDtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBhY3RpdmVDb3VudCA9IDA7XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmliZWRFbnRpdGllcygpOiBzdHJpbmdbXSB7XG4gICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBlbnRpdGllcyB3aGVuIGV4cGFuZGVkLCBvciBqdXN0IGFjdGl2ZSBvbmVzIHdoZW4gY29sbGFwc2VkXG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXMgfHwgW107XG4gICAgXG4gICAgaWYgKHRoaXMuZXhwYW5kZWQpIHtcbiAgICAgIHJldHVybiBlbnRpdGllcztcbiAgICB9XG4gICAgXG4gICAgLy8gV2hlbiBjb2xsYXBzZWQsIG9ubHkgc3Vic2NyaWJlIHRvIGFjdGl2ZSBlbnRpdGllc1xuICAgIHJldHVybiBlbnRpdGllcy5maWx0ZXIoaWQgPT4ge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmVudGl0eVN0YXRlcy5nZXQoaWQpO1xuICAgICAgcmV0dXJuIHN0YXRlICYmIHN0YXRlLnN0YXRlICE9PSAndW5hdmFpbGFibGUnICYmIHN0YXRlLnN0YXRlICE9PSAndW5rbm93bic7XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdENvbmZpZygpOiBQYXJ0aWFsPERldmljZUdyb3VwV2lkZ2V0Q29uZmlnPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdkZXZpY2UtZ3JvdXAnLFxuICAgICAgZGV2aWNlVHlwZTogJ3N3aXRjaCcsXG4gICAgICBlbnRpdGllczogW10sXG4gICAgICBzaG93T2ZmbGluZTogZmFsc2UsXG4gICAgICBzaG93R3JvdXBDb250cm9sczogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgdGhpcy51cGRhdGVHcm91cGVkRW50aXRpZXMoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblN0YXRlQ2hhbmdlZChlbnRpdHlJZDogc3RyaW5nLCBuZXdTdGF0ZTogYW55LCBvbGRTdGF0ZTogYW55KTogdm9pZCB7XG4gICAgc3VwZXIub25TdGF0ZUNoYW5nZWQoZW50aXR5SWQsIG5ld1N0YXRlLCBvbGRTdGF0ZSk7XG4gICAgdGhpcy51cGRhdGVHcm91cGVkRW50aXRpZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlR3JvdXBlZEVudGl0aWVzKCk6IHZvaWQge1xuICAgIGNvbnN0IGdyb3VwZWQ6IEdyb3VwZWRFbnRpdHlbXSA9IFtdO1xuICAgIGxldCBvbmxpbmVDb3VudCA9IDA7XG4gICAgbGV0IGFjdGl2ZUNvdW50ID0gMDtcblxuICAgIGZvciAoY29uc3QgW2VudGl0eUlkLCBzdGF0ZV0gb2YgdGhpcy5lbnRpdHlTdGF0ZXMpIHtcbiAgICAgIGNvbnN0IGlzT25saW5lID0gc3RhdGUuc3RhdGUgIT09ICd1bmF2YWlsYWJsZScgJiYgc3RhdGUuc3RhdGUgIT09ICd1bmtub3duJztcbiAgICAgIGNvbnN0IGlzVG9nZ2xlYWJsZSA9IHRoaXMuaXNUb2dnbGVhYmxlRW50aXR5KGVudGl0eUlkKTtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gaXNUb2dnbGVhYmxlID8gc3RhdGUuc3RhdGUgPT09ICdvbicgOiBpc09ubGluZTtcblxuICAgICAgaWYgKGlzT25saW5lKSBvbmxpbmVDb3VudCsrO1xuICAgICAgaWYgKGlzQWN0aXZlKSBhY3RpdmVDb3VudCsrO1xuXG4gICAgICBncm91cGVkLnB1c2goe1xuICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgbmFtZTogc3RhdGUuYXR0cmlidXRlcy5mcmllbmRseV9uYW1lIHx8IGVudGl0eUlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvXy9nLCAnICcpLFxuICAgICAgICBzdGF0ZTogc3RhdGUuc3RhdGUsXG4gICAgICAgIGljb246IHN0YXRlLmF0dHJpYnV0ZXMuaWNvbiB8fCB0aGlzLmdldERlZmF1bHRJY29uKGVudGl0eUlkKSxcbiAgICAgICAgbGFzdENoYW5nZWQ6IHN0YXRlLmxhc3RfY2hhbmdlZCA/IG5ldyBEYXRlKHN0YXRlLmxhc3RfY2hhbmdlZCkgOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVG9nZ2xlYWJsZSxcbiAgICAgICAgaXNPbmxpbmUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IGJ5IG9ubGluZSBzdGF0dXMsIHRoZW4gYnkgc3RhdGUsIHRoZW4gYnkgbmFtZVxuICAgIGdyb3VwZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEuaXNPbmxpbmUgIT09IGIuaXNPbmxpbmUpIHJldHVybiBiLmlzT25saW5lID8gMSA6IC0xO1xuICAgICAgaWYgKGEuc3RhdGUgIT09IGIuc3RhdGUpIHtcbiAgICAgICAgaWYgKGEuc3RhdGUgPT09ICdvbicpIHJldHVybiAtMTtcbiAgICAgICAgaWYgKGIuc3RhdGUgPT09ICdvbicpIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdyb3VwZWRFbnRpdGllcyA9IGdyb3VwZWQ7XG4gICAgdGhpcy5vbmxpbmVDb3VudCA9IG9ubGluZUNvdW50O1xuICAgIHRoaXMuYWN0aXZlQ291bnQgPSBhY3RpdmVDb3VudDtcbiAgfVxuXG4gIHByaXZhdGUgaXNUb2dnbGVhYmxlRW50aXR5KGVudGl0eUlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgIHJldHVybiBbJ3N3aXRjaCcsICdsaWdodCcsICdmYW4nLCAnaW5wdXRfYm9vbGVhbicsICdjb3ZlciddLmluY2x1ZGVzKGRvbWFpbik7XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRJY29uKGVudGl0eUlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgY29uc3QgaWNvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdzd2l0Y2gnOiAnbWRpOnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgJ3NlbnNvcic6ICdtZGk6ZXllJyxcbiAgICAgICdiaW5hcnlfc2Vuc29yJzogJ21kaTpyYWRpb2JveC1ibGFuaycsXG4gICAgICAnY292ZXInOiAnbWRpOndpbmRvdy1zaHV0dGVyJyxcbiAgICAgICdmYW4nOiAnbWRpOmZhbicsXG4gICAgICAnbGlnaHQnOiAnbWRpOmxpZ2h0YnVsYicsXG4gICAgfTtcbiAgICByZXR1cm4gaWNvbk1hcFtkb21haW5dIHx8ICdtZGk6ZGV2aWNlcyc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCB0aXRsZSA9IHRoaXMuZ3JvdXBOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgdGhpcy53aWRnZXRDb25maWc/LnRpdGxlIHx8IFxuICAgICAgICAgICAgICAgICAgYCR7dGhpcy5kZXZpY2VUeXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5kZXZpY2VUeXBlLnNsaWNlKDEpfXNgO1xuXG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIndpZGdldC1sb2FkaW5nXCI+XG4gICAgICAgICAgTG9hZGluZyBkZXZpY2VzLi4uXG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtZXJyb3JcIj5cbiAgICAgICAgICAke3RoaXMuZXJyb3J9XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBEZXZpY2VHcm91cFdpZGdldENvbmZpZztcbiAgICBjb25zdCBzaG93T2ZmbGluZSA9IGNvbmZpZz8uc2hvd09mZmxpbmUgPz8gZmFsc2U7XG4gICAgY29uc3QgZmlsdGVyZWRFbnRpdGllcyA9IHNob3dPZmZsaW5lID8gXG4gICAgICB0aGlzLmdyb3VwZWRFbnRpdGllcyA6IFxuICAgICAgdGhpcy5ncm91cGVkRW50aXRpZXMuZmlsdGVyKGUgPT4gZS5pc09ubGluZSk7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCIgQGNsaWNrPSR7dGhpcy50b2dnbGVFeHBhbmRlZH0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlci1jb250ZW50XCI+XG4gICAgICAgICAgICA8aDI+JHt0aXRsZX08L2gyPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldmljZS1jb3VudFwiPlxuICAgICAgICAgICAgICAke3RoaXMuYWN0aXZlQ291bnR9LyR7dGhpcy5vbmxpbmVDb3VudH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImV4cGFuZC1pY29uICR7dGhpcy5leHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnJ31cIlxuICAgICAgICAgICAgaWNvbj1cIm1kaTpjaGV2cm9uLWRvd25cIlxuICAgICAgICAgID48L2hhLWljb24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgICR7dGhpcy5leHBhbmRlZCA/IGh0bWxgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVudGl0aWVzXCI+XG4gICAgICAgICAgICAke2ZpbHRlcmVkRW50aXRpZXMubGVuZ3RoID09PSAwID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgICAgICAgICAgTm8gJHtzaG93T2ZmbGluZSA/ICcnIDogJ29ubGluZSd9IGRldmljZXMgZm91bmRcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogZmlsdGVyZWRFbnRpdGllcy5tYXAoZW50aXR5ID0+IHRoaXMucmVuZGVyRW50aXR5KGVudGl0eSkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgIDogJyd9XG5cbiAgICAgICAgJHt0aGlzLnJlbmRlckFjdGlvbnMoKX1cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHkoZW50aXR5OiBHcm91cGVkRW50aXR5KTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IHN0YXRlRGlzcGxheSA9IHRoaXMuZ2V0U3RhdGVEaXNwbGF5KGVudGl0eSk7XG4gICAgY29uc3Qgc3RhdGVDbGFzcyA9IGVudGl0eS5pc09ubGluZSA/ICcnIDogJ29mZmxpbmUnO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW50aXR5LXJvdyAke3N0YXRlQ2xhc3N9XCI+XG4gICAgICAgIDxoYS1pY29uIFxuICAgICAgICAgIGljb249XCIke2VudGl0eS5pY29ufVwiXG4gICAgICAgICAgY2xhc3M9XCJlbnRpdHktaWNvbiAke2VudGl0eS5zdGF0ZSA9PT0gJ29uJyA/ICdhY3RpdmUnIDogJyd9XCJcbiAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJlbnRpdHktbmFtZVwiPiR7ZW50aXR5Lm5hbWV9PC9zcGFuPlxuICAgICAgICAke2VudGl0eS5pc1RvZ2dsZWFibGUgJiYgZW50aXR5LmlzT25saW5lID8gaHRtbGBcbiAgICAgICAgICA8aGEtc3dpdGNoXG4gICAgICAgICAgICAuY2hlY2tlZD0ke2VudGl0eS5zdGF0ZSA9PT0gJ29uJ31cbiAgICAgICAgICAgIEBjaGFuZ2U9JHsoKSA9PiB0aGlzLnRvZ2dsZUVudGl0eShlbnRpdHkuZW50aXR5SWQpfVxuICAgICAgICAgID48L2hhLXN3aXRjaD5cbiAgICAgICAgYCA6IGh0bWxgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlbnRpdHktc3RhdGVcIj4ke3N0YXRlRGlzcGxheX08L3NwYW4+XG4gICAgICAgIGB9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdGF0ZURpc3BsYXkoZW50aXR5OiBHcm91cGVkRW50aXR5KTogc3RyaW5nIHtcbiAgICBpZiAoIWVudGl0eS5pc09ubGluZSkgcmV0dXJuICdPZmZsaW5lJztcbiAgICBcbiAgICAvLyBGb3Igc2Vuc29ycywgc2hvdyB0aGUgdmFsdWUgd2l0aCB1bml0XG4gICAgaWYgKGVudGl0eS5lbnRpdHlJZC5pbmNsdWRlcygnc2Vuc29yJykpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGVudGl0eS5lbnRpdHlJZCk7XG4gICAgICBjb25zdCB1bml0ID0gc3RhdGU/LmF0dHJpYnV0ZXM/LnVuaXRfb2ZfbWVhc3VyZW1lbnQgfHwgJyc7XG4gICAgICByZXR1cm4gYCR7ZW50aXR5LnN0YXRlfSR7dW5pdCA/ICcgJyArIHVuaXQgOiAnJ31gO1xuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgYmluYXJ5IHNlbnNvcnMsIHNob3cgbW9yZSBkZXNjcmlwdGl2ZSB0ZXh0XG4gICAgaWYgKGVudGl0eS5lbnRpdHlJZC5pbmNsdWRlcygnYmluYXJ5X3NlbnNvcicpKSB7XG4gICAgICByZXR1cm4gZW50aXR5LnN0YXRlID09PSAnb24nID8gJ0RldGVjdGVkJyA6ICdDbGVhcic7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBlbnRpdHkuc3RhdGU7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckFjdGlvbnMoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMud2lkZ2V0Q29uZmlnIGFzIERldmljZUdyb3VwV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHNob3dHcm91cENvbnRyb2xzID0gY29uZmlnPy5zaG93R3JvdXBDb250cm9scyA/PyB0cnVlO1xuICAgIFxuICAgIGlmICghc2hvd0dyb3VwQ29udHJvbHMgfHwgIXRoaXMuaGFzVG9nZ2xlYWJsZUVudGl0aWVzKCkpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzQWN0aXZlRGV2aWNlcyA9IHRoaXMuZ3JvdXBlZEVudGl0aWVzLnNvbWUoZSA9PiBcbiAgICAgIGUuaXNUb2dnbGVhYmxlICYmIGUuaXNPbmxpbmUgJiYgZS5zdGF0ZSA9PT0gJ29uJ1xuICAgICk7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb25zXCI+XG4gICAgICAgICR7aGFzQWN0aXZlRGV2aWNlcyA/IGh0bWxgXG4gICAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPSR7dGhpcy50dXJuQWxsT2ZmfT5cbiAgICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6cG93ZXItb2ZmXCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgQWxsIE9mZlxuICAgICAgICAgIDwvbXdjLWJ1dHRvbj5cbiAgICAgICAgYCA6ICcnfVxuICAgICAgICA8bXdjLWJ1dHRvbiBAY2xpY2s9JHt0aGlzLnR1cm5BbGxPbn0+XG4gICAgICAgICAgPGhhLWljb24gaWNvbj1cIm1kaTpwb3dlci1vblwiPjwvaGEtaWNvbj5cbiAgICAgICAgICBBbGwgT25cbiAgICAgICAgPC9td2MtYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgaGFzVG9nZ2xlYWJsZUVudGl0aWVzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdyb3VwZWRFbnRpdGllcy5zb21lKGUgPT4gZS5pc1RvZ2dsZWFibGUgJiYgZS5pc09ubGluZSk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZUV4cGFuZGVkKCk6IHZvaWQge1xuICAgIHRoaXMuZXhwYW5kZWQgPSAhdGhpcy5leHBhbmRlZDtcbiAgICBcbiAgICAvLyBVcGRhdGUgc3Vic2NyaXB0aW9ucyB3aGVuIGV4cGFuZGluZy9jb2xsYXBzaW5nXG4gICAgaWYgKHRoaXMuZXhwYW5kZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9ucygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHVybkFsbE9mZigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB0b2dnbGVhYmxlID0gdGhpcy5ncm91cGVkRW50aXRpZXMuZmlsdGVyKGUgPT4gXG4gICAgICBlLmlzVG9nZ2xlYWJsZSAmJiBlLmlzT25saW5lICYmIGUuc3RhdGUgPT09ICdvbidcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdG9nZ2xlYWJsZSkge1xuICAgICAgYXdhaXQgdGhpcy50dXJuT2ZmKGVudGl0eS5lbnRpdHlJZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0dXJuQWxsT24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdG9nZ2xlYWJsZSA9IHRoaXMuZ3JvdXBlZEVudGl0aWVzLmZpbHRlcihlID0+IFxuICAgICAgZS5pc1RvZ2dsZWFibGUgJiYgZS5pc09ubGluZSAmJiBlLnN0YXRlID09PSAnb2ZmJ1xuICAgICk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0b2dnbGVhYmxlKSB7XG4gICAgICBhd2FpdCB0aGlzLnR1cm5PbihlbnRpdHkuZW50aXR5SWQpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgRGFzaHZpZXdXaWRnZXQuc3R5bGVzLFxuICAgIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgcmdiYSh2YXIoLS1yZ2ItcHJpbWFyeS1jb2xvciksIDAuMDUpLCB0cmFuc3BhcmVudCk7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXItY29udGVudCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmRldmljZS1jb3VudCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCB3aGl0ZSk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5leHBhbmQtaWNvbiB7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2U7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5leHBhbmQtaWNvbi5leHBhbmRlZCB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdGllcyB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktcm93IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDA7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktcm93Omxhc3QtY2hpbGQge1xuICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LXJvdy5vZmZsaW5lIHtcbiAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDIwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIHRyYW5zaXRpb246IGNvbG9yIDAuMnMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pY29uLmFjdGl2ZSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1uYW1lIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktc3RhdGUge1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtaW4td2lkdGg6IDYwcHg7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktc3RhdGUge1xuICAgICAgICBwYWRkaW5nOiAzMnB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cblxuICAgICAgLmFjdGlvbnMge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmFjdGlvbnM6ZW1wdHkge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgLS1tZGMtdGhlbWUtcHJpbWFyeTogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIG13Yy1idXR0b24gaGEtaWNvbiB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgICAgfVxuICAgIGBcbiAgXTtcbn0iLCIvKipcbiAqIENsaW1hdGUgd2lkZ2V0IGZvciBEYXNodmlldyBWMi5cbiAqIENvbnRyb2xzIEhWQUMgc3lzdGVtcywgdGhlcm1vc3RhdHMsIGFuZCBjbGltYXRlIGVudGl0aWVzLlxuICovXG5cbmltcG9ydCB7IFByb3BlcnR5VmFsdWVzLCBUZW1wbGF0ZVJlc3VsdCwgY3NzLCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IERhc2h2aWV3V2lkZ2V0LCBXaWRnZXRDb25maWcgfSBmcm9tICcuLi9jb3JlL3dpZGdldC1iYXNlJztcbmltcG9ydCB7IHNrZWxldG9uU3R5bGVzLCB0b3VjaFN0eWxlcyB9IGZyb20gJy4uL3N0eWxlcy9hbmltYXRpb25zJztcblxuaW50ZXJmYWNlIENsaW1hdGVXaWRnZXRDb25maWcgZXh0ZW5kcyBXaWRnZXRDb25maWcge1xuICB0eXBlOiAnY2xpbWF0ZSc7XG4gIGNsaW1hdGVFbnRpdHlJZDogc3RyaW5nO1xuICBzaG93SHVtaWRpdHk/OiBib29sZWFuO1xuICBzaG93UHJlc2V0cz86IGJvb2xlYW47XG4gIHRlbXBlcmF0dXJlU3RlcD86IG51bWJlcjtcbn1cblxudHlwZSBIdmFjTW9kZSA9ICdvZmYnIHwgJ2hlYXQnIHwgJ2Nvb2wnIHwgJ2hlYXRfY29vbCcgfCAnYXV0bycgfCAnZHJ5JyB8ICdmYW5fb25seSc7XG50eXBlIFByZXNldE1vZGUgPSAnZWNvJyB8ICdhd2F5JyB8ICdib29zdCcgfCAnY29tZm9ydCcgfCAnaG9tZScgfCAnc2xlZXAnIHwgJ2FjdGl2aXR5JztcblxuQGN1c3RvbUVsZW1lbnQoJ2Rhc2h2aWV3LWNsaW1hdGUtd2lkZ2V0JylcbmV4cG9ydCBjbGFzcyBDbGltYXRlV2lkZ2V0IGV4dGVuZHMgRGFzaHZpZXdXaWRnZXQge1xuICBAcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSkgY2xpbWF0ZUVudGl0eUlkPzogc3RyaW5nO1xuICBAc3RhdGUoKSBwcml2YXRlIGN1cnJlbnRUZW1wPzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIHRhcmdldFRlbXA/OiBudW1iZXI7XG4gIEBzdGF0ZSgpIHByaXZhdGUgdGFyZ2V0VGVtcExvdz86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSB0YXJnZXRUZW1wSGlnaD86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBodW1pZGl0eT86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBodmFjTW9kZTogSHZhY01vZGUgPSAnb2ZmJztcbiAgQHN0YXRlKCkgcHJpdmF0ZSBwcmVzZXRNb2RlPzogUHJlc2V0TW9kZTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBhdmFpbGFibGVNb2RlczogSHZhY01vZGVbXSA9IFtdO1xuICBAc3RhdGUoKSBwcml2YXRlIGF2YWlsYWJsZVByZXNldHM6IFByZXNldE1vZGVbXSA9IFtdO1xuICBAc3RhdGUoKSBwcml2YXRlIGlzQWRqdXN0aW5nID0gZmFsc2U7XG4gIEBzdGF0ZSgpIHByaXZhdGUgc2hvd1RlbXBEaWFsID0gdHJ1ZTtcblxuICBwcm90ZWN0ZWQgc3Vic2NyaWJlZEVudGl0aWVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBlbnRpdGllczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBQcmltYXJ5IGNsaW1hdGUgZW50aXR5XG4gICAgY29uc3QgY2xpbWF0ZUlkID0gdGhpcy5jbGltYXRlRW50aXR5SWQgfHwgdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5bMF07XG4gICAgaWYgKGNsaW1hdGVJZCkge1xuICAgICAgZW50aXRpZXMucHVzaChjbGltYXRlSWQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWxhdGVkIGh1bWlkaXR5IHNlbnNvciBpZiBhbnlcbiAgICBjb25zdCBodW1pZGl0eUVudGl0eSA9IHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcz8uZmluZChlID0+IFxuICAgICAgZS5pbmNsdWRlcygnaHVtaWRpdHknKSAmJiAhZS5pbmNsdWRlcygnY2xpbWF0ZScpXG4gICAgKTtcbiAgICBpZiAoaHVtaWRpdHlFbnRpdHkpIHtcbiAgICAgIGVudGl0aWVzLnB1c2goaHVtaWRpdHlFbnRpdHkpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZW50aXRpZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdENvbmZpZygpOiBQYXJ0aWFsPENsaW1hdGVXaWRnZXRDb25maWc+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NsaW1hdGUnLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgc2hvd0h1bWlkaXR5OiB0cnVlLFxuICAgICAgc2hvd1ByZXNldHM6IHRydWUsXG4gICAgICB0ZW1wZXJhdHVyZVN0ZXA6IDAuNSxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgdGhpcy51cGRhdGVDbGltYXRlU3RhdGUoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblN0YXRlQ2hhbmdlZChlbnRpdHlJZDogc3RyaW5nLCBuZXdTdGF0ZTogYW55LCBvbGRTdGF0ZTogYW55KTogdm9pZCB7XG4gICAgc3VwZXIub25TdGF0ZUNoYW5nZWQoZW50aXR5SWQsIG5ld1N0YXRlLCBvbGRTdGF0ZSk7XG4gICAgdGhpcy51cGRhdGVDbGltYXRlU3RhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ2xpbWF0ZVN0YXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IGNsaW1hdGVJZCA9IHRoaXMuY2xpbWF0ZUVudGl0eUlkIHx8IHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcz8uWzBdO1xuICAgIGlmICghY2xpbWF0ZUlkKSByZXR1cm47XG5cbiAgICBjb25zdCBjbGltYXRlU3RhdGUgPSB0aGlzLmVudGl0eVN0YXRlcy5nZXQoY2xpbWF0ZUlkKTtcbiAgICBpZiAoIWNsaW1hdGVTdGF0ZSkgcmV0dXJuO1xuXG4gICAgLy8gVXBkYXRlIHRlbXBlcmF0dXJlIHZhbHVlc1xuICAgIHRoaXMuY3VycmVudFRlbXAgPSBjbGltYXRlU3RhdGUuYXR0cmlidXRlcy5jdXJyZW50X3RlbXBlcmF0dXJlO1xuICAgIHRoaXMuaHZhY01vZGUgPSBjbGltYXRlU3RhdGUuc3RhdGUgYXMgSHZhY01vZGU7XG4gICAgdGhpcy5wcmVzZXRNb2RlID0gY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMucHJlc2V0X21vZGUgYXMgUHJlc2V0TW9kZTtcbiAgICBcbiAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHRlbXBlcmF0dXJlIGNvbnRyb2wgbW9kZXNcbiAgICBpZiAoY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93ICYmIGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2hpZ2gpIHtcbiAgICAgIHRoaXMudGFyZ2V0VGVtcExvdyA9IGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2xvdztcbiAgICAgIHRoaXMudGFyZ2V0VGVtcEhpZ2ggPSBjbGltYXRlU3RhdGUuYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoO1xuICAgICAgdGhpcy50YXJnZXRUZW1wID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhcmdldFRlbXAgPSBjbGltYXRlU3RhdGUuYXR0cmlidXRlcy50ZW1wZXJhdHVyZTtcbiAgICAgIHRoaXMudGFyZ2V0VGVtcExvdyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMudGFyZ2V0VGVtcEhpZ2ggPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gQXZhaWxhYmxlIG1vZGVzXG4gICAgdGhpcy5hdmFpbGFibGVNb2RlcyA9IGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLmh2YWNfbW9kZXMgfHwgW107XG4gICAgdGhpcy5hdmFpbGFibGVQcmVzZXRzID0gY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMucHJlc2V0X21vZGVzIHx8IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGh1bWlkaXR5IHNlbnNvclxuICAgIGNvbnN0IGh1bWlkaXR5RW50aXR5ID0gdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5maW5kKGUgPT4gXG4gICAgICBlLmluY2x1ZGVzKCdodW1pZGl0eScpICYmICFlLmluY2x1ZGVzKCdjbGltYXRlJylcbiAgICApO1xuICAgIGlmIChodW1pZGl0eUVudGl0eSkge1xuICAgICAgY29uc3QgaHVtaWRpdHlTdGF0ZSA9IHRoaXMuZW50aXR5U3RhdGVzLmdldChodW1pZGl0eUVudGl0eSk7XG4gICAgICBpZiAoaHVtaWRpdHlTdGF0ZSAmJiBodW1pZGl0eVN0YXRlLnN0YXRlICE9PSAndW5hdmFpbGFibGUnKSB7XG4gICAgICAgIHRoaXMuaHVtaWRpdHkgPSBwYXJzZUZsb2F0KGh1bWlkaXR5U3RhdGUuc3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IGNsaW1hdGVJZCA9IHRoaXMuY2xpbWF0ZUVudGl0eUlkIHx8IHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcz8uWzBdO1xuICAgIGNvbnN0IHRpdGxlID0gdGhpcy53aWRnZXRDb25maWc/LnRpdGxlIHx8ICdDbGltYXRlIENvbnRyb2wnO1xuXG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXJTa2VsZXRvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVycm9yIHx8ICFjbGltYXRlSWQpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWVycm9yXCI+XG4gICAgICAgICAgJHt0aGlzLmVycm9yIHx8ICdObyBjbGltYXRlIGVudGl0eSBjb25maWd1cmVkJ31cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8aDI+JHt0aXRsZX08L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJodmFjLW1vZGUgJHt0aGlzLmh2YWNNb2RlfVwiPlxuICAgICAgICAgICAgJHt0aGlzLmh2YWNNb2RlLnRvVXBwZXJDYXNlKCl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wZXJhdHVyZS1kaXNwbGF5XCI+XG4gICAgICAgICAgJHt0aGlzLnNob3dUZW1wRGlhbCA/IHRoaXMucmVuZGVyVGVtcGVyYXR1cmVEaWFsKCkgOiB0aGlzLnJlbmRlclRlbXBlcmF0dXJlRGlzcGxheSgpfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICAke3RoaXMucmVuZGVyVGVtcGVyYXR1cmVDb250cm9scygpfVxuICAgICAgICAke3RoaXMucmVuZGVyTW9kZVNlbGVjdG9yKCl9XG4gICAgICAgICR7dGhpcy5yZW5kZXJQcmVzZXRTZWxlY3RvcigpfVxuICAgICAgICAke3RoaXMucmVuZGVySHVtaWRpdHkoKX1cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUZW1wZXJhdHVyZURpc3BsYXkoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRUZW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBodG1sYDxzcGFuIGNsYXNzPVwidGVtcC11bmF2YWlsYWJsZVwiPi0tPC9zcGFuPmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC10ZW1wXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwidGVtcC12YWx1ZVwiPiR7dGhpcy5jdXJyZW50VGVtcC50b0ZpeGVkKDEpfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZW1wLXVuaXRcIj7CsEM8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgICR7dGhpcy5yZW5kZXJUYXJnZXRUZW1wKCl9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGVtcGVyYXR1cmVEaWFsKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAodGhpcy5jdXJyZW50VGVtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gaHRtbGA8ZGl2IGNsYXNzPVwidGVtcC1kaWFsLXVuYXZhaWxhYmxlXCI+VGVtcGVyYXR1cmUgVW5hdmFpbGFibGU8L2Rpdj5gO1xuICAgIH1cblxuICAgIGNvbnN0IG1pblRlbXAgPSAxMDtcbiAgICBjb25zdCBtYXhUZW1wID0gMzU7XG4gICAgY29uc3QgY3VycmVudFBlcmNlbnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsICgodGhpcy5jdXJyZW50VGVtcCAtIG1pblRlbXApIC8gKG1heFRlbXAgLSBtaW5UZW1wKSkgKiAxMDApKTtcbiAgICBjb25zdCB0YXJnZXRQZXJjZW50ID0gdGhpcy50YXJnZXRUZW1wID8gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCAoKHRoaXMudGFyZ2V0VGVtcCAtIG1pblRlbXApIC8gKG1heFRlbXAgLSBtaW5UZW1wKSkgKiAxMDApKSA6IGN1cnJlbnRQZXJjZW50O1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwidGVtcC1kaWFsLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC1kaWFsXCI+XG4gICAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwMCAyMDBcIiBjbGFzcz1cImRpYWwtc3ZnXCI+XG4gICAgICAgICAgICA8IS0tIEJhY2tncm91bmQgY2lyY2xlIC0tPlxuICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjEwMFwiIGN5PVwiMTAwXCIgcj1cIjgwXCIgY2xhc3M9XCJkaWFsLWJnXCIgLz5cbiAgICAgICAgICAgIDwhLS0gQ3VycmVudCB0ZW1wZXJhdHVyZSBhcmMgLS0+XG4gICAgICAgICAgICA8Y2lyY2xlIFxuICAgICAgICAgICAgICBjeD1cIjEwMFwiIFxuICAgICAgICAgICAgICBjeT1cIjEwMFwiIFxuICAgICAgICAgICAgICByPVwiODBcIiBcbiAgICAgICAgICAgICAgY2xhc3M9XCJkaWFsLWN1cnJlbnRcIlxuICAgICAgICAgICAgICBzdHJva2UtZGFzaGFycmF5PVwiJHsoY3VycmVudFBlcmNlbnQgLyAxMDApICogNTAyLjZ9IDUwMi42XCJcbiAgICAgICAgICAgICAgdHJhbnNmb3JtPVwicm90YXRlKC05MCAxMDAgMTAwKVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPCEtLSBUYXJnZXQgdGVtcGVyYXR1cmUgaW5kaWNhdG9yIC0tPlxuICAgICAgICAgICAgJHt0aGlzLnRhcmdldFRlbXAgPyBodG1sYFxuICAgICAgICAgICAgICA8Y2lyY2xlIFxuICAgICAgICAgICAgICAgIGN4PVwiMTAwXCIgXG4gICAgICAgICAgICAgICAgY3k9XCIxMDBcIiBcbiAgICAgICAgICAgICAgICByPVwiODBcIiBcbiAgICAgICAgICAgICAgICBjbGFzcz1cImRpYWwtdGFyZ2V0XCJcbiAgICAgICAgICAgICAgICBzdHJva2UtZGFzaGFycmF5PVwiMyA1MDIuNlwiXG4gICAgICAgICAgICAgICAgc3Ryb2tlLWRhc2hvZmZzZXQ9XCIkey0oKHRhcmdldFBlcmNlbnQgLyAxMDApICogNTAyLjYpfVwiXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtPVwicm90YXRlKC05MCAxMDAgMTAwKVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWwtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC10ZW1wLWRpYWxcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZW1wLXZhbHVlLWRpYWxcIj4ke3RoaXMuY3VycmVudFRlbXAudG9GaXhlZCgxKX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGVtcC11bml0LWRpYWxcIj7CsEM8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7dGhpcy50YXJnZXRUZW1wID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhcmdldC10ZW1wLWRpYWxcIj5cbiAgICAgICAgICAgICAgICBUYXJnZXQ6ICR7dGhpcy50YXJnZXRUZW1wLnRvRml4ZWQoMSl9wrBDXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRlbXAtdHJlbmRcIj5cbiAgICAgICAgICAke3RoaXMucmVuZGVyVGVtcGVyYXR1cmVUcmVuZCgpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRlbXBlcmF0dXJlVHJlbmQoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIC8vIFBsYWNlaG9sZGVyIGZvciB0ZW1wZXJhdHVyZSB0cmVuZCBtaW5pLWdyYXBoXG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHNob3cgaGlzdG9yaWNhbCBkYXRhXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwidHJlbmQtaW5kaWNhdG9yXCI+XG4gICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6dHJlbmRpbmctdXBcIiBjbGFzcz1cInRyZW5kLWljb25cIj48L2hhLWljb24+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwidHJlbmQtdGV4dFwiPlRyZW5kaW5nIHVwPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGFyZ2V0VGVtcCgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKHRoaXMuaHZhY01vZGUgPT09ICdvZmYnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRhcmdldFRlbXBMb3cgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnRhcmdldFRlbXBIaWdoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFyZ2V0LXRlbXAtcmFuZ2VcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhcmdldC1sYWJlbFwiPlRhcmdldDo8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YXJnZXQtdmFsdWVcIj4ke3RoaXMudGFyZ2V0VGVtcExvdy50b0ZpeGVkKDEpfSAtICR7dGhpcy50YXJnZXRUZW1wSGlnaC50b0ZpeGVkKDEpfcKwQzwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRhcmdldFRlbXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXJnZXQtdGVtcFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGFyZ2V0LWxhYmVsXCI+VGFyZ2V0Ojwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhcmdldC12YWx1ZVwiPiR7dGhpcy50YXJnZXRUZW1wLnRvRml4ZWQoMSl9wrBDPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGVtcGVyYXR1cmVDb250cm9scygpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKHRoaXMuaHZhY01vZGUgPT09ICdvZmYnIHx8IHRoaXMuaHZhY01vZGUgPT09ICdmYW5fb25seScpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy53aWRnZXRDb25maWcgYXMgQ2xpbWF0ZVdpZGdldENvbmZpZztcbiAgICBjb25zdCBzdGVwID0gY29uZmlnPy50ZW1wZXJhdHVyZVN0ZXAgfHwgMC41O1xuXG4gICAgaWYgKHRoaXMudGFyZ2V0VGVtcExvdyAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGFyZ2V0VGVtcEhpZ2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wLWNvbnRyb2xzLWR1YWxcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC1jb250cm9sXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRyb2wtbGFiZWxcIj5Db29sIHRvPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2wtYnV0dG9uc1wiPlxuICAgICAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICBpY29uPVwibWRpOm1pbnVzXCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmFkanVzdFRhcmdldFRlbXAoJ2xvdycsIC1zdGVwKX1cbiAgICAgICAgICAgICAgPjwvaGEtaWNvbi1idXR0b24+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udHJvbC12YWx1ZVwiPiR7dGhpcy50YXJnZXRUZW1wTG93LnRvRml4ZWQoMSl9wrBDPC9zcGFuPlxuICAgICAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICBpY29uPVwibWRpOnBsdXNcIlxuICAgICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuYWRqdXN0VGFyZ2V0VGVtcCgnbG93Jywgc3RlcCl9XG4gICAgICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRlbXAtY29udHJvbFwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250cm9sLWxhYmVsXCI+SGVhdCB0bzwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9sLWJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgPGhhLWljb24tYnV0dG9uXG4gICAgICAgICAgICAgICAgaWNvbj1cIm1kaTptaW51c1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5hZGp1c3RUYXJnZXRUZW1wKCdoaWdoJywgLXN0ZXApfVxuICAgICAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250cm9sLXZhbHVlXCI+JHt0aGlzLnRhcmdldFRlbXBIaWdoLnRvRml4ZWQoMSl9wrBDPC9zcGFuPlxuICAgICAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICBpY29uPVwibWRpOnBsdXNcIlxuICAgICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuYWRqdXN0VGFyZ2V0VGVtcCgnaGlnaCcsIHN0ZXApfVxuICAgICAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGFyZ2V0VGVtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRlbXAtY29udHJvbHNcIj5cbiAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgIGljb249XCJtZGk6bWludXNcIlxuICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5hZGp1c3RUYXJnZXRUZW1wKCdzaW5nbGUnLCAtc3RlcCl9XG4gICAgICAgICAgPjwvaGEtaWNvbi1idXR0b24+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250cm9sLXZhbHVlXCI+JHt0aGlzLnRhcmdldFRlbXAudG9GaXhlZCgxKX3CsEM8L3NwYW4+XG4gICAgICAgICAgPGhhLWljb24tYnV0dG9uXG4gICAgICAgICAgICBpY29uPVwibWRpOnBsdXNcIlxuICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5hZGp1c3RUYXJnZXRUZW1wKCdzaW5nbGUnLCBzdGVwKX1cbiAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1vZGVTZWxlY3RvcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKHRoaXMuYXZhaWxhYmxlTW9kZXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZUljb25zOiBSZWNvcmQ8SHZhY01vZGUsIHN0cmluZz4gPSB7XG4gICAgICAnb2ZmJzogJ21kaTpwb3dlcicsXG4gICAgICAnaGVhdCc6ICdtZGk6ZmlyZScsXG4gICAgICAnY29vbCc6ICdtZGk6c25vd2ZsYWtlJyxcbiAgICAgICdoZWF0X2Nvb2wnOiAnbWRpOmF1dG9yZW5ldycsXG4gICAgICAnYXV0byc6ICdtZGk6Y2FsZW5kYXItc3luYycsXG4gICAgICAnZHJ5JzogJ21kaTp3YXRlci1wZXJjZW50JyxcbiAgICAgICdmYW5fb25seSc6ICdtZGk6ZmFuJyxcbiAgICB9O1xuXG4gICAgY29uc3QgbW9kZUNvbG9yczogUmVjb3JkPEh2YWNNb2RlLCBzdHJpbmc+ID0ge1xuICAgICAgJ29mZic6ICd2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvciknLFxuICAgICAgJ2hlYXQnOiAnI2ZmNmIwMCcsXG4gICAgICAnY29vbCc6ICcjMDI4OGQxJyxcbiAgICAgICdoZWF0X2Nvb2wnOiAnIzM4OGUzYycsXG4gICAgICAnYXV0byc6ICcjMzg4ZTNjJyxcbiAgICAgICdkcnknOiAnIzljMjdiMCcsXG4gICAgICAnZmFuX29ubHknOiAnIzYwN2Q4YicsXG4gICAgfTtcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGUtc2VsZWN0b3JcIj5cbiAgICAgICAgJHt0aGlzLmF2YWlsYWJsZU1vZGVzLm1hcChtb2RlID0+IGh0bWxgXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3M9XCJtb2RlLWJ1dHRvbiB0b3VjaC10YXJnZXQgJHttb2RlID09PSB0aGlzLmh2YWNNb2RlID8gJ2FjdGl2ZScgOiAnJ31cIlxuICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5zZXRIdmFjTW9kZShtb2RlKX1cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZXQgJHttb2RlLnJlcGxhY2UoJ18nLCAnICcpfSBtb2RlXCJcbiAgICAgICAgICAgIHN0eWxlPVwiLS1tb2RlLWNvbG9yOiAke21vZGVDb2xvcnNbbW9kZV19XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aGEtaWNvbiBpY29uPVwiJHttb2RlSWNvbnNbbW9kZV19XCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgPHNwYW4+JHttb2RlLnJlcGxhY2UoJ18nLCAnICcpfTwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgYCl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcmVzZXRTZWxlY3RvcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy53aWRnZXRDb25maWcgYXMgQ2xpbWF0ZVdpZGdldENvbmZpZztcbiAgICBpZiAoIWNvbmZpZz8uc2hvd1ByZXNldHMgfHwgdGhpcy5hdmFpbGFibGVQcmVzZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBwcmVzZXRJY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdlY28nOiAnbWRpOmxlYWYnLFxuICAgICAgJ2F3YXknOiAnbWRpOmhvbWUtZXhwb3J0LW91dGxpbmUnLFxuICAgICAgJ2Jvb3N0JzogJ21kaTpyb2NrZXQtbGF1bmNoJyxcbiAgICAgICdjb21mb3J0JzogJ21kaTpzb2ZhJyxcbiAgICAgICdob21lJzogJ21kaTpob21lJyxcbiAgICAgICdzbGVlcCc6ICdtZGk6c2xlZXAnLFxuICAgICAgJ2FjdGl2aXR5JzogJ21kaTpydW4nXG4gICAgfTtcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cInByZXNldC1zZWxlY3RvclwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInByZXNldC1sYWJlbFwiPlByZXNldHM6PC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJlc2V0LWJ1dHRvbnNcIj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgY2xhc3M9XCJwcmVzZXQtYnV0dG9uIHRvdWNoLXRhcmdldCAkeyF0aGlzLnByZXNldE1vZGUgPyAnYWN0aXZlJyA6ICcnfVwiXG4gICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLnNldFByZXNldE1vZGUobnVsbCl9XG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiTm8gcHJlc2V0XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOmNsb3NlXCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgPHNwYW4+Tm9uZTwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAke3RoaXMuYXZhaWxhYmxlUHJlc2V0cy5tYXAocHJlc2V0ID0+IGh0bWxgXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzPVwicHJlc2V0LWJ1dHRvbiB0b3VjaC10YXJnZXQgJHtwcmVzZXQgPT09IHRoaXMucHJlc2V0TW9kZSA/ICdhY3RpdmUnIDogJyd9XCJcbiAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5zZXRQcmVzZXRNb2RlKHByZXNldCl9XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTZXQgJHtwcmVzZXR9IHByZXNldFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxoYS1pY29uIGljb249XCIke3ByZXNldEljb25zW3ByZXNldF0gfHwgJ21kaTpjb2cnfVwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgPHNwYW4+JHtwcmVzZXR9PC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgYCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySHVtaWRpdHkoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMud2lkZ2V0Q29uZmlnIGFzIENsaW1hdGVXaWRnZXRDb25maWc7XG4gICAgaWYgKCFjb25maWc/LnNob3dIdW1pZGl0eSB8fCB0aGlzLmh1bWlkaXR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiaHVtaWRpdHktZGlzcGxheVwiPlxuICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOndhdGVyLXBlcmNlbnRcIj48L2hhLWljb24+XG4gICAgICAgIDxzcGFuPkh1bWlkaXR5OiAke3RoaXMuaHVtaWRpdHkudG9GaXhlZCgwKX0lPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWRqdXN0VGFyZ2V0VGVtcCh0eXBlOiAnc2luZ2xlJyB8ICdsb3cnIHwgJ2hpZ2gnLCBjaGFuZ2U6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzQWRqdXN0aW5nKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgY2xpbWF0ZUlkID0gdGhpcy5jbGltYXRlRW50aXR5SWQgfHwgdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5bMF07XG4gICAgaWYgKCFjbGltYXRlSWQpIHJldHVybjtcblxuICAgIHRoaXMuaXNBZGp1c3RpbmcgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VfZGF0YTogYW55ID0ge307XG4gICAgICBcbiAgICAgIGlmICh0eXBlID09PSAnc2luZ2xlJyAmJiB0aGlzLnRhcmdldFRlbXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXJ2aWNlX2RhdGEudGVtcGVyYXR1cmUgPSBNYXRoLnJvdW5kKCh0aGlzLnRhcmdldFRlbXAgKyBjaGFuZ2UpICogMikgLyAyO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbG93JyAmJiB0aGlzLnRhcmdldFRlbXBMb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXJ2aWNlX2RhdGEudGFyZ2V0X3RlbXBfbG93ID0gTWF0aC5yb3VuZCgodGhpcy50YXJnZXRUZW1wTG93ICsgY2hhbmdlKSAqIDIpIC8gMjtcbiAgICAgICAgc2VydmljZV9kYXRhLnRhcmdldF90ZW1wX2hpZ2ggPSB0aGlzLnRhcmdldFRlbXBIaWdoO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaGlnaCcgJiYgdGhpcy50YXJnZXRUZW1wSGlnaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlcnZpY2VfZGF0YS50YXJnZXRfdGVtcF9sb3cgPSB0aGlzLnRhcmdldFRlbXBMb3c7XG4gICAgICAgIHNlcnZpY2VfZGF0YS50YXJnZXRfdGVtcF9oaWdoID0gTWF0aC5yb3VuZCgodGhpcy50YXJnZXRUZW1wSGlnaCArIGNoYW5nZSkgKiAyKSAvIDI7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnY2xpbWF0ZScsICdzZXRfdGVtcGVyYXR1cmUnLCB7XG4gICAgICAgIGVudGl0eV9pZDogY2xpbWF0ZUlkLFxuICAgICAgICAuLi5zZXJ2aWNlX2RhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gYWRqdXN0IHRlbXBlcmF0dXJlOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0FkanVzdGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0SHZhY01vZGUobW9kZTogSHZhY01vZGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjbGltYXRlSWQgPSB0aGlzLmNsaW1hdGVFbnRpdHlJZCB8fCB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXM/LlswXTtcbiAgICBpZiAoIWNsaW1hdGVJZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnY2xpbWF0ZScsICdzZXRfaHZhY19tb2RlJywge1xuICAgICAgICBlbnRpdHlfaWQ6IGNsaW1hdGVJZCxcbiAgICAgICAgaHZhY19tb2RlOiBtb2RlXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNldCBIVkFDIG1vZGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0UHJlc2V0TW9kZShwcmVzZXQ6IFByZXNldE1vZGUgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY2xpbWF0ZUlkID0gdGhpcy5jbGltYXRlRW50aXR5SWQgfHwgdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5bMF07XG4gICAgaWYgKCFjbGltYXRlSWQpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmhhc3MuY2FsbFNlcnZpY2UoJ2NsaW1hdGUnLCAnc2V0X3ByZXNldF9tb2RlJywge1xuICAgICAgICBlbnRpdHlfaWQ6IGNsaW1hdGVJZCxcbiAgICAgICAgcHJlc2V0X21vZGU6IHByZXNldFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZXQgcHJlc2V0IG1vZGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2tlbGV0b24oKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dCBsYXJnZVwiIHN0eWxlPVwid2lkdGg6IDE0MHB4O1wiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1idXR0b25cIiBzdHlsZT1cIndpZHRoOiA4MHB4OyBoZWlnaHQ6IDI4cHg7XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcGVyYXR1cmUtZGlzcGxheVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1jYXJkXCIgc3R5bGU9XCJoZWlnaHQ6IDIwMHB4OyBtYXJnaW46IDE2cHg7XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kZS1zZWxlY3RvclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1idXR0b25cIiBzdHlsZT1cIm1hcmdpbjogOHB4O1wiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1idXR0b25cIiBzdHlsZT1cIm1hcmdpbjogOHB4O1wiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi1idXR0b25cIiBzdHlsZT1cIm1hcmdpbjogOHB4O1wiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIHN0eWxlcyA9IGNzc2BcbiAgICAke0Rhc2h2aWV3V2lkZ2V0LnN0eWxlc31cbiAgICAke3NrZWxldG9uU3R5bGVzfVxuICAgICR7dG91Y2hTdHlsZXN9XG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBtaW4taGVpZ2h0OiAyNTBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmh2YWMtbW9kZSB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgICAgfVxuXG4gICAgICAuaHZhYy1tb2RlLm9mZiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmh2YWMtbW9kZS5oZWF0IHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDE1MiwgMCwgMC4yKTtcbiAgICAgICAgY29sb3I6ICNmZjZiMDA7XG4gICAgICB9XG5cbiAgICAgIC5odmFjLW1vZGUuY29vbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMzMsIDE1MCwgMjQzLCAwLjIpO1xuICAgICAgICBjb2xvcjogIzAyODhkMTtcbiAgICAgIH1cblxuICAgICAgLmh2YWMtbW9kZS5oZWF0X2Nvb2wsXG4gICAgICAuaHZhYy1tb2RlLmF1dG8ge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDc2LCAxNzUsIDgwLCAwLjIpO1xuICAgICAgICBjb2xvcjogIzM4OGUzYztcbiAgICAgIH1cblxuICAgICAgLnRlbXBlcmF0dXJlLWRpc3BsYXkge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgIH1cblxuICAgICAgLmN1cnJlbnQtdGVtcCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAzLjVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtdW5pdCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLXVuYXZhaWxhYmxlIHtcbiAgICAgICAgZm9udC1zaXplOiAzZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC50YXJnZXQtdGVtcCxcbiAgICAgIC50YXJnZXQtdGVtcC1yYW5nZSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLnRhcmdldC1sYWJlbCB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLWNvbnRyb2xzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAudGVtcC1jb250cm9scy1kdWFsIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAyNHB4O1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLWNvbnRyb2wge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDEuNGVtO1xuICAgICAgICBtaW4td2lkdGg6IDYwcHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLm1vZGUtc2VsZWN0b3Ige1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDgwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAubW9kZS1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC43NWVtO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgbWluLXdpZHRoOiA0NHB4O1xuICAgICAgfVxuXG4gICAgICAubW9kZS1idXR0b246aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnktYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIH1cblxuICAgICAgLm1vZGUtYnV0dG9uLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLXByaW1hcnktY29sb3IpKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLXByaW1hcnktY29sb3IpKTtcbiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICB9XG5cbiAgICAgIC5tb2RlLWJ1dHRvbjphY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMC45NSk7XG4gICAgICB9XG5cbiAgICAgIC5tb2RlLWJ1dHRvbiBoYS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LXNlbGVjdG9yIHtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5wcmVzZXQtbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMnB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY2FyZC1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMTUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xuICAgICAgICBmb250LXNpemU6IDAuN2VtO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgbWluLXdpZHRoOiA0NHB4O1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnByZXNldC1idXR0b24uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnByZXNldC1idXR0b24gaGEtaWNvbiB7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMThweDtcbiAgICAgIH1cblxuICAgICAgLmh1bWlkaXR5LWRpc3BsYXkge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuaHVtaWRpdHktZGlzcGxheSBoYS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAxOHB4O1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uLWJ1dHRvbiB7XG4gICAgICAgIC0tbWRjLWljb24tYnV0dG9uLXNpemU6IDQ4cHg7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMjRweDtcbiAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgbWluLXdpZHRoOiA0NHB4O1xuICAgICAgfVxuXG4gICAgICAvKiBUZW1wZXJhdHVyZSBkaWFsIHN0eWxlcyAqL1xuICAgICAgLnRlbXAtZGlhbC1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLWRpYWwge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHdpZHRoOiAyMDBweDtcbiAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgIH1cblxuICAgICAgLmRpYWwtc3ZnIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLmRpYWwtYmcge1xuICAgICAgICBmaWxsOiBub25lO1xuICAgICAgICBzdHJva2U6IHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBzdHJva2Utd2lkdGg6IDg7XG4gICAgICB9XG5cbiAgICAgIC5kaWFsLWN1cnJlbnQge1xuICAgICAgICBmaWxsOiBub25lO1xuICAgICAgICBzdHJva2U6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBzdHJva2Utd2lkdGg6IDg7XG4gICAgICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDtcbiAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hhcnJheSAzNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gICAgICB9XG5cbiAgICAgIC5kaWFsLXRhcmdldCB7XG4gICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICAgIHN0cm9rZTogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBzdHJva2Utd2lkdGg6IDQ7XG4gICAgICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDtcbiAgICAgIH1cblxuICAgICAgLmRpYWwtY2VudGVyIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuY3VycmVudC10ZW1wLWRpYWwge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtdmFsdWUtZGlhbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMi41ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLXVuaXQtZGlhbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC50YXJnZXQtdGVtcC1kaWFsIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgfVxuXG4gICAgICAudGVtcC1kaWFsLXVuYXZhaWxhYmxlIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMjAwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICB9XG5cbiAgICAgIC50cmVuZC1pbmRpY2F0b3Ige1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC50cmVuZC1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAxNnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc3VjY2Vzcy1jb2xvciwgIzRjYWY1MCk7XG4gICAgICB9XG5cbiAgICAgIC8qIE1vYmlsZSBvcHRpbWl6YXRpb25zICovXG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLnRlbXAtZGlhbCB7XG4gICAgICAgICAgd2lkdGg6IDE2MHB4O1xuICAgICAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAudGVtcC12YWx1ZS1kaWFsIHtcbiAgICAgICAgICBmb250LXNpemU6IDJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC50ZW1wLXVuaXQtZGlhbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIH1cblxuICAgICAgICAubW9kZS1zZWxlY3RvciB7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCg2MHB4LCAxZnIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wcmVzZXQtYnV0dG9ucyB7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogQWNjZXNzaWJpbGl0eSAqL1xuICAgICAgQG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpIHtcbiAgICAgICAgLm1vZGUtYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAubW9kZS1idXR0b246YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOTgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRpYWwtY3VycmVudCB7XG4gICAgICAgICAgdHJhbnNpdGlvbjogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG59IiwiLyoqXG4gKiBRdWljayBjb250cm9scyB3aWRnZXQgZm9yIERhc2h2aWV3IFYyLlxuICogUHJvdmlkZXMgZmFzdCBhY2Nlc3MgdG8gZnJlcXVlbnRseSB1c2VkIGNvbnRyb2xzIGFuZCBzY2VuZXMuXG4gKi9cblxuaW1wb3J0IHsgUHJvcGVydHlWYWx1ZXMsIFRlbXBsYXRlUmVzdWx0LCBjc3MsIGh0bWwgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgRGFzaHZpZXdXaWRnZXQsIFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuXG5pbnRlcmZhY2UgUXVpY2tDb250cm9sQ29uZmlnIHtcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBjb25maXJtQWN0aW9uPzogYm9vbGVhbjtcbiAgc2VydmljZT86IHtcbiAgICBkb21haW46IHN0cmluZztcbiAgICBzZXJ2aWNlOiBzdHJpbmc7XG4gICAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH07XG59XG5cbmludGVyZmFjZSBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnIGV4dGVuZHMgV2lkZ2V0Q29uZmlnIHtcbiAgdHlwZTogJ3F1aWNrLWNvbnRyb2xzJztcbiAgY29udHJvbHM6IFF1aWNrQ29udHJvbENvbmZpZ1tdO1xuICBjb2x1bW5zPzogbnVtYmVyO1xuICBzaG93TGFiZWxzPzogYm9vbGVhbjtcbiAgaWNvblNpemU/OiAnc21hbGwnIHwgJ21lZGl1bScgfCAnbGFyZ2UnO1xufVxuXG5AY3VzdG9tRWxlbWVudCgnZGFzaHZpZXctcXVpY2stY29udHJvbHMtd2lkZ2V0JylcbmV4cG9ydCBjbGFzcyBRdWlja0NvbnRyb2xzV2lkZ2V0IGV4dGVuZHMgRGFzaHZpZXdXaWRnZXQge1xuICBAc3RhdGUoKSBwcml2YXRlIGNvbnRyb2xTdGF0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+ID0gbmV3IE1hcCgpO1xuICBAc3RhdGUoKSBwcml2YXRlIGV4ZWN1dGluZ0NvbnRyb2w6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMud2lkZ2V0Q29uZmlnIGFzIFF1aWNrQ29udHJvbHNXaWRnZXRDb25maWc7XG4gICAgaWYgKCFjb25maWc/LmNvbnRyb2xzKSByZXR1cm4gW107XG4gICAgXG4gICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBjb250cm9sIGVudGl0aWVzXG4gICAgcmV0dXJuIGNvbmZpZy5jb250cm9sc1xuICAgICAgLm1hcChjb250cm9sID0+IGNvbnRyb2wuZW50aXR5SWQpXG4gICAgICAuZmlsdGVyKGlkID0+IGlkICYmICFpZC5zdGFydHNXaXRoKCdzY3JpcHQuJykgJiYgIWlkLnN0YXJ0c1dpdGgoJ3NjZW5lLicpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZWZhdWx0Q29uZmlnKCk6IFBhcnRpYWw8UXVpY2tDb250cm9sc1dpZGdldENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAncXVpY2stY29udHJvbHMnLFxuICAgICAgY29udHJvbHM6IFtdLFxuICAgICAgY29sdW1uczogNCxcbiAgICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgICBpY29uU2l6ZTogJ21lZGl1bScsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMudXBkYXRlQ29udHJvbFN0YXRlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uU3RhdGVDaGFuZ2VkKGVudGl0eUlkOiBzdHJpbmcsIG5ld1N0YXRlOiBhbnksIG9sZFN0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBzdXBlci5vblN0YXRlQ2hhbmdlZChlbnRpdHlJZCwgbmV3U3RhdGUsIG9sZFN0YXRlKTtcbiAgICB0aGlzLnVwZGF0ZUNvbnRyb2xTdGF0ZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29udHJvbFN0YXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGlmICghY29uZmlnPy5jb250cm9scykgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV3U3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBjb250cm9sIG9mIGNvbmZpZy5jb250cm9scykge1xuICAgICAgY29uc3QgZW50aXR5SWQgPSBjb250cm9sLmVudGl0eUlkO1xuICAgICAgaWYgKCFlbnRpdHlJZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGVudGl0eUlkKTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAvLyBGb3IgdG9nZ2xlYWJsZSBlbnRpdGllcywgdHJhY2sgb24vb2ZmIHN0YXRlXG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgICAgIGlmIChbJ2xpZ2h0JywgJ3N3aXRjaCcsICdmYW4nLCAnaW5wdXRfYm9vbGVhbiddLmluY2x1ZGVzKGRvbWFpbikpIHtcbiAgICAgICAgICBuZXdTdGF0ZXMuc2V0KGVudGl0eUlkLCBzdGF0ZS5zdGF0ZSA9PT0gJ29uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbnRyb2xTdGF0ZXMgPSBuZXdTdGF0ZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHRpdGxlID0gdGhpcy53aWRnZXRDb25maWc/LnRpdGxlIHx8ICdRdWljayBDb250cm9scyc7XG5cbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWxvYWRpbmdcIj5cbiAgICAgICAgICBMb2FkaW5nIGNvbnRyb2xzLi4uXG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvciB8fCAhY29uZmlnPy5jb250cm9scyB8fCBjb25maWcuY29udHJvbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIndpZGdldC1lcnJvclwiPlxuICAgICAgICAgICR7dGhpcy5lcnJvciB8fCAnTm8gY29udHJvbHMgY29uZmlndXJlZCd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBjb25zdCBjb2x1bW5zID0gY29uZmlnLmNvbHVtbnMgfHwgNDtcbiAgICBjb25zdCBpY29uU2l6ZSA9IGNvbmZpZy5pY29uU2l6ZSB8fCAnbWVkaXVtJztcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8aDI+JHt0aXRsZX08L2gyPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IFxuICAgICAgICAgIGNsYXNzPVwiY29udHJvbHMtZ3JpZFwiXG4gICAgICAgICAgc3R5bGU9XCJncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgke2NvbHVtbnN9LCAxZnIpXCJcbiAgICAgICAgPlxuICAgICAgICAgICR7Y29uZmlnLmNvbnRyb2xzLm1hcChjb250cm9sID0+IHRoaXMucmVuZGVyQ29udHJvbChjb250cm9sLCBpY29uU2l6ZSkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDb250cm9sKGNvbnRyb2w6IFF1aWNrQ29udHJvbENvbmZpZywgaWNvblNpemU6IHN0cmluZyk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHNob3dMYWJlbHMgPSBjb25maWc/LnNob3dMYWJlbHMgPz8gdHJ1ZTtcbiAgICBcbiAgICBjb25zdCBlbnRpdHlJZCA9IGNvbnRyb2wuZW50aXR5SWQ7XG4gICAgY29uc3Qgc3RhdGUgPSBlbnRpdHlJZCA/IHRoaXMuZW50aXR5U3RhdGVzLmdldChlbnRpdHlJZCkgOiBudWxsO1xuICAgIGNvbnN0IGlzQWN0aXZlID0gdGhpcy5jb250cm9sU3RhdGVzLmdldChlbnRpdHlJZCkgfHwgZmFsc2U7XG4gICAgY29uc3QgaXNFeGVjdXRpbmcgPSB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPT09IGVudGl0eUlkO1xuICAgIFxuICAgIC8vIERldGVybWluZSBpY29uXG4gICAgbGV0IGljb24gPSBjb250cm9sLmljb247XG4gICAgaWYgKCFpY29uICYmIHN0YXRlKSB7XG4gICAgICBpY29uID0gc3RhdGUuYXR0cmlidXRlcy5pY29uIHx8IHRoaXMuZ2V0RGVmYXVsdEljb24oZW50aXR5SWQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgbGFiZWxcbiAgICBsZXQgbGFiZWwgPSBjb250cm9sLmxhYmVsO1xuICAgIGlmICghbGFiZWwgJiYgc3RhdGUpIHtcbiAgICAgIGxhYmVsID0gc3RhdGUuYXR0cmlidXRlcy5mcmllbmRseV9uYW1lIHx8IGVudGl0eUlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvXy9nLCAnICcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgY29sb3JcbiAgICBsZXQgY29sb3IgPSBjb250cm9sLmNvbG9yIHx8ICd2YXIoLS1wcmltYXJ5LWNvbG9yKSc7XG4gICAgaWYgKGlzQWN0aXZlICYmICFjb250cm9sLmNvbG9yKSB7XG4gICAgICBjb2xvciA9IHRoaXMuZ2V0QWN0aXZlQ29sb3IoZW50aXR5SWQpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gYGNvbnRyb2wtYnV0dG9uICR7aWNvblNpemV9ICR7aXNBY3RpdmUgPyAnYWN0aXZlJyA6ICcnfSAke2lzRXhlY3V0aW5nID8gJ2V4ZWN1dGluZycgOiAnJ31gO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzPVwiJHtidXR0b25DbGFzc31cIlxuICAgICAgICBzdHlsZT1cIi0tY29udHJvbC1jb2xvcjogJHtjb2xvcn1cIlxuICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZUNvbnRyb2xDbGljayhjb250cm9sKX1cbiAgICAgICAgP2Rpc2FibGVkPSR7aXNFeGVjdXRpbmd9XG4gICAgICA+XG4gICAgICAgICR7aXNFeGVjdXRpbmcgPyBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIGAgOiBodG1sYFxuICAgICAgICAgIDxoYS1pY29uIGljb249XCIke2ljb259XCI+PC9oYS1pY29uPlxuICAgICAgICBgfVxuICAgICAgICAke3Nob3dMYWJlbHMgJiYgbGFiZWwgPyBodG1sYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udHJvbC1sYWJlbFwiPiR7bGFiZWx9PC9zcGFuPlxuICAgICAgICBgIDogJyd9XG4gICAgICA8L2J1dHRvbj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0SWNvbihlbnRpdHlJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBbZG9tYWluLCBuYW1lXSA9IGVudGl0eUlkLnNwbGl0KCcuJyk7XG4gICAgXG4gICAgLy8gRG9tYWluLWJhc2VkIGljb25zXG4gICAgY29uc3QgZG9tYWluSWNvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnbGlnaHQnOiAnbWRpOmxpZ2h0YnVsYicsXG4gICAgICAnc3dpdGNoJzogJ21kaTp0b2dnbGUtc3dpdGNoJyxcbiAgICAgICdmYW4nOiAnbWRpOmZhbicsXG4gICAgICAnc2NlbmUnOiAnbWRpOnBhbGV0dGUnLFxuICAgICAgJ3NjcmlwdCc6ICdtZGk6c2NyaXB0LXRleHQnLFxuICAgICAgJ2F1dG9tYXRpb24nOiAnbWRpOnJvYm90JyxcbiAgICAgICdpbnB1dF9ib29sZWFuJzogJ21kaTp0b2dnbGUtc3dpdGNoLW91dGxpbmUnLFxuICAgIH07XG4gICAgXG4gICAgLy8gTmFtZS1iYXNlZCBpY29uc1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdtb3JuaW5nJykpIHJldHVybiAnbWRpOndlYXRoZXItc3Vuc2V0LXVwJztcbiAgICBpZiAobmFtZS5pbmNsdWRlcygnbmlnaHQnKSB8fCBuYW1lLmluY2x1ZGVzKCdiZWR0aW1lJykpIHJldHVybiAnbWRpOndlYXRoZXItbmlnaHQnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdhd2F5JykpIHJldHVybiAnbWRpOmhvbWUtZXhwb3J0LW91dGxpbmUnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdob21lJykpIHJldHVybiAnbWRpOmhvbWUnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdwYXJ0eScpKSByZXR1cm4gJ21kaTpwYXJ0eS1wb3BwZXInO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdtb3ZpZScpIHx8IG5hbWUuaW5jbHVkZXMoJ3R2JykpIHJldHVybiAnbWRpOnRlbGV2aXNpb24nO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdkaW5uZXInKSB8fCBuYW1lLmluY2x1ZGVzKCdkaW5pbmcnKSkgcmV0dXJuICdtZGk6c2lsdmVyd2FyZS1mb3JrLWtuaWZlJztcbiAgICBpZiAobmFtZS5pbmNsdWRlcygncmVhZGluZycpKSByZXR1cm4gJ21kaTpib29rLW9wZW4tcGFnZS12YXJpYW50JztcbiAgICBcbiAgICByZXR1cm4gZG9tYWluSWNvbnNbZG9tYWluXSB8fCAnbWRpOmdlc3R1cmUtdGFwJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWN0aXZlQ29sb3IoZW50aXR5SWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgW2RvbWFpbl0gPSBlbnRpdHlJZC5zcGxpdCgnLicpO1xuICAgIFxuICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICBjYXNlICdsaWdodCc6XG4gICAgICAgIHJldHVybiAndmFyKC0td2FybmluZy1jb2xvciknO1xuICAgICAgY2FzZSAnZmFuJzpcbiAgICAgICAgcmV0dXJuICd2YXIoLS1pbmZvLWNvbG9yKSc7XG4gICAgICBjYXNlICdzd2l0Y2gnOlxuICAgICAgICByZXR1cm4gJ3ZhcigtLXN1Y2Nlc3MtY29sb3IpJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ29udHJvbENsaWNrKGNvbnRyb2w6IFF1aWNrQ29udHJvbENvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmV4ZWN1dGluZ0NvbnRyb2wpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBlbnRpdHlJZCA9IGNvbnRyb2wuZW50aXR5SWQ7XG4gICAgaWYgKCFlbnRpdHlJZCkgcmV0dXJuO1xuXG4gICAgLy8gSGFuZGxlIGNvbmZpcm1hdGlvbiBpZiByZXF1aXJlZFxuICAgIGlmIChjb250cm9sLmNvbmZpcm1BY3Rpb24pIHtcbiAgICAgIGNvbnN0IGxhYmVsID0gY29udHJvbC5sYWJlbCB8fCBlbnRpdHlJZC5zcGxpdCgnLicpWzFdLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgICAgIGlmICghY29uZmlybShgRXhlY3V0ZSBcIiR7bGFiZWx9XCI/YCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZXhlY3V0aW5nQ29udHJvbCA9IGVudGl0eUlkO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEN1c3RvbSBzZXJ2aWNlIGNhbGxcbiAgICAgIGlmIChjb250cm9sLnNlcnZpY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKFxuICAgICAgICAgIGNvbnRyb2wuc2VydmljZS5kb21haW4sXG4gICAgICAgICAgY29udHJvbC5zZXJ2aWNlLnNlcnZpY2UsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAgICAgICAgIC4uLmNvbnRyb2wuc2VydmljZS5kYXRhXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBiYXNlZCBvbiBlbnRpdHkgdHlwZVxuICAgICAgICBjb25zdCBbZG9tYWluXSA9IGVudGl0eUlkLnNwbGl0KCcuJyk7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKGRvbWFpbikge1xuICAgICAgICAgIGNhc2UgJ3NjZW5lJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnc2NlbmUnLCAndHVybl9vbicsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgY2FzZSAnc2NyaXB0JzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnc2NyaXB0JywgJ3R1cm5fb24nLCB7IGVudGl0eV9pZDogZW50aXR5SWQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ2F1dG9tYXRpb24nOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKCdhdXRvbWF0aW9uJywgJ3RyaWdnZXInLCB7IGVudGl0eV9pZDogZW50aXR5SWQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ2xpZ2h0JzpcbiAgICAgICAgICBjYXNlICdzd2l0Y2gnOlxuICAgICAgICAgIGNhc2UgJ2Zhbic6XG4gICAgICAgICAgY2FzZSAnaW5wdXRfYm9vbGVhbic6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZUVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFVua25vd24gZW50aXR5IGRvbWFpbjogJHtkb21haW59YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmlzdWFsIGZlZWRiYWNrIGZvciBub24tdG9nZ2xlYWJsZSBlbnRpdGllc1xuICAgICAgaWYgKFsnc2NlbmUnLCAnc2NyaXB0J10uaW5jbHVkZXMoZW50aXR5SWQuc3BsaXQoJy4nKVswXSkpIHtcbiAgICAgICAgLy8gS2VlcCBzcGlubmVyIGZvciBhIG1vbWVudCB0byBzaG93IGV4ZWN1dGlvblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPSBudWxsO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb250cm9sICR7ZW50aXR5SWR9OmAsIGVycm9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPSBudWxsO1xuICB9XG5cbiAgc3RhdGljIHN0eWxlcyA9IFtcbiAgICBEYXNodmlld1dpZGdldC5zdHlsZXMsXG4gICAgY3NzYFxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2xzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHggOHB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY2FyZC1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b246YWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29udHJvbC1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIHdoaXRlKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb250cm9sLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmFjdGl2ZSBoYS1pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgd2hpdGUpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b246ZGlzYWJsZWQge1xuICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5leGVjdXRpbmcge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLyogSWNvbiBzaXplcyAqL1xuICAgICAgLmNvbnRyb2wtYnV0dG9uLnNtYWxsIHtcbiAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5zbWFsbCBoYS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24ubWVkaXVtIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDMycHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5sYXJnZSB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHggMTJweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmxhcmdlIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDQwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjc1ZW07XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmxhcmdlIC5jb250cm9sLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC8qIFNwaW5uZXIgYW5pbWF0aW9uICovXG4gICAgICAuc3Bpbm5lciB7XG4gICAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBhbmltYXRpb246IHNwaW4gMC44cyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICB9XG5cbiAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgIHRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgfVxuXG4gICAgICAvKiBSZXNwb25zaXZlIGFkanVzdG1lbnRzICovXG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgLmNvbnRyb2xzLWdyaWQge1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udHJvbC1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbnRyb2wtYnV0dG9uLm1lZGl1bSBoYS1pY29uIHtcbiAgICAgICAgICAtLW1kYy1pY29uLXNpemU6IDI4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udHJvbC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjdlbTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBQdWxzZSBhbmltYXRpb24gZm9yIHNjZW5lcy9zY3JpcHRzICovXG4gICAgICBAa2V5ZnJhbWVzIHB1bHNlIHtcbiAgICAgICAgMCUge1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIH1cbiAgICAgICAgNTAlIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgIH1cbiAgICAgICAgMTAwJSB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24uZXhlY3V0aW5nIGhhLWljb24ge1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGVhc2UtaW4tb3V0IGluZmluaXRlO1xuICAgICAgfVxuICAgIGBcbiAgXTtcbn0iLCJpbXBvcnQgeyBQcm9wZXJ0eVZhbHVlcywgVGVtcGxhdGVSZXN1bHQsIGNzcywgaHRtbCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IERhc2h2aWV3QmFzZUVsZW1lbnQgfSBmcm9tICdAL2NvcmUvYmFzZS1lbGVtZW50JztcbmltcG9ydCB7IFdlYlNvY2tldENvbm5lY3Rpb24gfSBmcm9tICdAL2NvcmUvd2Vic29ja2V0LWNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU3RhdGVNYW5hZ2VyIH0gZnJvbSAnQC9jb3JlL3N0YXRlLW1hbmFnZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWFuYWdlciB9IGZyb20gJ0AvY29yZS9zdWJzY3JpcHRpb24tbWFuYWdlcic7XG5pbXBvcnQgeyBBcmVhSW5mbywgTGF5b3V0RW5naW5lIH0gZnJvbSAnQC9sYXlvdXRzL2xheW91dC1lbmdpbmUnO1xuaW1wb3J0IHsgQmFzZUxheW91dCB9IGZyb20gJ0AvbGF5b3V0cy9iYXNlLWxheW91dCc7XG5pbXBvcnQgdHlwZSB7IEJyZWFrcG9pbnQgfSBmcm9tICdAL2xheW91dHMvYmFzZS1sYXlvdXQnO1xuaW1wb3J0IHsgV2lkZ2V0Q29uZmlnIH0gZnJvbSAnQC9jb3JlL3dpZGdldC1iYXNlJztcbmltcG9ydCB7IGRhc2h2aWV3U3R5bGVzLCBkYXNodmlld1RoZW1lIH0gZnJvbSAnQC9zdHlsZXMvdGhlbWUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuaW1wb3J0IHR5cGUgeyBIb21lSW5mbyB9IGZyb20gJ0AvdHlwZXMnO1xuXG4vLyBJbXBvcnQgd2lkZ2V0c1xuaW1wb3J0ICcuLi93aWRnZXRzL3Jvb20td2lkZ2V0JztcbmltcG9ydCAnLi4vd2lkZ2V0cy9kZXZpY2UtZ3JvdXAtd2lkZ2V0JztcbmltcG9ydCAnLi4vd2lkZ2V0cy9jbGltYXRlLXdpZGdldCc7XG5pbXBvcnQgJy4uL3dpZGdldHMvcXVpY2stY29udHJvbHMtd2lkZ2V0JztcblxuQGN1c3RvbUVsZW1lbnQoJ2Rhc2h2aWV3LWRhc2hib2FyZCcpXG5leHBvcnQgY2xhc3MgRGFzaHZpZXdEYXNoYm9hcmQgZXh0ZW5kcyBEYXNodmlld0Jhc2VFbGVtZW50IHtcbiAgLy8gUHVibGljIGdldHRlcnMgZm9yIGNoaWxkIGNvbXBvbmVudHNcbiAgZ2V0IHN0YXRlTWFuYWdlcigpOiBTdGF0ZU1hbmFnZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyO1xuICB9XG5cbiAgZ2V0IHN1YnNjcmlwdGlvbk1hbmFnZXIoKTogU3Vic2NyaXB0aW9uTWFuYWdlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25NYW5hZ2VyO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBzdGF0ZVxuICBwcml2YXRlIF9zdGF0ZU1hbmFnZXI6IFN0YXRlTWFuYWdlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9zdWJzY3JpcHRpb25NYW5hZ2VyOiBTdWJzY3JpcHRpb25NYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG4gIEBzdGF0ZSgpIHByaXZhdGUgbG9hZGluZyA9IHRydWU7XG4gIEBzdGF0ZSgpIHByaXZhdGUgZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIGhvbWVJbmZvOiBIb21lSW5mbyB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIHdzQ29ubmVjdGlvbjogV2ViU29ja2V0Q29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIGxheW91dEVuZ2luZTogTGF5b3V0RW5naW5lIHwgbnVsbCA9IG51bGw7XG4gIEBzdGF0ZSgpIHByaXZhdGUgY3VycmVudExheW91dDogQmFzZUxheW91dCB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIHdpZGdldHM6IFdpZGdldENvbmZpZ1tdID0gW107XG4gIEBzdGF0ZSgpIHByaXZhdGUgY3VycmVudEJyZWFrcG9pbnQ6IEJyZWFrcG9pbnQgPSAnZGVza3RvcCc7XG4gIEBzdGF0ZSgpIHByaXZhdGUgYXJlYXM6IE1hcDxzdHJpbmcsIEFyZWFJbmZvPiA9IG5ldyBNYXAoKTtcblxuICBzdGF0aWMgc3R5bGVzID0gW1xuICAgIGRhc2h2aWV3VGhlbWUsXG4gICAgZGFzaHZpZXdTdHlsZXMsXG4gICAgY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLndlbGNvbWUtaGVhZGVyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLXhsKTtcbiAgICAgIH1cblxuICAgICAgLndlbGNvbWUtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDIuNXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhc2h2aWV3LXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogMCAwIHZhcigtLWRhc2h2aWV3LXNwYWNpbmctc20pO1xuICAgICAgfVxuXG4gICAgICAud2VsY29tZS1zdWJ0aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgICAgbWFyZ2luLXRvcDogdmFyKC0tZGFzaHZpZXctc3BhY2luZy14bCk7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWNhcmQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kYXNodmlldy1jYXJkLWJhY2tncm91bmQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1kYXNodmlldy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1sZyk7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgYm94LXNoYWRvdzogdmFyKC0tZGFzaHZpZXctYm94LXNoYWRvdyk7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWNhcmQ6aG92ZXIge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAzcmVtO1xuICAgICAgICBmb250LXdlaWdodDogMzAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLmluZm8tbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1kYXNodmlldy1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1zbSkgMCAwO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgICAgfVxuXG4gICAgICAuY29tcGxleGl0eS1tZXRlciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICBtYXJnaW4tdG9wOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmNvbXBsZXhpdHktZmlsbCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCBcbiAgICAgICAgICB2YXIoLS1zdWNjZXNzLWNvbG9yKSAwJSwgXG4gICAgICAgICAgdmFyKC0td2FybmluZy1jb2xvcikgNTAlLCBcbiAgICAgICAgICB2YXIoLS1lcnJvci1jb2xvcikgMTAwJVxuICAgICAgICApO1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5hcmVhcy1saXN0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IHZhcigtLWRhc2h2aWV3LXNwYWNpbmctc20pO1xuICAgICAgICBtYXJnaW4tdG9wOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgIH1cblxuICAgICAgLmFyZWEtdGFnIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIHdoaXRlKTtcbiAgICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy14cykgdmFyKC0tZGFzaHZpZXctc3BhY2luZy1zbSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWRhc2h2aWV3LWJvcmRlci1yYWRpdXMpO1xuICAgICAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICAgIH1cblxuICAgICAgLmxvYWRpbmctc3Bpbm5lciB7XG4gICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIHdpZHRoOiA0OHB4O1xuICAgICAgICBoZWlnaHQ6IDQ4cHg7XG4gICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgIH1cblxuICAgICAgLyogRGFzaGJvYXJkIGdyaWQgbGF5b3V0ICovXG4gICAgICAuZGFzaGJvYXJkLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cblxuICAgICAgLndpZGdldC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgfVxuXG4gICAgICAvKiBMb2FkaW5nIHN0YXRlIGZvciBkYXNoYm9hcmQgbW9kZSAqL1xuICAgICAgLmRhc2hib2FyZC1sb2FkaW5nIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgIH1cblxuICAgICAgLmRhc2hib2FyZC1sb2FkaW5nIHAge1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuICAgIGAsXG4gIF07XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgc3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRGFzaGJvYXJkKCk7XG4gICAgdGhpcy5zZXR1cFJlc2l6ZU9ic2VydmVyKCk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRGFzaGJvYXJkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIERhc2h2aWV3IGRhc2hib2FyZCcpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuaGFzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hvbWUgQXNzaXN0YW50IGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBJbml0aWFsaXplIGNvcmUgc2VydmljZXNcbiAgICAgIHRoaXMud3NDb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldENvbm5lY3Rpb24odGhpcy5oYXNzKTtcbiAgICAgIHRoaXMuX3N0YXRlTWFuYWdlciA9IG5ldyBTdGF0ZU1hbmFnZXIoKTtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcih0aGlzLndzQ29ubmVjdGlvbiwgdGhpcy5fc3RhdGVNYW5hZ2VyKTtcbiAgICAgIHRoaXMubGF5b3V0RW5naW5lID0gbmV3IExheW91dEVuZ2luZSgpO1xuXG4gICAgICAvLyBMb2FkIGhvbWUgaW5mb3JtYXRpb25cbiAgICAgIGF3YWl0IHRoaXMubG9hZEhvbWVJbmZvKCk7XG4gICAgICBcbiAgICAgIC8vIEFuYWx5emUgaG9tZSBhbmQgc2V0IHVwIGRhc2hib2FyZFxuICAgICAgYXdhaXQgdGhpcy5hbmFseXplSG9tZSgpO1xuICAgICAgdGhpcy5zZWxlY3RPcHRpbWFsTGF5b3V0KCk7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVXaWRnZXRzKCk7XG5cbiAgICAgIC8vIFN0YXJ0IHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgIHRoaXMuX3N0YXRlTWFuYWdlci5pbml0aWFsaXplRnJvbUhhc3ModGhpcy5oYXNzKTtcbiAgICAgIGF3YWl0IHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIuc3RhcnRMaXN0ZW5pbmcoKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0Rhc2hib2FyZCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGRhc2hib2FyZDonLCBlcnJvcik7XG4gICAgICB0aGlzLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgZGFzaGJvYXJkJztcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEhvbWVJbmZvKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy53c0Nvbm5lY3Rpb24pIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICBcbiAgICAgIGxvZ2dlci5kZWJ1ZygnTG9hZGluZyBob21lIGluZm9ybWF0aW9uJyk7XG4gICAgICB0aGlzLmhvbWVJbmZvID0gYXdhaXQgdGhpcy53c0Nvbm5lY3Rpb24uZ2V0SG9tZUluZm8oKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0hvbWUgaW5mbyBsb2FkZWQ6JywgdGhpcy5ob21lSW5mbyk7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBob21lIGluZm86JywgZXJyb3IpO1xuICAgICAgdGhpcy5lcnJvciA9ICdGYWlsZWQgdG8gbG9hZCBob21lIGluZm9ybWF0aW9uJztcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZykge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctbG9hZGluZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgPHA+TG9hZGluZyB5b3VyIGRhc2hib2FyZC4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2h2aWV3LWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1lcnJvclwiPlxuICAgICAgICAgICAgPGgyPkVycm9yPC9oMj5cbiAgICAgICAgICAgIDxwPiR7dGhpcy5lcnJvcn08L3A+XG4gICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0keygpID0+IHRoaXMuaW5pdGlhbGl6ZURhc2hib2FyZCgpfT5SZXRyeTwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSB3aWRnZXRzLCBzaG93IHRoZSBkYXNoYm9hcmQgdmlld1xuICAgIGlmICh0aGlzLndpZGdldHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRGFzaGJvYXJkKCk7XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlIHNob3cgdGhlIHdlbGNvbWUvaW5mbyB2aWV3XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1jb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDEgY2xhc3M9XCJ3ZWxjb21lLXRpdGxlXCI+V2VsY29tZSB0byBEYXNodmlldyBWMjwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzcz1cIndlbGNvbWUtc3VidGl0bGVcIj5cbiAgICAgICAgICAgICAgWW91ciBpbnRlbGxpZ2VudCBob21lIGRhc2hib2FyZCBmb3IgJHt0aGlzLmhvbWVJbmZvPy5lbnRpdHlDb3VudCB8fCAwfSBlbnRpdGllc1xuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgJHt0aGlzLmhvbWVJbmZvID8gdGhpcy5yZW5kZXJIb21lSW5mbygpIDogdGhpcy5yZW5kZXJOb0RhdGEoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIb21lSW5mbygpIHtcbiAgICBpZiAoIXRoaXMuaG9tZUluZm8pIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgY29tcGxleGl0eVBlcmNlbnRhZ2UgPSBNYXRoLm1pbigxMDAsIHRoaXMuaG9tZUluZm8uY29tcGxleGl0eVNjb3JlICogMTApO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiaW5mby1ncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWNhcmRcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tdmFsdWVcIj4ke3RoaXMuaG9tZUluZm8ucm9vbUNvdW50fTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tbGFiZWxcIj5Sb29tczwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tY2FyZFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7dGhpcy5ob21lSW5mby5lbnRpdHlDb3VudH08L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJpbmZvLWxhYmVsXCI+RW50aXRpZXM8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWNhcmRcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tdmFsdWVcIj4ke3RoaXMuaG9tZUluZm8uYXJlYXMubGVuZ3RofTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tbGFiZWxcIj5BcmVhczwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tY2FyZFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7dGhpcy5ob21lSW5mby5jb21wbGV4aXR5U2NvcmV9LzEwPC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby1sYWJlbFwiPkNvbXBsZXhpdHkgU2NvcmU8L3A+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBsZXhpdHktbWV0ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wbGV4aXR5LWZpbGxcIiBzdHlsZT1cIndpZHRoOiAke2NvbXBsZXhpdHlQZXJjZW50YWdlfSVcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgJHt0aGlzLmhvbWVJbmZvLmFyZWFzLmxlbmd0aCA+IDAgPyBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY2FyZFwiPlxuICAgICAgICAgIDxoMz5EZXRlY3RlZCBBcmVhczwvaDM+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFyZWFzLWxpc3RcIj5cbiAgICAgICAgICAgICR7dGhpcy5ob21lSW5mby5hcmVhcy5tYXAoYXJlYSA9PiBodG1sYFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImFyZWEtdGFnXCI+JHthcmVhfTwvc3Bhbj5cbiAgICAgICAgICAgIGApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAgOiAnJ31cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJOb0RhdGEoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY2FyZFwiPlxuICAgICAgICA8cD5ObyBob21lIGluZm9ybWF0aW9uIGF2YWlsYWJsZS4gTWFrZSBzdXJlIHlvdXIgSG9tZSBBc3Npc3RhbnQgaXMgY29uZmlndXJlZCB3aXRoIGFyZWFzIGFuZCBlbnRpdGllcy48L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgaG9tZSBjb21wbGV4aXR5IGFuZCBhcmVhcy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUhvbWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmhvbWVJbmZvIHx8ICF0aGlzLndzQ29ubmVjdGlvbikgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBkZXRhaWxlZCBhcmVhIGluZm9ybWF0aW9uXG4gICAgICBjb25zdCBhcmVhRGF0YSA9IGF3YWl0IHRoaXMuY2FsbFdlYlNvY2tldDxSZWNvcmQ8c3RyaW5nLCBhbnk+PignZ2V0X2FyZWFfZW50aXRpZXMnLCB7fSk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdG8gQXJlYUluZm8gZm9ybWF0XG4gICAgICBmb3IgKGNvbnN0IFthcmVhSWQsIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGFyZWFEYXRhKSkge1xuICAgICAgICB0aGlzLmFyZWFzLnNldChhcmVhSWQsIHtcbiAgICAgICAgICBhcmVhSWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVudGl0aWVzOiBkYXRhLmVudGl0aWVzIHx8IFtdLFxuICAgICAgICAgIGVudGl0eUNvdW50OiBkYXRhLmVudGl0eV9jb3VudCB8fCAwLFxuICAgICAgICAgIGRldmljZUNvdW50OiBkYXRhLmRldmljZV9jb3VudCB8fCAwLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYEFuYWx5emVkICR7dGhpcy5hcmVhcy5zaXplfSBhcmVhc2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBhbmFseXplIGhvbWU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3Qgb3B0aW1hbCBsYXlvdXQgYmFzZWQgb24gY29tcGxleGl0eSBzY29yZSBhbmQgYXJlYSBjb3VudC5cbiAgICovXG4gIHByaXZhdGUgc2VsZWN0T3B0aW1hbExheW91dCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaG9tZUluZm8gfHwgIXRoaXMubGF5b3V0RW5naW5lKSByZXR1cm47XG5cbiAgICBjb25zdCBjb21wbGV4aXR5U2NvcmUgPSB0aGlzLmhvbWVJbmZvLmNvbXBsZXhpdHlTY29yZTtcbiAgICBjb25zdCBhcmVhQ291bnQgPSB0aGlzLmFyZWFzLnNpemU7XG4gICAgXG4gICAgdGhpcy5jdXJyZW50TGF5b3V0ID0gdGhpcy5sYXlvdXRFbmdpbmUuc2VsZWN0TGF5b3V0KGNvbXBsZXhpdHlTY29yZSwgYXJlYUNvdW50KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgYnJlYWtwb2ludFxuICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gdGhpcy5vZmZzZXRXaWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5jdXJyZW50TGF5b3V0LmdldEJyZWFrcG9pbnQoY29udGFpbmVyV2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgd2lkZ2V0cyBiYXNlZCBvbiBhcmVhcyBhbmQgbGF5b3V0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplV2lkZ2V0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMubGF5b3V0RW5naW5lIHx8ICF0aGlzLmN1cnJlbnRMYXlvdXQpIHJldHVybjtcblxuICAgIC8vIE9yZ2FuaXplIHdpZGdldHMgZnJvbSBhcmVhc1xuICAgIGNvbnN0IGFyZWFJbmZvcyA9IEFycmF5LmZyb20odGhpcy5hcmVhcy52YWx1ZXMoKSk7XG4gICAgdGhpcy53aWRnZXRzID0gdGhpcy5sYXlvdXRFbmdpbmUub3JnYW5pemVXaWRnZXRzKGFyZWFJbmZvcyk7XG4gICAgXG4gICAgLy8gSGFuZGxlIG92ZXJmbG93XG4gICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0aGlzLmxheW91dEVuZ2luZS5oYW5kbGVPdmVyZmxvdyhcbiAgICAgIHRoaXMud2lkZ2V0cyxcbiAgICAgIHRoaXMuY3VycmVudExheW91dCxcbiAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnRcbiAgICApO1xuICAgIFxuICAgIHRoaXMud2lkZ2V0cyA9IHZpc2libGU7XG4gICAgXG4gICAgbG9nZ2VyLmluZm8oYEluaXRpYWxpemVkICR7dGhpcy53aWRnZXRzLmxlbmd0aH0gd2lkZ2V0c2ApO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb25zIGZvciB2aXNpYmxlIGVudGl0aWVzXG4gICAgYXdhaXQgdGhpcy51cGRhdGVWaXNpYmxlU3Vic2NyaXB0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHZpc2libGUgd2lkZ2V0cy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVmlzaWJsZVN1YnNjcmlwdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLl9zdWJzY3JpcHRpb25NYW5hZ2VyKSByZXR1cm47XG5cbiAgICBjb25zdCB2aXNpYmxlRW50aXRpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiB0aGlzLndpZGdldHMpIHtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHdpZGdldC5lbnRpdGllcykge1xuICAgICAgICB2aXNpYmxlRW50aXRpZXMuYWRkKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIudXBkYXRlVmlzaWJsZUVudGl0aWVzKEFycmF5LmZyb20odmlzaWJsZUVudGl0aWVzKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIHJlc2l6ZSBvYnNlcnZlciBmb3IgcmVzcG9uc2l2ZSBiZWhhdmlvci5cbiAgICovXG4gIHByaXZhdGUgc2V0dXBSZXNpemVPYnNlcnZlcigpOiB2b2lkIHtcbiAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZShlbnRyeS5jb250ZW50UmVjdC53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb250YWluZXIgcmVzaXplLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXNpemUod2lkdGg6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5jdXJyZW50TGF5b3V0KSByZXR1cm47XG5cbiAgICBjb25zdCBicmVha3BvaW50Q2hhbmdlZCA9IHRoaXMuY3VycmVudExheW91dC51cGRhdGVDb250YWluZXJXaWR0aCh3aWR0aCk7XG4gICAgXG4gICAgaWYgKGJyZWFrcG9pbnRDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5jdXJyZW50TGF5b3V0LmdldEJyZWFrcG9pbnQoKTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIGRhc2hib2FyZCBncmlkIHdpdGggd2lkZ2V0cy5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGFzaGJvYXJkKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudExheW91dCB8fCB0aGlzLndpZGdldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1sb2FkaW5nXCI+XG4gICAgICAgICAgPHA+U2V0dGluZyB1cCB5b3VyIGRhc2hib2FyZC4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGdyaWRDU1MgPSB0aGlzLmN1cnJlbnRMYXlvdXQuZ2VuZXJhdGVHcmlkQ1NTKHRoaXMuY3VycmVudEJyZWFrcG9pbnQpO1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMubGF5b3V0RW5naW5lIS5jYWxjdWxhdGVQb3NpdGlvbnModGhpcy53aWRnZXRzLCB0aGlzLmFyZWFzLnNpemUpO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWdyaWRcIiBzdHlsZT1cIiR7Z3JpZENTU31cIj5cbiAgICAgICAgJHtwb3NpdGlvbnMubWFwKHBvcyA9PiB7XG4gICAgICAgICAgY29uc3Qgd2lkZ2V0ID0gdGhpcy53aWRnZXRzLmZpbmQodyA9PiBcbiAgICAgICAgICAgIHRoaXMuZ2V0V2lkZ2V0SWQodykgPT09IHBvcy53aWRnZXRJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF3aWRnZXQpIHJldHVybiAnJztcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJXaWRnZXQod2lkZ2V0LCBwb3MpO1xuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGEgc2luZ2xlIHdpZGdldC5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyV2lkZ2V0KHdpZGdldDogV2lkZ2V0Q29uZmlnLCBwb3NpdGlvbjogYW55KTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IHN0eWxlID0gYFxuICAgICAgZ3JpZC1hcmVhOiAke3Bvc2l0aW9uLmdyaWRBcmVhfTtcbiAgICAgICR7cG9zaXRpb24uZ3JpZENvbHVtbiA/IGBncmlkLWNvbHVtbjogJHtwb3NpdGlvbi5ncmlkQ29sdW1ufTtgIDogJyd9XG4gICAgICAke3Bvc2l0aW9uLmdyaWRSb3cgPyBgZ3JpZC1yb3c6ICR7cG9zaXRpb24uZ3JpZFJvd307YCA6ICcnfVxuICAgIGA7XG5cbiAgICBzd2l0Y2ggKHdpZGdldC50eXBlKSB7XG4gICAgICBjYXNlICdyb29tJzpcbiAgICAgICAgY29uc3QgYXJlYSA9IEFycmF5LmZyb20odGhpcy5hcmVhcy52YWx1ZXMoKSkuZmluZChhID0+IFxuICAgICAgICAgIGEuZW50aXRpZXMuc29tZShlID0+IHdpZGdldC5lbnRpdGllcy5pbmNsdWRlcyhlKSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udGFpbmVyXCIgc3R5bGU9XCIke3N0eWxlfVwiPlxuICAgICAgICAgICAgPGRhc2h2aWV3LXJvb20td2lkZ2V0XG4gICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAud2lkZ2V0Q29uZmlnPSR7d2lkZ2V0fVxuICAgICAgICAgICAgICAuYXJlYUlkPSR7YXJlYT8uYXJlYUlkfVxuICAgICAgICAgICAgICAuYXJlYU5hbWU9JHthcmVhPy5uYW1lIHx8IHdpZGdldC50aXRsZX1cbiAgICAgICAgICAgID48L2Rhc2h2aWV3LXJvb20td2lkZ2V0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgXG4gICAgICAvLyBUT0RPOiBBZGQgb3RoZXIgd2lkZ2V0IHR5cGVzIHdoZW4gaW1wbGVtZW50ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udGFpbmVyXCIgc3R5bGU9XCIke3N0eWxlfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2h2aWV3LWNhcmRcIj5cbiAgICAgICAgICAgICAgPHA+V2lkZ2V0IHR5cGUgJyR7d2lkZ2V0LnR5cGV9JyBub3QgaW1wbGVtZW50ZWQgeWV0PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHdpZGdldCBJRC5cbiAgICovXG4gIHByaXZhdGUgZ2V0V2lkZ2V0SWQod2lkZ2V0OiBXaWRnZXRDb25maWcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGZpcnN0RW50aXR5ID0gd2lkZ2V0LmVudGl0aWVzWzBdIHx8ICd1bmtub3duJztcbiAgICByZXR1cm4gYCR7d2lkZ2V0LnR5cGV9LSR7Zmlyc3RFbnRpdHkucmVwbGFjZSgvXFwuL2csICdfJyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCByZXNvdXJjZXMuXG4gICAqL1xuICBwcml2YXRlIGNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuX3N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fc3RhdGVNYW5hZ2VyLmNsZWFyKCk7XG4gICAgfVxuICB9XG59IiwiLyoqXG4gKiBIb21lIEFzc2lzdGFudCBQYW5lbCBFbnRyeSBQb2ludFxuICogVGhpcyBmaWxlIGNyZWF0ZXMgdGhlIHByb3BlciBwYW5lbCBzdHJ1Y3R1cmUgdGhhdCBIb21lIEFzc2lzdGFudCBleHBlY3RzXG4gKi9cblxuaW1wb3J0ICcuL2Rhc2hib2FyZC9kYXNodmlldy1kYXNoYm9hcmQnO1xuaW1wb3J0IHsgTG9nTGV2ZWwsIGxvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJztcblxuLy8gU2V0IHVwIGxvZ2dlciBiYXNlZCBvbiBlbnZpcm9ubWVudFxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGxvZ2dlci5zZXRMZXZlbChMb2dMZXZlbC5ERUJVRyk7XG59XG5cbi8vIEV4cG9ydCB2ZXJzaW9uIGZvciBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCBEQVNIVklFV19WRVJTSU9OID0gJzAuMi42JztcblxuLyoqXG4gKiBDcmVhdGUgSG9tZSBBc3Npc3RhbnQgcGFuZWwgZnVuY3Rpb25cbiAqIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIHRoYXQgSG9tZSBBc3Npc3RhbnQgd2lsbCBjYWxsIHRvIGNyZWF0ZSB0aGUgcGFuZWxcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGFzaHZpZXdQYW5lbChoYXNzOiBhbnksIG5hcnJvdzogYm9vbGVhbiwgcm91dGU6IGFueSwgcGFuZWw6IGFueSkge1xuICBsb2dnZXIuaW5mbyhgQ3JlYXRpbmcgRGFzaHZpZXcgVjIgUGFuZWwgdiR7REFTSFZJRVdfVkVSU0lPTn1gKTtcbiAgXG4gIC8vIENyZWF0ZSBjb250YWluZXIgZWxlbWVudFxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgaGVpZ2h0OiAxMDB2aDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgYDtcblxuICAvLyBDcmVhdGUgZGFzaGJvYXJkIGVsZW1lbnRcbiAgY29uc3QgZGFzaGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGFzaHZpZXctZGFzaGJvYXJkJyk7XG4gIGRhc2hib2FyZC5oYXNzID0gaGFzcztcbiAgZGFzaGJvYXJkLm5hcnJvdyA9IG5hcnJvdztcbiAgZGFzaGJvYXJkLnJvdXRlID0gcm91dGU7XG4gIGRhc2hib2FyZC5wYW5lbCA9IHBhbmVsO1xuXG4gIC8vIFN0eWxlIHRoZSBkYXNoYm9hcmQgdG8gZmlsbCB0aGUgY29udGFpbmVyXG4gIGRhc2hib2FyZC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIGZsZXg6IDE7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICBgO1xuXG4gIC8vIEFkZCBkYXNoYm9hcmQgdG8gY29udGFpbmVyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXNoYm9hcmQpO1xuXG4gIC8vIFJldHVybiBvYmplY3Qgd2l0aCByZXF1aXJlZCBtZXRob2RzXG4gIHJldHVybiB7XG4gICAgcmVuZGVyOiAoKSA9PiBjb250YWluZXIsXG4gICAgXG4gICAgdXBkYXRlOiAobmV3SGFzczogYW55LCBuZXdOYXJyb3c6IGJvb2xlYW4sIG5ld1JvdXRlOiBhbnkpID0+IHtcbiAgICAgIGRhc2hib2FyZC5oYXNzID0gbmV3SGFzcztcbiAgICAgIGRhc2hib2FyZC5uYXJyb3cgPSBuZXdOYXJyb3c7XG4gICAgICBkYXNoYm9hcmQucm91dGUgPSBuZXdSb3V0ZTtcbiAgICB9LFxuICAgIFxuICAgIGRlc3Ryb3k6ICgpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICBjb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLy8gVmVyaWZ5IGRhc2hib2FyZCBlbGVtZW50IGlzIHJlZ2lzdGVyZWRcbmNvbnN0IGRhc2hib2FyZEVsZW1lbnQgPSBjdXN0b21FbGVtZW50cy5nZXQoJ2Rhc2h2aWV3LWRhc2hib2FyZCcpO1xuaWYgKGRhc2hib2FyZEVsZW1lbnQpIHtcbiAgbG9nZ2VyLmluZm8oJ0Rhc2h2aWV3IFYyIGRhc2hib2FyZCBlbGVtZW50IHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59IGVsc2Uge1xuICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byByZWdpc3RlciBkYXNodmlldy1kYXNoYm9hcmQgZWxlbWVudCcpO1xufVxuXG4vLyBTZXQgdXAgZ2xvYmFsIGVycm9yIGhhbmRsZXIgZm9yIGRlYnVnZ2luZ1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gIGxvZ2dlci5lcnJvcignR2xvYmFsIGVycm9yOicsIGV2ZW50LmVycm9yKTtcbn0pO1xuXG4vLyBTZXQgdXAgdW5oYW5kbGVkIHJlamVjdGlvbiBoYW5kbGVyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgKGV2ZW50KSA9PiB7XG4gIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uOicsIGV2ZW50LnJlYXNvbik7XG59KTtcblxuLy8gTG9nIGluaXRpYWxpemF0aW9uXG5sb2dnZXIuaW5mbyhgRGFzaHZpZXcgVjIgUGFuZWwgRW50cnkgdiR7REFTSFZJRVdfVkVSU0lPTn0gaW5pdGlhbGl6ZWRgKTtcblxuLy8gRXhwb3J0IHRoZSBwYW5lbCBjcmVhdGlvbiBmdW5jdGlvbiBhcyBkZWZhdWx0XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVEYXNodmlld1BhbmVsOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///767\n\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			256: 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkDashviewV2"] = self["webpackChunkDashviewV2"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, [121], () => (__webpack_require__(767)))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	__webpack_exports__ = __webpack_exports__["default"];
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});