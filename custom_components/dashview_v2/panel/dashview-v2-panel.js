/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["DashviewV2"] = factory();
	else
		root["DashviewV2"] = factory();
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/core/base-element.ts":
/*!**********************************!*\
  !*** ./src/core/base-element.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashviewBaseElement: () => (/* binding */ DashviewBaseElement)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n\n\n\nclass DashviewBaseElement extends lit__WEBPACK_IMPORTED_MODULE_0__.LitElement {\n    shouldUpdate(changedProps) {\n        if (!this.hass) {\n            console.warn('DashviewBaseElement: hass object not available');\n            return false;\n        }\n        return super.shouldUpdate(changedProps);\n    }\n    async callWebSocket(command, data) {\n        if (!this.hass) {\n            throw new Error('Home Assistant connection not available');\n        }\n        try {\n            const result = await this.hass.callWS({\n                type: `dashview_v2/${command}`,\n                ...data,\n            });\n            return result;\n        }\n        catch (error) {\n            console.error(`WebSocket call failed for ${command}:`, error);\n            throw error;\n        }\n    }\n    handleError(error, context) {\n        console.error(`[Dashview V2] Error in ${context}:`, error);\n        // In the future, we can show user-friendly error messages here\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        console.log('DashviewBaseElement connected');\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        console.log('DashviewBaseElement disconnected');\n    }\n}\n(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ attribute: false }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__metadata)(\"design:type\", Object)\n], DashviewBaseElement.prototype, \"hass\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: Object }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__metadata)(\"design:type\", Object)\n], DashviewBaseElement.prototype, \"config\", void 0);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9iYXNlLWVsZW1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUQ7QUFDSjtBQUd0QyxNQUFNLG1CQUFvQixTQUFRLDJDQUFVO0lBSXZDLFlBQVksQ0FBQyxZQUE0QjtRQUNqRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQyxnREFBZ0QsQ0FBQyxDQUFDO1lBQy9ELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUNELE9BQU8sS0FBSyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRVMsS0FBSyxDQUFDLGFBQWEsQ0FBSSxPQUFlLEVBQUUsSUFBVTtRQUMxRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2YsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFJO2dCQUN2QyxJQUFJLEVBQUUsZUFBZSxPQUFPLEVBQUU7Z0JBQzlCLEdBQUcsSUFBSTthQUNSLENBQUMsQ0FBQztZQUNILE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyw2QkFBNkIsT0FBTyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDOUQsTUFBTSxLQUFLLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVTLFdBQVcsQ0FBQyxLQUFZLEVBQUUsT0FBZTtRQUNqRCxPQUFPLENBQUMsS0FBSyxDQUFDLDBCQUEwQixPQUFPLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMzRCwrREFBK0Q7SUFDakUsQ0FBQztJQUVELGlCQUFpQjtRQUNmLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztJQUNsRCxDQUFDO0NBQ0Y7QUExQ2lDO0lBQS9CLDJEQUFRLENBQUMsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUM7O2lEQUFzQjtBQUN6QjtJQUEzQiwyREFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDOzttREFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL2NvcmUvYmFzZS1lbGVtZW50LnRzP2I1ZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGl0RWxlbWVudCwgUHJvcGVydHlWYWx1ZXMgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgdHlwZSB7IERhc2h2aWV3Q29uZmlnLCBIb21lQXNzaXN0YW50IH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEYXNodmlld0Jhc2VFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IE9iamVjdCB9KSBjb25maWchOiBEYXNodmlld0NvbmZpZztcbiAgXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5oYXNzKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Rhc2h2aWV3QmFzZUVsZW1lbnQ6IGhhc3Mgb2JqZWN0IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLnNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGNhbGxXZWJTb2NrZXQ8VD4oY29tbWFuZDogc3RyaW5nLCBkYXRhPzogYW55KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLmhhc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSG9tZSBBc3Npc3RhbnQgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaGFzcy5jYWxsV1M8VD4oe1xuICAgICAgICB0eXBlOiBgZGFzaHZpZXdfdjIvJHtjb21tYW5kfWAsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFdlYlNvY2tldCBjYWxsIGZhaWxlZCBmb3IgJHtjb21tYW5kfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgaGFuZGxlRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBbRGFzaHZpZXcgVjJdIEVycm9yIGluICR7Y29udGV4dH06YCwgZXJyb3IpO1xuICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIGNhbiBzaG93IHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZXMgaGVyZVxuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBjb25zb2xlLmxvZygnRGFzaHZpZXdCYXNlRWxlbWVudCBjb25uZWN0ZWQnKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgY29uc29sZS5sb2coJ0Rhc2h2aWV3QmFzZUVsZW1lbnQgZGlzY29ubmVjdGVkJyk7XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/base-element.ts\n\n}");

/***/ }),

/***/ "./src/core/state-manager.ts":
/*!***********************************!*\
  !*** ./src/core/state-manager.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateManager: () => (/* binding */ StateManager)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger */ \"./src/utils/logger.ts\");\n/**\n * State management for Dashview V2 dashboard.\n * Handles efficient state updates with diffing and batching.\n */\n\nconst logger = new _utils_logger__WEBPACK_IMPORTED_MODULE_0__.Logger('StateManager');\nclass StateManager {\n    constructor(config = {}) {\n        this.updateQueue = [];\n        this.rafId = null;\n        this.lastState = new Map();\n        this.listeners = new Map();\n        this.globalListeners = new Set();\n        this.config = {\n            batchInterval: config.batchInterval ?? 16, // 60fps\n            maxBatchSize: config.maxBatchSize ?? 100,\n        };\n    }\n    /**\n     * Compute differences between old and new state.\n     */\n    computeStateDiff(entityId, newState) {\n        const oldState = this.lastState.get(entityId);\n        if (!oldState) {\n            return {\n                type: 'added',\n                entityId,\n                newState,\n            };\n        }\n        // Quick equality check\n        if (oldState.state === newState.state &&\n            JSON.stringify(oldState.attributes) === JSON.stringify(newState.attributes)) {\n            return null;\n        }\n        // Find changed properties\n        const changedProps = this.getChangedProps(oldState, newState);\n        if (changedProps.length === 0) {\n            return null;\n        }\n        return {\n            type: 'changed',\n            entityId,\n            oldState,\n            newState,\n            changedProps,\n        };\n    }\n    /**\n     * Get list of changed properties between states.\n     */\n    getChangedProps(oldState, newState) {\n        const changed = [];\n        // Check main state\n        if (oldState.state !== newState.state) {\n            changed.push('state');\n        }\n        // Check attributes\n        const oldAttrs = oldState.attributes || {};\n        const newAttrs = newState.attributes || {};\n        const allKeys = new Set([...Object.keys(oldAttrs), ...Object.keys(newAttrs)]);\n        for (const key of allKeys) {\n            if (JSON.stringify(oldAttrs[key]) !== JSON.stringify(newAttrs[key])) {\n                changed.push(`attributes.${key}`);\n            }\n        }\n        // Check last_changed and last_updated\n        if (oldState.last_changed !== newState.last_changed) {\n            changed.push('last_changed');\n        }\n        if (oldState.last_updated !== newState.last_updated) {\n            changed.push('last_updated');\n        }\n        return changed;\n    }\n    /**\n     * Batch state updates for efficient rendering.\n     */\n    batchUpdate(updates) {\n        this.updateQueue.push(...updates);\n        // If we have too many updates, process immediately\n        if (this.updateQueue.length >= this.config.maxBatchSize) {\n            this.processBatch();\n            return;\n        }\n        // Otherwise, schedule processing\n        if (!this.rafId) {\n            this.rafId = requestAnimationFrame(() => {\n                this.processBatch();\n                this.rafId = null;\n            });\n        }\n    }\n    /**\n     * Process a single state update immediately.\n     */\n    updateState(entityId, newState) {\n        this.batchUpdate([{\n                entityId,\n                state: newState,\n                timestamp: Date.now(),\n            }]);\n    }\n    /**\n     * Process all batched updates.\n     */\n    processBatch() {\n        if (this.updateQueue.length === 0) {\n            return;\n        }\n        const startTime = performance.now();\n        const updateMap = new Map();\n        const diffs = [];\n        // Deduplicate updates (keep latest for each entity)\n        for (const update of this.updateQueue) {\n            updateMap.set(update.entityId, update);\n        }\n        // Process each unique update\n        for (const [entityId, update] of updateMap) {\n            const diff = this.computeStateDiff(entityId, update.state);\n            if (diff) {\n                diffs.push(diff);\n                this.lastState.set(entityId, update.state);\n                // Notify entity-specific listeners\n                const entityListeners = this.listeners.get(entityId);\n                if (entityListeners) {\n                    for (const listener of entityListeners) {\n                        try {\n                            listener(diff);\n                        }\n                        catch (error) {\n                            logger.error(`Error in entity listener for ${entityId}:`, error);\n                        }\n                    }\n                }\n            }\n        }\n        // Notify global listeners\n        if (diffs.length > 0) {\n            for (const listener of this.globalListeners) {\n                try {\n                    listener(diffs);\n                }\n                catch (error) {\n                    logger.error('Error in global state listener:', error);\n                }\n            }\n        }\n        // Clear queue\n        this.updateQueue = [];\n        // Log performance\n        const processingTime = performance.now() - startTime;\n        if (processingTime > this.config.batchInterval) {\n            logger.warn(`Batch processing took ${processingTime.toFixed(2)}ms for ${updateMap.size} updates`);\n        }\n    }\n    /**\n     * Subscribe to state changes for a specific entity.\n     */\n    subscribeToEntity(entityId, callback) {\n        if (!this.listeners.has(entityId)) {\n            this.listeners.set(entityId, new Set());\n        }\n        this.listeners.get(entityId).add(callback);\n        // Return unsubscribe function\n        return () => {\n            const listeners = this.listeners.get(entityId);\n            if (listeners) {\n                listeners.delete(callback);\n                if (listeners.size === 0) {\n                    this.listeners.delete(entityId);\n                }\n            }\n        };\n    }\n    /**\n     * Subscribe to all state changes.\n     */\n    subscribeToAll(callback) {\n        this.globalListeners.add(callback);\n        // Return unsubscribe function\n        return () => {\n            this.globalListeners.delete(callback);\n        };\n    }\n    /**\n     * Get current state for an entity.\n     */\n    getState(entityId) {\n        return this.lastState.get(entityId);\n    }\n    /**\n     * Get all current states.\n     */\n    getAllStates() {\n        return new Map(this.lastState);\n    }\n    /**\n     * Initialize state from Home Assistant.\n     */\n    initializeFromHass(hass) {\n        const updates = [];\n        for (const [entityId, state] of Object.entries(hass.states)) {\n            updates.push({\n                entityId,\n                state,\n                timestamp: Date.now(),\n            });\n        }\n        this.batchUpdate(updates);\n        logger.info(`Initialized state for ${updates.length} entities`);\n    }\n    /**\n     * Clear all state and listeners.\n     */\n    clear() {\n        if (this.rafId) {\n            cancelAnimationFrame(this.rafId);\n            this.rafId = null;\n        }\n        this.updateQueue = [];\n        this.lastState.clear();\n        this.listeners.clear();\n        this.globalListeners.clear();\n    }\n    /**\n     * Get statistics about the state manager.\n     */\n    getStats() {\n        return {\n            entityCount: this.lastState.size,\n            listenerCount: this.listeners.size + this.globalListeners.size,\n            queueSize: this.updateQueue.length,\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDLENBQUM7UUFDTCxDQUFDO1FBRUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxQixNQUFNLENBQUMsSUFBSSxDQUFDLHlCQUF5QixPQUFPLENBQUMsTUFBTSxXQUFXLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLO1FBQ0gsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDZixvQkFBb0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDcEIsQ0FBQztRQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRDs7T0FFRztJQUNILFFBQVE7UUFLTixPQUFPO1lBQ0wsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSTtZQUNoQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJO1lBQzlELFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU07U0FDbkMsQ0FBQztJQUNKLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvY29yZS9zdGF0ZS1tYW5hZ2VyLnRzPzcyY2YiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdGF0ZSBtYW5hZ2VtZW50IGZvciBEYXNodmlldyBWMiBkYXNoYm9hcmQuXG4gKiBIYW5kbGVzIGVmZmljaWVudCBzdGF0ZSB1cGRhdGVzIHdpdGggZGlmZmluZyBhbmQgYmF0Y2hpbmcuXG4gKi9cblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ1N0YXRlTWFuYWdlcicpO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVXBkYXRlIHtcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgc3RhdGU6IGFueTtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEaWZmIHtcbiAgdHlwZTogJ2FkZGVkJyB8ICdjaGFuZ2VkJyB8ICdyZW1vdmVkJztcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgb2xkU3RhdGU/OiBhbnk7XG4gIG5ld1N0YXRlPzogYW55O1xuICBjaGFuZ2VkUHJvcHM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZU1hbmFnZXJDb25maWcge1xuICBiYXRjaEludGVydmFsPzogbnVtYmVyOyAgLy8gTWlsbGlzZWNvbmRzIHRvIGJhdGNoIHVwZGF0ZXMgKGRlZmF1bHQ6IDE2bXMgZm9yIDYwZnBzKVxuICBtYXhCYXRjaFNpemU/OiBudW1iZXI7ICAgLy8gTWF4aW11bSB1cGRhdGVzIHBlciBiYXRjaCAoZGVmYXVsdDogMTAwKVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdGVNYW5hZ2VyIHtcbiAgcHJpdmF0ZSB1cGRhdGVRdWV1ZTogU3RhdGVVcGRhdGVbXSA9IFtdO1xuICBwcml2YXRlIHJhZklkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0U3RhdGU6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBTZXQ8KGRpZmY6IFN0YXRlRGlmZikgPT4gdm9pZD4+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGdsb2JhbExpc3RlbmVyczogU2V0PChkaWZmczogU3RhdGVEaWZmW10pID0+IHZvaWQ+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGNvbmZpZzogUmVxdWlyZWQ8U3RhdGVNYW5hZ2VyQ29uZmlnPjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN0YXRlTWFuYWdlckNvbmZpZyA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBiYXRjaEludGVydmFsOiBjb25maWcuYmF0Y2hJbnRlcnZhbCA/PyAxNiwgIC8vIDYwZnBzXG4gICAgICBtYXhCYXRjaFNpemU6IGNvbmZpZy5tYXhCYXRjaFNpemUgPz8gMTAwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIG9sZCBhbmQgbmV3IHN0YXRlLlxuICAgKi9cbiAgY29tcHV0ZVN0YXRlRGlmZihlbnRpdHlJZDogc3RyaW5nLCBuZXdTdGF0ZTogYW55KTogU3RhdGVEaWZmIHwgbnVsbCB7XG4gICAgY29uc3Qgb2xkU3RhdGUgPSB0aGlzLmxhc3RTdGF0ZS5nZXQoZW50aXR5SWQpO1xuICAgIFxuICAgIGlmICghb2xkU3RhdGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdhZGRlZCcsXG4gICAgICAgIGVudGl0eUlkLFxuICAgICAgICBuZXdTdGF0ZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gUXVpY2sgZXF1YWxpdHkgY2hlY2tcbiAgICBpZiAob2xkU3RhdGUuc3RhdGUgPT09IG5ld1N0YXRlLnN0YXRlICYmIFxuICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRTdGF0ZS5hdHRyaWJ1dGVzKSA9PT0gSlNPTi5zdHJpbmdpZnkobmV3U3RhdGUuYXR0cmlidXRlcykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEZpbmQgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgY2hhbmdlZFByb3BzID0gdGhpcy5nZXRDaGFuZ2VkUHJvcHMob2xkU3RhdGUsIG5ld1N0YXRlKTtcbiAgICBcbiAgICBpZiAoY2hhbmdlZFByb3BzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdjaGFuZ2VkJyxcbiAgICAgIGVudGl0eUlkLFxuICAgICAgb2xkU3RhdGUsXG4gICAgICBuZXdTdGF0ZSxcbiAgICAgIGNoYW5nZWRQcm9wcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsaXN0IG9mIGNoYW5nZWQgcHJvcGVydGllcyBiZXR3ZWVuIHN0YXRlcy5cbiAgICovXG4gIHByaXZhdGUgZ2V0Q2hhbmdlZFByb3BzKG9sZFN0YXRlOiBhbnksIG5ld1N0YXRlOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2hhbmdlZDogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIENoZWNrIG1haW4gc3RhdGVcbiAgICBpZiAob2xkU3RhdGUuc3RhdGUgIT09IG5ld1N0YXRlLnN0YXRlKSB7XG4gICAgICBjaGFuZ2VkLnB1c2goJ3N0YXRlJyk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgYXR0cmlidXRlc1xuICAgIGNvbnN0IG9sZEF0dHJzID0gb2xkU3RhdGUuYXR0cmlidXRlcyB8fCB7fTtcbiAgICBjb25zdCBuZXdBdHRycyA9IG5ld1N0YXRlLmF0dHJpYnV0ZXMgfHwge307XG4gICAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQoWy4uLk9iamVjdC5rZXlzKG9sZEF0dHJzKSwgLi4uT2JqZWN0LmtleXMobmV3QXR0cnMpXSk7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBhbGxLZXlzKSB7XG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkob2xkQXR0cnNba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KG5ld0F0dHJzW2tleV0pKSB7XG4gICAgICAgIGNoYW5nZWQucHVzaChgYXR0cmlidXRlcy4ke2tleX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBsYXN0X2NoYW5nZWQgYW5kIGxhc3RfdXBkYXRlZFxuICAgIGlmIChvbGRTdGF0ZS5sYXN0X2NoYW5nZWQgIT09IG5ld1N0YXRlLmxhc3RfY2hhbmdlZCkge1xuICAgICAgY2hhbmdlZC5wdXNoKCdsYXN0X2NoYW5nZWQnKTtcbiAgICB9XG4gICAgaWYgKG9sZFN0YXRlLmxhc3RfdXBkYXRlZCAhPT0gbmV3U3RhdGUubGFzdF91cGRhdGVkKSB7XG4gICAgICBjaGFuZ2VkLnB1c2goJ2xhc3RfdXBkYXRlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoIHN0YXRlIHVwZGF0ZXMgZm9yIGVmZmljaWVudCByZW5kZXJpbmcuXG4gICAqL1xuICBiYXRjaFVwZGF0ZSh1cGRhdGVzOiBTdGF0ZVVwZGF0ZVtdKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVRdWV1ZS5wdXNoKC4uLnVwZGF0ZXMpO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSB0b28gbWFueSB1cGRhdGVzLCBwcm9jZXNzIGltbWVkaWF0ZWx5XG4gICAgaWYgKHRoaXMudXBkYXRlUXVldWUubGVuZ3RoID49IHRoaXMuY29uZmlnLm1heEJhdGNoU2l6ZSkge1xuICAgICAgdGhpcy5wcm9jZXNzQmF0Y2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UsIHNjaGVkdWxlIHByb2Nlc3NpbmdcbiAgICBpZiAoIXRoaXMucmFmSWQpIHtcbiAgICAgIHRoaXMucmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0aGlzLnByb2Nlc3NCYXRjaCgpO1xuICAgICAgICB0aGlzLnJhZklkID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGEgc2luZ2xlIHN0YXRlIHVwZGF0ZSBpbW1lZGlhdGVseS5cbiAgICovXG4gIHVwZGF0ZVN0YXRlKGVudGl0eUlkOiBzdHJpbmcsIG5ld1N0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmJhdGNoVXBkYXRlKFt7XG4gICAgICBlbnRpdHlJZCxcbiAgICAgIHN0YXRlOiBuZXdTdGF0ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9XSk7XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhbGwgYmF0Y2hlZCB1cGRhdGVzLlxuICAgKi9cbiAgcHJpdmF0ZSBwcm9jZXNzQmF0Y2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudXBkYXRlUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgdXBkYXRlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFN0YXRlVXBkYXRlPigpO1xuICAgIGNvbnN0IGRpZmZzOiBTdGF0ZURpZmZbXSA9IFtdO1xuXG4gICAgLy8gRGVkdXBsaWNhdGUgdXBkYXRlcyAoa2VlcCBsYXRlc3QgZm9yIGVhY2ggZW50aXR5KVxuICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHRoaXMudXBkYXRlUXVldWUpIHtcbiAgICAgIHVwZGF0ZU1hcC5zZXQodXBkYXRlLmVudGl0eUlkLCB1cGRhdGUpO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgZWFjaCB1bmlxdWUgdXBkYXRlXG4gICAgZm9yIChjb25zdCBbZW50aXR5SWQsIHVwZGF0ZV0gb2YgdXBkYXRlTWFwKSB7XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5jb21wdXRlU3RhdGVEaWZmKGVudGl0eUlkLCB1cGRhdGUuc3RhdGUpO1xuICAgICAgXG4gICAgICBpZiAoZGlmZikge1xuICAgICAgICBkaWZmcy5wdXNoKGRpZmYpO1xuICAgICAgICB0aGlzLmxhc3RTdGF0ZS5zZXQoZW50aXR5SWQsIHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBOb3RpZnkgZW50aXR5LXNwZWNpZmljIGxpc3RlbmVyc1xuICAgICAgICBjb25zdCBlbnRpdHlMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQoZW50aXR5SWQpO1xuICAgICAgICBpZiAoZW50aXR5TGlzdGVuZXJzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBlbnRpdHlMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyKGRpZmYpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBpbiBlbnRpdHkgbGlzdGVuZXIgZm9yICR7ZW50aXR5SWR9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgZ2xvYmFsIGxpc3RlbmVyc1xuICAgIGlmIChkaWZmcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuZ2xvYmFsTGlzdGVuZXJzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGlzdGVuZXIoZGlmZnMpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gZ2xvYmFsIHN0YXRlIGxpc3RlbmVyOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsZWFyIHF1ZXVlXG4gICAgdGhpcy51cGRhdGVRdWV1ZSA9IFtdO1xuXG4gICAgLy8gTG9nIHBlcmZvcm1hbmNlXG4gICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICBpZiAocHJvY2Vzc2luZ1RpbWUgPiB0aGlzLmNvbmZpZy5iYXRjaEludGVydmFsKSB7XG4gICAgICBsb2dnZXIud2FybihcbiAgICAgICAgYEJhdGNoIHByb2Nlc3NpbmcgdG9vayAke3Byb2Nlc3NpbmdUaW1lLnRvRml4ZWQoMil9bXMgZm9yICR7dXBkYXRlTWFwLnNpemV9IHVwZGF0ZXNgXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gc3RhdGUgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyBlbnRpdHkuXG4gICAqL1xuICBzdWJzY3JpYmVUb0VudGl0eShcbiAgICBlbnRpdHlJZDogc3RyaW5nLCBcbiAgICBjYWxsYmFjazogKGRpZmY6IFN0YXRlRGlmZikgPT4gdm9pZFxuICApOiAoKSA9PiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmhhcyhlbnRpdHlJZCkpIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzLnNldChlbnRpdHlJZCwgbmV3IFNldCgpKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5saXN0ZW5lcnMuZ2V0KGVudGl0eUlkKSEuYWRkKGNhbGxiYWNrKTtcblxuICAgIC8vIFJldHVybiB1bnN1YnNjcmliZSBmdW5jdGlvblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQoZW50aXR5SWQpO1xuICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKGVudGl0eUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIGFsbCBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgc3Vic2NyaWJlVG9BbGwoY2FsbGJhY2s6IChkaWZmczogU3RhdGVEaWZmW10pID0+IHZvaWQpOiAoKSA9PiB2b2lkIHtcbiAgICB0aGlzLmdsb2JhbExpc3RlbmVycy5hZGQoY2FsbGJhY2spO1xuXG4gICAgLy8gUmV0dXJuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuZ2xvYmFsTGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBzdGF0ZSBmb3IgYW4gZW50aXR5LlxuICAgKi9cbiAgZ2V0U3RhdGUoZW50aXR5SWQ6IHN0cmluZyk6IGFueSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMubGFzdFN0YXRlLmdldChlbnRpdHlJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjdXJyZW50IHN0YXRlcy5cbiAgICovXG4gIGdldEFsbFN0YXRlcygpOiBNYXA8c3RyaW5nLCBhbnk+IHtcbiAgICByZXR1cm4gbmV3IE1hcCh0aGlzLmxhc3RTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzdGF0ZSBmcm9tIEhvbWUgQXNzaXN0YW50LlxuICAgKi9cbiAgaW5pdGlhbGl6ZUZyb21IYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpOiB2b2lkIHtcbiAgICBjb25zdCB1cGRhdGVzOiBTdGF0ZVVwZGF0ZVtdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBbZW50aXR5SWQsIHN0YXRlXSBvZiBPYmplY3QuZW50cmllcyhoYXNzLnN0YXRlcykpIHtcbiAgICAgIHVwZGF0ZXMucHVzaCh7XG4gICAgICAgIGVudGl0eUlkLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5iYXRjaFVwZGF0ZSh1cGRhdGVzKTtcbiAgICBsb2dnZXIuaW5mbyhgSW5pdGlhbGl6ZWQgc3RhdGUgZm9yICR7dXBkYXRlcy5sZW5ndGh9IGVudGl0aWVzYCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIHN0YXRlIGFuZCBsaXN0ZW5lcnMuXG4gICAqL1xuICBjbGVhcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yYWZJZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yYWZJZCk7XG4gICAgICB0aGlzLnJhZklkID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVF1ZXVlID0gW107XG4gICAgdGhpcy5sYXN0U3RhdGUuY2xlYXIoKTtcbiAgICB0aGlzLmxpc3RlbmVycy5jbGVhcigpO1xuICAgIHRoaXMuZ2xvYmFsTGlzdGVuZXJzLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0YXRpc3RpY3MgYWJvdXQgdGhlIHN0YXRlIG1hbmFnZXIuXG4gICAqL1xuICBnZXRTdGF0cygpOiB7XG4gICAgZW50aXR5Q291bnQ6IG51bWJlcjtcbiAgICBsaXN0ZW5lckNvdW50OiBudW1iZXI7XG4gICAgcXVldWVTaXplOiBudW1iZXI7XG4gIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBlbnRpdHlDb3VudDogdGhpcy5sYXN0U3RhdGUuc2l6ZSxcbiAgICAgIGxpc3RlbmVyQ291bnQ6IHRoaXMubGlzdGVuZXJzLnNpemUgKyB0aGlzLmdsb2JhbExpc3RlbmVycy5zaXplLFxuICAgICAgcXVldWVTaXplOiB0aGlzLnVwZGF0ZVF1ZXVlLmxlbmd0aCxcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/core/state-manager.ts\n\n}");

/***/ }),

/***/ "./src/core/subscription-manager.ts":
/*!******************************************!*\
  !*** ./src/core/subscription-manager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SubscriptionManager: () => (/* binding */ SubscriptionManager)\n/* harmony export */ });\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger */ \"./src/utils/logger.ts\");\n/**\n * Subscription manager for smart entity subscriptions.\n * Only subscribes to visible entities to optimize performance.\n */\n\nconst logger = new _utils_logger__WEBPACK_IMPORTED_MODULE_0__.Logger('SubscriptionManager');\nclass SubscriptionManager {\n    constructor(websocket, stateManager, config = {}) {\n        this.visibleEntities = new Set();\n        this.subscribedEntities = new Set();\n        this.debounceTimer = null;\n        this.unsubscribeHandler = null;\n        this.websocket = websocket;\n        this.stateManager = stateManager;\n        this.config = {\n            debounceDelay: config.debounceDelay ?? 300,\n            maxSubscriptions: config.maxSubscriptions ?? 500,\n        };\n    }\n    /**\n     * Update the list of visible entities.\n     * This will trigger subscription updates after debouncing.\n     */\n    updateVisibleEntities(entities) {\n        const newVisible = new Set(entities);\n        // Check if there's actually a change\n        const hasChanges = entities.length !== this.visibleEntities.size ||\n            entities.some(id => !this.visibleEntities.has(id));\n        if (!hasChanges) {\n            return;\n        }\n        // Update visible set\n        this.visibleEntities = newVisible;\n        // Debounce the sync operation\n        if (this.debounceTimer) {\n            clearTimeout(this.debounceTimer);\n        }\n        this.debounceTimer = window.setTimeout(() => {\n            this.syncSubscriptions();\n            this.debounceTimer = null;\n        }, this.config.debounceDelay);\n    }\n    /**\n     * Sync subscriptions with the backend.\n     * Subscribes to newly visible entities and unsubscribes from hidden ones.\n     */\n    async syncSubscriptions() {\n        if (!this.websocket.isConnected()) {\n            logger.warn('WebSocket not connected, skipping subscription sync');\n            return;\n        }\n        try {\n            // Limit subscriptions if needed\n            const targetEntities = Array.from(this.visibleEntities).slice(0, this.config.maxSubscriptions);\n            // Call backend to update subscriptions\n            const result = await this.callUpdateSubscriptions(targetEntities);\n            // Update local tracking\n            this.subscribedEntities = new Set([\n                ...this.subscribedEntities,\n                ...result.subscribed\n            ]);\n            for (const entityId of result.unsubscribed) {\n                this.subscribedEntities.delete(entityId);\n            }\n            logger.info(`Subscription sync complete: ${result.subscribed.length} added, ` +\n                `${result.unsubscribed.length} removed, ${this.subscribedEntities.size} total`);\n            // Log any failures\n            if (result.failed.length > 0) {\n                logger.warn(`Failed to subscribe to ${result.failed.length} entities:`, result.failed);\n            }\n        }\n        catch (error) {\n            logger.error('Failed to sync subscriptions:', error);\n        }\n    }\n    /**\n     * Call the backend WebSocket command to update subscriptions.\n     */\n    async callUpdateSubscriptions(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/update_subscriptions',\n            entities: entities,\n        });\n        return response;\n    }\n    /**\n     * Subscribe to specific entities immediately.\n     */\n    async subscribeToEntities(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/subscribe_visible_entities',\n            entities: entities,\n        });\n        // Update local tracking\n        for (const entityId of response.subscribed) {\n            this.subscribedEntities.add(entityId);\n        }\n        return {\n            subscribed: response.subscribed,\n            unsubscribed: [],\n            failed: response.failed || [],\n        };\n    }\n    /**\n     * Unsubscribe from specific entities immediately.\n     */\n    async unsubscribeFromEntities(entities) {\n        const hass = this.websocket.hass;\n        const response = await hass.callWS({\n            type: 'dashview_v2/unsubscribe_hidden_entities',\n            entities: entities,\n        });\n        // Update local tracking\n        for (const entityId of response.unsubscribed) {\n            this.subscribedEntities.delete(entityId);\n        }\n        return {\n            subscribed: [],\n            unsubscribed: response.unsubscribed,\n            failed: response.failed || [],\n        };\n    }\n    /**\n     * Start listening for state changes.\n     * This sets up the WebSocket event listener for state updates.\n     */\n    async startListening() {\n        if (this.unsubscribeHandler) {\n            logger.warn('Already listening for state changes');\n            return;\n        }\n        try {\n            // Set up WebSocket event listener\n            this.unsubscribeHandler = await this.websocket.subscribeToStateChanges((event) => {\n                if (event.event_type === 'state_changed' && event.data) {\n                    const { entity_id, new_state } = event.data;\n                    // Only process if we're subscribed to this entity\n                    if (this.subscribedEntities.has(entity_id) && new_state) {\n                        this.stateManager.updateState(entity_id, new_state);\n                    }\n                }\n            });\n            logger.info('Started listening for state changes');\n        }\n        catch (error) {\n            logger.error('Failed to start listening:', error);\n            throw error;\n        }\n    }\n    /**\n     * Stop listening for state changes.\n     */\n    stopListening() {\n        if (this.unsubscribeHandler) {\n            this.unsubscribeHandler();\n            this.unsubscribeHandler = null;\n            logger.info('Stopped listening for state changes');\n        }\n    }\n    /**\n     * Get the current list of subscribed entities.\n     */\n    getSubscribedEntities() {\n        return Array.from(this.subscribedEntities);\n    }\n    /**\n     * Get the current list of visible entities.\n     */\n    getVisibleEntities() {\n        return Array.from(this.visibleEntities);\n    }\n    /**\n     * Check if an entity is currently subscribed.\n     */\n    isSubscribed(entityId) {\n        return this.subscribedEntities.has(entityId);\n    }\n    /**\n     * Get subscription statistics.\n     */\n    getStats() {\n        return {\n            visibleCount: this.visibleEntities.size,\n            subscribedCount: this.subscribedEntities.size,\n            maxSubscriptions: this.config.maxSubscriptions,\n        };\n    }\n    /**\n     * Clear all subscriptions and stop listening.\n     */\n    async clear() {\n        // Stop listening\n        this.stopListening();\n        // Clear debounce timer\n        if (this.debounceTimer) {\n            clearTimeout(this.debounceTimer);\n            this.debounceTimer = null;\n        }\n        // Unsubscribe from all entities\n        if (this.subscribedEntities.size > 0) {\n            await this.unsubscribeFromEntities(Array.from(this.subscribedEntities));\n        }\n        // Clear sets\n        this.visibleEntities.clear();\n        this.subscribedEntities.clear();\n        logger.info('Cleared all subscriptions');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7SUFFRDs7T0FFRztJQUNILFlBQVksQ0FBQyxRQUFnQjtRQUMzQixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUTtRQUtOLE9BQU87WUFDTCxZQUFZLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJO1lBQ3ZDLGVBQWUsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSTtZQUM3QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQjtTQUMvQyxDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLEtBQUs7UUFDVCxpQkFBaUI7UUFDakIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLHVCQUF1QjtRQUN2QixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN2QixZQUFZLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQzVCLENBQUM7UUFFRCxnQ0FBZ0M7UUFDaEMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3JDLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQztRQUMxRSxDQUFDO1FBRUQsYUFBYTtRQUNiLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssRUFBRSxDQUFDO1FBRWhDLE1BQU0sQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUMzQyxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL2NvcmUvc3Vic2NyaXB0aW9uLW1hbmFnZXIudHM/OTcxYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN1YnNjcmlwdGlvbiBtYW5hZ2VyIGZvciBzbWFydCBlbnRpdHkgc3Vic2NyaXB0aW9ucy5cbiAqIE9ubHkgc3Vic2NyaWJlcyB0byB2aXNpYmxlIGVudGl0aWVzIHRvIG9wdGltaXplIHBlcmZvcm1hbmNlLlxuICovXG5cbmltcG9ydCB7IFdlYlNvY2tldENvbm5lY3Rpb24gfSBmcm9tICcuL3dlYnNvY2tldC1jb25uZWN0aW9uJztcbmltcG9ydCB7IFN0YXRlTWFuYWdlciB9IGZyb20gJy4vc3RhdGUtbWFuYWdlcic7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInO1xuaW1wb3J0IHR5cGUgeyBIb21lQXNzaXN0YW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdTdWJzY3JpcHRpb25NYW5hZ2VyJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uQ29uZmlnIHtcbiAgZGVib3VuY2VEZWxheT86IG51bWJlcjsgIC8vIE1pbGxpc2Vjb25kcyB0byBkZWJvdW5jZSB2aXNpYmlsaXR5IGNoYW5nZXNcbiAgbWF4U3Vic2NyaXB0aW9ucz86IG51bWJlcjsgIC8vIE1heGltdW0gY29uY3VycmVudCBzdWJzY3JpcHRpb25zXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uUmVzdWx0IHtcbiAgc3Vic2NyaWJlZDogc3RyaW5nW107XG4gIHVuc3Vic2NyaWJlZDogc3RyaW5nW107XG4gIGZhaWxlZDogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ6IFdlYlNvY2tldENvbm5lY3Rpb247XG4gIHByaXZhdGUgc3RhdGVNYW5hZ2VyOiBTdGF0ZU1hbmFnZXI7XG4gIHByaXZhdGUgdmlzaWJsZUVudGl0aWVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBzdWJzY3JpYmVkRW50aXRpZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGRlYm91bmNlVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogUmVxdWlyZWQ8U3Vic2NyaXB0aW9uQ29uZmlnPjtcbiAgcHJpdmF0ZSB1bnN1YnNjcmliZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHdlYnNvY2tldDogV2ViU29ja2V0Q29ubmVjdGlvbixcbiAgICBzdGF0ZU1hbmFnZXI6IFN0YXRlTWFuYWdlcixcbiAgICBjb25maWc6IFN1YnNjcmlwdGlvbkNvbmZpZyA9IHt9XG4gICkge1xuICAgIHRoaXMud2Vic29ja2V0ID0gd2Vic29ja2V0O1xuICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gc3RhdGVNYW5hZ2VyO1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZGVib3VuY2VEZWxheTogY29uZmlnLmRlYm91bmNlRGVsYXkgPz8gMzAwLFxuICAgICAgbWF4U3Vic2NyaXB0aW9uczogY29uZmlnLm1heFN1YnNjcmlwdGlvbnMgPz8gNTAwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBsaXN0IG9mIHZpc2libGUgZW50aXRpZXMuXG4gICAqIFRoaXMgd2lsbCB0cmlnZ2VyIHN1YnNjcmlwdGlvbiB1cGRhdGVzIGFmdGVyIGRlYm91bmNpbmcuXG4gICAqL1xuICB1cGRhdGVWaXNpYmxlRW50aXRpZXMoZW50aXRpZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3QgbmV3VmlzaWJsZSA9IG5ldyBTZXQoZW50aXRpZXMpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYWN0dWFsbHkgYSBjaGFuZ2VcbiAgICBjb25zdCBoYXNDaGFuZ2VzID0gZW50aXRpZXMubGVuZ3RoICE9PSB0aGlzLnZpc2libGVFbnRpdGllcy5zaXplIHx8XG4gICAgICBlbnRpdGllcy5zb21lKGlkID0+ICF0aGlzLnZpc2libGVFbnRpdGllcy5oYXMoaWQpKTtcbiAgICBcbiAgICBpZiAoIWhhc0NoYW5nZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdmlzaWJsZSBzZXRcbiAgICB0aGlzLnZpc2libGVFbnRpdGllcyA9IG5ld1Zpc2libGU7XG5cbiAgICAvLyBEZWJvdW5jZSB0aGUgc3luYyBvcGVyYXRpb25cbiAgICBpZiAodGhpcy5kZWJvdW5jZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVRpbWVyKTtcbiAgICB9XG5cbiAgICB0aGlzLmRlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNTdWJzY3JpcHRpb25zKCk7XG4gICAgICB0aGlzLmRlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH0sIHRoaXMuY29uZmlnLmRlYm91bmNlRGVsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bmMgc3Vic2NyaXB0aW9ucyB3aXRoIHRoZSBiYWNrZW5kLlxuICAgKiBTdWJzY3JpYmVzIHRvIG5ld2x5IHZpc2libGUgZW50aXRpZXMgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIGhpZGRlbiBvbmVzLlxuICAgKi9cbiAgYXN5bmMgc3luY1N1YnNjcmlwdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLndlYnNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICBsb2dnZXIud2FybignV2ViU29ja2V0IG5vdCBjb25uZWN0ZWQsIHNraXBwaW5nIHN1YnNjcmlwdGlvbiBzeW5jJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIExpbWl0IHN1YnNjcmlwdGlvbnMgaWYgbmVlZGVkXG4gICAgICBjb25zdCB0YXJnZXRFbnRpdGllcyA9IEFycmF5LmZyb20odGhpcy52aXNpYmxlRW50aXRpZXMpLnNsaWNlKDAsIHRoaXMuY29uZmlnLm1heFN1YnNjcmlwdGlvbnMpO1xuICAgICAgXG4gICAgICAvLyBDYWxsIGJhY2tlbmQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbnNcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2FsbFVwZGF0ZVN1YnNjcmlwdGlvbnModGFyZ2V0RW50aXRpZXMpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgbG9jYWwgdHJhY2tpbmdcbiAgICAgIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzID0gbmV3IFNldChbXG4gICAgICAgIC4uLnRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLFxuICAgICAgICAuLi5yZXN1bHQuc3Vic2NyaWJlZFxuICAgICAgXSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgcmVzdWx0LnVuc3Vic2NyaWJlZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5kZWxldGUoZW50aXR5SWQpO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgYFN1YnNjcmlwdGlvbiBzeW5jIGNvbXBsZXRlOiAke3Jlc3VsdC5zdWJzY3JpYmVkLmxlbmd0aH0gYWRkZWQsIGAgK1xuICAgICAgICBgJHtyZXN1bHQudW5zdWJzY3JpYmVkLmxlbmd0aH0gcmVtb3ZlZCwgJHt0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5zaXplfSB0b3RhbGBcbiAgICAgICk7XG5cbiAgICAgIC8vIExvZyBhbnkgZmFpbHVyZXNcbiAgICAgIGlmIChyZXN1bHQuZmFpbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBzdWJzY3JpYmUgdG8gJHtyZXN1bHQuZmFpbGVkLmxlbmd0aH0gZW50aXRpZXM6YCwgcmVzdWx0LmZhaWxlZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHN5bmMgc3Vic2NyaXB0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGJhY2tlbmQgV2ViU29ja2V0IGNvbW1hbmQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbnMuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNhbGxVcGRhdGVTdWJzY3JpcHRpb25zKGVudGl0aWVzOiBzdHJpbmdbXSk6IFByb21pc2U8U3Vic2NyaXB0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgaGFzcyA9ICh0aGlzLndlYnNvY2tldCBhcyBhbnkpLmhhc3MgYXMgSG9tZUFzc2lzdGFudDtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhc3MuY2FsbFdTPFN1YnNjcmlwdGlvblJlc3VsdD4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3VwZGF0ZV9zdWJzY3JpcHRpb25zJyxcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllcyxcbiAgICB9KTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gc3BlY2lmaWMgZW50aXRpZXMgaW1tZWRpYXRlbHkuXG4gICAqL1xuICBhc3luYyBzdWJzY3JpYmVUb0VudGl0aWVzKGVudGl0aWVzOiBzdHJpbmdbXSk6IFByb21pc2U8U3Vic2NyaXB0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgaGFzcyA9ICh0aGlzLndlYnNvY2tldCBhcyBhbnkpLmhhc3MgYXMgSG9tZUFzc2lzdGFudDtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhc3MuY2FsbFdTPHtcbiAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgICBzdWJzY3JpYmVkOiBzdHJpbmdbXTtcbiAgICAgIGZhaWxlZDogc3RyaW5nW107XG4gICAgfT4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3N1YnNjcmliZV92aXNpYmxlX2VudGl0aWVzJyxcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllcyxcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBsb2NhbCB0cmFja2luZ1xuICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgcmVzcG9uc2Uuc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuYWRkKGVudGl0eUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3Vic2NyaWJlZDogcmVzcG9uc2Uuc3Vic2NyaWJlZCxcbiAgICAgIHVuc3Vic2NyaWJlZDogW10sXG4gICAgICBmYWlsZWQ6IHJlc3BvbnNlLmZhaWxlZCB8fCBbXSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gc3BlY2lmaWMgZW50aXRpZXMgaW1tZWRpYXRlbHkuXG4gICAqL1xuICBhc3luYyB1bnN1YnNjcmliZUZyb21FbnRpdGllcyhlbnRpdGllczogc3RyaW5nW10pOiBQcm9taXNlPFN1YnNjcmlwdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGhhc3MgPSAodGhpcy53ZWJzb2NrZXQgYXMgYW55KS5oYXNzIGFzIEhvbWVBc3Npc3RhbnQ7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYXNzLmNhbGxXUzx7XG4gICAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgICAgdW5zdWJzY3JpYmVkOiBzdHJpbmdbXTtcbiAgICAgIGZhaWxlZDogc3RyaW5nW107XG4gICAgfT4oe1xuICAgICAgdHlwZTogJ2Rhc2h2aWV3X3YyL3Vuc3Vic2NyaWJlX2hpZGRlbl9lbnRpdGllcycsXG4gICAgICBlbnRpdGllczogZW50aXRpZXMsXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgbG9jYWwgdHJhY2tpbmdcbiAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHJlc3BvbnNlLnVuc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuZGVsZXRlKGVudGl0eUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3Vic2NyaWJlZDogW10sXG4gICAgICB1bnN1YnNjcmliZWQ6IHJlc3BvbnNlLnVuc3Vic2NyaWJlZCxcbiAgICAgIGZhaWxlZDogcmVzcG9uc2UuZmFpbGVkIHx8IFtdLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzLlxuICAgKiBUaGlzIHNldHMgdXAgdGhlIFdlYlNvY2tldCBldmVudCBsaXN0ZW5lciBmb3Igc3RhdGUgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIHN0YXJ0TGlzdGVuaW5nKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0FscmVhZHkgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNldCB1cCBXZWJTb2NrZXQgZXZlbnQgbGlzdGVuZXJcbiAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gYXdhaXQgdGhpcy53ZWJzb2NrZXQuc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZXMoXG4gICAgICAgIChldmVudCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudC5ldmVudF90eXBlID09PSAnc3RhdGVfY2hhbmdlZCcgJiYgZXZlbnQuZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgeyBlbnRpdHlfaWQsIG5ld19zdGF0ZSB9ID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIGlmIHdlJ3JlIHN1YnNjcmliZWQgdG8gdGhpcyBlbnRpdHlcbiAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWRFbnRpdGllcy5oYXMoZW50aXR5X2lkKSAmJiBuZXdfc3RhdGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlU3RhdGUoZW50aXR5X2lkLCBuZXdfc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ1N0YXJ0ZWQgbGlzdGVuaW5nIGZvciBzdGF0ZSBjaGFuZ2VzJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHN0YXJ0IGxpc3RlbmluZzonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBzdG9wTGlzdGVuaW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcikge1xuICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIoKTtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gbnVsbDtcbiAgICAgIGxvZ2dlci5pbmZvKCdTdG9wcGVkIGxpc3RlbmluZyBmb3Igc3RhdGUgY2hhbmdlcycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbGlzdCBvZiBzdWJzY3JpYmVkIGVudGl0aWVzLlxuICAgKi9cbiAgZ2V0U3Vic2NyaWJlZEVudGl0aWVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnN1YnNjcmliZWRFbnRpdGllcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGxpc3Qgb2YgdmlzaWJsZSBlbnRpdGllcy5cbiAgICovXG4gIGdldFZpc2libGVFbnRpdGllcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy52aXNpYmxlRW50aXRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVudGl0eSBpcyBjdXJyZW50bHkgc3Vic2NyaWJlZC5cbiAgICovXG4gIGlzU3Vic2NyaWJlZChlbnRpdHlJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLmhhcyhlbnRpdHlJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN1YnNjcmlwdGlvbiBzdGF0aXN0aWNzLlxuICAgKi9cbiAgZ2V0U3RhdHMoKToge1xuICAgIHZpc2libGVDb3VudDogbnVtYmVyO1xuICAgIHN1YnNjcmliZWRDb3VudDogbnVtYmVyO1xuICAgIG1heFN1YnNjcmlwdGlvbnM6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpc2libGVDb3VudDogdGhpcy52aXNpYmxlRW50aXRpZXMuc2l6ZSxcbiAgICAgIHN1YnNjcmliZWRDb3VudDogdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuc2l6ZSxcbiAgICAgIG1heFN1YnNjcmlwdGlvbnM6IHRoaXMuY29uZmlnLm1heFN1YnNjcmlwdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgc3Vic2NyaXB0aW9ucyBhbmQgc3RvcCBsaXN0ZW5pbmcuXG4gICAqL1xuICBhc3luYyBjbGVhcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTdG9wIGxpc3RlbmluZ1xuICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuXG4gICAgLy8gQ2xlYXIgZGVib3VuY2UgdGltZXJcbiAgICBpZiAodGhpcy5kZWJvdW5jZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVRpbWVyKTtcbiAgICAgIHRoaXMuZGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gVW5zdWJzY3JpYmUgZnJvbSBhbGwgZW50aXRpZXNcbiAgICBpZiAodGhpcy5zdWJzY3JpYmVkRW50aXRpZXMuc2l6ZSA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMudW5zdWJzY3JpYmVGcm9tRW50aXRpZXMoQXJyYXkuZnJvbSh0aGlzLnN1YnNjcmliZWRFbnRpdGllcykpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHNldHNcbiAgICB0aGlzLnZpc2libGVFbnRpdGllcy5jbGVhcigpO1xuICAgIHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzLmNsZWFyKCk7XG4gICAgXG4gICAgbG9nZ2VyLmluZm8oJ0NsZWFyZWQgYWxsIHN1YnNjcmlwdGlvbnMnKTtcbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/core/subscription-manager.ts\n\n}");

/***/ }),

/***/ "./src/core/websocket-connection.ts":
/*!******************************************!*\
  !*** ./src/core/websocket-connection.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketConnection: () => (/* binding */ WebSocketConnection)\n/* harmony export */ });\nclass WebSocketConnection {\n    constructor(hass) {\n        this.hass = hass;\n    }\n    async getHomeInfo() {\n        try {\n            const result = await this.hass.callWS({\n                type: 'dashview_v2/get_home_info',\n            });\n            return result;\n        }\n        catch (error) {\n            console.error('Failed to get home info:', error);\n            throw error;\n        }\n    }\n    async subscribeToStateChanges(callback, entityIds) {\n        if (!this.hass.connection) {\n            throw new Error('WebSocket connection not available');\n        }\n        const unsubscribe = await this.hass.connection.subscribeEvents((event) => {\n            if (!entityIds || entityIds.includes(event.data.entity_id)) {\n                callback(event);\n            }\n        }, 'state_changed');\n        return unsubscribe;\n    }\n    isConnected() {\n        return !!this.hass && !!this.hass.connection;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS93ZWJzb2NrZXQtY29ubmVjdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBTSxtQkFBbUI7SUFHOUIsWUFBWSxJQUFtQjtRQUM3QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRUQsS0FBSyxDQUFDLFdBQVc7UUFDZixJQUFJLENBQUM7WUFDSCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFXO2dCQUM5QyxJQUFJLEVBQUUsMkJBQTJCO2FBQ2xDLENBQUMsQ0FBQztZQUNILE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNqRCxNQUFNLEtBQUssQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDLHVCQUF1QixDQUMzQixRQUE4QixFQUM5QixTQUFvQjtRQUVwQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUVELE1BQU0sV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUM1RCxDQUFDLEtBQVUsRUFBRSxFQUFFO1lBQ2IsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztnQkFDM0QsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xCLENBQUM7UUFDSCxDQUFDLEVBQ0QsZUFBZSxDQUNoQixDQUFDO1FBRUYsT0FBTyxXQUF5QixDQUFDO0lBQ25DLENBQUM7SUFFRCxXQUFXO1FBQ1QsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDL0MsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9jb3JlL3dlYnNvY2tldC1jb25uZWN0aW9uLnRzP2QyZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBIb21lQXNzaXN0YW50LCBIb21lSW5mbyB9IGZyb20gJ0AvdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0Q29ubmVjdGlvbiB7XG4gIHByaXZhdGUgaGFzczogSG9tZUFzc2lzdGFudDtcblxuICBjb25zdHJ1Y3RvcihoYXNzOiBIb21lQXNzaXN0YW50KSB7XG4gICAgdGhpcy5oYXNzID0gaGFzcztcbiAgfVxuXG4gIGFzeW5jIGdldEhvbWVJbmZvKCk6IFByb21pc2U8SG9tZUluZm8+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5oYXNzLmNhbGxXUzxIb21lSW5mbz4oe1xuICAgICAgICB0eXBlOiAnZGFzaHZpZXdfdjIvZ2V0X2hvbWVfaW5mbycsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgaG9tZSBpbmZvOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN1YnNjcmliZVRvU3RhdGVDaGFuZ2VzKFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IGFueSkgPT4gdm9pZCxcbiAgICBlbnRpdHlJZHM/OiBzdHJpbmdbXVxuICApOiBQcm9taXNlPCgpID0+IHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaGFzcy5jb25uZWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGF3YWl0IHRoaXMuaGFzcy5jb25uZWN0aW9uLnN1YnNjcmliZUV2ZW50cyhcbiAgICAgIChldmVudDogYW55KSA9PiB7XG4gICAgICAgIGlmICghZW50aXR5SWRzIHx8IGVudGl0eUlkcy5pbmNsdWRlcyhldmVudC5kYXRhLmVudGl0eV9pZCkpIHtcbiAgICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3RhdGVfY2hhbmdlZCdcbiAgICApO1xuXG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlIGFzICgpID0+IHZvaWQ7XG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLmhhc3MgJiYgISF0aGlzLmhhc3MuY29ubmVjdGlvbjtcbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/core/websocket-connection.ts\n\n}");

/***/ }),

/***/ "./src/core/widget-base.ts":
/*!*********************************!*\
  !*** ./src/core/widget-base.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashviewWidget: () => (/* binding */ DashviewWidget)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _base_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base-element */ \"./src/core/base-element.ts\");\n/* harmony import */ var _utils_gestures__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/gestures */ \"./src/utils/gestures.ts\");\n/* harmony import */ var _styles_animations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/animations */ \"./src/styles/animations.ts\");\n/**\n * Base class for all Dashview widgets.\n * Provides lifecycle management, state handling, and visibility tracking.\n */\nvar _a;\n\n\n\n\n\n\nclass DashviewWidget extends _base_element__WEBPACK_IMPORTED_MODULE_2__.DashviewBaseElement {\n    constructor() {\n        super(...arguments);\n        this.entityStates = new Map();\n        this.isVisible = false;\n        this.isLoading = true;\n        this.error = null;\n        this.stateUnsubscribers = [];\n        this.keyboardHandlers = new Map();\n    }\n    /**\n     * Get the list of entity IDs this widget wants to subscribe to.\n     * Can be overridden by subclasses for dynamic subscriptions.\n     */\n    subscribedEntities() {\n        return this.widgetConfig?.entities || [];\n    }\n    /**\n     * Called when widget configuration is set.\n     * Subclasses should override to validate their specific config.\n     */\n    setConfig(config) {\n        if (!config) {\n            throw new Error('Invalid configuration');\n        }\n        const errors = this.validateConfig(config);\n        if (errors.length > 0) {\n            throw new Error(`Configuration errors: ${errors.join(', ')}`);\n        }\n        this.widgetConfig = config;\n    }\n    /**\n     * Validate widget configuration.\n     * Returns array of error messages, empty if valid.\n     */\n    validateConfig(config) {\n        const errors = [];\n        if (!config.type) {\n            errors.push('Widget type is required');\n        }\n        if (!config.entities || !Array.isArray(config.entities)) {\n            errors.push('Entities must be an array');\n        }\n        return errors;\n    }\n    /**\n     * Called when entity state changes.\n     * Subclasses can override to handle state changes.\n     */\n    onStateChanged(entityId, newState, oldState) {\n        // Default implementation updates the local state map\n        if (newState) {\n            this.entityStates.set(entityId, newState);\n        }\n        else {\n            this.entityStates.delete(entityId);\n        }\n    }\n    /**\n     * Lifecycle: Called when element is added to DOM.\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setupVisibilityObserver();\n        this.setupKeyboardHandlers();\n    }\n    /**\n     * Lifecycle: Called after first update.\n     */\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.initializeWidget();\n    }\n    /**\n     * Lifecycle: Called when element is removed from DOM.\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.cleanup();\n    }\n    /**\n     * Initialize the widget.\n     */\n    async initializeWidget() {\n        try {\n            this.isLoading = true;\n            this.error = null;\n            // Get managers from dashboard context\n            this.stateManager = this.getStateManager();\n            this.subscriptionManager = this.getSubscriptionManager();\n            if (!this.stateManager || !this.subscriptionManager) {\n                throw new Error('State or subscription manager not available');\n            }\n            // Load initial entity states\n            await this.loadInitialStates();\n            // Subscribe to state changes\n            this.subscribeToStateChanges();\n            this.isLoading = false;\n        }\n        catch (error) {\n            this.error = error instanceof Error ? error.message : 'Unknown error';\n            this.isLoading = false;\n            this.handleError(error, 'Widget initialization');\n        }\n    }\n    /**\n     * Get state manager from dashboard context.\n     * This should be provided by the parent dashboard.\n     */\n    getStateManager() {\n        // Try to get from parent dashboard element\n        const dashboard = this.closest('dashview-dashboard');\n        return dashboard?.stateManager;\n    }\n    /**\n     * Get subscription manager from dashboard context.\n     */\n    getSubscriptionManager() {\n        const dashboard = this.closest('dashview-dashboard');\n        return dashboard?.subscriptionManager;\n    }\n    /**\n     * Load initial states for all entities.\n     */\n    async loadInitialStates() {\n        const entities = this.subscribedEntities();\n        for (const entityId of entities) {\n            const state = this.hass.states[entityId];\n            if (state) {\n                this.entityStates.set(entityId, state);\n            }\n        }\n    }\n    /**\n     * Subscribe to state changes for our entities.\n     */\n    subscribeToStateChanges() {\n        if (!this.stateManager)\n            return;\n        const entities = this.subscribedEntities();\n        for (const entityId of entities) {\n            const unsubscribe = this.stateManager.subscribeToEntity(entityId, (diff) => {\n                this.onStateChanged(diff.entityId, diff.newState, diff.oldState);\n            });\n            this.stateUnsubscribers.push(unsubscribe);\n        }\n    }\n    /**\n     * Setup intersection observer for visibility tracking.\n     */\n    setupVisibilityObserver() {\n        this.intersectionObserver = new IntersectionObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === this) {\n                    this.handleVisibilityChange(entry.isIntersecting);\n                }\n            }\n        }, {\n            root: null,\n            rootMargin: '50px', // Start loading slightly before visible\n            threshold: 0.01,\n        });\n        this.intersectionObserver.observe(this);\n    }\n    /**\n     * Handle visibility changes.\n     */\n    handleVisibilityChange(isVisible) {\n        if (this.isVisible === isVisible)\n            return;\n        this.isVisible = isVisible;\n        if (isVisible) {\n            this.onBecameVisible();\n        }\n        else {\n            this.onBecameHidden();\n        }\n        // Update subscriptions based on visibility\n        this.updateSubscriptions();\n    }\n    /**\n     * Called when widget becomes visible.\n     * Subclasses can override for custom behavior.\n     */\n    onBecameVisible() {\n        // Default: no action\n    }\n    /**\n     * Called when widget becomes hidden.\n     * Subclasses can override for custom behavior.\n     */\n    onBecameHidden() {\n        // Default: no action\n    }\n    /**\n     * Update subscriptions based on current visibility.\n     */\n    updateSubscriptions() {\n        if (!this.subscriptionManager)\n            return;\n        const entities = this.subscribedEntities();\n        if (this.isVisible) {\n            // Widget is visible, ensure we're subscribed\n            const visibleEntities = this.subscriptionManager.getVisibleEntities();\n            const allVisible = new Set([...visibleEntities, ...entities]);\n            this.subscriptionManager.updateVisibleEntities(Array.from(allVisible));\n        }\n        else {\n            // Widget is hidden, we could unsubscribe\n            // But this is handled globally by the dashboard\n        }\n    }\n    /**\n     * Clean up resources.\n     */\n    cleanup() {\n        // Unsubscribe from state changes\n        for (const unsubscribe of this.stateUnsubscribers) {\n            unsubscribe();\n        }\n        this.stateUnsubscribers = [];\n        // Clean up intersection observer\n        if (this.intersectionObserver) {\n            this.intersectionObserver.disconnect();\n            this.intersectionObserver = undefined;\n        }\n        // Clean up keyboard handlers\n        this.removeKeyboardHandlers();\n        // Cancel any pending animation frames\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n        // Clear state\n        this.entityStates.clear();\n    }\n    /**\n     * Helper to call Home Assistant service.\n     */\n    async callService(domain, service, data) {\n        try {\n            await this.hass.callService(domain, service, data);\n        }\n        catch (error) {\n            this.handleError(error, `Service call ${domain}.${service}`);\n            throw error;\n        }\n    }\n    /**\n     * Helper to toggle an entity.\n     */\n    async toggleEntity(entityId) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'toggle', { entity_id: entityId });\n    }\n    /**\n     * Helper to turn on an entity.\n     */\n    async turnOn(entityId, data) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'turn_on', { entity_id: entityId, ...data });\n    }\n    /**\n     * Helper to turn off an entity.\n     */\n    async turnOff(entityId) {\n        const domain = entityId.split('.')[0];\n        await this.callService(domain, 'turn_off', { entity_id: entityId });\n    }\n    /**\n     * Trigger haptic feedback with the specified intensity.\n     */\n    triggerHapticFeedback(intensity) {\n        _utils_gestures__WEBPACK_IMPORTED_MODULE_3__.HapticFeedback[intensity]();\n    }\n    /**\n     * Animate an element with the specified animation.\n     */\n    animateElement(element, animation, duration) {\n        return new Promise((resolve) => {\n            const animationDuration = duration || _styles_animations__WEBPACK_IMPORTED_MODULE_4__.ANIMATION_DURATION.normal;\n            element.style.animation = `${animation} ${animationDuration} ${_styles_animations__WEBPACK_IMPORTED_MODULE_4__.EASING.standard}`;\n            const handleAnimationEnd = () => {\n                element.style.animation = '';\n                element.removeEventListener('animationend', handleAnimationEnd);\n                resolve();\n            };\n            element.addEventListener('animationend', handleAnimationEnd);\n        });\n    }\n    /**\n     * Focus management helper.\n     */\n    focusElement(element, options) {\n        element.focus(options);\n    }\n    /**\n     * Set up keyboard event handlers for accessibility.\n     */\n    setupKeyboardHandlers() {\n        // Default keyboard handlers\n        this.addKeyboardHandler('Escape', this.handleEscapeKey.bind(this));\n        this.addKeyboardHandler('Tab', this.handleTabKey.bind(this));\n        this.addEventListener('keydown', this.handleKeydown.bind(this));\n    }\n    /**\n     * Remove keyboard event handlers.\n     */\n    removeKeyboardHandlers() {\n        this.keyboardHandlers.clear();\n        this.removeEventListener('keydown', this.handleKeydown.bind(this));\n    }\n    /**\n     * Add a keyboard event handler.\n     */\n    addKeyboardHandler(key, handler) {\n        this.keyboardHandlers.set(key, handler);\n    }\n    /**\n     * Handle keyboard events.\n     */\n    handleKeydown(event) {\n        const handler = this.keyboardHandlers.get(event.key);\n        if (handler) {\n            handler(event);\n        }\n    }\n    /**\n     * Handle Escape key (default: blur active element).\n     */\n    handleEscapeKey(_event) {\n        const activeElement = this.shadowRoot?.activeElement;\n        if (activeElement) {\n            activeElement.blur();\n        }\n    }\n    /**\n     * Handle Tab key for focus management.\n     */\n    handleTabKey(_event) {\n        // Default behavior - could be overridden by subclasses\n    }\n    /**\n     * Get all focusable elements within the widget.\n     */\n    getFocusableElements() {\n        const focusableSelectors = [\n            'button:not([disabled])',\n            'input:not([disabled])',\n            'select:not([disabled])',\n            'textarea:not([disabled])',\n            'a[href]',\n            '[tabindex]:not([tabindex=\"-1\"])',\n            'ha-icon-button:not([disabled])',\n            'mwc-button:not([disabled])',\n            'ha-switch:not([disabled])'\n        ].join(', ');\n        const elements = this.shadowRoot?.querySelectorAll(focusableSelectors) || [];\n        return Array.from(elements);\n    }\n}\n/**\n * Base styles for all widgets.\n */\nDashviewWidget.styles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n    :host {\n      display: block;\n      position: relative;\n    }\n\n    .widget-container {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .widget-loading {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--primary-text-color);\n    }\n\n    .widget-error {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--error-color, #f44336);\n      padding: 16px;\n      text-align: center;\n    }\n  `;\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: Object }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], DashviewWidget.prototype, \"widgetConfig\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", typeof (_a = typeof Map !== \"undefined\" && Map) === \"function\" ? _a : Object)\n], DashviewWidget.prototype, \"entityStates\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], DashviewWidget.prototype, \"isVisible\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], DashviewWidget.prototype, \"isLoading\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], DashviewWidget.prototype, \"error\", void 0);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7UUFDN0UsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBa0IsQ0FBQztJQUMvQyxDQUFDOztBQUVEOztHQUVHO0FBQ0kscUJBQU0sR0FBRyx3Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0E2QmxCLENBQUM7QUF0ZDBCO0lBQTNCLDJEQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7O29EQUE2QjtBQUNyQztJQUFsQix3REFBSyxFQUFFO3lGQUF5QixHQUFHLG9CQUFILEdBQUc7b0RBQTBCO0FBQzNDO0lBQWxCLHdEQUFLLEVBQUU7O2lEQUE2QjtBQUNsQjtJQUFsQix3REFBSyxFQUFFOztpREFBNEI7QUFDakI7SUFBbEIsd0RBQUssRUFBRTs7NkNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9jb3JlL3dpZGdldC1iYXNlLnRzP2E1ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgRGFzaHZpZXcgd2lkZ2V0cy5cbiAqIFByb3ZpZGVzIGxpZmVjeWNsZSBtYW5hZ2VtZW50LCBzdGF0ZSBoYW5kbGluZywgYW5kIHZpc2liaWxpdHkgdHJhY2tpbmcuXG4gKi9cblxuaW1wb3J0IHsgUHJvcGVydHlWYWx1ZXMsIGNzcyB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBEYXNodmlld0Jhc2VFbGVtZW50IH0gZnJvbSAnLi9iYXNlLWVsZW1lbnQnO1xuaW1wb3J0IHsgU3RhdGVNYW5hZ2VyLCBTdGF0ZURpZmYgfSBmcm9tICcuL3N0YXRlLW1hbmFnZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWFuYWdlciB9IGZyb20gJy4vc3Vic2NyaXB0aW9uLW1hbmFnZXInO1xuaW1wb3J0IHsgSGFwdGljRmVlZGJhY2sgfSBmcm9tICcuLi91dGlscy9nZXN0dXJlcyc7XG5pbXBvcnQgeyBBTklNQVRJT05fRFVSQVRJT04sIEVBU0lORyB9IGZyb20gJy4uL3N0eWxlcy9hbmltYXRpb25zJztcbmltcG9ydCB0eXBlIHsgSG9tZUFzc2lzdGFudCB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBXaWRnZXRDb25maWcge1xuICB0eXBlOiAncm9vbScgfCAnZGV2aWNlLWdyb3VwJyB8ICdjbGltYXRlJyB8ICdxdWljay1jb250cm9scyc7XG4gIGVudGl0aWVzOiBzdHJpbmdbXTtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGxheW91dD86IHtcbiAgICBncmlkQ29sdW1uPzogc3RyaW5nO1xuICAgIGdyaWRSb3c/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEYXNodmlld1dpZGdldCBleHRlbmRzIERhc2h2aWV3QmFzZUVsZW1lbnQge1xuICBAcHJvcGVydHkoeyB0eXBlOiBPYmplY3QgfSkgd2lkZ2V0Q29uZmlnITogV2lkZ2V0Q29uZmlnO1xuICBAc3RhdGUoKSBwcm90ZWN0ZWQgZW50aXR5U3RhdGVzOiBNYXA8c3RyaW5nLCBhbnk+ID0gbmV3IE1hcCgpO1xuICBAc3RhdGUoKSBwcm90ZWN0ZWQgaXNWaXNpYmxlID0gZmFsc2U7XG4gIEBzdGF0ZSgpIHByb3RlY3RlZCBpc0xvYWRpbmcgPSB0cnVlO1xuICBAc3RhdGUoKSBwcm90ZWN0ZWQgZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgc3RhdGVNYW5hZ2VyPzogU3RhdGVNYW5hZ2VyO1xuICBwcml2YXRlIHN1YnNjcmlwdGlvbk1hbmFnZXI/OiBTdWJzY3JpcHRpb25NYW5hZ2VyO1xuICBwcml2YXRlIGludGVyc2VjdGlvbk9ic2VydmVyPzogSW50ZXJzZWN0aW9uT2JzZXJ2ZXI7XG4gIHByaXZhdGUgc3RhdGVVbnN1YnNjcmliZXJzOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xuICBwcml2YXRlIGtleWJvYXJkSGFuZGxlcnM6IE1hcDxzdHJpbmcsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYW5pbWF0aW9uRnJhbWVJZD86IG51bWJlcjtcblxuICAvKipcbiAgICogR2V0IHRoZSBsaXN0IG9mIGVudGl0eSBJRHMgdGhpcyB3aWRnZXQgd2FudHMgdG8gc3Vic2NyaWJlIHRvLlxuICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzIGZvciBkeW5hbWljIHN1YnNjcmlwdGlvbnMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3Vic2NyaWJlZEVudGl0aWVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHdpZGdldCBjb25maWd1cmF0aW9uIGlzIHNldC5cbiAgICogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdG8gdmFsaWRhdGUgdGhlaXIgc3BlY2lmaWMgY29uZmlnLlxuICAgKi9cbiAgc2V0Q29uZmlnKGNvbmZpZzogV2lkZ2V0Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb25maWd1cmF0aW9uJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGVycm9ycyA9IHRoaXMudmFsaWRhdGVDb25maWcoY29uZmlnKTtcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlndXJhdGlvbiBlcnJvcnM6ICR7ZXJyb3JzLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuXG4gICAgdGhpcy53aWRnZXRDb25maWcgPSBjb25maWc7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgd2lkZ2V0IGNvbmZpZ3VyYXRpb24uXG4gICAqIFJldHVybnMgYXJyYXkgb2YgZXJyb3IgbWVzc2FnZXMsIGVtcHR5IGlmIHZhbGlkLlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlQ29uZmlnKGNvbmZpZzogV2lkZ2V0Q29uZmlnKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghY29uZmlnLnR5cGUpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdXaWRnZXQgdHlwZSBpcyByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmVudGl0aWVzIHx8ICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbnRpdGllcykpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFbnRpdGllcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciB0aGlzIHdpZGdldCB0eXBlLlxuICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0byBwcm92aWRlIHNlbnNpYmxlIGRlZmF1bHRzLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldERlZmF1bHRDb25maWcoKTogUGFydGlhbDxXaWRnZXRDb25maWc+O1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBlbnRpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICogU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdG8gaGFuZGxlIHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgb25TdGF0ZUNoYW5nZWQoXG4gICAgZW50aXR5SWQ6IHN0cmluZyxcbiAgICBuZXdTdGF0ZTogYW55LFxuICAgIG9sZFN0YXRlOiBhbnlcbiAgKTogdm9pZCB7XG4gICAgLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB1cGRhdGVzIHRoZSBsb2NhbCBzdGF0ZSBtYXBcbiAgICBpZiAobmV3U3RhdGUpIHtcbiAgICAgIHRoaXMuZW50aXR5U3RhdGVzLnNldChlbnRpdHlJZCwgbmV3U3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVudGl0eVN0YXRlcy5kZWxldGUoZW50aXR5SWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMaWZlY3ljbGU6IENhbGxlZCB3aGVuIGVsZW1lbnQgaXMgYWRkZWQgdG8gRE9NLlxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLnNldHVwVmlzaWJpbGl0eU9ic2VydmVyKCk7XG4gICAgdGhpcy5zZXR1cEtleWJvYXJkSGFuZGxlcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaWZlY3ljbGU6IENhbGxlZCBhZnRlciBmaXJzdCB1cGRhdGUuXG4gICAqL1xuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICB0aGlzLmluaXRpYWxpemVXaWRnZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaWZlY3ljbGU6IENhbGxlZCB3aGVuIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIERPTS5cbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5jbGVhbnVwKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgd2lkZ2V0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplV2lkZ2V0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcblxuICAgICAgLy8gR2V0IG1hbmFnZXJzIGZyb20gZGFzaGJvYXJkIGNvbnRleHRcbiAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gdGhpcy5nZXRTdGF0ZU1hbmFnZXIoKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlciA9IHRoaXMuZ2V0U3Vic2NyaXB0aW9uTWFuYWdlcigpO1xuXG4gICAgICBpZiAoIXRoaXMuc3RhdGVNYW5hZ2VyIHx8ICF0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGF0ZSBvciBzdWJzY3JpcHRpb24gbWFuYWdlciBub3QgYXZhaWxhYmxlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgaW5pdGlhbCBlbnRpdHkgc3RhdGVzXG4gICAgICBhd2FpdCB0aGlzLmxvYWRJbml0aWFsU3RhdGVzKCk7XG5cbiAgICAgIC8vIFN1YnNjcmliZSB0byBzdGF0ZSBjaGFuZ2VzXG4gICAgICB0aGlzLnN1YnNjcmliZVRvU3RhdGVDaGFuZ2VzKCk7XG5cbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yIGFzIEVycm9yLCAnV2lkZ2V0IGluaXRpYWxpemF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzdGF0ZSBtYW5hZ2VyIGZyb20gZGFzaGJvYXJkIGNvbnRleHQuXG4gICAqIFRoaXMgc2hvdWxkIGJlIHByb3ZpZGVkIGJ5IHRoZSBwYXJlbnQgZGFzaGJvYXJkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRTdGF0ZU1hbmFnZXIoKTogU3RhdGVNYW5hZ2VyIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBUcnkgdG8gZ2V0IGZyb20gcGFyZW50IGRhc2hib2FyZCBlbGVtZW50XG4gICAgY29uc3QgZGFzaGJvYXJkID0gdGhpcy5jbG9zZXN0KCdkYXNodmlldy1kYXNoYm9hcmQnKTtcbiAgICByZXR1cm4gKGRhc2hib2FyZCBhcyBhbnkpPy5zdGF0ZU1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN1YnNjcmlwdGlvbiBtYW5hZ2VyIGZyb20gZGFzaGJvYXJkIGNvbnRleHQuXG4gICAqL1xuICBwcml2YXRlIGdldFN1YnNjcmlwdGlvbk1hbmFnZXIoKTogU3Vic2NyaXB0aW9uTWFuYWdlciB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZGFzaGJvYXJkID0gdGhpcy5jbG9zZXN0KCdkYXNodmlldy1kYXNoYm9hcmQnKTtcbiAgICByZXR1cm4gKGRhc2hib2FyZCBhcyBhbnkpPy5zdWJzY3JpcHRpb25NYW5hZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgaW5pdGlhbCBzdGF0ZXMgZm9yIGFsbCBlbnRpdGllcy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEluaXRpYWxTdGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLnN1YnNjcmliZWRFbnRpdGllcygpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgZW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5oYXNzLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5lbnRpdHlTdGF0ZXMuc2V0KGVudGl0eUlkLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byBzdGF0ZSBjaGFuZ2VzIGZvciBvdXIgZW50aXRpZXMuXG4gICAqL1xuICBwcml2YXRlIHN1YnNjcmliZVRvU3RhdGVDaGFuZ2VzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdGF0ZU1hbmFnZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5zdWJzY3JpYmVkRW50aXRpZXMoKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGVudGl0aWVzKSB7XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuc3RhdGVNYW5hZ2VyLnN1YnNjcmliZVRvRW50aXR5KFxuICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgKGRpZmY6IFN0YXRlRGlmZikgPT4ge1xuICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoXG4gICAgICAgICAgICBkaWZmLmVudGl0eUlkLFxuICAgICAgICAgICAgZGlmZi5uZXdTdGF0ZSxcbiAgICAgICAgICAgIGRpZmYub2xkU3RhdGVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGhpcy5zdGF0ZVVuc3Vic2NyaWJlcnMucHVzaCh1bnN1YnNjcmliZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGludGVyc2VjdGlvbiBvYnNlcnZlciBmb3IgdmlzaWJpbGl0eSB0cmFja2luZy5cbiAgICovXG4gIHByaXZhdGUgc2V0dXBWaXNpYmlsaXR5T2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZShlbnRyeS5pc0ludGVyc2VjdGluZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb290OiBudWxsLFxuICAgICAgICByb290TWFyZ2luOiAnNTBweCcsICAvLyBTdGFydCBsb2FkaW5nIHNsaWdodGx5IGJlZm9yZSB2aXNpYmxlXG4gICAgICAgIHRocmVzaG9sZDogMC4wMSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB2aXNpYmlsaXR5IGNoYW5nZXMuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNWaXNpYmxlID09PSBpc1Zpc2libGUpIHJldHVybjtcblxuICAgIHRoaXMuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xuXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgdGhpcy5vbkJlY2FtZVZpc2libGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbkJlY2FtZUhpZGRlbigpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHZpc2liaWxpdHlcbiAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB3aWRnZXQgYmVjb21lcyB2aXNpYmxlLlxuICAgKiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSBmb3IgY3VzdG9tIGJlaGF2aW9yLlxuICAgKi9cbiAgcHJvdGVjdGVkIG9uQmVjYW1lVmlzaWJsZSgpOiB2b2lkIHtcbiAgICAvLyBEZWZhdWx0OiBubyBhY3Rpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB3aWRnZXQgYmVjb21lcyBoaWRkZW4uXG4gICAqIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlIGZvciBjdXN0b20gYmVoYXZpb3IuXG4gICAqL1xuICBwcm90ZWN0ZWQgb25CZWNhbWVIaWRkZW4oKTogdm9pZCB7XG4gICAgLy8gRGVmYXVsdDogbm8gYWN0aW9uXG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gY3VycmVudCB2aXNpYmlsaXR5LlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyKSByZXR1cm47XG5cbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMuc3Vic2NyaWJlZEVudGl0aWVzKCk7XG4gICAgXG4gICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICAvLyBXaWRnZXQgaXMgdmlzaWJsZSwgZW5zdXJlIHdlJ3JlIHN1YnNjcmliZWRcbiAgICAgIGNvbnN0IHZpc2libGVFbnRpdGllcyA9IHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5nZXRWaXNpYmxlRW50aXRpZXMoKTtcbiAgICAgIGNvbnN0IGFsbFZpc2libGUgPSBuZXcgU2V0KFsuLi52aXNpYmxlRW50aXRpZXMsIC4uLmVudGl0aWVzXSk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIudXBkYXRlVmlzaWJsZUVudGl0aWVzKEFycmF5LmZyb20oYWxsVmlzaWJsZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaWRnZXQgaXMgaGlkZGVuLCB3ZSBjb3VsZCB1bnN1YnNjcmliZVxuICAgICAgLy8gQnV0IHRoaXMgaXMgaGFuZGxlZCBnbG9iYWxseSBieSB0aGUgZGFzaGJvYXJkXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHJlc291cmNlcy5cbiAgICovXG4gIHByaXZhdGUgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBVbnN1YnNjcmliZSBmcm9tIHN0YXRlIGNoYW5nZXNcbiAgICBmb3IgKGNvbnN0IHVuc3Vic2NyaWJlIG9mIHRoaXMuc3RhdGVVbnN1YnNjcmliZXJzKSB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlVW5zdWJzY3JpYmVycyA9IFtdO1xuXG4gICAgLy8gQ2xlYW4gdXAgaW50ZXJzZWN0aW9uIG9ic2VydmVyXG4gICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCBrZXlib2FyZCBoYW5kbGVyc1xuICAgIHRoaXMucmVtb3ZlS2V5Ym9hcmRIYW5kbGVycygpO1xuXG4gICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGFuaW1hdGlvbiBmcmFtZXNcbiAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZUlkKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lSWQpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHN0YXRlXG4gICAgdGhpcy5lbnRpdHlTdGF0ZXMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gY2FsbCBIb21lIEFzc2lzdGFudCBzZXJ2aWNlLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIGNhbGxTZXJ2aWNlKFxuICAgIGRvbWFpbjogc3RyaW5nLFxuICAgIHNlcnZpY2U6IHN0cmluZyxcbiAgICBkYXRhPzogYW55XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmhhc3MuY2FsbFNlcnZpY2UoZG9tYWluLCBzZXJ2aWNlLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciBhcyBFcnJvciwgYFNlcnZpY2UgY2FsbCAke2RvbWFpbn0uJHtzZXJ2aWNlfWApO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byB0b2dnbGUgYW4gZW50aXR5LlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHRvZ2dsZUVudGl0eShlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgICBhd2FpdCB0aGlzLmNhbGxTZXJ2aWNlKGRvbWFpbiwgJ3RvZ2dsZScsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gdHVybiBvbiBhbiBlbnRpdHkuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgdHVybk9uKGVudGl0eUlkOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgIGF3YWl0IHRoaXMuY2FsbFNlcnZpY2UoZG9tYWluLCAndHVybl9vbicsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCwgLi4uZGF0YSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gdHVybiBvZmYgYW4gZW50aXR5LlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHR1cm5PZmYoZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgYXdhaXQgdGhpcy5jYWxsU2VydmljZShkb21haW4sICd0dXJuX29mZicsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGhhcHRpYyBmZWVkYmFjayB3aXRoIHRoZSBzcGVjaWZpZWQgaW50ZW5zaXR5LlxuICAgKi9cbiAgcHJvdGVjdGVkIHRyaWdnZXJIYXB0aWNGZWVkYmFjayhpbnRlbnNpdHk6ICdsaWdodCcgfCAnbWVkaXVtJyB8ICdoZWF2eScgfCAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ3NlbGVjdGlvbicpOiB2b2lkIHtcbiAgICBIYXB0aWNGZWVkYmFja1tpbnRlbnNpdHldKCk7XG4gIH1cblxuICAvKipcbiAgICogQW5pbWF0ZSBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBhbmltYXRpb24uXG4gICAqL1xuICBwcm90ZWN0ZWQgYW5pbWF0ZUVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGFuaW1hdGlvbjogc3RyaW5nLCBkdXJhdGlvbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiB8fCBBTklNQVRJT05fRFVSQVRJT04ubm9ybWFsO1xuICAgICAgXG4gICAgICBlbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbn0gJHthbmltYXRpb25EdXJhdGlvbn0gJHtFQVNJTkcuc3RhbmRhcmR9YDtcbiAgICAgIFxuICAgICAgY29uc3QgaGFuZGxlQW5pbWF0aW9uRW5kID0gKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9ICcnO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGhhbmRsZUFuaW1hdGlvbkVuZCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgaGFuZGxlQW5pbWF0aW9uRW5kKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyBtYW5hZ2VtZW50IGhlbHBlci5cbiAgICovXG4gIHByb3RlY3RlZCBmb2N1c0VsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBGb2N1c09wdGlvbnMpOiB2b2lkIHtcbiAgICBlbGVtZW50LmZvY3VzKG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCBrZXlib2FyZCBldmVudCBoYW5kbGVycyBmb3IgYWNjZXNzaWJpbGl0eS5cbiAgICovXG4gIHByaXZhdGUgc2V0dXBLZXlib2FyZEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIC8vIERlZmF1bHQga2V5Ym9hcmQgaGFuZGxlcnNcbiAgICB0aGlzLmFkZEtleWJvYXJkSGFuZGxlcignRXNjYXBlJywgdGhpcy5oYW5kbGVFc2NhcGVLZXkuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5hZGRLZXlib2FyZEhhbmRsZXIoJ1RhYicsIHRoaXMuaGFuZGxlVGFiS2V5LmJpbmQodGhpcykpO1xuICAgIFxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUga2V5Ym9hcmQgZXZlbnQgaGFuZGxlcnMuXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUtleWJvYXJkSGFuZGxlcnMoKTogdm9pZCB7XG4gICAgdGhpcy5rZXlib2FyZEhhbmRsZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlkb3duLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGtleWJvYXJkIGV2ZW50IGhhbmRsZXIuXG4gICAqL1xuICBwcm90ZWN0ZWQgYWRkS2V5Ym9hcmRIYW5kbGVyKGtleTogc3RyaW5nLCBoYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmtleWJvYXJkSGFuZGxlcnMuc2V0KGtleSwgaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGtleWJvYXJkIGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmtleWJvYXJkSGFuZGxlcnMuZ2V0KGV2ZW50LmtleSk7XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgIGhhbmRsZXIoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgRXNjYXBlIGtleSAoZGVmYXVsdDogYmx1ciBhY3RpdmUgZWxlbWVudCkuXG4gICAqL1xuICBwcm90ZWN0ZWQgaGFuZGxlRXNjYXBlS2V5KF9ldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3Q/LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgVGFiIGtleSBmb3IgZm9jdXMgbWFuYWdlbWVudC5cbiAgICovXG4gIHByb3RlY3RlZCBoYW5kbGVUYWJLZXkoX2V2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvciAtIGNvdWxkIGJlIG92ZXJyaWRkZW4gYnkgc3ViY2xhc3Nlc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZm9jdXNhYmxlIGVsZW1lbnRzIHdpdGhpbiB0aGUgd2lkZ2V0LlxuICAgKi9cbiAgcHJvdGVjdGVkIGdldEZvY3VzYWJsZUVsZW1lbnRzKCk6IEhUTUxFbGVtZW50W10ge1xuICAgIGNvbnN0IGZvY3VzYWJsZVNlbGVjdG9ycyA9IFtcbiAgICAgICdidXR0b246bm90KFtkaXNhYmxlZF0pJyxcbiAgICAgICdpbnB1dDpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgJ3NlbGVjdDpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgJ3RleHRhcmVhOm5vdChbZGlzYWJsZWRdKScsXG4gICAgICAnYVtocmVmXScsXG4gICAgICAnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJyxcbiAgICAgICdoYS1pY29uLWJ1dHRvbjpub3QoW2Rpc2FibGVkXSknLFxuICAgICAgJ213Yy1idXR0b246bm90KFtkaXNhYmxlZF0pJyxcbiAgICAgICdoYS1zd2l0Y2g6bm90KFtkaXNhYmxlZF0pJ1xuICAgIF0uam9pbignLCAnKTtcblxuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yQWxsKGZvY3VzYWJsZVNlbGVjdG9ycykgfHwgW107XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudHMpIGFzIEhUTUxFbGVtZW50W107XG4gIH1cblxuICAvKipcbiAgICogQmFzZSBzdHlsZXMgZm9yIGFsbCB3aWRnZXRzLlxuICAgKi9cbiAgc3RhdGljIHN0eWxlcyA9IGNzc2BcbiAgICA6aG9zdCB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG5cbiAgICAud2lkZ2V0LWNvbnRhaW5lciB7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG5cbiAgICAud2lkZ2V0LWxvYWRpbmcge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LXRleHQtY29sb3IpO1xuICAgIH1cblxuICAgIC53aWRnZXQtZXJyb3Ige1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGNvbG9yOiB2YXIoLS1lcnJvci1jb2xvciwgI2Y0NDMzNik7XG4gICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgYDtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/widget-base.ts\n\n}");

/***/ }),

/***/ "./src/dashboard/dashview-dashboard.ts":
/*!*********************************************!*\
  !*** ./src/dashboard/dashview-dashboard.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashviewDashboard: () => (/* binding */ DashviewDashboard)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _core_base_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/core/base-element */ \"./src/core/base-element.ts\");\n/* harmony import */ var _core_websocket_connection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/core/websocket-connection */ \"./src/core/websocket-connection.ts\");\n/* harmony import */ var _core_state_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/core/state-manager */ \"./src/core/state-manager.ts\");\n/* harmony import */ var _core_subscription_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/core/subscription-manager */ \"./src/core/subscription-manager.ts\");\n/* harmony import */ var _layouts_layout_engine__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/layouts/layout-engine */ \"./src/layouts/layout-engine.ts\");\n/* harmony import */ var _layouts_base_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/layouts/base-layout */ \"./src/layouts/base-layout.ts\");\n/* harmony import */ var _styles_theme__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/styles/theme */ \"./src/styles/theme.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/utils/logger */ \"./src/utils/logger.ts\");\n/* harmony import */ var _widgets_room_widget__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../widgets/room-widget */ \"./src/widgets/room-widget.ts\");\n/* harmony import */ var _widgets_device_group_widget__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../widgets/device-group-widget */ \"./src/widgets/device-group-widget.ts\");\n/* harmony import */ var _widgets_climate_widget__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../widgets/climate-widget */ \"./src/widgets/climate-widget.ts\");\n/* harmony import */ var _widgets_quick_controls_widget__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../widgets/quick-controls-widget */ \"./src/widgets/quick-controls-widget.ts\");\nvar _a, _b, _c, _d, _e;\n\n\n\n\n\n\n\n\n\n\n\n// Import widgets\n\n\n\n\nlet DashviewDashboard = class DashviewDashboard extends _core_base_element__WEBPACK_IMPORTED_MODULE_2__.DashviewBaseElement {\n    constructor() {\n        super(...arguments);\n        // Private state\n        this._stateManager = null;\n        this._subscriptionManager = null;\n        this.loading = true;\n        this.error = null;\n        this.homeInfo = null;\n        this.wsConnection = null;\n        this.layoutEngine = null;\n        this.currentLayout = null;\n        this.widgets = [];\n        this.currentBreakpoint = 'desktop';\n        this.areas = new Map();\n    }\n    // Public getters for child components\n    get stateManager() {\n        return this._stateManager;\n    }\n    get subscriptionManager() {\n        return this._subscriptionManager;\n    }\n    async firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        await this.initializeDashboard();\n        this.setupResizeObserver();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.cleanup();\n    }\n    async initializeDashboard() {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.info('Initializing Dashview dashboard');\n            if (!this.hass) {\n                throw new Error('Home Assistant connection not available');\n            }\n            // Initialize core services\n            this.wsConnection = new _core_websocket_connection__WEBPACK_IMPORTED_MODULE_3__.WebSocketConnection(this.hass);\n            this._stateManager = new _core_state_manager__WEBPACK_IMPORTED_MODULE_4__.StateManager();\n            this._subscriptionManager = new _core_subscription_manager__WEBPACK_IMPORTED_MODULE_5__.SubscriptionManager(this.wsConnection, this._stateManager);\n            this.layoutEngine = new _layouts_layout_engine__WEBPACK_IMPORTED_MODULE_6__.LayoutEngine();\n            // Load home information\n            await this.loadHomeInfo();\n            // Analyze home and set up dashboard\n            await this.analyzeHome();\n            this.selectOptimalLayout();\n            await this.initializeWidgets();\n            // Start state management\n            this._stateManager.initializeFromHass(this.hass);\n            await this._subscriptionManager.startListening();\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.info('Dashboard initialized successfully');\n            this.loading = false;\n        }\n        catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.error('Failed to initialize dashboard:', error);\n            this.error = error instanceof Error ? error.message : 'Failed to initialize dashboard';\n            this.loading = false;\n        }\n    }\n    async loadHomeInfo() {\n        if (!this.wsConnection)\n            return;\n        try {\n            this.loading = true;\n            this.error = null;\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.debug('Loading home information');\n            this.homeInfo = await this.wsConnection.getHomeInfo();\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.info('Home info loaded:', this.homeInfo);\n            this.loading = false;\n        }\n        catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.error('Failed to load home info:', error);\n            this.error = 'Failed to load home information';\n            this.loading = false;\n        }\n    }\n    render() {\n        if (this.loading) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"dashview-container\">\n          <div class=\"dashview-loading\">\n            <div class=\"loading-spinner\"></div>\n            <p>Loading your dashboard...</p>\n          </div>\n        </div>\n      `;\n        }\n        if (this.error) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"dashview-container\">\n          <div class=\"dashview-error\">\n            <h2>Error</h2>\n            <p>${this.error}</p>\n            <button @click=${() => this.initializeDashboard()}>Retry</button>\n          </div>\n        </div>\n      `;\n        }\n        // If we have widgets, show the dashboard view\n        if (this.widgets.length > 0) {\n            return this.renderDashboard();\n        }\n        // Otherwise show the welcome/info view\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"dashview-container\">\n        <div class=\"dashview-content\">\n          <div class=\"welcome-header\">\n            <h1 class=\"welcome-title\">Welcome to Dashview V2</h1>\n            <p class=\"welcome-subtitle\">\n              Your intelligent home dashboard for ${this.homeInfo?.entityCount || 0} entities\n            </p>\n          </div>\n\n          ${this.homeInfo ? this.renderHomeInfo() : this.renderNoData()}\n        </div>\n      </div>\n    `;\n    }\n    renderHomeInfo() {\n        if (!this.homeInfo)\n            return null;\n        const complexityPercentage = Math.min(100, this.homeInfo.complexityScore * 10);\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"info-grid\">\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.roomCount}</p>\n          <p class=\"info-label\">Rooms</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.entityCount}</p>\n          <p class=\"info-label\">Entities</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.areas.length}</p>\n          <p class=\"info-label\">Areas</p>\n        </div>\n\n        <div class=\"info-card\">\n          <p class=\"info-value\">${this.homeInfo.complexityScore}/10</p>\n          <p class=\"info-label\">Complexity Score</p>\n          <div class=\"complexity-meter\">\n            <div class=\"complexity-fill\" style=\"width: ${complexityPercentage}%\"></div>\n          </div>\n        </div>\n      </div>\n\n      ${this.homeInfo.areas.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"dashview-card\">\n          <h3>Detected Areas</h3>\n          <div class=\"areas-list\">\n            ${this.homeInfo.areas.map(area => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n              <span class=\"area-tag\">${area}</span>\n            `)}\n          </div>\n        </div>\n      ` : ''}\n    `;\n    }\n    renderNoData() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"dashview-card\">\n        <p>No home information available. Make sure your Home Assistant is configured with areas and entities.</p>\n      </div>\n    `;\n    }\n    /**\n     * Analyze home complexity and areas.\n     */\n    async analyzeHome() {\n        if (!this.homeInfo || !this.wsConnection)\n            return;\n        try {\n            // Get detailed area information\n            const areaData = await this.callWebSocket('get_area_entities', {});\n            // Convert to AreaInfo format\n            for (const [areaId, data] of Object.entries(areaData)) {\n                this.areas.set(areaId, {\n                    areaId,\n                    name: data.name,\n                    entities: data.entities || [],\n                    entityCount: data.entity_count || 0,\n                    deviceCount: data.device_count || 0,\n                });\n            }\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.info(`Analyzed ${this.areas.size} areas`);\n        }\n        catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.error('Failed to analyze home:', error);\n        }\n    }\n    /**\n     * Select optimal layout based on complexity score and area count.\n     */\n    selectOptimalLayout() {\n        if (!this.homeInfo || !this.layoutEngine)\n            return;\n        const complexityScore = this.homeInfo.complexityScore;\n        const areaCount = this.areas.size;\n        this.currentLayout = this.layoutEngine.selectLayout(complexityScore, areaCount);\n        // Update breakpoint\n        const containerWidth = this.offsetWidth || window.innerWidth;\n        this.currentBreakpoint = this.currentLayout.getBreakpoint(containerWidth);\n    }\n    /**\n     * Initialize widgets based on areas and layout.\n     */\n    async initializeWidgets() {\n        if (!this.layoutEngine || !this.currentLayout)\n            return;\n        // Organize widgets from areas\n        const areaInfos = Array.from(this.areas.values());\n        this.widgets = this.layoutEngine.organizeWidgets(areaInfos);\n        // Handle overflow\n        const { visible } = this.layoutEngine.handleOverflow(this.widgets, this.currentLayout, this.currentBreakpoint);\n        this.widgets = visible;\n        _utils_logger__WEBPACK_IMPORTED_MODULE_9__.logger.info(`Initialized ${this.widgets.length} widgets`);\n        // Update subscriptions for visible entities\n        await this.updateVisibleSubscriptions();\n    }\n    /**\n     * Update subscriptions based on visible widgets.\n     */\n    async updateVisibleSubscriptions() {\n        if (!this._subscriptionManager)\n            return;\n        const visibleEntities = new Set();\n        for (const widget of this.widgets) {\n            for (const entity of widget.entities) {\n                visibleEntities.add(entity);\n            }\n        }\n        this._subscriptionManager.updateVisibleEntities(Array.from(visibleEntities));\n    }\n    /**\n     * Set up resize observer for responsive behavior.\n     */\n    setupResizeObserver() {\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === this) {\n                    this.handleResize(entry.contentRect.width);\n                }\n            }\n        });\n        resizeObserver.observe(this);\n    }\n    /**\n     * Handle container resize.\n     */\n    handleResize(width) {\n        if (!this.currentLayout)\n            return;\n        const breakpointChanged = this.currentLayout.updateContainerWidth(width);\n        if (breakpointChanged) {\n            this.currentBreakpoint = this.currentLayout.getBreakpoint();\n            this.requestUpdate();\n        }\n    }\n    /**\n     * Render the dashboard grid with widgets.\n     */\n    renderDashboard() {\n        if (!this.currentLayout || this.widgets.length === 0) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"dashboard-loading\">\n          <p>Setting up your dashboard...</p>\n        </div>\n      `;\n        }\n        const gridCSS = this.currentLayout.generateGridCSS(this.currentBreakpoint);\n        const positions = this.layoutEngine.calculatePositions(this.widgets, this.areas.size);\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"dashboard-grid\" style=\"${gridCSS}\">\n        ${positions.map(pos => {\n            const widget = this.widgets.find(w => this.getWidgetId(w) === pos.widgetId);\n            if (!widget)\n                return '';\n            return this.renderWidget(widget, pos);\n        })}\n      </div>\n    `;\n    }\n    /**\n     * Render a single widget.\n     */\n    renderWidget(widget, position) {\n        const style = `\n      grid-area: ${position.gridArea};\n      ${position.gridColumn ? `grid-column: ${position.gridColumn};` : ''}\n      ${position.gridRow ? `grid-row: ${position.gridRow};` : ''}\n    `;\n        switch (widget.type) {\n            case 'room':\n                const area = Array.from(this.areas.values()).find(a => a.entities.some(e => widget.entities.includes(e)));\n                return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <div class=\"widget-container\" style=\"${style}\">\n            <dashview-room-widget\n              .hass=${this.hass}\n              .widgetConfig=${widget}\n              .areaId=${area?.areaId}\n              .areaName=${area?.name || widget.title}\n            ></dashview-room-widget>\n          </div>\n        `;\n            // TODO: Add other widget types when implemented\n            default:\n                return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <div class=\"widget-container\" style=\"${style}\">\n            <div class=\"dashview-card\">\n              <p>Widget type '${widget.type}' not implemented yet</p>\n            </div>\n          </div>\n        `;\n        }\n    }\n    /**\n     * Generate widget ID.\n     */\n    getWidgetId(widget) {\n        const firstEntity = widget.entities[0] || 'unknown';\n        return `${widget.type}-${firstEntity.replace(/\\./g, '_')}`;\n    }\n    /**\n     * Clean up resources.\n     */\n    cleanup() {\n        if (this._subscriptionManager) {\n            this._subscriptionManager.clear();\n        }\n        if (this._stateManager) {\n            this._stateManager.clear();\n        }\n    }\n};\nDashviewDashboard.styles = [\n    _styles_theme__WEBPACK_IMPORTED_MODULE_8__.dashviewTheme,\n    _styles_theme__WEBPACK_IMPORTED_MODULE_8__.dashviewStyles,\n    (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n      :host {\n        display: block;\n        height: 100%;\n        width: 100%;\n      }\n\n      .welcome-header {\n        text-align: center;\n        margin-bottom: var(--dashview-spacing-xl);\n      }\n\n      .welcome-title {\n        font-size: 2.5rem;\n        font-weight: 300;\n        color: var(--dashview-primary-text-color);\n        margin: 0 0 var(--dashview-spacing-sm);\n      }\n\n      .welcome-subtitle {\n        font-size: 1.2rem;\n        color: var(--dashview-secondary-text-color);\n        margin: 0;\n      }\n\n      .info-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: var(--dashview-spacing-md);\n        margin-top: var(--dashview-spacing-xl);\n      }\n\n      .info-card {\n        background: var(--dashview-card-background);\n        border-radius: var(--dashview-border-radius);\n        padding: var(--dashview-spacing-lg);\n        text-align: center;\n        box-shadow: var(--dashview-box-shadow);\n        transition: transform 0.2s ease;\n      }\n\n      .info-card:hover {\n        transform: translateY(-2px);\n      }\n\n      .info-value {\n        font-size: 3rem;\n        font-weight: 300;\n        color: var(--primary-color);\n        margin: 0;\n      }\n\n      .info-label {\n        font-size: 1rem;\n        color: var(--dashview-secondary-text-color);\n        margin: var(--dashview-spacing-sm) 0 0;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .complexity-meter {\n        width: 100%;\n        height: 20px;\n        background: var(--divider-color);\n        border-radius: 10px;\n        margin-top: var(--dashview-spacing-md);\n        overflow: hidden;\n      }\n\n      .complexity-fill {\n        height: 100%;\n        background: linear-gradient(90deg, \n          var(--success-color) 0%, \n          var(--warning-color) 50%, \n          var(--error-color) 100%\n        );\n        transition: width 0.5s ease;\n      }\n\n      .areas-list {\n        display: flex;\n        flex-wrap: wrap;\n        gap: var(--dashview-spacing-sm);\n        margin-top: var(--dashview-spacing-md);\n      }\n\n      .area-tag {\n        background: var(--primary-color);\n        color: var(--text-primary-color, white);\n        padding: var(--dashview-spacing-xs) var(--dashview-spacing-sm);\n        border-radius: var(--dashview-border-radius);\n        font-size: 0.9rem;\n      }\n\n      .loading-spinner {\n        animation: spin 1s linear infinite;\n        width: 48px;\n        height: 48px;\n        border: 3px solid var(--divider-color);\n        border-top-color: var(--primary-color);\n        border-radius: 50%;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Dashboard grid layout */\n      .dashboard-grid {\n        display: grid;\n        height: 100%;\n        width: 100%;\n        overflow: auto;\n      }\n\n      .widget-container {\n        position: relative;\n        min-height: 200px;\n      }\n\n      /* Loading state for dashboard mode */\n      .dashboard-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        flex-direction: column;\n        gap: var(--dashview-spacing-md);\n      }\n\n      .dashboard-loading p {\n        color: var(--dashview-secondary-text-color);\n      }\n    `,\n];\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"loading\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"error\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"homeInfo\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"wsConnection\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"layoutEngine\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Object)\n], DashviewDashboard.prototype, \"currentLayout\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", Array)\n], DashviewDashboard.prototype, \"widgets\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", typeof (_d = typeof _layouts_base_layout__WEBPACK_IMPORTED_MODULE_7__.Breakpoint !== \"undefined\" && _layouts_base_layout__WEBPACK_IMPORTED_MODULE_7__.Breakpoint) === \"function\" ? _d : Object)\n], DashviewDashboard.prototype, \"currentBreakpoint\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__metadata)(\"design:type\", typeof (_e = typeof Map !== \"undefined\" && Map) === \"function\" ? _e : Object)\n], DashviewDashboard.prototype, \"areas\", void 0);\nDashviewDashboard = (0,tslib__WEBPACK_IMPORTED_MODULE_14__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.customElement)('dashview-dashboard')\n], DashviewDashboard);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQW9CLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDcEMsQ0FBQztRQUVELElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDN0IsQ0FBQztJQUNILENBQUM7O0FBeGZNLHdCQUFNLEdBQUc7SUFDZCx3REFBYTtJQUNiLHlEQUFjO0lBQ2Qsd0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FxSUY7Q0FDRixDQUFDO0FBbkplO0lBQWhCLHdEQUFLLEVBQUU7O2tEQUF3QjtBQUNmO0lBQWhCLHdEQUFLLEVBQUU7O2dEQUFxQztBQUM1QjtJQUFoQix3REFBSyxFQUFFOzttREFBMEM7QUFDakM7SUFBaEIsd0RBQUssRUFBRTs7dURBQXlEO0FBQ2hEO0lBQWhCLHdEQUFLLEVBQUU7O3VEQUFrRDtBQUN6QztJQUFoQix3REFBSyxFQUFFOzt3REFBaUQ7QUFDeEM7SUFBaEIsd0RBQUssRUFBRTs7a0RBQXNDO0FBQzdCO0lBQWhCLHdEQUFLLEVBQUU7MEZBQTRCLDREQUFVLG9CQUFWLDREQUFVOzREQUFhO0FBQzFDO0lBQWhCLHdEQUFLLEVBQUU7MEZBQWdCLEdBQUcsb0JBQUgsR0FBRztnREFBK0I7QUFyQi9DLGlCQUFpQjtJQUQ3QixnRUFBYSxDQUFDLG9CQUFvQixDQUFDO0dBQ3ZCLGlCQUFpQixDQWdoQjdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9kYXNoYm9hcmQvZGFzaHZpZXctZGFzaGJvYXJkLnRzP2JiNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvcGVydHlWYWx1ZXMsIGNzcywgaHRtbCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgc3RhdGUgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBEYXNodmlld0Jhc2VFbGVtZW50IH0gZnJvbSAnQC9jb3JlL2Jhc2UtZWxlbWVudCc7XG5pbXBvcnQgeyBXZWJTb2NrZXRDb25uZWN0aW9uIH0gZnJvbSAnQC9jb3JlL3dlYnNvY2tldC1jb25uZWN0aW9uJztcbmltcG9ydCB7IFN0YXRlTWFuYWdlciB9IGZyb20gJ0AvY29yZS9zdGF0ZS1tYW5hZ2VyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk1hbmFnZXIgfSBmcm9tICdAL2NvcmUvc3Vic2NyaXB0aW9uLW1hbmFnZXInO1xuaW1wb3J0IHsgTGF5b3V0RW5naW5lLCBBcmVhSW5mbyB9IGZyb20gJ0AvbGF5b3V0cy9sYXlvdXQtZW5naW5lJztcbmltcG9ydCB7IEJhc2VMYXlvdXQsIEJyZWFrcG9pbnQgfSBmcm9tICdAL2xheW91dHMvYmFzZS1sYXlvdXQnO1xuaW1wb3J0IHsgV2lkZ2V0Q29uZmlnIH0gZnJvbSAnQC9jb3JlL3dpZGdldC1iYXNlJztcbmltcG9ydCB7IGRhc2h2aWV3U3R5bGVzLCBkYXNodmlld1RoZW1lIH0gZnJvbSAnQC9zdHlsZXMvdGhlbWUnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC91dGlscy9sb2dnZXInO1xuaW1wb3J0IHR5cGUgeyBIb21lSW5mbyB9IGZyb20gJ0AvdHlwZXMnO1xuXG4vLyBJbXBvcnQgd2lkZ2V0c1xuaW1wb3J0ICcuLi93aWRnZXRzL3Jvb20td2lkZ2V0JztcbmltcG9ydCAnLi4vd2lkZ2V0cy9kZXZpY2UtZ3JvdXAtd2lkZ2V0JztcbmltcG9ydCAnLi4vd2lkZ2V0cy9jbGltYXRlLXdpZGdldCc7XG5pbXBvcnQgJy4uL3dpZGdldHMvcXVpY2stY29udHJvbHMtd2lkZ2V0JztcblxuQGN1c3RvbUVsZW1lbnQoJ2Rhc2h2aWV3LWRhc2hib2FyZCcpXG5leHBvcnQgY2xhc3MgRGFzaHZpZXdEYXNoYm9hcmQgZXh0ZW5kcyBEYXNodmlld0Jhc2VFbGVtZW50IHtcbiAgLy8gUHVibGljIGdldHRlcnMgZm9yIGNoaWxkIGNvbXBvbmVudHNcbiAgZ2V0IHN0YXRlTWFuYWdlcigpOiBTdGF0ZU1hbmFnZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGVNYW5hZ2VyO1xuICB9XG5cbiAgZ2V0IHN1YnNjcmlwdGlvbk1hbmFnZXIoKTogU3Vic2NyaXB0aW9uTWFuYWdlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25NYW5hZ2VyO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBzdGF0ZVxuICBwcml2YXRlIF9zdGF0ZU1hbmFnZXI6IFN0YXRlTWFuYWdlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9zdWJzY3JpcHRpb25NYW5hZ2VyOiBTdWJzY3JpcHRpb25NYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG4gIEBzdGF0ZSgpIHByaXZhdGUgbG9hZGluZyA9IHRydWU7XG4gIEBzdGF0ZSgpIHByaXZhdGUgZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIGhvbWVJbmZvOiBIb21lSW5mbyB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIHdzQ29ubmVjdGlvbjogV2ViU29ja2V0Q29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIGxheW91dEVuZ2luZTogTGF5b3V0RW5naW5lIHwgbnVsbCA9IG51bGw7XG4gIEBzdGF0ZSgpIHByaXZhdGUgY3VycmVudExheW91dDogQmFzZUxheW91dCB8IG51bGwgPSBudWxsO1xuICBAc3RhdGUoKSBwcml2YXRlIHdpZGdldHM6IFdpZGdldENvbmZpZ1tdID0gW107XG4gIEBzdGF0ZSgpIHByaXZhdGUgY3VycmVudEJyZWFrcG9pbnQ6IEJyZWFrcG9pbnQgPSAnZGVza3RvcCc7XG4gIEBzdGF0ZSgpIHByaXZhdGUgYXJlYXM6IE1hcDxzdHJpbmcsIEFyZWFJbmZvPiA9IG5ldyBNYXAoKTtcblxuICBzdGF0aWMgc3R5bGVzID0gW1xuICAgIGRhc2h2aWV3VGhlbWUsXG4gICAgZGFzaHZpZXdTdHlsZXMsXG4gICAgY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLndlbGNvbWUtaGVhZGVyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLXhsKTtcbiAgICAgIH1cblxuICAgICAgLndlbGNvbWUtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDIuNXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhc2h2aWV3LXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogMCAwIHZhcigtLWRhc2h2aWV3LXNwYWNpbmctc20pO1xuICAgICAgfVxuXG4gICAgICAud2VsY29tZS1zdWJ0aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgICAgbWFyZ2luLXRvcDogdmFyKC0tZGFzaHZpZXctc3BhY2luZy14bCk7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWNhcmQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kYXNodmlldy1jYXJkLWJhY2tncm91bmQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1kYXNodmlldy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1sZyk7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgYm94LXNoYWRvdzogdmFyKC0tZGFzaHZpZXctYm94LXNoYWRvdyk7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLWNhcmQ6aG92ZXIge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAzcmVtO1xuICAgICAgICBmb250LXdlaWdodDogMzAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLmluZm8tbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1kYXNodmlldy1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG1hcmdpbjogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1zbSkgMCAwO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgICAgfVxuXG4gICAgICAuY29tcGxleGl0eS1tZXRlciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICBtYXJnaW4tdG9wOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmNvbXBsZXhpdHktZmlsbCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCBcbiAgICAgICAgICB2YXIoLS1zdWNjZXNzLWNvbG9yKSAwJSwgXG4gICAgICAgICAgdmFyKC0td2FybmluZy1jb2xvcikgNTAlLCBcbiAgICAgICAgICB2YXIoLS1lcnJvci1jb2xvcikgMTAwJVxuICAgICAgICApO1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5hcmVhcy1saXN0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IHZhcigtLWRhc2h2aWV3LXNwYWNpbmctc20pO1xuICAgICAgICBtYXJnaW4tdG9wOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgIH1cblxuICAgICAgLmFyZWEtdGFnIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIHdoaXRlKTtcbiAgICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy14cykgdmFyKC0tZGFzaHZpZXctc3BhY2luZy1zbSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWRhc2h2aWV3LWJvcmRlci1yYWRpdXMpO1xuICAgICAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICAgIH1cblxuICAgICAgLmxvYWRpbmctc3Bpbm5lciB7XG4gICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIHdpZHRoOiA0OHB4O1xuICAgICAgICBoZWlnaHQ6IDQ4cHg7XG4gICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgIH1cblxuICAgICAgLyogRGFzaGJvYXJkIGdyaWQgbGF5b3V0ICovXG4gICAgICAuZGFzaGJvYXJkLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cblxuICAgICAgLndpZGdldC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgfVxuXG4gICAgICAvKiBMb2FkaW5nIHN0YXRlIGZvciBkYXNoYm9hcmQgbW9kZSAqL1xuICAgICAgLmRhc2hib2FyZC1sb2FkaW5nIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLW1kKTtcbiAgICAgIH1cblxuICAgICAgLmRhc2hib2FyZC1sb2FkaW5nIHAge1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuICAgIGAsXG4gIF07XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgc3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRGFzaGJvYXJkKCk7XG4gICAgdGhpcy5zZXR1cFJlc2l6ZU9ic2VydmVyKCk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuY2xlYW51cCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRGFzaGJvYXJkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIERhc2h2aWV3IGRhc2hib2FyZCcpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuaGFzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hvbWUgQXNzaXN0YW50IGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBJbml0aWFsaXplIGNvcmUgc2VydmljZXNcbiAgICAgIHRoaXMud3NDb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldENvbm5lY3Rpb24odGhpcy5oYXNzKTtcbiAgICAgIHRoaXMuX3N0YXRlTWFuYWdlciA9IG5ldyBTdGF0ZU1hbmFnZXIoKTtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcih0aGlzLndzQ29ubmVjdGlvbiwgdGhpcy5fc3RhdGVNYW5hZ2VyKTtcbiAgICAgIHRoaXMubGF5b3V0RW5naW5lID0gbmV3IExheW91dEVuZ2luZSgpO1xuXG4gICAgICAvLyBMb2FkIGhvbWUgaW5mb3JtYXRpb25cbiAgICAgIGF3YWl0IHRoaXMubG9hZEhvbWVJbmZvKCk7XG4gICAgICBcbiAgICAgIC8vIEFuYWx5emUgaG9tZSBhbmQgc2V0IHVwIGRhc2hib2FyZFxuICAgICAgYXdhaXQgdGhpcy5hbmFseXplSG9tZSgpO1xuICAgICAgdGhpcy5zZWxlY3RPcHRpbWFsTGF5b3V0KCk7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVXaWRnZXRzKCk7XG5cbiAgICAgIC8vIFN0YXJ0IHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgIHRoaXMuX3N0YXRlTWFuYWdlci5pbml0aWFsaXplRnJvbUhhc3ModGhpcy5oYXNzKTtcbiAgICAgIGF3YWl0IHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIuc3RhcnRMaXN0ZW5pbmcoKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0Rhc2hib2FyZCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGRhc2hib2FyZDonLCBlcnJvcik7XG4gICAgICB0aGlzLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgZGFzaGJvYXJkJztcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEhvbWVJbmZvKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy53c0Nvbm5lY3Rpb24pIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICBcbiAgICAgIGxvZ2dlci5kZWJ1ZygnTG9hZGluZyBob21lIGluZm9ybWF0aW9uJyk7XG4gICAgICB0aGlzLmhvbWVJbmZvID0gYXdhaXQgdGhpcy53c0Nvbm5lY3Rpb24uZ2V0SG9tZUluZm8oKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0hvbWUgaW5mbyBsb2FkZWQ6JywgdGhpcy5ob21lSW5mbyk7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBob21lIGluZm86JywgZXJyb3IpO1xuICAgICAgdGhpcy5lcnJvciA9ICdGYWlsZWQgdG8gbG9hZCBob21lIGluZm9ybWF0aW9uJztcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZykge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctbG9hZGluZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgPHA+TG9hZGluZyB5b3VyIGRhc2hib2FyZC4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2h2aWV3LWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1lcnJvclwiPlxuICAgICAgICAgICAgPGgyPkVycm9yPC9oMj5cbiAgICAgICAgICAgIDxwPiR7dGhpcy5lcnJvcn08L3A+XG4gICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0keygpID0+IHRoaXMuaW5pdGlhbGl6ZURhc2hib2FyZCgpfT5SZXRyeTwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSB3aWRnZXRzLCBzaG93IHRoZSBkYXNoYm9hcmQgdmlld1xuICAgIGlmICh0aGlzLndpZGdldHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRGFzaGJvYXJkKCk7XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlIHNob3cgdGhlIHdlbGNvbWUvaW5mbyB2aWV3XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXNodmlldy1jb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIndlbGNvbWUtaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDEgY2xhc3M9XCJ3ZWxjb21lLXRpdGxlXCI+V2VsY29tZSB0byBEYXNodmlldyBWMjwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzcz1cIndlbGNvbWUtc3VidGl0bGVcIj5cbiAgICAgICAgICAgICAgWW91ciBpbnRlbGxpZ2VudCBob21lIGRhc2hib2FyZCBmb3IgJHt0aGlzLmhvbWVJbmZvPy5lbnRpdHlDb3VudCB8fCAwfSBlbnRpdGllc1xuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgJHt0aGlzLmhvbWVJbmZvID8gdGhpcy5yZW5kZXJIb21lSW5mbygpIDogdGhpcy5yZW5kZXJOb0RhdGEoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIb21lSW5mbygpIHtcbiAgICBpZiAoIXRoaXMuaG9tZUluZm8pIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgY29tcGxleGl0eVBlcmNlbnRhZ2UgPSBNYXRoLm1pbigxMDAsIHRoaXMuaG9tZUluZm8uY29tcGxleGl0eVNjb3JlICogMTApO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiaW5mby1ncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWNhcmRcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tdmFsdWVcIj4ke3RoaXMuaG9tZUluZm8ucm9vbUNvdW50fTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tbGFiZWxcIj5Sb29tczwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tY2FyZFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7dGhpcy5ob21lSW5mby5lbnRpdHlDb3VudH08L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJpbmZvLWxhYmVsXCI+RW50aXRpZXM8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWNhcmRcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tdmFsdWVcIj4ke3RoaXMuaG9tZUluZm8uYXJlYXMubGVuZ3RofTwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImluZm8tbGFiZWxcIj5BcmVhczwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tY2FyZFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby12YWx1ZVwiPiR7dGhpcy5ob21lSW5mby5jb21wbGV4aXR5U2NvcmV9LzEwPC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW5mby1sYWJlbFwiPkNvbXBsZXhpdHkgU2NvcmU8L3A+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBsZXhpdHktbWV0ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wbGV4aXR5LWZpbGxcIiBzdHlsZT1cIndpZHRoOiAke2NvbXBsZXhpdHlQZXJjZW50YWdlfSVcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgJHt0aGlzLmhvbWVJbmZvLmFyZWFzLmxlbmd0aCA+IDAgPyBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY2FyZFwiPlxuICAgICAgICAgIDxoMz5EZXRlY3RlZCBBcmVhczwvaDM+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFyZWFzLWxpc3RcIj5cbiAgICAgICAgICAgICR7dGhpcy5ob21lSW5mby5hcmVhcy5tYXAoYXJlYSA9PiBodG1sYFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImFyZWEtdGFnXCI+JHthcmVhfTwvc3Bhbj5cbiAgICAgICAgICAgIGApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGAgOiAnJ31cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJOb0RhdGEoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaHZpZXctY2FyZFwiPlxuICAgICAgICA8cD5ObyBob21lIGluZm9ybWF0aW9uIGF2YWlsYWJsZS4gTWFrZSBzdXJlIHlvdXIgSG9tZSBBc3Npc3RhbnQgaXMgY29uZmlndXJlZCB3aXRoIGFyZWFzIGFuZCBlbnRpdGllcy48L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgaG9tZSBjb21wbGV4aXR5IGFuZCBhcmVhcy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUhvbWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmhvbWVJbmZvIHx8ICF0aGlzLndzQ29ubmVjdGlvbikgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBkZXRhaWxlZCBhcmVhIGluZm9ybWF0aW9uXG4gICAgICBjb25zdCBhcmVhRGF0YSA9IGF3YWl0IHRoaXMuY2FsbFdlYlNvY2tldDxSZWNvcmQ8c3RyaW5nLCBhbnk+PignZ2V0X2FyZWFfZW50aXRpZXMnLCB7fSk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdG8gQXJlYUluZm8gZm9ybWF0XG4gICAgICBmb3IgKGNvbnN0IFthcmVhSWQsIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGFyZWFEYXRhKSkge1xuICAgICAgICB0aGlzLmFyZWFzLnNldChhcmVhSWQsIHtcbiAgICAgICAgICBhcmVhSWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVudGl0aWVzOiBkYXRhLmVudGl0aWVzIHx8IFtdLFxuICAgICAgICAgIGVudGl0eUNvdW50OiBkYXRhLmVudGl0eV9jb3VudCB8fCAwLFxuICAgICAgICAgIGRldmljZUNvdW50OiBkYXRhLmRldmljZV9jb3VudCB8fCAwLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYEFuYWx5emVkICR7dGhpcy5hcmVhcy5zaXplfSBhcmVhc2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBhbmFseXplIGhvbWU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3Qgb3B0aW1hbCBsYXlvdXQgYmFzZWQgb24gY29tcGxleGl0eSBzY29yZSBhbmQgYXJlYSBjb3VudC5cbiAgICovXG4gIHByaXZhdGUgc2VsZWN0T3B0aW1hbExheW91dCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaG9tZUluZm8gfHwgIXRoaXMubGF5b3V0RW5naW5lKSByZXR1cm47XG5cbiAgICBjb25zdCBjb21wbGV4aXR5U2NvcmUgPSB0aGlzLmhvbWVJbmZvLmNvbXBsZXhpdHlTY29yZTtcbiAgICBjb25zdCBhcmVhQ291bnQgPSB0aGlzLmFyZWFzLnNpemU7XG4gICAgXG4gICAgdGhpcy5jdXJyZW50TGF5b3V0ID0gdGhpcy5sYXlvdXRFbmdpbmUuc2VsZWN0TGF5b3V0KGNvbXBsZXhpdHlTY29yZSwgYXJlYUNvdW50KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgYnJlYWtwb2ludFxuICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gdGhpcy5vZmZzZXRXaWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5jdXJyZW50TGF5b3V0LmdldEJyZWFrcG9pbnQoY29udGFpbmVyV2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgd2lkZ2V0cyBiYXNlZCBvbiBhcmVhcyBhbmQgbGF5b3V0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplV2lkZ2V0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMubGF5b3V0RW5naW5lIHx8ICF0aGlzLmN1cnJlbnRMYXlvdXQpIHJldHVybjtcblxuICAgIC8vIE9yZ2FuaXplIHdpZGdldHMgZnJvbSBhcmVhc1xuICAgIGNvbnN0IGFyZWFJbmZvcyA9IEFycmF5LmZyb20odGhpcy5hcmVhcy52YWx1ZXMoKSk7XG4gICAgdGhpcy53aWRnZXRzID0gdGhpcy5sYXlvdXRFbmdpbmUub3JnYW5pemVXaWRnZXRzKGFyZWFJbmZvcyk7XG4gICAgXG4gICAgLy8gSGFuZGxlIG92ZXJmbG93XG4gICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0aGlzLmxheW91dEVuZ2luZS5oYW5kbGVPdmVyZmxvdyhcbiAgICAgIHRoaXMud2lkZ2V0cyxcbiAgICAgIHRoaXMuY3VycmVudExheW91dCxcbiAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnRcbiAgICApO1xuICAgIFxuICAgIHRoaXMud2lkZ2V0cyA9IHZpc2libGU7XG4gICAgXG4gICAgbG9nZ2VyLmluZm8oYEluaXRpYWxpemVkICR7dGhpcy53aWRnZXRzLmxlbmd0aH0gd2lkZ2V0c2ApO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb25zIGZvciB2aXNpYmxlIGVudGl0aWVzXG4gICAgYXdhaXQgdGhpcy51cGRhdGVWaXNpYmxlU3Vic2NyaXB0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHZpc2libGUgd2lkZ2V0cy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVmlzaWJsZVN1YnNjcmlwdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLl9zdWJzY3JpcHRpb25NYW5hZ2VyKSByZXR1cm47XG5cbiAgICBjb25zdCB2aXNpYmxlRW50aXRpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiB0aGlzLndpZGdldHMpIHtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHdpZGdldC5lbnRpdGllcykge1xuICAgICAgICB2aXNpYmxlRW50aXRpZXMuYWRkKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIudXBkYXRlVmlzaWJsZUVudGl0aWVzKEFycmF5LmZyb20odmlzaWJsZUVudGl0aWVzKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIHJlc2l6ZSBvYnNlcnZlciBmb3IgcmVzcG9uc2l2ZSBiZWhhdmlvci5cbiAgICovXG4gIHByaXZhdGUgc2V0dXBSZXNpemVPYnNlcnZlcigpOiB2b2lkIHtcbiAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZShlbnRyeS5jb250ZW50UmVjdC53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb250YWluZXIgcmVzaXplLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXNpemUod2lkdGg6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5jdXJyZW50TGF5b3V0KSByZXR1cm47XG5cbiAgICBjb25zdCBicmVha3BvaW50Q2hhbmdlZCA9IHRoaXMuY3VycmVudExheW91dC51cGRhdGVDb250YWluZXJXaWR0aCh3aWR0aCk7XG4gICAgXG4gICAgaWYgKGJyZWFrcG9pbnRDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5jdXJyZW50TGF5b3V0LmdldEJyZWFrcG9pbnQoKTtcbiAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIGRhc2hib2FyZCBncmlkIHdpdGggd2lkZ2V0cy5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGFzaGJvYXJkKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudExheW91dCB8fCB0aGlzLndpZGdldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1sb2FkaW5nXCI+XG4gICAgICAgICAgPHA+U2V0dGluZyB1cCB5b3VyIGRhc2hib2FyZC4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGdyaWRDU1MgPSB0aGlzLmN1cnJlbnRMYXlvdXQuZ2VuZXJhdGVHcmlkQ1NTKHRoaXMuY3VycmVudEJyZWFrcG9pbnQpO1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMubGF5b3V0RW5naW5lIS5jYWxjdWxhdGVQb3NpdGlvbnModGhpcy53aWRnZXRzLCB0aGlzLmFyZWFzLnNpemUpO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWdyaWRcIiBzdHlsZT1cIiR7Z3JpZENTU31cIj5cbiAgICAgICAgJHtwb3NpdGlvbnMubWFwKHBvcyA9PiB7XG4gICAgICAgICAgY29uc3Qgd2lkZ2V0ID0gdGhpcy53aWRnZXRzLmZpbmQodyA9PiBcbiAgICAgICAgICAgIHRoaXMuZ2V0V2lkZ2V0SWQodykgPT09IHBvcy53aWRnZXRJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF3aWRnZXQpIHJldHVybiAnJztcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJXaWRnZXQod2lkZ2V0LCBwb3MpO1xuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGEgc2luZ2xlIHdpZGdldC5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyV2lkZ2V0KHdpZGdldDogV2lkZ2V0Q29uZmlnLCBwb3NpdGlvbjogYW55KTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IHN0eWxlID0gYFxuICAgICAgZ3JpZC1hcmVhOiAke3Bvc2l0aW9uLmdyaWRBcmVhfTtcbiAgICAgICR7cG9zaXRpb24uZ3JpZENvbHVtbiA/IGBncmlkLWNvbHVtbjogJHtwb3NpdGlvbi5ncmlkQ29sdW1ufTtgIDogJyd9XG4gICAgICAke3Bvc2l0aW9uLmdyaWRSb3cgPyBgZ3JpZC1yb3c6ICR7cG9zaXRpb24uZ3JpZFJvd307YCA6ICcnfVxuICAgIGA7XG5cbiAgICBzd2l0Y2ggKHdpZGdldC50eXBlKSB7XG4gICAgICBjYXNlICdyb29tJzpcbiAgICAgICAgY29uc3QgYXJlYSA9IEFycmF5LmZyb20odGhpcy5hcmVhcy52YWx1ZXMoKSkuZmluZChhID0+IFxuICAgICAgICAgIGEuZW50aXRpZXMuc29tZShlID0+IHdpZGdldC5lbnRpdGllcy5pbmNsdWRlcyhlKSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udGFpbmVyXCIgc3R5bGU9XCIke3N0eWxlfVwiPlxuICAgICAgICAgICAgPGRhc2h2aWV3LXJvb20td2lkZ2V0XG4gICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAud2lkZ2V0Q29uZmlnPSR7d2lkZ2V0fVxuICAgICAgICAgICAgICAuYXJlYUlkPSR7YXJlYT8uYXJlYUlkfVxuICAgICAgICAgICAgICAuYXJlYU5hbWU9JHthcmVhPy5uYW1lIHx8IHdpZGdldC50aXRsZX1cbiAgICAgICAgICAgID48L2Rhc2h2aWV3LXJvb20td2lkZ2V0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgXG4gICAgICAvLyBUT0RPOiBBZGQgb3RoZXIgd2lkZ2V0IHR5cGVzIHdoZW4gaW1wbGVtZW50ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtY29udGFpbmVyXCIgc3R5bGU9XCIke3N0eWxlfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2h2aWV3LWNhcmRcIj5cbiAgICAgICAgICAgICAgPHA+V2lkZ2V0IHR5cGUgJyR7d2lkZ2V0LnR5cGV9JyBub3QgaW1wbGVtZW50ZWQgeWV0PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHdpZGdldCBJRC5cbiAgICovXG4gIHByaXZhdGUgZ2V0V2lkZ2V0SWQod2lkZ2V0OiBXaWRnZXRDb25maWcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGZpcnN0RW50aXR5ID0gd2lkZ2V0LmVudGl0aWVzWzBdIHx8ICd1bmtub3duJztcbiAgICByZXR1cm4gYCR7d2lkZ2V0LnR5cGV9LSR7Zmlyc3RFbnRpdHkucmVwbGFjZSgvXFwuL2csICdfJyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCByZXNvdXJjZXMuXG4gICAqL1xuICBwcml2YXRlIGNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbk1hbmFnZXIuY2xlYXIoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuX3N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fc3RhdGVNYW5hZ2VyLmNsZWFyKCk7XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/dashboard/dashview-dashboard.ts\n\n}");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DASHVIEW_VERSION: () => (/* binding */ DASHVIEW_VERSION)\n/* harmony export */ });\n/* harmony import */ var _dashboard_dashview_dashboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dashboard/dashview-dashboard */ \"./src/dashboard/dashview-dashboard.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/logger */ \"./src/utils/logger.ts\");\n\n\n// Set up logger based on environment\nif (true) {\n    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.setLevel(_utils_logger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.DEBUG);\n}\n// Verify dashboard element is registered\nconst dashboardElement = customElements.get('dashview-dashboard');\nif (dashboardElement) {\n    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Dashview V2 dashboard registered successfully');\n}\nelse {\n    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Failed to register dashview-dashboard element');\n}\n// Export version for debugging\nconst DASHVIEW_VERSION = '0.2.0';\n// Log initialization\n_utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Dashview V2 v${DASHVIEW_VERSION} initialized`);\n// Set up global error handler for debugging\nwindow.addEventListener('error', (event) => {\n    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Global error:', event.error);\n});\n// Set up unhandled rejection handler\nwindow.addEventListener('unhandledrejection', (event) => {\n    _utils_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Unhandled promise rejection:', event.reason);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDO0FBQ1U7QUFFbEQscUNBQXFDO0FBQ3JDLElBQUksSUFBc0MsRUFBRSxDQUFDO0lBQzNDLGlEQUFNLENBQUMsUUFBUSxDQUFDLG1EQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQUVELHlDQUF5QztBQUN6QyxNQUFNLGdCQUFnQixHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUNsRSxJQUFJLGdCQUFnQixFQUFFLENBQUM7SUFDckIsaURBQU0sQ0FBQyxJQUFJLENBQUMsK0NBQStDLENBQUMsQ0FBQztBQUMvRCxDQUFDO0tBQU0sQ0FBQztJQUNOLGlEQUFNLENBQUMsS0FBSyxDQUFDLCtDQUErQyxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUVELCtCQUErQjtBQUN4QixNQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQztBQUV4QyxxQkFBcUI7QUFDckIsaURBQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLGdCQUFnQixjQUFjLENBQUMsQ0FBQztBQUU1RCw0Q0FBNEM7QUFDNUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3pDLGlEQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0MsQ0FBQyxDQUFDLENBQUM7QUFFSCxxQ0FBcUM7QUFDckMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7SUFDdEQsaURBQU0sQ0FBQyxLQUFLLENBQUMsOEJBQThCLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdELENBQUMsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9pbmRleC50cz9mZmI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9kYXNoYm9hcmQvZGFzaHZpZXctZGFzaGJvYXJkJztcbmltcG9ydCB7IGxvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcic7XG5cbi8vIFNldCB1cCBsb2dnZXIgYmFzZWQgb24gZW52aXJvbm1lbnRcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICBsb2dnZXIuc2V0TGV2ZWwoTG9nTGV2ZWwuREVCVUcpO1xufVxuXG4vLyBWZXJpZnkgZGFzaGJvYXJkIGVsZW1lbnQgaXMgcmVnaXN0ZXJlZFxuY29uc3QgZGFzaGJvYXJkRWxlbWVudCA9IGN1c3RvbUVsZW1lbnRzLmdldCgnZGFzaHZpZXctZGFzaGJvYXJkJyk7XG5pZiAoZGFzaGJvYXJkRWxlbWVudCkge1xuICBsb2dnZXIuaW5mbygnRGFzaHZpZXcgVjIgZGFzaGJvYXJkIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59IGVsc2Uge1xuICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byByZWdpc3RlciBkYXNodmlldy1kYXNoYm9hcmQgZWxlbWVudCcpO1xufVxuXG4vLyBFeHBvcnQgdmVyc2lvbiBmb3IgZGVidWdnaW5nXG5leHBvcnQgY29uc3QgREFTSFZJRVdfVkVSU0lPTiA9ICcwLjIuMCc7XG5cbi8vIExvZyBpbml0aWFsaXphdGlvblxubG9nZ2VyLmluZm8oYERhc2h2aWV3IFYyIHYke0RBU0hWSUVXX1ZFUlNJT059IGluaXRpYWxpemVkYCk7XG5cbi8vIFNldCB1cCBnbG9iYWwgZXJyb3IgaGFuZGxlciBmb3IgZGVidWdnaW5nXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdHbG9iYWwgZXJyb3I6JywgZXZlbnQuZXJyb3IpO1xufSk7XG5cbi8vIFNldCB1cCB1bmhhbmRsZWQgcmVqZWN0aW9uIGhhbmRsZXJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCAoZXZlbnQpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb246JywgZXZlbnQucmVhc29uKTtcbn0pOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.ts\n\n}");

/***/ }),

/***/ "./src/layouts/base-layout.ts":
/*!************************************!*\
  !*** ./src/layouts/base-layout.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLayout: () => (/* binding */ BaseLayout)\n/* harmony export */ });\n/**\n * Base layout class for Dashview V2 dashboard layouts.\n * Provides grid system and responsive breakpoint handling.\n */\nclass BaseLayout {\n    constructor() {\n        this.currentBreakpoint = 'desktop';\n        this.containerWidth = 0;\n        this.config = this.getLayoutConfig();\n    }\n    /**\n     * Get current breakpoint based on container width.\n     */\n    getBreakpoint(width) {\n        const w = width || this.containerWidth;\n        if (w < this.config.breakpoints.tablet) {\n            return 'mobile';\n        }\n        else if (w < this.config.breakpoints.desktop) {\n            return 'tablet';\n        }\n        else if (w < this.config.breakpoints.large) {\n            return 'desktop';\n        }\n        else {\n            return 'large';\n        }\n    }\n    /**\n     * Update container width and return if breakpoint changed.\n     */\n    updateContainerWidth(width) {\n        this.containerWidth = width;\n        const newBreakpoint = this.getBreakpoint(width);\n        if (newBreakpoint !== this.currentBreakpoint) {\n            this.currentBreakpoint = newBreakpoint;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Get number of columns for current breakpoint.\n     */\n    getColumnCount(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return 4;\n            case 'tablet':\n                return 8;\n            case 'desktop':\n                return 12;\n            case 'large':\n                return 12;\n            default:\n                return 12;\n        }\n    }\n    /**\n     * Get grid gap size for current breakpoint.\n     */\n    getGridGap(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return '8px';\n            case 'tablet':\n                return '12px';\n            case 'desktop':\n                return '16px';\n            case 'large':\n                return '20px';\n            default:\n                return '16px';\n        }\n    }\n    /**\n     * Get container padding for current breakpoint.\n     */\n    getContainerPadding(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        switch (bp) {\n            case 'mobile':\n                return '8px';\n            case 'tablet':\n                return '16px';\n            case 'desktop':\n                return '24px';\n            case 'large':\n                return '32px';\n            default:\n                return '24px';\n        }\n    }\n    /**\n     * Check if layout is suitable for given area count.\n     */\n    isSuitableForAreaCount(areaCount) {\n        return areaCount >= this.config.minAreas &&\n            areaCount <= this.config.maxAreas;\n    }\n    /**\n     * Sort widgets by priority for placement.\n     */\n    sortWidgetsByPriority(widgets) {\n        // Priority order: room > climate > device-group > quick-controls\n        const priorityMap = {\n            'room': 4,\n            'climate': 3,\n            'device-group': 2,\n            'quick-controls': 1,\n        };\n        return [...widgets].sort((a, b) => {\n            const priorityA = priorityMap[a.type] || 0;\n            const priorityB = priorityMap[b.type] || 0;\n            // Sort by priority first\n            if (priorityA !== priorityB) {\n                return priorityB - priorityA;\n            }\n            // Then by entity count\n            return b.entities.length - a.entities.length;\n        });\n    }\n    /**\n     * Group widgets by type.\n     */\n    groupWidgetsByType(widgets) {\n        const groups = new Map();\n        for (const widget of widgets) {\n            const type = widget.type;\n            if (!groups.has(type)) {\n                groups.set(type, []);\n            }\n            groups.get(type).push(widget);\n        }\n        return groups;\n    }\n    /**\n     * Generate CSS for grid template.\n     */\n    generateGridCSS(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        const template = this.generateGridTemplate(bp);\n        const gap = this.getGridGap(bp);\n        const padding = this.getContainerPadding(bp);\n        return `\n      display: grid;\n      grid-template: ${template};\n      gap: ${gap};\n      padding: ${padding};\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n    `;\n    }\n    /**\n     * Get layout metadata.\n     */\n    getMetadata() {\n        return {\n            name: this.config.name,\n            description: this.config.description,\n            currentBreakpoint: this.currentBreakpoint,\n            supportedAreaRange: [this.config.minAreas, this.config.maxAreas],\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGF5b3V0cy9iYXNlLWxheW91dC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztHQUdHO0FBbUNJLE1BQWUsVUFBVTtJQUs5QjtRQUhVLHNCQUFpQixHQUFlLFNBQVMsQ0FBQztRQUMxQyxtQkFBYyxHQUFHLENBQUMsQ0FBQztRQUczQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBMEJEOztPQUVHO0lBQ0gsYUFBYSxDQUFDLEtBQWM7UUFDMUIsTUFBTSxDQUFDLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUM7UUFFdkMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDdkMsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQzthQUFNLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQy9DLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7YUFBTSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUM3QyxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO2FBQU0sQ0FBQztZQUNOLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxvQkFBb0IsQ0FBQyxLQUFhO1FBQ2hDLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQzVCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFaEQsSUFBSSxhQUFhLEtBQUssSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDN0MsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGFBQWEsQ0FBQztZQUN2QyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7T0FFRztJQUNILGNBQWMsQ0FBQyxVQUF1QjtRQUNwQyxNQUFNLEVBQUUsR0FBRyxVQUFVLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDO1FBRWhELFFBQVEsRUFBRSxFQUFFLENBQUM7WUFDWCxLQUFLLFFBQVE7Z0JBQ1gsT0FBTyxDQUFDLENBQUM7WUFDWCxLQUFLLFFBQVE7Z0JBQ1gsT0FBTyxDQUFDLENBQUM7WUFDWCxLQUFLLFNBQVM7Z0JBQ1osT0FBTyxFQUFFLENBQUM7WUFDWixLQUFLLE9BQU87Z0JBQ1YsT0FBTyxFQUFFLENBQUM7WUFDWjtnQkFDRSxPQUFPLEVBQUUsQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxVQUFVLENBQUMsVUFBdUI7UUFDaEMsTUFBTSxFQUFFLEdBQUcsVUFBVSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUVoRCxRQUFRLEVBQUUsRUFBRSxDQUFDO1lBQ1gsS0FBSyxRQUFRO2dCQUNYLE9BQU8sS0FBSyxDQUFDO1lBQ2YsS0FBSyxRQUFRO2dCQUNYLE9BQU8sTUFBTSxDQUFDO1lBQ2hCLEtBQUssU0FBUztnQkFDWixPQUFPLE1BQU0sQ0FBQztZQUNoQixLQUFLLE9BQU87Z0JBQ1YsT0FBTyxNQUFNLENBQUM7WUFDaEI7Z0JBQ0UsT0FBTyxNQUFNLENBQUM7UUFDbEIsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILG1CQUFtQixDQUFDLFVBQXVCO1FBQ3pDLE1BQU0sRUFBRSxHQUFHLFVBQVUsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUM7UUFFaEQsUUFBUSxFQUFFLEVBQUUsQ0FBQztZQUNYLEtBQUssUUFBUTtnQkFDWCxPQUFPLEtBQUssQ0FBQztZQUNmLEtBQUssUUFBUTtnQkFDWCxPQUFPLE1BQU0sQ0FBQztZQUNoQixLQUFLLFNBQVM7Z0JBQ1osT0FBTyxNQUFNLENBQUM7WUFDaEIsS0FBSyxPQUFPO2dCQUNWLE9BQU8sTUFBTSxDQUFDO1lBQ2hCO2dCQUNFLE9BQU8sTUFBTSxDQUFDO1FBQ2xCLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxzQkFBc0IsQ0FBQyxTQUFpQjtRQUN0QyxPQUFPLFNBQVMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVE7WUFDakMsU0FBUyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQzNDLENBQUM7SUFFRDs7T0FFRztJQUNPLHFCQUFxQixDQUFDLE9BQXVCO1FBQ3JELGlFQUFpRTtRQUNqRSxNQUFNLFdBQVcsR0FBMkI7WUFDMUMsTUFBTSxFQUFFLENBQUM7WUFDVCxTQUFTLEVBQUUsQ0FBQztZQUNaLGNBQWMsRUFBRSxDQUFDO1lBQ2pCLGdCQUFnQixFQUFFLENBQUM7U0FDcEIsQ0FBQztRQUVGLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNoQyxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMzQyxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUzQyx5QkFBeUI7WUFDekIsSUFBSSxTQUFTLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQzVCLE9BQU8sU0FBUyxHQUFHLFNBQVMsQ0FBQztZQUMvQixDQUFDO1lBRUQsdUJBQXVCO1lBQ3ZCLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDTyxrQkFBa0IsQ0FBQyxPQUF1QjtRQUNsRCxNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBMEIsQ0FBQztRQUVqRCxLQUFLLE1BQU0sTUFBTSxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQzdCLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztnQkFDdEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDdkIsQ0FBQztZQUNELE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxlQUFlLENBQUMsVUFBdUI7UUFDckMsTUFBTSxFQUFFLEdBQUcsVUFBVSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUNoRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0MsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFN0MsT0FBTzs7dUJBRVksUUFBUTthQUNsQixHQUFHO2lCQUNDLE9BQU87Ozs7S0FJbkIsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILFdBQVc7UUFNVCxPQUFPO1lBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtZQUN0QixXQUFXLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXO1lBQ3BDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7WUFDekMsa0JBQWtCLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztTQUNqRSxDQUFDO0lBQ0osQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9sYXlvdXRzL2Jhc2UtbGF5b3V0LnRzP2ViNzkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCYXNlIGxheW91dCBjbGFzcyBmb3IgRGFzaHZpZXcgVjIgZGFzaGJvYXJkIGxheW91dHMuXG4gKiBQcm92aWRlcyBncmlkIHN5c3RlbSBhbmQgcmVzcG9uc2l2ZSBicmVha3BvaW50IGhhbmRsaW5nLlxuICovXG5cbmltcG9ydCB7IFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuXG5leHBvcnQgdHlwZSBCcmVha3BvaW50ID0gJ21vYmlsZScgfCAndGFibGV0JyB8ICdkZXNrdG9wJyB8ICdsYXJnZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF5b3V0Q29uZmlnIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBtaW5BcmVhczogbnVtYmVyO1xuICBtYXhBcmVhczogbnVtYmVyO1xuICBicmVha3BvaW50czoge1xuICAgIG1vYmlsZTogbnVtYmVyOyAgICAvLyA8IDc2OHB4XG4gICAgdGFibGV0OiBudW1iZXI7ICAgIC8vIDc2OHB4IC0gMTAyM3B4XG4gICAgZGVza3RvcDogbnVtYmVyOyAgIC8vIDEwMjRweCAtIDE0MzlweFxuICAgIGxhcmdlOiBudW1iZXI7ICAgICAvLyA+PSAxNDQwcHhcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcmlkQXJlYSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZ3JpZEFyZWE6IHN0cmluZztcbiAgbWluV2lkZ2V0cz86IG51bWJlcjtcbiAgbWF4V2lkZ2V0cz86IG51bWJlcjtcbiAgd2lkZ2V0VHlwZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXaWRnZXRQb3NpdGlvbiB7XG4gIHdpZGdldElkOiBzdHJpbmc7XG4gIGdyaWRBcmVhOiBzdHJpbmc7XG4gIGdyaWRDb2x1bW4/OiBzdHJpbmc7XG4gIGdyaWRSb3c/OiBzdHJpbmc7XG4gIG9yZGVyPzogbnVtYmVyO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUxheW91dCB7XG4gIHByb3RlY3RlZCBjb25maWc6IExheW91dENvbmZpZztcbiAgcHJvdGVjdGVkIGN1cnJlbnRCcmVha3BvaW50OiBCcmVha3BvaW50ID0gJ2Rlc2t0b3AnO1xuICBwcm90ZWN0ZWQgY29udGFpbmVyV2lkdGggPSAwO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29uZmlnID0gdGhpcy5nZXRMYXlvdXRDb25maWcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGF5b3V0IGNvbmZpZ3VyYXRpb24uXG4gICAqIE11c3QgYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3Nlcy5cbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRMYXlvdXRDb25maWcoKTogTGF5b3V0Q29uZmlnO1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBDU1MgZ3JpZCB0ZW1wbGF0ZSBmb3IgY3VycmVudCBicmVha3BvaW50LlxuICAgKi9cbiAgYWJzdHJhY3QgZ2VuZXJhdGVHcmlkVGVtcGxhdGUoYnJlYWtwb2ludDogQnJlYWtwb2ludCk6IHN0cmluZztcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHdpZGdldCBwb3NpdGlvbnMgYmFzZWQgb24gYXZhaWxhYmxlIHdpZGdldHMgYW5kIGFyZWFzLlxuICAgKi9cbiAgYWJzdHJhY3QgY2FsY3VsYXRlV2lkZ2V0UG9zaXRpb25zKFxuICAgIHdpZGdldHM6IFdpZGdldENvbmZpZ1tdLFxuICAgIGFyZWFDb3VudDogbnVtYmVyXG4gICk6IFdpZGdldFBvc2l0aW9uW107XG5cbiAgLyoqXG4gICAqIEdldCBncmlkIGFyZWFzIGRlZmluaXRpb24gZm9yIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICovXG4gIGFic3RyYWN0IGdldEdyaWRBcmVhcyhicmVha3BvaW50OiBCcmVha3BvaW50KTogR3JpZEFyZWFbXTtcblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgYnJlYWtwb2ludCBiYXNlZCBvbiBjb250YWluZXIgd2lkdGguXG4gICAqL1xuICBnZXRCcmVha3BvaW50KHdpZHRoPzogbnVtYmVyKTogQnJlYWtwb2ludCB7XG4gICAgY29uc3QgdyA9IHdpZHRoIHx8IHRoaXMuY29udGFpbmVyV2lkdGg7XG4gICAgXG4gICAgaWYgKHcgPCB0aGlzLmNvbmZpZy5icmVha3BvaW50cy50YWJsZXQpIHtcbiAgICAgIHJldHVybiAnbW9iaWxlJztcbiAgICB9IGVsc2UgaWYgKHcgPCB0aGlzLmNvbmZpZy5icmVha3BvaW50cy5kZXNrdG9wKSB7XG4gICAgICByZXR1cm4gJ3RhYmxldCc7XG4gICAgfSBlbHNlIGlmICh3IDwgdGhpcy5jb25maWcuYnJlYWtwb2ludHMubGFyZ2UpIHtcbiAgICAgIHJldHVybiAnZGVza3RvcCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnbGFyZ2UnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29udGFpbmVyIHdpZHRoIGFuZCByZXR1cm4gaWYgYnJlYWtwb2ludCBjaGFuZ2VkLlxuICAgKi9cbiAgdXBkYXRlQ29udGFpbmVyV2lkdGgod2lkdGg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHRoaXMuY29udGFpbmVyV2lkdGggPSB3aWR0aDtcbiAgICBjb25zdCBuZXdCcmVha3BvaW50ID0gdGhpcy5nZXRCcmVha3BvaW50KHdpZHRoKTtcbiAgICBcbiAgICBpZiAobmV3QnJlYWtwb2ludCAhPT0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCkge1xuICAgICAgdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9IG5ld0JyZWFrcG9pbnQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBudW1iZXIgb2YgY29sdW1ucyBmb3IgY3VycmVudCBicmVha3BvaW50LlxuICAgKi9cbiAgZ2V0Q29sdW1uQ291bnQoYnJlYWtwb2ludD86IEJyZWFrcG9pbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IGJwID0gYnJlYWtwb2ludCB8fCB0aGlzLmN1cnJlbnRCcmVha3BvaW50O1xuICAgIFxuICAgIHN3aXRjaCAoYnApIHtcbiAgICAgIGNhc2UgJ21vYmlsZSc6XG4gICAgICAgIHJldHVybiA0O1xuICAgICAgY2FzZSAndGFibGV0JzpcbiAgICAgICAgcmV0dXJuIDg7XG4gICAgICBjYXNlICdkZXNrdG9wJzpcbiAgICAgICAgcmV0dXJuIDEyO1xuICAgICAgY2FzZSAnbGFyZ2UnOlxuICAgICAgICByZXR1cm4gMTI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gMTI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBncmlkIGdhcCBzaXplIGZvciBjdXJyZW50IGJyZWFrcG9pbnQuXG4gICAqL1xuICBnZXRHcmlkR2FwKGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogc3RyaW5nIHtcbiAgICBjb25zdCBicCA9IGJyZWFrcG9pbnQgfHwgdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcbiAgICBcbiAgICBzd2l0Y2ggKGJwKSB7XG4gICAgICBjYXNlICdtb2JpbGUnOlxuICAgICAgICByZXR1cm4gJzhweCc7XG4gICAgICBjYXNlICd0YWJsZXQnOlxuICAgICAgICByZXR1cm4gJzEycHgnO1xuICAgICAgY2FzZSAnZGVza3RvcCc6XG4gICAgICAgIHJldHVybiAnMTZweCc7XG4gICAgICBjYXNlICdsYXJnZSc6XG4gICAgICAgIHJldHVybiAnMjBweCc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJzE2cHgnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29udGFpbmVyIHBhZGRpbmcgZm9yIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICovXG4gIGdldENvbnRhaW5lclBhZGRpbmcoYnJlYWtwb2ludD86IEJyZWFrcG9pbnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJwID0gYnJlYWtwb2ludCB8fCB0aGlzLmN1cnJlbnRCcmVha3BvaW50O1xuICAgIFxuICAgIHN3aXRjaCAoYnApIHtcbiAgICAgIGNhc2UgJ21vYmlsZSc6XG4gICAgICAgIHJldHVybiAnOHB4JztcbiAgICAgIGNhc2UgJ3RhYmxldCc6XG4gICAgICAgIHJldHVybiAnMTZweCc7XG4gICAgICBjYXNlICdkZXNrdG9wJzpcbiAgICAgICAgcmV0dXJuICcyNHB4JztcbiAgICAgIGNhc2UgJ2xhcmdlJzpcbiAgICAgICAgcmV0dXJuICczMnB4JztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnMjRweCc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGxheW91dCBpcyBzdWl0YWJsZSBmb3IgZ2l2ZW4gYXJlYSBjb3VudC5cbiAgICovXG4gIGlzU3VpdGFibGVGb3JBcmVhQ291bnQoYXJlYUNvdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gYXJlYUNvdW50ID49IHRoaXMuY29uZmlnLm1pbkFyZWFzICYmIFxuICAgICAgICAgICBhcmVhQ291bnQgPD0gdGhpcy5jb25maWcubWF4QXJlYXM7XG4gIH1cblxuICAvKipcbiAgICogU29ydCB3aWRnZXRzIGJ5IHByaW9yaXR5IGZvciBwbGFjZW1lbnQuXG4gICAqL1xuICBwcm90ZWN0ZWQgc29ydFdpZGdldHNCeVByaW9yaXR5KHdpZGdldHM6IFdpZGdldENvbmZpZ1tdKTogV2lkZ2V0Q29uZmlnW10ge1xuICAgIC8vIFByaW9yaXR5IG9yZGVyOiByb29tID4gY2xpbWF0ZSA+IGRldmljZS1ncm91cCA+IHF1aWNrLWNvbnRyb2xzXG4gICAgY29uc3QgcHJpb3JpdHlNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgICAncm9vbSc6IDQsXG4gICAgICAnY2xpbWF0ZSc6IDMsXG4gICAgICAnZGV2aWNlLWdyb3VwJzogMixcbiAgICAgICdxdWljay1jb250cm9scyc6IDEsXG4gICAgfTtcblxuICAgIHJldHVybiBbLi4ud2lkZ2V0c10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgcHJpb3JpdHlBID0gcHJpb3JpdHlNYXBbYS50eXBlXSB8fCAwO1xuICAgICAgY29uc3QgcHJpb3JpdHlCID0gcHJpb3JpdHlNYXBbYi50eXBlXSB8fCAwO1xuICAgICAgXG4gICAgICAvLyBTb3J0IGJ5IHByaW9yaXR5IGZpcnN0XG4gICAgICBpZiAocHJpb3JpdHlBICE9PSBwcmlvcml0eUIpIHtcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5QiAtIHByaW9yaXR5QTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVGhlbiBieSBlbnRpdHkgY291bnRcbiAgICAgIHJldHVybiBiLmVudGl0aWVzLmxlbmd0aCAtIGEuZW50aXRpZXMubGVuZ3RoO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyb3VwIHdpZGdldHMgYnkgdHlwZS5cbiAgICovXG4gIHByb3RlY3RlZCBncm91cFdpZGdldHNCeVR5cGUod2lkZ2V0czogV2lkZ2V0Q29uZmlnW10pOiBNYXA8c3RyaW5nLCBXaWRnZXRDb25maWdbXT4ge1xuICAgIGNvbnN0IGdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBXaWRnZXRDb25maWdbXT4oKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiB3aWRnZXRzKSB7XG4gICAgICBjb25zdCB0eXBlID0gd2lkZ2V0LnR5cGU7XG4gICAgICBpZiAoIWdyb3Vwcy5oYXModHlwZSkpIHtcbiAgICAgICAgZ3JvdXBzLnNldCh0eXBlLCBbXSk7XG4gICAgICB9XG4gICAgICBncm91cHMuZ2V0KHR5cGUpIS5wdXNoKHdpZGdldCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBncm91cHM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgQ1NTIGZvciBncmlkIHRlbXBsYXRlLlxuICAgKi9cbiAgZ2VuZXJhdGVHcmlkQ1NTKGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogc3RyaW5nIHtcbiAgICBjb25zdCBicCA9IGJyZWFrcG9pbnQgfHwgdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZ2VuZXJhdGVHcmlkVGVtcGxhdGUoYnApO1xuICAgIGNvbnN0IGdhcCA9IHRoaXMuZ2V0R3JpZEdhcChicCk7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuZ2V0Q29udGFpbmVyUGFkZGluZyhicCk7XG4gICAgXG4gICAgcmV0dXJuIGBcbiAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICBncmlkLXRlbXBsYXRlOiAke3RlbXBsYXRlfTtcbiAgICAgIGdhcDogJHtnYXB9O1xuICAgICAgcGFkZGluZzogJHtwYWRkaW5nfTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsYXlvdXQgbWV0YWRhdGEuXG4gICAqL1xuICBnZXRNZXRhZGF0YSgpOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgY3VycmVudEJyZWFrcG9pbnQ6IEJyZWFrcG9pbnQ7XG4gICAgc3VwcG9ydGVkQXJlYVJhbmdlOiBbbnVtYmVyLCBudW1iZXJdO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5jb25maWcubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNvbmZpZy5kZXNjcmlwdGlvbixcbiAgICAgIGN1cnJlbnRCcmVha3BvaW50OiB0aGlzLmN1cnJlbnRCcmVha3BvaW50LFxuICAgICAgc3VwcG9ydGVkQXJlYVJhbmdlOiBbdGhpcy5jb25maWcubWluQXJlYXMsIHRoaXMuY29uZmlnLm1heEFyZWFzXSxcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/layouts/base-layout.ts\n\n}");

/***/ }),

/***/ "./src/layouts/layout-engine.ts":
/*!**************************************!*\
  !*** ./src/layouts/layout-engine.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LayoutEngine: () => (/* binding */ LayoutEngine)\n/* harmony export */ });\n/* harmony import */ var _standard_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./standard-layout */ \"./src/layouts/standard-layout.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger */ \"./src/utils/logger.ts\");\n/**\n * Layout engine for Dashview V2.\n * Handles layout selection, widget organization, and overflow management.\n */\n\n\nconst logger = new _utils_logger__WEBPACK_IMPORTED_MODULE_1__.Logger('LayoutEngine');\nclass LayoutEngine {\n    constructor(config = {}) {\n        this.currentLayout = null;\n        this.config = {\n            maxWidgetsPerArea: config.maxWidgetsPerArea ?? 2,\n            prioritizeByUsage: config.prioritizeByUsage ?? true,\n        };\n        // Initialize available layouts\n        this.layouts = new Map();\n        this.registerLayout('standard', new _standard_layout__WEBPACK_IMPORTED_MODULE_0__.StandardLayout());\n        // Future layouts can be registered here:\n        // this.registerLayout('compact', new CompactLayout());\n        // this.registerLayout('complex', new ComplexLayout());\n        // this.registerLayout('estate', new EstateLayout());\n    }\n    /**\n     * Register a layout.\n     */\n    registerLayout(name, layout) {\n        this.layouts.set(name, layout);\n        logger.info(`Registered layout: ${name}`);\n    }\n    /**\n     * Select optimal layout based on complexity score.\n     */\n    selectLayout(complexityScore, areaCount) {\n        // For now, we only have StandardLayout\n        // In the future, this will select based on complexity\n        let selectedLayout;\n        let selectedName = '';\n        // Find suitable layout for area count\n        for (const [name, layout] of this.layouts) {\n            if (layout.isSuitableForAreaCount(areaCount)) {\n                selectedLayout = layout;\n                selectedName = name;\n                break;\n            }\n        }\n        // Fallback to standard if no suitable layout found\n        if (!selectedLayout) {\n            selectedLayout = this.layouts.get('standard');\n            selectedName = 'standard';\n            logger.warn(`No suitable layout for ${areaCount} areas, using standard layout`);\n        }\n        this.currentLayout = selectedLayout;\n        logger.info(`Selected ${selectedName} layout for complexity ${complexityScore} and ${areaCount} areas`);\n        return selectedLayout;\n    }\n    /**\n     * Organize widgets based on areas and layout.\n     */\n    organizeWidgets(areas) {\n        const widgets = [];\n        // Sort areas by entity count and priority\n        const sortedAreas = this.sortAreasByPriority(areas);\n        // Create room widgets for each area\n        for (const area of sortedAreas) {\n            if (area.entityCount === 0)\n                continue;\n            const roomWidget = {\n                type: 'room',\n                entities: area.entities,\n                title: area.name,\n            };\n            widgets.push(roomWidget);\n        }\n        // Create device group widgets\n        const deviceGroups = this.createDeviceGroups(areas);\n        widgets.push(...deviceGroups);\n        // Create climate widget if climate entities exist\n        const climateWidget = this.createClimateWidget(areas);\n        if (climateWidget) {\n            widgets.push(climateWidget);\n        }\n        // Create quick controls widget\n        const quickControls = this.createQuickControlsWidget(areas);\n        if (quickControls) {\n            widgets.push(quickControls);\n        }\n        logger.info(`Organized ${widgets.length} widgets from ${areas.length} areas`);\n        return widgets;\n    }\n    /**\n     * Handle widget overflow for current layout.\n     */\n    handleOverflow(widgets, layout, breakpoint) {\n        const areas = layout.getGridAreas(breakpoint);\n        const visible = [];\n        const overflow = [];\n        // Group widgets by type\n        const widgetsByType = new Map();\n        for (const widget of widgets) {\n            if (!widgetsByType.has(widget.type)) {\n                widgetsByType.set(widget.type, []);\n            }\n            widgetsByType.get(widget.type).push(widget);\n        }\n        // Place widgets according to area constraints\n        for (const area of areas) {\n            let remainingSlots = area.maxWidgets || 999;\n            for (const widgetType of area.widgetTypes || []) {\n                const availableWidgets = widgetsByType.get(widgetType) || [];\n                for (const widget of availableWidgets) {\n                    if (remainingSlots > 0 && !visible.includes(widget)) {\n                        visible.push(widget);\n                        remainingSlots--;\n                    }\n                    else if (!visible.includes(widget) && !overflow.includes(widget)) {\n                        overflow.push(widget);\n                    }\n                }\n            }\n        }\n        logger.info(`Layout overflow: ${visible.length} visible, ${overflow.length} overflow`);\n        return { visible, overflow };\n    }\n    /**\n     * Sort areas by priority.\n     */\n    sortAreasByPriority(areas) {\n        return [...areas].sort((a, b) => {\n            // Prioritize named areas over \"unassigned\"\n            if (a.areaId === 'unassigned')\n                return 1;\n            if (b.areaId === 'unassigned')\n                return -1;\n            // Prioritize by entity count\n            if (a.entityCount !== b.entityCount) {\n                return b.entityCount - a.entityCount;\n            }\n            // Then by device count\n            return b.deviceCount - a.deviceCount;\n        });\n    }\n    /**\n     * Create device group widgets.\n     */\n    createDeviceGroups(areas) {\n        const groups = [];\n        const allEntities = [];\n        // Collect all entities\n        for (const area of areas) {\n            allEntities.push(...area.entities);\n        }\n        // Group by domain\n        const entityByDomain = new Map();\n        for (const entityId of allEntities) {\n            const domain = entityId.split('.')[0];\n            if (!entityByDomain.has(domain)) {\n                entityByDomain.set(domain, []);\n            }\n            entityByDomain.get(domain).push(entityId);\n        }\n        // Create groups for specific domains\n        const groupableDomains = ['light', 'switch', 'cover', 'fan'];\n        for (const domain of groupableDomains) {\n            const entities = entityByDomain.get(domain) || [];\n            if (entities.length >= 3) { // Only create group if enough entities\n                groups.push({\n                    type: 'device-group',\n                    entities: entities,\n                    title: `All ${domain}s`,\n                });\n            }\n        }\n        return groups;\n    }\n    /**\n     * Create climate widget.\n     */\n    createClimateWidget(areas) {\n        const climateEntities = [];\n        for (const area of areas) {\n            for (const entityId of area.entities) {\n                if (entityId.startsWith('climate.') ||\n                    entityId.includes('temperature') ||\n                    entityId.includes('humidity')) {\n                    climateEntities.push(entityId);\n                }\n            }\n        }\n        if (climateEntities.length === 0) {\n            return null;\n        }\n        return {\n            type: 'climate',\n            entities: climateEntities,\n            title: 'Climate Control',\n        };\n    }\n    /**\n     * Create quick controls widget.\n     */\n    createQuickControlsWidget(areas) {\n        const quickEntities = [];\n        // Find most important entities (scenes, main lights, etc.)\n        for (const area of areas) {\n            for (const entityId of area.entities) {\n                if (entityId.startsWith('scene.') ||\n                    entityId.includes('main') ||\n                    entityId.includes('all')) {\n                    quickEntities.push(entityId);\n                }\n            }\n        }\n        // Limit to reasonable number\n        const limitedEntities = quickEntities.slice(0, 8);\n        if (limitedEntities.length === 0) {\n            return null;\n        }\n        return {\n            type: 'quick-controls',\n            entities: limitedEntities,\n            title: 'Quick Controls',\n        };\n    }\n    /**\n     * Get current layout.\n     */\n    getCurrentLayout() {\n        return this.currentLayout;\n    }\n    /**\n     * Calculate widget positions for current layout.\n     */\n    calculatePositions(widgets, areaCount) {\n        if (!this.currentLayout) {\n            logger.error('No layout selected');\n            return [];\n        }\n        return this.currentLayout.calculateWidgetPositions(widgets, areaCount);\n    }\n    /**\n     * Update container width and check for breakpoint changes.\n     */\n    updateContainerWidth(width) {\n        if (!this.currentLayout) {\n            return false;\n        }\n        return this.currentLayout.updateContainerWidth(width);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhLEVBQUUsQ0FBQztZQUN4QixNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDbkMsT0FBTyxFQUFFLENBQUM7UUFDWixDQUFDO1FBRUQsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLHdCQUF3QixDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxvQkFBb0IsQ0FBQyxLQUFhO1FBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDeEIsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBRUQsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3hELENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvbGF5b3V0cy9sYXlvdXQtZW5naW5lLnRzPzM1YzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMYXlvdXQgZW5naW5lIGZvciBEYXNodmlldyBWMi5cbiAqIEhhbmRsZXMgbGF5b3V0IHNlbGVjdGlvbiwgd2lkZ2V0IG9yZ2FuaXphdGlvbiwgYW5kIG92ZXJmbG93IG1hbmFnZW1lbnQuXG4gKi9cblxuaW1wb3J0IHsgQmFzZUxheW91dCwgQnJlYWtwb2ludCwgV2lkZ2V0UG9zaXRpb24gfSBmcm9tICcuL2Jhc2UtbGF5b3V0JztcbmltcG9ydCB7IFN0YW5kYXJkTGF5b3V0IH0gZnJvbSAnLi9zdGFuZGFyZC1sYXlvdXQnO1xuaW1wb3J0IHsgV2lkZ2V0Q29uZmlnIH0gZnJvbSAnLi4vY29yZS93aWRnZXQtYmFzZSc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdMYXlvdXRFbmdpbmUnKTtcblxuZXhwb3J0IGludGVyZmFjZSBBcmVhSW5mbyB7XG4gIGFyZWFJZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVudGl0aWVzOiBzdHJpbmdbXTtcbiAgZW50aXR5Q291bnQ6IG51bWJlcjtcbiAgZGV2aWNlQ291bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMYXlvdXRFbmdpbmVDb25maWcge1xuICBtYXhXaWRnZXRzUGVyQXJlYTogbnVtYmVyO1xuICBwcmlvcml0aXplQnlVc2FnZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIExheW91dEVuZ2luZSB7XG4gIHByaXZhdGUgbGF5b3V0czogTWFwPHN0cmluZywgQmFzZUxheW91dD47XG4gIHByaXZhdGUgY3VycmVudExheW91dDogQmFzZUxheW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogUmVxdWlyZWQ8TGF5b3V0RW5naW5lQ29uZmlnPjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8TGF5b3V0RW5naW5lQ29uZmlnPiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBtYXhXaWRnZXRzUGVyQXJlYTogY29uZmlnLm1heFdpZGdldHNQZXJBcmVhID8/IDIsXG4gICAgICBwcmlvcml0aXplQnlVc2FnZTogY29uZmlnLnByaW9yaXRpemVCeVVzYWdlID8/IHRydWUsXG4gICAgfTtcblxuICAgIC8vIEluaXRpYWxpemUgYXZhaWxhYmxlIGxheW91dHNcbiAgICB0aGlzLmxheW91dHMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdpc3RlckxheW91dCgnc3RhbmRhcmQnLCBuZXcgU3RhbmRhcmRMYXlvdXQoKSk7XG4gICAgXG4gICAgLy8gRnV0dXJlIGxheW91dHMgY2FuIGJlIHJlZ2lzdGVyZWQgaGVyZTpcbiAgICAvLyB0aGlzLnJlZ2lzdGVyTGF5b3V0KCdjb21wYWN0JywgbmV3IENvbXBhY3RMYXlvdXQoKSk7XG4gICAgLy8gdGhpcy5yZWdpc3RlckxheW91dCgnY29tcGxleCcsIG5ldyBDb21wbGV4TGF5b3V0KCkpO1xuICAgIC8vIHRoaXMucmVnaXN0ZXJMYXlvdXQoJ2VzdGF0ZScsIG5ldyBFc3RhdGVMYXlvdXQoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBsYXlvdXQuXG4gICAqL1xuICByZWdpc3RlckxheW91dChuYW1lOiBzdHJpbmcsIGxheW91dDogQmFzZUxheW91dCk6IHZvaWQge1xuICAgIHRoaXMubGF5b3V0cy5zZXQobmFtZSwgbGF5b3V0KTtcbiAgICBsb2dnZXIuaW5mbyhgUmVnaXN0ZXJlZCBsYXlvdXQ6ICR7bmFtZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3Qgb3B0aW1hbCBsYXlvdXQgYmFzZWQgb24gY29tcGxleGl0eSBzY29yZS5cbiAgICovXG4gIHNlbGVjdExheW91dChjb21wbGV4aXR5U2NvcmU6IG51bWJlciwgYXJlYUNvdW50OiBudW1iZXIpOiBCYXNlTGF5b3V0IHtcbiAgICAvLyBGb3Igbm93LCB3ZSBvbmx5IGhhdmUgU3RhbmRhcmRMYXlvdXRcbiAgICAvLyBJbiB0aGUgZnV0dXJlLCB0aGlzIHdpbGwgc2VsZWN0IGJhc2VkIG9uIGNvbXBsZXhpdHlcbiAgICBcbiAgICBsZXQgc2VsZWN0ZWRMYXlvdXQ6IEJhc2VMYXlvdXQgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHNlbGVjdGVkTmFtZSA9ICcnO1xuXG4gICAgLy8gRmluZCBzdWl0YWJsZSBsYXlvdXQgZm9yIGFyZWEgY291bnRcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBsYXlvdXRdIG9mIHRoaXMubGF5b3V0cykge1xuICAgICAgaWYgKGxheW91dC5pc1N1aXRhYmxlRm9yQXJlYUNvdW50KGFyZWFDb3VudCkpIHtcbiAgICAgICAgc2VsZWN0ZWRMYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHNlbGVjdGVkTmFtZSA9IG5hbWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIHN0YW5kYXJkIGlmIG5vIHN1aXRhYmxlIGxheW91dCBmb3VuZFxuICAgIGlmICghc2VsZWN0ZWRMYXlvdXQpIHtcbiAgICAgIHNlbGVjdGVkTGF5b3V0ID0gdGhpcy5sYXlvdXRzLmdldCgnc3RhbmRhcmQnKSE7XG4gICAgICBzZWxlY3RlZE5hbWUgPSAnc3RhbmRhcmQnO1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgIGBObyBzdWl0YWJsZSBsYXlvdXQgZm9yICR7YXJlYUNvdW50fSBhcmVhcywgdXNpbmcgc3RhbmRhcmQgbGF5b3V0YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRMYXlvdXQgPSBzZWxlY3RlZExheW91dDtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgIGBTZWxlY3RlZCAke3NlbGVjdGVkTmFtZX0gbGF5b3V0IGZvciBjb21wbGV4aXR5ICR7Y29tcGxleGl0eVNjb3JlfSBhbmQgJHthcmVhQ291bnR9IGFyZWFzYFxuICAgICk7XG5cbiAgICByZXR1cm4gc2VsZWN0ZWRMYXlvdXQ7XG4gIH1cblxuICAvKipcbiAgICogT3JnYW5pemUgd2lkZ2V0cyBiYXNlZCBvbiBhcmVhcyBhbmQgbGF5b3V0LlxuICAgKi9cbiAgb3JnYW5pemVXaWRnZXRzKGFyZWFzOiBBcmVhSW5mb1tdKTogV2lkZ2V0Q29uZmlnW10ge1xuICAgIGNvbnN0IHdpZGdldHM6IFdpZGdldENvbmZpZ1tdID0gW107XG5cbiAgICAvLyBTb3J0IGFyZWFzIGJ5IGVudGl0eSBjb3VudCBhbmQgcHJpb3JpdHlcbiAgICBjb25zdCBzb3J0ZWRBcmVhcyA9IHRoaXMuc29ydEFyZWFzQnlQcmlvcml0eShhcmVhcyk7XG5cbiAgICAvLyBDcmVhdGUgcm9vbSB3aWRnZXRzIGZvciBlYWNoIGFyZWFcbiAgICBmb3IgKGNvbnN0IGFyZWEgb2Ygc29ydGVkQXJlYXMpIHtcbiAgICAgIGlmIChhcmVhLmVudGl0eUNvdW50ID09PSAwKSBjb250aW51ZTtcblxuICAgICAgY29uc3Qgcm9vbVdpZGdldDogV2lkZ2V0Q29uZmlnID0ge1xuICAgICAgICB0eXBlOiAncm9vbScsXG4gICAgICAgIGVudGl0aWVzOiBhcmVhLmVudGl0aWVzLFxuICAgICAgICB0aXRsZTogYXJlYS5uYW1lLFxuICAgICAgfTtcbiAgICAgIHdpZGdldHMucHVzaChyb29tV2lkZ2V0KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZGV2aWNlIGdyb3VwIHdpZGdldHNcbiAgICBjb25zdCBkZXZpY2VHcm91cHMgPSB0aGlzLmNyZWF0ZURldmljZUdyb3VwcyhhcmVhcyk7XG4gICAgd2lkZ2V0cy5wdXNoKC4uLmRldmljZUdyb3Vwcyk7XG5cbiAgICAvLyBDcmVhdGUgY2xpbWF0ZSB3aWRnZXQgaWYgY2xpbWF0ZSBlbnRpdGllcyBleGlzdFxuICAgIGNvbnN0IGNsaW1hdGVXaWRnZXQgPSB0aGlzLmNyZWF0ZUNsaW1hdGVXaWRnZXQoYXJlYXMpO1xuICAgIGlmIChjbGltYXRlV2lkZ2V0KSB7XG4gICAgICB3aWRnZXRzLnB1c2goY2xpbWF0ZVdpZGdldCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHF1aWNrIGNvbnRyb2xzIHdpZGdldFxuICAgIGNvbnN0IHF1aWNrQ29udHJvbHMgPSB0aGlzLmNyZWF0ZVF1aWNrQ29udHJvbHNXaWRnZXQoYXJlYXMpO1xuICAgIGlmIChxdWlja0NvbnRyb2xzKSB7XG4gICAgICB3aWRnZXRzLnB1c2gocXVpY2tDb250cm9scyk7XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oYE9yZ2FuaXplZCAke3dpZGdldHMubGVuZ3RofSB3aWRnZXRzIGZyb20gJHthcmVhcy5sZW5ndGh9IGFyZWFzYCk7XG4gICAgcmV0dXJuIHdpZGdldHM7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHdpZGdldCBvdmVyZmxvdyBmb3IgY3VycmVudCBsYXlvdXQuXG4gICAqL1xuICBoYW5kbGVPdmVyZmxvdyhcbiAgICB3aWRnZXRzOiBXaWRnZXRDb25maWdbXSxcbiAgICBsYXlvdXQ6IEJhc2VMYXlvdXQsXG4gICAgYnJlYWtwb2ludDogQnJlYWtwb2ludFxuICApOiB7XG4gICAgdmlzaWJsZTogV2lkZ2V0Q29uZmlnW107XG4gICAgb3ZlcmZsb3c6IFdpZGdldENvbmZpZ1tdO1xuICB9IHtcbiAgICBjb25zdCBhcmVhcyA9IGxheW91dC5nZXRHcmlkQXJlYXMoYnJlYWtwb2ludCk7XG4gICAgY29uc3QgdmlzaWJsZTogV2lkZ2V0Q29uZmlnW10gPSBbXTtcbiAgICBjb25zdCBvdmVyZmxvdzogV2lkZ2V0Q29uZmlnW10gPSBbXTtcbiAgICBcbiAgICAvLyBHcm91cCB3aWRnZXRzIGJ5IHR5cGVcbiAgICBjb25zdCB3aWRnZXRzQnlUeXBlID0gbmV3IE1hcDxzdHJpbmcsIFdpZGdldENvbmZpZ1tdPigpO1xuICAgIGZvciAoY29uc3Qgd2lkZ2V0IG9mIHdpZGdldHMpIHtcbiAgICAgIGlmICghd2lkZ2V0c0J5VHlwZS5oYXMod2lkZ2V0LnR5cGUpKSB7XG4gICAgICAgIHdpZGdldHNCeVR5cGUuc2V0KHdpZGdldC50eXBlLCBbXSk7XG4gICAgICB9XG4gICAgICB3aWRnZXRzQnlUeXBlLmdldCh3aWRnZXQudHlwZSkhLnB1c2god2lkZ2V0KTtcbiAgICB9XG5cbiAgICAvLyBQbGFjZSB3aWRnZXRzIGFjY29yZGluZyB0byBhcmVhIGNvbnN0cmFpbnRzXG4gICAgZm9yIChjb25zdCBhcmVhIG9mIGFyZWFzKSB7XG4gICAgICBsZXQgcmVtYWluaW5nU2xvdHMgPSBhcmVhLm1heFdpZGdldHMgfHwgOTk5O1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHdpZGdldFR5cGUgb2YgYXJlYS53aWRnZXRUeXBlcyB8fCBbXSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWRnZXRzID0gd2lkZ2V0c0J5VHlwZS5nZXQod2lkZ2V0VHlwZSkgfHwgW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiBhdmFpbGFibGVXaWRnZXRzKSB7XG4gICAgICAgICAgaWYgKHJlbWFpbmluZ1Nsb3RzID4gMCAmJiAhdmlzaWJsZS5pbmNsdWRlcyh3aWRnZXQpKSB7XG4gICAgICAgICAgICB2aXNpYmxlLnB1c2god2lkZ2V0KTtcbiAgICAgICAgICAgIHJlbWFpbmluZ1Nsb3RzLS07XG4gICAgICAgICAgfSBlbHNlIGlmICghdmlzaWJsZS5pbmNsdWRlcyh3aWRnZXQpICYmICFvdmVyZmxvdy5pbmNsdWRlcyh3aWRnZXQpKSB7XG4gICAgICAgICAgICBvdmVyZmxvdy5wdXNoKHdpZGdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgTGF5b3V0IG92ZXJmbG93OiAke3Zpc2libGUubGVuZ3RofSB2aXNpYmxlLCAke292ZXJmbG93Lmxlbmd0aH0gb3ZlcmZsb3dgXG4gICAgKTtcblxuICAgIHJldHVybiB7IHZpc2libGUsIG92ZXJmbG93IH07XG4gIH1cblxuICAvKipcbiAgICogU29ydCBhcmVhcyBieSBwcmlvcml0eS5cbiAgICovXG4gIHByaXZhdGUgc29ydEFyZWFzQnlQcmlvcml0eShhcmVhczogQXJlYUluZm9bXSk6IEFyZWFJbmZvW10ge1xuICAgIHJldHVybiBbLi4uYXJlYXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIC8vIFByaW9yaXRpemUgbmFtZWQgYXJlYXMgb3ZlciBcInVuYXNzaWduZWRcIlxuICAgICAgaWYgKGEuYXJlYUlkID09PSAndW5hc3NpZ25lZCcpIHJldHVybiAxO1xuICAgICAgaWYgKGIuYXJlYUlkID09PSAndW5hc3NpZ25lZCcpIHJldHVybiAtMTtcblxuICAgICAgLy8gUHJpb3JpdGl6ZSBieSBlbnRpdHkgY291bnRcbiAgICAgIGlmIChhLmVudGl0eUNvdW50ICE9PSBiLmVudGl0eUNvdW50KSB7XG4gICAgICAgIHJldHVybiBiLmVudGl0eUNvdW50IC0gYS5lbnRpdHlDb3VudDtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlbiBieSBkZXZpY2UgY291bnRcbiAgICAgIHJldHVybiBiLmRldmljZUNvdW50IC0gYS5kZXZpY2VDb3VudDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgZGV2aWNlIGdyb3VwIHdpZGdldHMuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZURldmljZUdyb3VwcyhhcmVhczogQXJlYUluZm9bXSk6IFdpZGdldENvbmZpZ1tdIHtcbiAgICBjb25zdCBncm91cHM6IFdpZGdldENvbmZpZ1tdID0gW107XG4gICAgY29uc3QgYWxsRW50aXRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBDb2xsZWN0IGFsbCBlbnRpdGllc1xuICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgYWxsRW50aXRpZXMucHVzaCguLi5hcmVhLmVudGl0aWVzKTtcbiAgICB9XG5cbiAgICAvLyBHcm91cCBieSBkb21haW5cbiAgICBjb25zdCBlbnRpdHlCeURvbWFpbiA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcbiAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGFsbEVudGl0aWVzKSB7XG4gICAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgICAgaWYgKCFlbnRpdHlCeURvbWFpbi5oYXMoZG9tYWluKSkge1xuICAgICAgICBlbnRpdHlCeURvbWFpbi5zZXQoZG9tYWluLCBbXSk7XG4gICAgICB9XG4gICAgICBlbnRpdHlCeURvbWFpbi5nZXQoZG9tYWluKSEucHVzaChlbnRpdHlJZCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGdyb3VwcyBmb3Igc3BlY2lmaWMgZG9tYWluc1xuICAgIGNvbnN0IGdyb3VwYWJsZURvbWFpbnMgPSBbJ2xpZ2h0JywgJ3N3aXRjaCcsICdjb3ZlcicsICdmYW4nXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBncm91cGFibGVEb21haW5zKSB7XG4gICAgICBjb25zdCBlbnRpdGllcyA9IGVudGl0eUJ5RG9tYWluLmdldChkb21haW4pIHx8IFtdO1xuICAgICAgaWYgKGVudGl0aWVzLmxlbmd0aCA+PSAzKSB7ICAvLyBPbmx5IGNyZWF0ZSBncm91cCBpZiBlbm91Z2ggZW50aXRpZXNcbiAgICAgICAgZ3JvdXBzLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdkZXZpY2UtZ3JvdXAnLFxuICAgICAgICAgIGVudGl0aWVzOiBlbnRpdGllcyxcbiAgICAgICAgICB0aXRsZTogYEFsbCAke2RvbWFpbn1zYCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyb3VwcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgY2xpbWF0ZSB3aWRnZXQuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUNsaW1hdGVXaWRnZXQoYXJlYXM6IEFyZWFJbmZvW10pOiBXaWRnZXRDb25maWcgfCBudWxsIHtcbiAgICBjb25zdCBjbGltYXRlRW50aXRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgYXJlYS5lbnRpdGllcykge1xuICAgICAgICBpZiAoZW50aXR5SWQuc3RhcnRzV2l0aCgnY2xpbWF0ZS4nKSB8fFxuICAgICAgICAgICAgZW50aXR5SWQuaW5jbHVkZXMoJ3RlbXBlcmF0dXJlJykgfHxcbiAgICAgICAgICAgIGVudGl0eUlkLmluY2x1ZGVzKCdodW1pZGl0eScpKSB7XG4gICAgICAgICAgY2xpbWF0ZUVudGl0aWVzLnB1c2goZW50aXR5SWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaW1hdGVFbnRpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnY2xpbWF0ZScsXG4gICAgICBlbnRpdGllczogY2xpbWF0ZUVudGl0aWVzLFxuICAgICAgdGl0bGU6ICdDbGltYXRlIENvbnRyb2wnLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHF1aWNrIGNvbnRyb2xzIHdpZGdldC5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tDb250cm9sc1dpZGdldChhcmVhczogQXJlYUluZm9bXSk6IFdpZGdldENvbmZpZyB8IG51bGwge1xuICAgIGNvbnN0IHF1aWNrRW50aXRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBGaW5kIG1vc3QgaW1wb3J0YW50IGVudGl0aWVzIChzY2VuZXMsIG1haW4gbGlnaHRzLCBldGMuKVxuICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiBhcmVhLmVudGl0aWVzKSB7XG4gICAgICAgIGlmIChlbnRpdHlJZC5zdGFydHNXaXRoKCdzY2VuZS4nKSB8fFxuICAgICAgICAgICAgZW50aXR5SWQuaW5jbHVkZXMoJ21haW4nKSB8fFxuICAgICAgICAgICAgZW50aXR5SWQuaW5jbHVkZXMoJ2FsbCcpKSB7XG4gICAgICAgICAgcXVpY2tFbnRpdGllcy5wdXNoKGVudGl0eUlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExpbWl0IHRvIHJlYXNvbmFibGUgbnVtYmVyXG4gICAgY29uc3QgbGltaXRlZEVudGl0aWVzID0gcXVpY2tFbnRpdGllcy5zbGljZSgwLCA4KTtcblxuICAgIGlmIChsaW1pdGVkRW50aXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3F1aWNrLWNvbnRyb2xzJyxcbiAgICAgIGVudGl0aWVzOiBsaW1pdGVkRW50aXRpZXMsXG4gICAgICB0aXRsZTogJ1F1aWNrIENvbnRyb2xzJyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGxheW91dC5cbiAgICovXG4gIGdldEN1cnJlbnRMYXlvdXQoKTogQmFzZUxheW91dCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRMYXlvdXQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHdpZGdldCBwb3NpdGlvbnMgZm9yIGN1cnJlbnQgbGF5b3V0LlxuICAgKi9cbiAgY2FsY3VsYXRlUG9zaXRpb25zKFxuICAgIHdpZGdldHM6IFdpZGdldENvbmZpZ1tdLFxuICAgIGFyZWFDb3VudDogbnVtYmVyXG4gICk6IFdpZGdldFBvc2l0aW9uW10ge1xuICAgIGlmICghdGhpcy5jdXJyZW50TGF5b3V0KSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ05vIGxheW91dCBzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRMYXlvdXQuY2FsY3VsYXRlV2lkZ2V0UG9zaXRpb25zKHdpZGdldHMsIGFyZWFDb3VudCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbnRhaW5lciB3aWR0aCBhbmQgY2hlY2sgZm9yIGJyZWFrcG9pbnQgY2hhbmdlcy5cbiAgICovXG4gIHVwZGF0ZUNvbnRhaW5lcldpZHRoKHdpZHRoOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudExheW91dCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRMYXlvdXQudXBkYXRlQ29udGFpbmVyV2lkdGgod2lkdGgpO1xuICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/layouts/layout-engine.ts\n\n}");

/***/ }),

/***/ "./src/layouts/standard-layout.ts":
/*!****************************************!*\
  !*** ./src/layouts/standard-layout.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StandardLayout: () => (/* binding */ StandardLayout)\n/* harmony export */ });\n/* harmony import */ var _base_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-layout */ \"./src/layouts/base-layout.ts\");\n/**\n * Standard layout for 2-3 bedroom homes.\n * Optimized grid layout with room widgets in main area,\n * device groups in sidebar, climate in header, and quick controls in footer.\n */\n\nclass StandardLayout extends _base_layout__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    getLayoutConfig() {\n        return {\n            name: 'Standard',\n            description: 'Optimized layout for 2-3 bedroom homes',\n            minAreas: 2,\n            maxAreas: 5,\n            breakpoints: {\n                mobile: 768,\n                tablet: 1024,\n                desktop: 1440,\n                large: 1920,\n            },\n        };\n    }\n    generateGridTemplate(breakpoint) {\n        switch (breakpoint) {\n            case 'mobile':\n                // Single column layout\n                return `\n          \"header\" auto\n          \"main\" 1fr\n          \"sidebar\" auto\n          \"footer\" auto\n          / 1fr\n        `;\n            case 'tablet':\n                // Two column layout\n                return `\n          \"header header\" auto\n          \"main main\" 1fr\n          \"sidebar sidebar\" auto\n          \"footer footer\" auto\n          / 1fr 1fr\n        `;\n            case 'desktop':\n                // Three column layout with sidebar\n                return `\n          \"header header header\" auto\n          \"main main sidebar\" 1fr\n          \"footer footer footer\" auto\n          / 1fr 1fr minmax(280px, 0.5fr)\n        `;\n            case 'large':\n                // Three column layout with larger sidebar\n                return `\n          \"header header header\" auto\n          \"main main sidebar\" 1fr\n          \"footer footer footer\" auto\n          / 1fr 1fr minmax(320px, 0.6fr)\n        `;\n            default:\n                return this.generateGridTemplate('desktop');\n        }\n    }\n    getGridAreas(breakpoint) {\n        const areas = [\n            {\n                name: 'header',\n                gridArea: 'header',\n                minWidgets: 0,\n                maxWidgets: 2,\n                widgetTypes: ['climate', 'quick-controls'],\n            },\n            {\n                name: 'main',\n                gridArea: 'main',\n                minWidgets: 1,\n                maxWidgets: 6,\n                widgetTypes: ['room'],\n            },\n            {\n                name: 'sidebar',\n                gridArea: 'sidebar',\n                minWidgets: 0,\n                maxWidgets: 4,\n                widgetTypes: ['device-group', 'quick-controls'],\n            },\n            {\n                name: 'footer',\n                gridArea: 'footer',\n                minWidgets: 0,\n                maxWidgets: 1,\n                widgetTypes: ['quick-controls'],\n            },\n        ];\n        // Adjust for mobile\n        if (breakpoint === 'mobile') {\n            // On mobile, everything stacks vertically\n            areas.forEach(area => {\n                if (area.name === 'main') {\n                    area.maxWidgets = 4; // Limit room widgets on mobile\n                }\n            });\n        }\n        return areas;\n    }\n    calculateWidgetPositions(widgets, areaCount) {\n        const positions = [];\n        const sortedWidgets = this.sortWidgetsByPriority(widgets);\n        const widgetsByType = this.groupWidgetsByType(sortedWidgets);\n        // Place climate widgets in header\n        const climateWidgets = widgetsByType.get('climate') || [];\n        climateWidgets.slice(0, 1).forEach((widget, index) => {\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'header',\n                order: index,\n            });\n        });\n        // Place room widgets in main area\n        const roomWidgets = widgetsByType.get('room') || [];\n        const mainColumns = this.currentBreakpoint === 'mobile' ? 1 : 2;\n        const mainRows = Math.ceil(roomWidgets.length / mainColumns);\n        roomWidgets.slice(0, 6).forEach((widget, index) => {\n            const col = (index % mainColumns) + 1;\n            const row = Math.floor(index / mainColumns) + 1;\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'main',\n                gridColumn: this.currentBreakpoint === 'mobile'\n                    ? '1'\n                    : `${col} / span 1`,\n                gridRow: `${row} / span 1`,\n                order: index,\n            });\n        });\n        // Place device groups in sidebar\n        const deviceGroups = widgetsByType.get('device-group') || [];\n        deviceGroups.slice(0, 3).forEach((widget, index) => {\n            positions.push({\n                widgetId: this.generateWidgetId(widget),\n                gridArea: 'sidebar',\n                order: index,\n            });\n        });\n        // Place quick controls\n        const quickControls = widgetsByType.get('quick-controls') || [];\n        if (quickControls.length > 0) {\n            // First quick controls in footer\n            positions.push({\n                widgetId: this.generateWidgetId(quickControls[0]),\n                gridArea: 'footer',\n                order: 0,\n            });\n            // Additional quick controls in sidebar\n            quickControls.slice(1, 3).forEach((widget, index) => {\n                positions.push({\n                    widgetId: this.generateWidgetId(widget),\n                    gridArea: 'sidebar',\n                    order: deviceGroups.length + index,\n                });\n            });\n        }\n        return positions;\n    }\n    /**\n     * Generate a unique widget ID.\n     */\n    generateWidgetId(widget) {\n        // Use type and first entity as ID\n        const firstEntity = widget.entities[0] || 'unknown';\n        return `${widget.type}-${firstEntity.replace(/\\./g, '_')}`;\n    }\n    /**\n     * Get recommended widget configuration for area count.\n     */\n    getRecommendedWidgets(areaCount) {\n        // Base recommendations\n        let config = {\n            roomWidgets: Math.min(areaCount, 4),\n            deviceGroups: 2,\n            climateWidgets: 1,\n            quickControls: 1,\n        };\n        // Adjust based on area count\n        if (areaCount <= 2) {\n            // Small home: fewer widgets\n            config.roomWidgets = areaCount;\n            config.deviceGroups = 1;\n        }\n        else if (areaCount >= 4) {\n            // Larger home: more widgets\n            config.deviceGroups = 3;\n            config.quickControls = 2;\n        }\n        // Adjust for breakpoint\n        if (this.currentBreakpoint === 'mobile') {\n            config.roomWidgets = Math.min(config.roomWidgets, 3);\n            config.deviceGroups = Math.min(config.deviceGroups, 2);\n        }\n        return config;\n    }\n    /**\n     * Get CSS for specific grid areas.\n     */\n    getAreaStyles(breakpoint) {\n        const bp = breakpoint || this.currentBreakpoint;\n        const baseStyles = {\n            header: `\n        grid-area: header;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 16px;\n        align-items: center;\n      `,\n            main: `\n        grid-area: main;\n        display: grid;\n        gap: 16px;\n        align-content: start;\n      `,\n            sidebar: `\n        grid-area: sidebar;\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      `,\n            footer: `\n        grid-area: footer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      `,\n        };\n        // Adjust main grid for different breakpoints\n        if (bp === 'mobile') {\n            baseStyles.main += `\n        grid-template-columns: 1fr;\n      `;\n        }\n        else {\n            baseStyles.main += `\n        grid-template-columns: repeat(2, 1fr);\n      `;\n        }\n        return baseStyles;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNyRCxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6RCxDQUFDO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsYUFBYSxDQUFDLFVBQXVCO1FBQ25DLE1BQU0sRUFBRSxHQUFHLFVBQVUsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUM7UUFFaEQsTUFBTSxVQUFVLEdBQUc7WUFDakIsTUFBTSxFQUFFOzs7Ozs7T0FNUDtZQUNELElBQUksRUFBRTs7Ozs7T0FLTDtZQUNELE9BQU8sRUFBRTs7Ozs7T0FLUjtZQUNELE1BQU0sRUFBRTs7Ozs7T0FLUDtTQUNGLENBQUM7UUFFRiw2Q0FBNkM7UUFDN0MsSUFBSSxFQUFFLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDcEIsVUFBVSxDQUFDLElBQUksSUFBSTs7T0FFbEIsQ0FBQztRQUNKLENBQUM7YUFBTSxDQUFDO1lBQ04sVUFBVSxDQUFDLElBQUksSUFBSTs7T0FFbEIsQ0FBQztRQUNKLENBQUM7UUFFRCxPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL2xheW91dHMvc3RhbmRhcmQtbGF5b3V0LnRzP2U3YmEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdGFuZGFyZCBsYXlvdXQgZm9yIDItMyBiZWRyb29tIGhvbWVzLlxuICogT3B0aW1pemVkIGdyaWQgbGF5b3V0IHdpdGggcm9vbSB3aWRnZXRzIGluIG1haW4gYXJlYSxcbiAqIGRldmljZSBncm91cHMgaW4gc2lkZWJhciwgY2xpbWF0ZSBpbiBoZWFkZXIsIGFuZCBxdWljayBjb250cm9scyBpbiBmb290ZXIuXG4gKi9cblxuaW1wb3J0IHsgQmFzZUxheW91dCwgQnJlYWtwb2ludCwgR3JpZEFyZWEsIExheW91dENvbmZpZywgV2lkZ2V0UG9zaXRpb24gfSBmcm9tICcuL2Jhc2UtbGF5b3V0JztcbmltcG9ydCB7IFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgU3RhbmRhcmRMYXlvdXQgZXh0ZW5kcyBCYXNlTGF5b3V0IHtcbiAgcHJvdGVjdGVkIGdldExheW91dENvbmZpZygpOiBMYXlvdXRDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnU3RhbmRhcmQnLFxuICAgICAgZGVzY3JpcHRpb246ICdPcHRpbWl6ZWQgbGF5b3V0IGZvciAyLTMgYmVkcm9vbSBob21lcycsXG4gICAgICBtaW5BcmVhczogMixcbiAgICAgIG1heEFyZWFzOiA1LFxuICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgbW9iaWxlOiA3NjgsXG4gICAgICAgIHRhYmxldDogMTAyNCxcbiAgICAgICAgZGVza3RvcDogMTQ0MCxcbiAgICAgICAgbGFyZ2U6IDE5MjAsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBnZW5lcmF0ZUdyaWRUZW1wbGF0ZShicmVha3BvaW50OiBCcmVha3BvaW50KTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKGJyZWFrcG9pbnQpIHtcbiAgICAgIGNhc2UgJ21vYmlsZSc6XG4gICAgICAgIC8vIFNpbmdsZSBjb2x1bW4gbGF5b3V0XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgXCJoZWFkZXJcIiBhdXRvXG4gICAgICAgICAgXCJtYWluXCIgMWZyXG4gICAgICAgICAgXCJzaWRlYmFyXCIgYXV0b1xuICAgICAgICAgIFwiZm9vdGVyXCIgYXV0b1xuICAgICAgICAgIC8gMWZyXG4gICAgICAgIGA7XG4gICAgICBcbiAgICAgIGNhc2UgJ3RhYmxldCc6XG4gICAgICAgIC8vIFR3byBjb2x1bW4gbGF5b3V0XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgXCJoZWFkZXIgaGVhZGVyXCIgYXV0b1xuICAgICAgICAgIFwibWFpbiBtYWluXCIgMWZyXG4gICAgICAgICAgXCJzaWRlYmFyIHNpZGViYXJcIiBhdXRvXG4gICAgICAgICAgXCJmb290ZXIgZm9vdGVyXCIgYXV0b1xuICAgICAgICAgIC8gMWZyIDFmclxuICAgICAgICBgO1xuICAgICAgXG4gICAgICBjYXNlICdkZXNrdG9wJzpcbiAgICAgICAgLy8gVGhyZWUgY29sdW1uIGxheW91dCB3aXRoIHNpZGViYXJcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICBcImhlYWRlciBoZWFkZXIgaGVhZGVyXCIgYXV0b1xuICAgICAgICAgIFwibWFpbiBtYWluIHNpZGViYXJcIiAxZnJcbiAgICAgICAgICBcImZvb3RlciBmb290ZXIgZm9vdGVyXCIgYXV0b1xuICAgICAgICAgIC8gMWZyIDFmciBtaW5tYXgoMjgwcHgsIDAuNWZyKVxuICAgICAgICBgO1xuICAgICAgXG4gICAgICBjYXNlICdsYXJnZSc6XG4gICAgICAgIC8vIFRocmVlIGNvbHVtbiBsYXlvdXQgd2l0aCBsYXJnZXIgc2lkZWJhclxuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIFwiaGVhZGVyIGhlYWRlciBoZWFkZXJcIiBhdXRvXG4gICAgICAgICAgXCJtYWluIG1haW4gc2lkZWJhclwiIDFmclxuICAgICAgICAgIFwiZm9vdGVyIGZvb3RlciBmb290ZXJcIiBhdXRvXG4gICAgICAgICAgLyAxZnIgMWZyIG1pbm1heCgzMjBweCwgMC42ZnIpXG4gICAgICAgIGA7XG4gICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlR3JpZFRlbXBsYXRlKCdkZXNrdG9wJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0R3JpZEFyZWFzKGJyZWFrcG9pbnQ6IEJyZWFrcG9pbnQpOiBHcmlkQXJlYVtdIHtcbiAgICBjb25zdCBhcmVhczogR3JpZEFyZWFbXSA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2hlYWRlcicsXG4gICAgICAgIGdyaWRBcmVhOiAnaGVhZGVyJyxcbiAgICAgICAgbWluV2lkZ2V0czogMCxcbiAgICAgICAgbWF4V2lkZ2V0czogMixcbiAgICAgICAgd2lkZ2V0VHlwZXM6IFsnY2xpbWF0ZScsICdxdWljay1jb250cm9scyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ21haW4nLFxuICAgICAgICBncmlkQXJlYTogJ21haW4nLFxuICAgICAgICBtaW5XaWRnZXRzOiAxLFxuICAgICAgICBtYXhXaWRnZXRzOiA2LFxuICAgICAgICB3aWRnZXRUeXBlczogWydyb29tJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnc2lkZWJhcicsXG4gICAgICAgIGdyaWRBcmVhOiAnc2lkZWJhcicsXG4gICAgICAgIG1pbldpZGdldHM6IDAsXG4gICAgICAgIG1heFdpZGdldHM6IDQsXG4gICAgICAgIHdpZGdldFR5cGVzOiBbJ2RldmljZS1ncm91cCcsICdxdWljay1jb250cm9scyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2Zvb3RlcicsXG4gICAgICAgIGdyaWRBcmVhOiAnZm9vdGVyJyxcbiAgICAgICAgbWluV2lkZ2V0czogMCxcbiAgICAgICAgbWF4V2lkZ2V0czogMSxcbiAgICAgICAgd2lkZ2V0VHlwZXM6IFsncXVpY2stY29udHJvbHMnXSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIC8vIEFkanVzdCBmb3IgbW9iaWxlXG4gICAgaWYgKGJyZWFrcG9pbnQgPT09ICdtb2JpbGUnKSB7XG4gICAgICAvLyBPbiBtb2JpbGUsIGV2ZXJ5dGhpbmcgc3RhY2tzIHZlcnRpY2FsbHlcbiAgICAgIGFyZWFzLmZvckVhY2goYXJlYSA9PiB7XG4gICAgICAgIGlmIChhcmVhLm5hbWUgPT09ICdtYWluJykge1xuICAgICAgICAgIGFyZWEubWF4V2lkZ2V0cyA9IDQ7IC8vIExpbWl0IHJvb20gd2lkZ2V0cyBvbiBtb2JpbGVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZWFzO1xuICB9XG5cbiAgY2FsY3VsYXRlV2lkZ2V0UG9zaXRpb25zKFxuICAgIHdpZGdldHM6IFdpZGdldENvbmZpZ1tdLFxuICAgIGFyZWFDb3VudDogbnVtYmVyXG4gICk6IFdpZGdldFBvc2l0aW9uW10ge1xuICAgIGNvbnN0IHBvc2l0aW9uczogV2lkZ2V0UG9zaXRpb25bXSA9IFtdO1xuICAgIGNvbnN0IHNvcnRlZFdpZGdldHMgPSB0aGlzLnNvcnRXaWRnZXRzQnlQcmlvcml0eSh3aWRnZXRzKTtcbiAgICBjb25zdCB3aWRnZXRzQnlUeXBlID0gdGhpcy5ncm91cFdpZGdldHNCeVR5cGUoc29ydGVkV2lkZ2V0cyk7XG4gICAgXG4gICAgLy8gUGxhY2UgY2xpbWF0ZSB3aWRnZXRzIGluIGhlYWRlclxuICAgIGNvbnN0IGNsaW1hdGVXaWRnZXRzID0gd2lkZ2V0c0J5VHlwZS5nZXQoJ2NsaW1hdGUnKSB8fCBbXTtcbiAgICBjbGltYXRlV2lkZ2V0cy5zbGljZSgwLCAxKS5mb3JFYWNoKCh3aWRnZXQsIGluZGV4KSA9PiB7XG4gICAgICBwb3NpdGlvbnMucHVzaCh7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLmdlbmVyYXRlV2lkZ2V0SWQod2lkZ2V0KSxcbiAgICAgICAgZ3JpZEFyZWE6ICdoZWFkZXInLFxuICAgICAgICBvcmRlcjogaW5kZXgsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFBsYWNlIHJvb20gd2lkZ2V0cyBpbiBtYWluIGFyZWFcbiAgICBjb25zdCByb29tV2lkZ2V0cyA9IHdpZGdldHNCeVR5cGUuZ2V0KCdyb29tJykgfHwgW107XG4gICAgY29uc3QgbWFpbkNvbHVtbnMgPSB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID09PSAnbW9iaWxlJyA/IDEgOiAyO1xuICAgIGNvbnN0IG1haW5Sb3dzID0gTWF0aC5jZWlsKHJvb21XaWRnZXRzLmxlbmd0aCAvIG1haW5Db2x1bW5zKTtcbiAgICBcbiAgICByb29tV2lkZ2V0cy5zbGljZSgwLCA2KS5mb3JFYWNoKCh3aWRnZXQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjb2wgPSAoaW5kZXggJSBtYWluQ29sdW1ucykgKyAxO1xuICAgICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIG1haW5Db2x1bW5zKSArIDE7XG4gICAgICBcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMuZ2VuZXJhdGVXaWRnZXRJZCh3aWRnZXQpLFxuICAgICAgICBncmlkQXJlYTogJ21haW4nLFxuICAgICAgICBncmlkQ29sdW1uOiB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID09PSAnbW9iaWxlJyBcbiAgICAgICAgICA/ICcxJyBcbiAgICAgICAgICA6IGAke2NvbH0gLyBzcGFuIDFgLFxuICAgICAgICBncmlkUm93OiBgJHtyb3d9IC8gc3BhbiAxYCxcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBQbGFjZSBkZXZpY2UgZ3JvdXBzIGluIHNpZGViYXJcbiAgICBjb25zdCBkZXZpY2VHcm91cHMgPSB3aWRnZXRzQnlUeXBlLmdldCgnZGV2aWNlLWdyb3VwJykgfHwgW107XG4gICAgZGV2aWNlR3JvdXBzLnNsaWNlKDAsIDMpLmZvckVhY2goKHdpZGdldCwgaW5kZXgpID0+IHtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMuZ2VuZXJhdGVXaWRnZXRJZCh3aWRnZXQpLFxuICAgICAgICBncmlkQXJlYTogJ3NpZGViYXInLFxuICAgICAgICBvcmRlcjogaW5kZXgsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFBsYWNlIHF1aWNrIGNvbnRyb2xzXG4gICAgY29uc3QgcXVpY2tDb250cm9scyA9IHdpZGdldHNCeVR5cGUuZ2V0KCdxdWljay1jb250cm9scycpIHx8IFtdO1xuICAgIGlmIChxdWlja0NvbnRyb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEZpcnN0IHF1aWNrIGNvbnRyb2xzIGluIGZvb3RlclxuICAgICAgcG9zaXRpb25zLnB1c2goe1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5nZW5lcmF0ZVdpZGdldElkKHF1aWNrQ29udHJvbHNbMF0pLFxuICAgICAgICBncmlkQXJlYTogJ2Zvb3RlcicsXG4gICAgICAgIG9yZGVyOiAwLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFkZGl0aW9uYWwgcXVpY2sgY29udHJvbHMgaW4gc2lkZWJhclxuICAgICAgcXVpY2tDb250cm9scy5zbGljZSgxLCAzKS5mb3JFYWNoKCh3aWRnZXQsIGluZGV4KSA9PiB7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5nZW5lcmF0ZVdpZGdldElkKHdpZGdldCksXG4gICAgICAgICAgZ3JpZEFyZWE6ICdzaWRlYmFyJyxcbiAgICAgICAgICBvcmRlcjogZGV2aWNlR3JvdXBzLmxlbmd0aCArIGluZGV4LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgYSB1bmlxdWUgd2lkZ2V0IElELlxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVdpZGdldElkKHdpZGdldDogV2lkZ2V0Q29uZmlnKTogc3RyaW5nIHtcbiAgICAvLyBVc2UgdHlwZSBhbmQgZmlyc3QgZW50aXR5IGFzIElEXG4gICAgY29uc3QgZmlyc3RFbnRpdHkgPSB3aWRnZXQuZW50aXRpZXNbMF0gfHwgJ3Vua25vd24nO1xuICAgIHJldHVybiBgJHt3aWRnZXQudHlwZX0tJHtmaXJzdEVudGl0eS5yZXBsYWNlKC9cXC4vZywgJ18nKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNvbW1lbmRlZCB3aWRnZXQgY29uZmlndXJhdGlvbiBmb3IgYXJlYSBjb3VudC5cbiAgICovXG4gIGdldFJlY29tbWVuZGVkV2lkZ2V0cyhhcmVhQ291bnQ6IG51bWJlcik6IHtcbiAgICByb29tV2lkZ2V0czogbnVtYmVyO1xuICAgIGRldmljZUdyb3VwczogbnVtYmVyO1xuICAgIGNsaW1hdGVXaWRnZXRzOiBudW1iZXI7XG4gICAgcXVpY2tDb250cm9sczogbnVtYmVyO1xuICB9IHtcbiAgICAvLyBCYXNlIHJlY29tbWVuZGF0aW9uc1xuICAgIGxldCBjb25maWcgPSB7XG4gICAgICByb29tV2lkZ2V0czogTWF0aC5taW4oYXJlYUNvdW50LCA0KSxcbiAgICAgIGRldmljZUdyb3VwczogMixcbiAgICAgIGNsaW1hdGVXaWRnZXRzOiAxLFxuICAgICAgcXVpY2tDb250cm9sczogMSxcbiAgICB9O1xuXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIGFyZWEgY291bnRcbiAgICBpZiAoYXJlYUNvdW50IDw9IDIpIHtcbiAgICAgIC8vIFNtYWxsIGhvbWU6IGZld2VyIHdpZGdldHNcbiAgICAgIGNvbmZpZy5yb29tV2lkZ2V0cyA9IGFyZWFDb3VudDtcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSAxO1xuICAgIH0gZWxzZSBpZiAoYXJlYUNvdW50ID49IDQpIHtcbiAgICAgIC8vIExhcmdlciBob21lOiBtb3JlIHdpZGdldHNcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSAzO1xuICAgICAgY29uZmlnLnF1aWNrQ29udHJvbHMgPSAyO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBmb3IgYnJlYWtwb2ludFxuICAgIGlmICh0aGlzLmN1cnJlbnRCcmVha3BvaW50ID09PSAnbW9iaWxlJykge1xuICAgICAgY29uZmlnLnJvb21XaWRnZXRzID0gTWF0aC5taW4oY29uZmlnLnJvb21XaWRnZXRzLCAzKTtcbiAgICAgIGNvbmZpZy5kZXZpY2VHcm91cHMgPSBNYXRoLm1pbihjb25maWcuZGV2aWNlR3JvdXBzLCAyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDU1MgZm9yIHNwZWNpZmljIGdyaWQgYXJlYXMuXG4gICAqL1xuICBnZXRBcmVhU3R5bGVzKGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgY29uc3QgYnAgPSBicmVha3BvaW50IHx8IHRoaXMuY3VycmVudEJyZWFrcG9pbnQ7XG4gICAgXG4gICAgY29uc3QgYmFzZVN0eWxlcyA9IHtcbiAgICAgIGhlYWRlcjogYFxuICAgICAgICBncmlkLWFyZWE6IGhlYWRlcjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBgLFxuICAgICAgbWFpbjogYFxuICAgICAgICBncmlkLWFyZWE6IG1haW47XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgYWxpZ24tY29udGVudDogc3RhcnQ7XG4gICAgICBgLFxuICAgICAgc2lkZWJhcjogYFxuICAgICAgICBncmlkLWFyZWE6IHNpZGViYXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgIGAsXG4gICAgICBmb290ZXI6IGBcbiAgICAgICAgZ3JpZC1hcmVhOiBmb290ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgYCxcbiAgICB9O1xuXG4gICAgLy8gQWRqdXN0IG1haW4gZ3JpZCBmb3IgZGlmZmVyZW50IGJyZWFrcG9pbnRzXG4gICAgaWYgKGJwID09PSAnbW9iaWxlJykge1xuICAgICAgYmFzZVN0eWxlcy5tYWluICs9IGBcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICBgO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlU3R5bGVzLm1haW4gKz0gYFxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpO1xuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZVN0eWxlcztcbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/layouts/standard-layout.ts\n\n}");

/***/ }),

/***/ "./src/styles/animations.ts":
/*!**********************************!*\
  !*** ./src/styles/animations.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANIMATION_DURATION: () => (/* binding */ ANIMATION_DURATION),\n/* harmony export */   EASING: () => (/* binding */ EASING),\n/* harmony export */   animationStyles: () => (/* binding */ animationStyles),\n/* harmony export */   expandCollapseStyles: () => (/* binding */ expandCollapseStyles),\n/* harmony export */   fadeStyles: () => (/* binding */ fadeStyles),\n/* harmony export */   skeletonStyles: () => (/* binding */ skeletonStyles),\n/* harmony export */   slideStyles: () => (/* binding */ slideStyles),\n/* harmony export */   spinnerStyles: () => (/* binding */ spinnerStyles),\n/* harmony export */   touchStyles: () => (/* binding */ touchStyles)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/**\n * Animation constants and utilities for Dashview V2 widgets.\n * Provides consistent timing, easing, and keyframe animations.\n */\n\nconst ANIMATION_DURATION = {\n    fast: '150ms',\n    normal: '250ms',\n    slow: '350ms'\n};\nconst EASING = {\n    standard: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\n    decelerate: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n    accelerate: 'cubic-bezier(0.4, 0.0, 1, 1)',\n    sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)'\n};\n/**\n * Skeleton loading animation styles\n */\nconst skeletonStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes skeleton-loading {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n  }\n  \n  .skeleton {\n    background: linear-gradient(\n      90deg,\n      var(--card-background-color) 0%,\n      var(--divider-color) 50%,\n      var(--card-background-color) 100%\n    );\n    background-size: 200% 100%;\n    animation: skeleton-loading 1.5s ease-in-out infinite;\n    border-radius: 4px;\n  }\n  \n  .skeleton-text {\n    height: 16px;\n    margin: 4px 0;\n  }\n  \n  .skeleton-text.large {\n    height: 20px;\n  }\n  \n  .skeleton-text.small {\n    height: 12px;\n  }\n  \n  .skeleton-button {\n    height: 36px;\n    width: 100px;\n  }\n  \n  .skeleton-icon {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n  }\n  \n  .skeleton-card {\n    height: 120px;\n    width: 100%;\n    border-radius: 8px;\n  }\n`;\n/**\n * Smooth expand/collapse animation styles\n */\nconst expandCollapseStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes expand {\n    from {\n      max-height: 0;\n      opacity: 0;\n    }\n    to {\n      max-height: 600px;\n      opacity: 1;\n    }\n  }\n  \n  @keyframes collapse {\n    from {\n      max-height: 600px;\n      opacity: 1;\n    }\n    to {\n      max-height: 0;\n      opacity: 0;\n    }\n  }\n  \n  .expand-enter {\n    animation: expand 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n    overflow: hidden;\n  }\n  \n  .collapse-exit {\n    animation: collapse 250ms cubic-bezier(0.4, 0.0, 1, 1);\n    overflow: hidden;\n  }\n  \n  .content-expandable {\n    overflow: hidden;\n    transition: max-height 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .content-collapsed {\n    max-height: 0;\n  }\n  \n  .content-expanded {\n    max-height: 600px;\n  }\n`;\n/**\n * Touch interaction animations\n */\nconst touchStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes touch-feedback {\n    0% { transform: scale(1); }\n    50% { transform: scale(0.95); }\n    100% { transform: scale(1); }\n  }\n  \n  .touch-target {\n    min-height: 44px;\n    min-width: 44px;\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n    transition: transform 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n  \n  .touch-target:active {\n    animation: touch-feedback 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n  \n  .touch-target:hover {\n    background: var(--secondary-background-color);\n  }\n  \n  @media (prefers-reduced-motion: reduce) {\n    .touch-target:active {\n      animation: none;\n      transform: scale(0.98);\n    }\n  }\n`;\n/**\n * Loading spinner animation\n */\nconst spinnerStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n  \n  .spinner {\n    animation: spin 1s linear infinite;\n  }\n  \n  .loading-dots {\n    display: inline-flex;\n    gap: 4px;\n  }\n  \n  .loading-dots::after {\n    content: '';\n    animation: loading-dots 1.5s ease-in-out infinite;\n  }\n  \n  @keyframes loading-dots {\n    0%, 20% { content: ''; }\n    40% { content: '.'; }\n    60% { content: '..'; }\n    80%, 100% { content: '...'; }\n  }\n`;\n/**\n * Fade in/out animations\n */\nconst fadeStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes fade-in {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  @keyframes fade-out {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  \n  .fade-in {\n    animation: fade-in 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .fade-out {\n    animation: fade-out 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n  \n  .fade-transition {\n    transition: opacity 250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  }\n`;\n/**\n * Slide animations for mobile interactions\n */\nconst slideStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  @keyframes slide-in-right {\n    from { transform: translateX(100%); }\n    to { transform: translateX(0); }\n  }\n  \n  @keyframes slide-in-left {\n    from { transform: translateX(-100%); }\n    to { transform: translateX(0); }\n  }\n  \n  @keyframes slide-out-right {\n    from { transform: translateX(0); }\n    to { transform: translateX(100%); }\n  }\n  \n  @keyframes slide-out-left {\n    from { transform: translateX(0); }\n    to { transform: translateX(-100%); }\n  }\n  \n  .slide-in-right {\n    animation: slide-in-right 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .slide-in-left {\n    animation: slide-in-left 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n  }\n  \n  .slide-out-right {\n    animation: slide-out-right 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n  \n  .slide-out-left {\n    animation: slide-out-left 250ms cubic-bezier(0.4, 0.0, 1, 1);\n  }\n`;\n/**\n * Combined animation styles for easy import\n */\nconst animationStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  ${skeletonStyles}\n  ${expandCollapseStyles}\n  ${touchStyles}\n  ${spinnerStyles}\n  ${fadeStyles}\n  ${slideStyles}\n  \n  /* Respect user's motion preferences */\n  @media (prefers-reduced-motion: reduce) {\n    * {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n    }\n  }\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL2FuaW1hdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOzs7R0FHRztBQUV1QjtBQUVuQixNQUFNLGtCQUFrQixHQUFHO0lBQ2hDLElBQUksRUFBRSxPQUFPO0lBQ2IsTUFBTSxFQUFFLE9BQU87SUFDZixJQUFJLEVBQUUsT0FBTztDQUNkLENBQUM7QUFFSyxNQUFNLE1BQU0sR0FBRztJQUNwQixRQUFRLEVBQUUsZ0NBQWdDO0lBQzFDLFVBQVUsRUFBRSxnQ0FBZ0M7SUFDNUMsVUFBVSxFQUFFLDhCQUE4QjtJQUMxQyxLQUFLLEVBQUUsZ0NBQWdDO0NBQ3hDLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sY0FBYyxHQUFHLHdDQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQStDaEMsQ0FBQztBQUVGOztHQUVHO0FBQ0ksTUFBTSxvQkFBb0IsR0FBRyx3Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBNkN0QyxDQUFDO0FBRUY7O0dBRUc7QUFDSSxNQUFNLFdBQVcsR0FBRyx3Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E2QjdCLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sYUFBYSxHQUFHLHdDQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQTBCL0IsQ0FBQztBQUVGOztHQUVHO0FBQ0ksTUFBTSxVQUFVLEdBQUcsd0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FzQjVCLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sV0FBVyxHQUFHLHdDQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FvQzdCLENBQUM7QUFFRjs7R0FFRztBQUNJLE1BQU0sZUFBZSxHQUFHLHdDQUFHO0lBQzlCLGNBQWM7SUFDZCxvQkFBb0I7SUFDcEIsV0FBVztJQUNYLGFBQWE7SUFDYixVQUFVO0lBQ1YsV0FBVzs7Ozs7Ozs7OztDQVVkLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3N0eWxlcy9hbmltYXRpb25zLnRzP2EzNWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBbmltYXRpb24gY29uc3RhbnRzIGFuZCB1dGlsaXRpZXMgZm9yIERhc2h2aWV3IFYyIHdpZGdldHMuXG4gKiBQcm92aWRlcyBjb25zaXN0ZW50IHRpbWluZywgZWFzaW5nLCBhbmQga2V5ZnJhbWUgYW5pbWF0aW9ucy5cbiAqL1xuXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdsaXQnO1xuXG5leHBvcnQgY29uc3QgQU5JTUFUSU9OX0RVUkFUSU9OID0ge1xuICBmYXN0OiAnMTUwbXMnLFxuICBub3JtYWw6ICcyNTBtcycsXG4gIHNsb3c6ICczNTBtcydcbn07XG5cbmV4cG9ydCBjb25zdCBFQVNJTkcgPSB7XG4gIHN0YW5kYXJkOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpJyxcbiAgZGVjZWxlcmF0ZTogJ2N1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKScsXG4gIGFjY2VsZXJhdGU6ICdjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpJyxcbiAgc2hhcnA6ICdjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuNiwgMSknXG59O1xuXG4vKipcbiAqIFNrZWxldG9uIGxvYWRpbmcgYW5pbWF0aW9uIHN0eWxlc1xuICovXG5leHBvcnQgY29uc3Qgc2tlbGV0b25TdHlsZXMgPSBjc3NgXG4gIEBrZXlmcmFtZXMgc2tlbGV0b24tbG9hZGluZyB7XG4gICAgMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjAwJSAwOyB9XG4gICAgMTAwJSB7IGJhY2tncm91bmQtcG9zaXRpb246IDIwMCUgMDsgfVxuICB9XG4gIFxuICAuc2tlbGV0b24ge1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICAgIDkwZGVnLFxuICAgICAgdmFyKC0tY2FyZC1iYWNrZ3JvdW5kLWNvbG9yKSAwJSxcbiAgICAgIHZhcigtLWRpdmlkZXItY29sb3IpIDUwJSxcbiAgICAgIHZhcigtLWNhcmQtYmFja2dyb3VuZC1jb2xvcikgMTAwJVxuICAgICk7XG4gICAgYmFja2dyb3VuZC1zaXplOiAyMDAlIDEwMCU7XG4gICAgYW5pbWF0aW9uOiBza2VsZXRvbi1sb2FkaW5nIDEuNXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB9XG4gIFxuICAuc2tlbGV0b24tdGV4dCB7XG4gICAgaGVpZ2h0OiAxNnB4O1xuICAgIG1hcmdpbjogNHB4IDA7XG4gIH1cbiAgXG4gIC5za2VsZXRvbi10ZXh0LmxhcmdlIHtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gIH1cbiAgXG4gIC5za2VsZXRvbi10ZXh0LnNtYWxsIHtcbiAgICBoZWlnaHQ6IDEycHg7XG4gIH1cbiAgXG4gIC5za2VsZXRvbi1idXR0b24ge1xuICAgIGhlaWdodDogMzZweDtcbiAgICB3aWR0aDogMTAwcHg7XG4gIH1cbiAgXG4gIC5za2VsZXRvbi1pY29uIHtcbiAgICB3aWR0aDogMjRweDtcbiAgICBoZWlnaHQ6IDI0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICB9XG4gIFxuICAuc2tlbGV0b24tY2FyZCB7XG4gICAgaGVpZ2h0OiAxMjBweDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIH1cbmA7XG5cbi8qKlxuICogU21vb3RoIGV4cGFuZC9jb2xsYXBzZSBhbmltYXRpb24gc3R5bGVzXG4gKi9cbmV4cG9ydCBjb25zdCBleHBhbmRDb2xsYXBzZVN0eWxlcyA9IGNzc2BcbiAgQGtleWZyYW1lcyBleHBhbmQge1xuICAgIGZyb20ge1xuICAgICAgbWF4LWhlaWdodDogMDtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgY29sbGFwc2Uge1xuICAgIGZyb20ge1xuICAgICAgbWF4LWhlaWdodDogNjAwcHg7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICB0byB7XG4gICAgICBtYXgtaGVpZ2h0OiAwO1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG4gIH1cbiAgXG4gIC5leHBhbmQtZW50ZXIge1xuICAgIGFuaW1hdGlvbjogZXhwYW5kIDI1MG1zIGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG4gIFxuICAuY29sbGFwc2UtZXhpdCB7XG4gICAgYW5pbWF0aW9uOiBjb2xsYXBzZSAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cbiAgXG4gIC5jb250ZW50LWV4cGFuZGFibGUge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdHJhbnNpdGlvbjogbWF4LWhlaWdodCAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gIH1cbiAgXG4gIC5jb250ZW50LWNvbGxhcHNlZCB7XG4gICAgbWF4LWhlaWdodDogMDtcbiAgfVxuICBcbiAgLmNvbnRlbnQtZXhwYW5kZWQge1xuICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICB9XG5gO1xuXG4vKipcbiAqIFRvdWNoIGludGVyYWN0aW9uIGFuaW1hdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IHRvdWNoU3R5bGVzID0gY3NzYFxuICBAa2V5ZnJhbWVzIHRvdWNoLWZlZWRiYWNrIHtcbiAgICAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH1cbiAgICA1MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOyB9XG4gICAgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH1cbiAgfVxuICBcbiAgLnRvdWNoLXRhcmdldCB7XG4gICAgbWluLWhlaWdodDogNDRweDtcbiAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDE1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKTtcbiAgfVxuICBcbiAgLnRvdWNoLXRhcmdldDphY3RpdmUge1xuICAgIGFuaW1hdGlvbjogdG91Y2gtZmVlZGJhY2sgMTUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xuICB9XG4gIFxuICAudG91Y2gtdGFyZ2V0OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnktYmFja2dyb3VuZC1jb2xvcik7XG4gIH1cbiAgXG4gIEBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICAgLnRvdWNoLXRhcmdldDphY3RpdmUge1xuICAgICAgYW5pbWF0aW9uOiBub25lO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk4KTtcbiAgICB9XG4gIH1cbmA7XG5cbi8qKlxuICogTG9hZGluZyBzcGlubmVyIGFuaW1hdGlvblxuICovXG5leHBvcnQgY29uc3Qgc3Bpbm5lclN0eWxlcyA9IGNzc2BcbiAgQGtleWZyYW1lcyBzcGluIHtcbiAgICBmcm9tIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgfVxuICBcbiAgLnNwaW5uZXIge1xuICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gIH1cbiAgXG4gIC5sb2FkaW5nLWRvdHMge1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIGdhcDogNHB4O1xuICB9XG4gIFxuICAubG9hZGluZy1kb3RzOjphZnRlciB7XG4gICAgY29udGVudDogJyc7XG4gICAgYW5pbWF0aW9uOiBsb2FkaW5nLWRvdHMgMS41cyBlYXNlLWluLW91dCBpbmZpbml0ZTtcbiAgfVxuICBcbiAgQGtleWZyYW1lcyBsb2FkaW5nLWRvdHMge1xuICAgIDAlLCAyMCUgeyBjb250ZW50OiAnJzsgfVxuICAgIDQwJSB7IGNvbnRlbnQ6ICcuJzsgfVxuICAgIDYwJSB7IGNvbnRlbnQ6ICcuLic7IH1cbiAgICA4MCUsIDEwMCUgeyBjb250ZW50OiAnLi4uJzsgfVxuICB9XG5gO1xuXG4vKipcbiAqIEZhZGUgaW4vb3V0IGFuaW1hdGlvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IGZhZGVTdHlsZXMgPSBjc3NgXG4gIEBrZXlmcmFtZXMgZmFkZS1pbiB7XG4gICAgZnJvbSB7IG9wYWNpdHk6IDA7IH1cbiAgICB0byB7IG9wYWNpdHk6IDE7IH1cbiAgfVxuICBcbiAgQGtleWZyYW1lcyBmYWRlLW91dCB7XG4gICAgZnJvbSB7IG9wYWNpdHk6IDE7IH1cbiAgICB0byB7IG9wYWNpdHk6IDA7IH1cbiAgfVxuICBcbiAgLmZhZGUtaW4ge1xuICAgIGFuaW1hdGlvbjogZmFkZS1pbiAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gIH1cbiAgXG4gIC5mYWRlLW91dCB7XG4gICAgYW5pbWF0aW9uOiBmYWRlLW91dCAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpO1xuICB9XG4gIFxuICAuZmFkZS10cmFuc2l0aW9uIHtcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDI1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKTtcbiAgfVxuYDtcblxuLyoqXG4gKiBTbGlkZSBhbmltYXRpb25zIGZvciBtb2JpbGUgaW50ZXJhY3Rpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBzbGlkZVN0eWxlcyA9IGNzc2BcbiAgQGtleWZyYW1lcyBzbGlkZS1pbi1yaWdodCB7XG4gICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsgfVxuICAgIHRvIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOyB9XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgc2xpZGUtaW4tbGVmdCB7XG4gICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfVxuICB9XG4gIFxuICBAa2V5ZnJhbWVzIHNsaWRlLW91dC1yaWdodCB7XG4gICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfVxuICAgIHRvIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMCUpOyB9XG4gIH1cbiAgXG4gIEBrZXlmcmFtZXMgc2xpZGUtb3V0LWxlZnQge1xuICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSk7IH1cbiAgfVxuICBcbiAgLnNsaWRlLWluLXJpZ2h0IHtcbiAgICBhbmltYXRpb246IHNsaWRlLWluLXJpZ2h0IDI1MG1zIGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKTtcbiAgfVxuICBcbiAgLnNsaWRlLWluLWxlZnQge1xuICAgIGFuaW1hdGlvbjogc2xpZGUtaW4tbGVmdCAyNTBtcyBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSk7XG4gIH1cbiAgXG4gIC5zbGlkZS1vdXQtcmlnaHQge1xuICAgIGFuaW1hdGlvbjogc2xpZGUtb3V0LXJpZ2h0IDI1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMSwgMSk7XG4gIH1cbiAgXG4gIC5zbGlkZS1vdXQtbGVmdCB7XG4gICAgYW5pbWF0aW9uOiBzbGlkZS1vdXQtbGVmdCAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDEsIDEpO1xuICB9XG5gO1xuXG4vKipcbiAqIENvbWJpbmVkIGFuaW1hdGlvbiBzdHlsZXMgZm9yIGVhc3kgaW1wb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBhbmltYXRpb25TdHlsZXMgPSBjc3NgXG4gICR7c2tlbGV0b25TdHlsZXN9XG4gICR7ZXhwYW5kQ29sbGFwc2VTdHlsZXN9XG4gICR7dG91Y2hTdHlsZXN9XG4gICR7c3Bpbm5lclN0eWxlc31cbiAgJHtmYWRlU3R5bGVzfVxuICAke3NsaWRlU3R5bGVzfVxuICBcbiAgLyogUmVzcGVjdCB1c2VyJ3MgbW90aW9uIHByZWZlcmVuY2VzICovXG4gIEBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKSB7XG4gICAgKiB7XG4gICAgICBhbmltYXRpb24tZHVyYXRpb246IDAuMDFtcyAhaW1wb3J0YW50O1xuICAgICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogMSAhaW1wb3J0YW50O1xuICAgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMC4wMW1zICFpbXBvcnRhbnQ7XG4gICAgfVxuICB9XG5gOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/styles/animations.ts\n\n}");

/***/ }),

/***/ "./src/styles/theme.ts":
/*!*****************************!*\
  !*** ./src/styles/theme.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dashviewStyles: () => (/* binding */ dashviewStyles),\n/* harmony export */   dashviewTheme: () => (/* binding */ dashviewTheme)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n\nconst dashviewTheme = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  :host {\n    --dashview-primary-color: var(--primary-color);\n    --dashview-primary-text-color: var(--primary-text-color);\n    --dashview-secondary-text-color: var(--secondary-text-color);\n    --dashview-disabled-text-color: var(--disabled-text-color);\n    --dashview-divider-color: var(--divider-color);\n    --dashview-error-color: var(--error-color);\n    --dashview-success-color: var(--success-color);\n    --dashview-warning-color: var(--warning-color);\n    --dashview-info-color: var(--info-color);\n    --dashview-background: var(--lovelace-background, var(--primary-background-color));\n    --dashview-card-background: var(--card-background-color);\n    --dashview-spacing-xs: 4px;\n    --dashview-spacing-sm: 8px;\n    --dashview-spacing-md: 16px;\n    --dashview-spacing-lg: 24px;\n    --dashview-spacing-xl: 32px;\n    --dashview-border-radius: var(--ha-card-border-radius, 12px);\n    --dashview-box-shadow: var(--ha-card-box-shadow, none);\n  }\n`;\nconst dashviewStyles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n  * {\n    box-sizing: border-box;\n  }\n\n  .dashview-container {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    background: var(--dashview-background);\n  }\n\n  .dashview-header {\n    padding: var(--dashview-spacing-lg);\n    background: var(--dashview-card-background);\n    border-bottom: 1px solid var(--dashview-divider-color);\n    box-shadow: var(--dashview-box-shadow);\n  }\n\n  .dashview-content {\n    flex: 1;\n    padding: var(--dashview-spacing-lg);\n    overflow-y: auto;\n  }\n\n  .dashview-card {\n    background: var(--dashview-card-background);\n    border-radius: var(--dashview-border-radius);\n    padding: var(--dashview-spacing-lg);\n    margin-bottom: var(--dashview-spacing-md);\n    box-shadow: var(--dashview-box-shadow);\n  }\n\n  .dashview-loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    color: var(--dashview-secondary-text-color);\n  }\n\n  .dashview-error {\n    color: var(--dashview-error-color);\n    padding: var(--dashview-spacing-md);\n    text-align: center;\n  }\n\n  @media (max-width: 768px) {\n    .dashview-header {\n      padding: var(--dashview-spacing-md);\n    }\n\n    .dashview-content {\n      padding: var(--dashview-spacing-md);\n    }\n  }\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL3RoZW1lLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQjtBQUVuQixNQUFNLGFBQWEsR0FBRyx3Q0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBcUIvQixDQUFDO0FBRUssTUFBTSxjQUFjLEdBQUcsd0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBd0RoQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy9zdHlsZXMvdGhlbWUudHM/OTRjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdsaXQnO1xuXG5leHBvcnQgY29uc3QgZGFzaHZpZXdUaGVtZSA9IGNzc2BcbiAgOmhvc3Qge1xuICAgIC0tZGFzaHZpZXctcHJpbWFyeS1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgLS1kYXNodmlldy1wcmltYXJ5LXRleHQtY29sb3I6IHZhcigtLXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgLS1kYXNodmlldy1zZWNvbmRhcnktdGV4dC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgIC0tZGFzaHZpZXctZGlzYWJsZWQtdGV4dC1jb2xvcjogdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcik7XG4gICAgLS1kYXNodmlldy1kaXZpZGVyLWNvbG9yOiB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LWVycm9yLWNvbG9yOiB2YXIoLS1lcnJvci1jb2xvcik7XG4gICAgLS1kYXNodmlldy1zdWNjZXNzLWNvbG9yOiB2YXIoLS1zdWNjZXNzLWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LXdhcm5pbmctY29sb3I6IHZhcigtLXdhcm5pbmctY29sb3IpO1xuICAgIC0tZGFzaHZpZXctaW5mby1jb2xvcjogdmFyKC0taW5mby1jb2xvcik7XG4gICAgLS1kYXNodmlldy1iYWNrZ3JvdW5kOiB2YXIoLS1sb3ZlbGFjZS1iYWNrZ3JvdW5kLCB2YXIoLS1wcmltYXJ5LWJhY2tncm91bmQtY29sb3IpKTtcbiAgICAtLWRhc2h2aWV3LWNhcmQtYmFja2dyb3VuZDogdmFyKC0tY2FyZC1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAtLWRhc2h2aWV3LXNwYWNpbmcteHM6IDRweDtcbiAgICAtLWRhc2h2aWV3LXNwYWNpbmctc206IDhweDtcbiAgICAtLWRhc2h2aWV3LXNwYWNpbmctbWQ6IDE2cHg7XG4gICAgLS1kYXNodmlldy1zcGFjaW5nLWxnOiAyNHB4O1xuICAgIC0tZGFzaHZpZXctc3BhY2luZy14bDogMzJweDtcbiAgICAtLWRhc2h2aWV3LWJvcmRlci1yYWRpdXM6IHZhcigtLWhhLWNhcmQtYm9yZGVyLXJhZGl1cywgMTJweCk7XG4gICAgLS1kYXNodmlldy1ib3gtc2hhZG93OiB2YXIoLS1oYS1jYXJkLWJveC1zaGFkb3csIG5vbmUpO1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgZGFzaHZpZXdTdHlsZXMgPSBjc3NgXG4gICoge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIH1cblxuICAuZGFzaHZpZXctY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWRhc2h2aWV3LWJhY2tncm91bmQpO1xuICB9XG5cbiAgLmRhc2h2aWV3LWhlYWRlciB7XG4gICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1sZyk7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tZGFzaHZpZXctY2FyZC1iYWNrZ3JvdW5kKTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZGFzaHZpZXctZGl2aWRlci1jb2xvcik7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tZGFzaHZpZXctYm94LXNoYWRvdyk7XG4gIH1cblxuICAuZGFzaHZpZXctY29udGVudCB7XG4gICAgZmxleDogMTtcbiAgICBwYWRkaW5nOiB2YXIoLS1kYXNodmlldy1zcGFjaW5nLWxnKTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICB9XG5cbiAgLmRhc2h2aWV3LWNhcmQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWRhc2h2aWV3LWNhcmQtYmFja2dyb3VuZCk7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tZGFzaHZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1sZyk7XG4gICAgbWFyZ2luLWJvdHRvbTogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1tZCk7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tZGFzaHZpZXctYm94LXNoYWRvdyk7XG4gIH1cblxuICAuZGFzaHZpZXctbG9hZGluZyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICB9XG5cbiAgLmRhc2h2aWV3LWVycm9yIHtcbiAgICBjb2xvcjogdmFyKC0tZGFzaHZpZXctZXJyb3ItY29sb3IpO1xuICAgIHBhZGRpbmc6IHZhcigtLWRhc2h2aWV3LXNwYWNpbmctbWQpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxuXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgIC5kYXNodmlldy1oZWFkZXIge1xuICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1tZCk7XG4gICAgfVxuXG4gICAgLmRhc2h2aWV3LWNvbnRlbnQge1xuICAgICAgcGFkZGluZzogdmFyKC0tZGFzaHZpZXctc3BhY2luZy1tZCk7XG4gICAgfVxuICB9XG5gOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/styles/theme.ts\n\n}");

/***/ }),

/***/ "./src/utils/gestures.ts":
/*!*******************************!*\
  !*** ./src/utils/gestures.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GestureElement: () => (/* binding */ GestureElement),\n/* harmony export */   GestureHandler: () => (/* binding */ GestureHandler),\n/* harmony export */   HapticFeedback: () => (/* binding */ HapticFeedback),\n/* harmony export */   TouchTarget: () => (/* binding */ TouchTarget),\n/* harmony export */   addLongPressListener: () => (/* binding */ addLongPressListener),\n/* harmony export */   addSwipeListener: () => (/* binding */ addSwipeListener)\n/* harmony export */ });\n/**\n * Touch gesture utilities for Dashview V2.\n * Provides swipe detection, long press handling, and haptic feedback.\n */\nconst DEFAULT_OPTIONS = {\n    swipeThreshold: 50,\n    longPressDelay: 500,\n    velocityThreshold: 0.3,\n    preventScroll: false\n};\nclass GestureHandler {\n    constructor(element, options = {}) {\n        this.startX = 0;\n        this.startY = 0;\n        this.startTime = 0;\n        this.isLongPress = false;\n        this.isSwiping = false;\n        this.element = element;\n        this.options = { ...DEFAULT_OPTIONS, ...options };\n        this.bindEvents();\n    }\n    onSwipeDetected(callback) {\n        this.onSwipe = callback;\n    }\n    onLongPressDetected(callback) {\n        this.onLongPress = callback;\n    }\n    onTapDetected(callback) {\n        this.onTap = callback;\n    }\n    bindEvents() {\n        this.element.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: !this.options.preventScroll });\n        this.element.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: !this.options.preventScroll });\n        this.element.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: true });\n        this.element.addEventListener('touchcancel', this.handleTouchCancel.bind(this), { passive: true });\n    }\n    handleTouchStart(event) {\n        const touch = event.touches[0];\n        this.startX = touch.clientX;\n        this.startY = touch.clientY;\n        this.startTime = Date.now();\n        this.isLongPress = false;\n        this.isSwiping = false;\n        // Start long press timer\n        if (this.onLongPress) {\n            this.longPressTimeout = window.setTimeout(() => {\n                this.isLongPress = true;\n                this.onLongPress({\n                    element: this.element,\n                    x: this.startX,\n                    y: this.startY\n                });\n                this.triggerHapticFeedback('medium');\n            }, this.options.longPressDelay);\n        }\n    }\n    handleTouchMove(event) {\n        if (this.isLongPress)\n            return;\n        const touch = event.touches[0];\n        const deltaX = Math.abs(touch.clientX - this.startX);\n        const deltaY = Math.abs(touch.clientY - this.startY);\n        // Cancel long press if moving too much\n        if ((deltaX > 10 || deltaY > 10) && this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        // Detect swipe start\n        if (!this.isSwiping && (deltaX > this.options.swipeThreshold || deltaY > this.options.swipeThreshold)) {\n            this.isSwiping = true;\n            if (this.options.preventScroll) {\n                event.preventDefault();\n            }\n        }\n    }\n    handleTouchEnd(event) {\n        const touch = event.changedTouches[0];\n        const endTime = Date.now();\n        const deltaX = touch.clientX - this.startX;\n        const deltaY = touch.clientY - this.startY;\n        const duration = endTime - this.startTime;\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        // Clear long press timer\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        if (this.isLongPress) {\n            // Long press already handled\n            return;\n        }\n        if (this.isSwiping && distance >= this.options.swipeThreshold) {\n            // Handle swipe\n            const velocity = distance / duration;\n            if (velocity >= this.options.velocityThreshold) {\n                const direction = this.getSwipeDirection(deltaX, deltaY);\n                if (this.onSwipe) {\n                    this.onSwipe({\n                        direction,\n                        distance,\n                        velocity,\n                        element: this.element\n                    });\n                }\n                this.triggerHapticFeedback('light');\n            }\n        }\n        else if (!this.isSwiping && duration < 200) {\n            // Handle tap\n            if (this.onTap) {\n                this.onTap(event);\n            }\n        }\n        this.reset();\n    }\n    handleTouchCancel() {\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n            this.longPressTimeout = undefined;\n        }\n        this.reset();\n    }\n    getSwipeDirection(deltaX, deltaY) {\n        const absDeltaX = Math.abs(deltaX);\n        const absDeltaY = Math.abs(deltaY);\n        if (absDeltaX > absDeltaY) {\n            return deltaX > 0 ? 'right' : 'left';\n        }\n        else {\n            return deltaY > 0 ? 'down' : 'up';\n        }\n    }\n    reset() {\n        this.isLongPress = false;\n        this.isSwiping = false;\n    }\n    triggerHapticFeedback(intensity) {\n        if ('vibrate' in navigator) {\n            const patterns = {\n                light: 10,\n                medium: 20,\n                heavy: 50\n            };\n            navigator.vibrate(patterns[intensity]);\n        }\n    }\n    destroy() {\n        if (this.longPressTimeout) {\n            clearTimeout(this.longPressTimeout);\n        }\n        this.element.removeEventListener('touchstart', this.handleTouchStart.bind(this));\n        this.element.removeEventListener('touchmove', this.handleTouchMove.bind(this));\n        this.element.removeEventListener('touchend', this.handleTouchEnd.bind(this));\n        this.element.removeEventListener('touchcancel', this.handleTouchCancel.bind(this));\n    }\n}\n/**\n * Simple swipe detection for elements\n */\nfunction addSwipeListener(element, callback, options) {\n    const handler = new GestureHandler(element, options);\n    handler.onSwipeDetected(callback);\n    return () => handler.destroy();\n}\n/**\n * Simple long press detection for elements\n */\nfunction addLongPressListener(element, callback, options) {\n    const handler = new GestureHandler(element, options);\n    handler.onLongPressDetected(callback);\n    return () => handler.destroy();\n}\n/**\n * Haptic feedback utilities\n */\nclass HapticFeedback {\n    static isSupported() {\n        return 'vibrate' in navigator;\n    }\n    static light() {\n        if (this.isSupported()) {\n            navigator.vibrate(10);\n        }\n    }\n    static medium() {\n        if (this.isSupported()) {\n            navigator.vibrate(20);\n        }\n    }\n    static heavy() {\n        if (this.isSupported()) {\n            navigator.vibrate([50, 50, 50]);\n        }\n    }\n    static success() {\n        if (this.isSupported()) {\n            navigator.vibrate([10, 100, 10]);\n        }\n    }\n    static error() {\n        if (this.isSupported()) {\n            navigator.vibrate([100, 50, 100, 50, 100]);\n        }\n    }\n    static selection() {\n        if (this.isSupported()) {\n            navigator.vibrate(5);\n        }\n    }\n    static custom(pattern) {\n        if (this.isSupported()) {\n            navigator.vibrate(pattern);\n        }\n    }\n}\n/**\n * Touch target size helpers\n */\nconst TouchTarget = {\n    /**\n     * Minimum touch target size (44px) as per WCAG guidelines\n     */\n    MIN_SIZE: 44,\n    /**\n     * Check if an element meets minimum touch target requirements\n     */\n    meetsMinimumSize(element) {\n        const rect = element.getBoundingClientRect();\n        return rect.width >= this.MIN_SIZE && rect.height >= this.MIN_SIZE;\n    },\n    /**\n     * Add touch target padding to an element if needed\n     */\n    ensureMinimumSize(element) {\n        const rect = element.getBoundingClientRect();\n        if (rect.width < this.MIN_SIZE) {\n            const padding = (this.MIN_SIZE - rect.width) / 2;\n            element.style.paddingLeft = `${padding}px`;\n            element.style.paddingRight = `${padding}px`;\n        }\n        if (rect.height < this.MIN_SIZE) {\n            const padding = (this.MIN_SIZE - rect.height) / 2;\n            element.style.paddingTop = `${padding}px`;\n            element.style.paddingBottom = `${padding}px`;\n        }\n    }\n};\n/**\n * Gesture-enabled base class for Lit elements\n */\nclass GestureElement extends EventTarget {\n    enableGestures(element, options) {\n        this.gestureHandler = new GestureHandler(element, options);\n        this.gestureHandler.onSwipeDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-swipe', { detail: event }));\n        });\n        this.gestureHandler.onLongPressDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-longpress', { detail: event }));\n        });\n        this.gestureHandler.onTapDetected((event) => {\n            this.dispatchEvent(new CustomEvent('gesture-tap', { detail: event }));\n        });\n    }\n    disableGestures() {\n        if (this.gestureHandler) {\n            this.gestureHandler.destroy();\n            this.gestureHandler = undefined;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsQ0FBQyxDQUFDO1FBQzFFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2hELElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzlFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUMxQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksV0FBVyxDQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRVMsZUFBZTtRQUN2QixJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcsU0FBUyxDQUFDO1FBQ2xDLENBQUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3V0aWxzL2dlc3R1cmVzLnRzPzE3ZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUb3VjaCBnZXN0dXJlIHV0aWxpdGllcyBmb3IgRGFzaHZpZXcgVjIuXG4gKiBQcm92aWRlcyBzd2lwZSBkZXRlY3Rpb24sIGxvbmcgcHJlc3MgaGFuZGxpbmcsIGFuZCBoYXB0aWMgZmVlZGJhY2suXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBTd2lwZUV2ZW50IHtcbiAgZGlyZWN0aW9uOiAnbGVmdCcgfCAncmlnaHQnIHwgJ3VwJyB8ICdkb3duJztcbiAgZGlzdGFuY2U6IG51bWJlcjtcbiAgdmVsb2NpdHk6IG51bWJlcjtcbiAgZWxlbWVudDogRWxlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb25nUHJlc3NFdmVudCB7XG4gIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlc3R1cmVPcHRpb25zIHtcbiAgc3dpcGVUaHJlc2hvbGQ/OiBudW1iZXI7XG4gIGxvbmdQcmVzc0RlbGF5PzogbnVtYmVyO1xuICB2ZWxvY2l0eVRocmVzaG9sZD86IG51bWJlcjtcbiAgcHJldmVudFNjcm9sbD86IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogUmVxdWlyZWQ8R2VzdHVyZU9wdGlvbnM+ID0ge1xuICBzd2lwZVRocmVzaG9sZDogNTAsXG4gIGxvbmdQcmVzc0RlbGF5OiA1MDAsXG4gIHZlbG9jaXR5VGhyZXNob2xkOiAwLjMsXG4gIHByZXZlbnRTY3JvbGw6IGZhbHNlXG59O1xuXG5leHBvcnQgY2xhc3MgR2VzdHVyZUhhbmRsZXIge1xuICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8R2VzdHVyZU9wdGlvbnM+O1xuICBwcml2YXRlIHN0YXJ0WCA9IDA7XG4gIHByaXZhdGUgc3RhcnRZID0gMDtcbiAgcHJpdmF0ZSBzdGFydFRpbWUgPSAwO1xuICBwcml2YXRlIGxvbmdQcmVzc1RpbWVvdXQ/OiBudW1iZXI7XG4gIHByaXZhdGUgaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1N3aXBpbmcgPSBmYWxzZTtcblxuICBwcml2YXRlIG9uU3dpcGU/OiAoZXZlbnQ6IFN3aXBlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgb25Mb25nUHJlc3M/OiAoZXZlbnQ6IExvbmdQcmVzc0V2ZW50KSA9PiB2b2lkO1xuICBwcml2YXRlIG9uVGFwPzogKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnQsIG9wdGlvbnM6IEdlc3R1cmVPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uREVGQVVMVF9PUFRJT05TLCAuLi5vcHRpb25zIH07XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gIH1cblxuICBwdWJsaWMgb25Td2lwZURldGVjdGVkKGNhbGxiYWNrOiAoZXZlbnQ6IFN3aXBlRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLm9uU3dpcGUgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyBvbkxvbmdQcmVzc0RldGVjdGVkKGNhbGxiYWNrOiAoZXZlbnQ6IExvbmdQcmVzc0V2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5vbkxvbmdQcmVzcyA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcHVibGljIG9uVGFwRGV0ZWN0ZWQoY2FsbGJhY2s6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25UYXAgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHByaXZhdGUgYmluZEV2ZW50cygpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogIXRoaXMub3B0aW9ucy5wcmV2ZW50U2Nyb2xsIH0pO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogIXRoaXMub3B0aW9ucy5wcmV2ZW50U2Nyb2xsIH0pO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSBhcyBFdmVudExpc3RlbmVyLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5oYW5kbGVUb3VjaENhbmNlbC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlVG91Y2hTdGFydChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcbiAgICB0aGlzLnN0YXJ0WCA9IHRvdWNoLmNsaWVudFg7XG4gICAgdGhpcy5zdGFydFkgPSB0b3VjaC5jbGllbnRZO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmlzTG9uZ1ByZXNzID0gZmFsc2U7XG4gICAgdGhpcy5pc1N3aXBpbmcgPSBmYWxzZTtcblxuICAgIC8vIFN0YXJ0IGxvbmcgcHJlc3MgdGltZXJcbiAgICBpZiAodGhpcy5vbkxvbmdQcmVzcykge1xuICAgICAgdGhpcy5sb25nUHJlc3NUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmlzTG9uZ1ByZXNzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkxvbmdQcmVzcyEoe1xuICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICB4OiB0aGlzLnN0YXJ0WCxcbiAgICAgICAgICB5OiB0aGlzLnN0YXJ0WVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cmlnZ2VySGFwdGljRmVlZGJhY2soJ21lZGl1bScpO1xuICAgICAgfSwgdGhpcy5vcHRpb25zLmxvbmdQcmVzc0RlbGF5KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoTW92ZShldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzTG9uZ1ByZXNzKSByZXR1cm47XG5cbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XG4gICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnModG91Y2guY2xpZW50WCAtIHRoaXMuc3RhcnRYKTtcbiAgICBjb25zdCBkZWx0YVkgPSBNYXRoLmFicyh0b3VjaC5jbGllbnRZIC0gdGhpcy5zdGFydFkpO1xuXG4gICAgLy8gQ2FuY2VsIGxvbmcgcHJlc3MgaWYgbW92aW5nIHRvbyBtdWNoXG4gICAgaWYgKChkZWx0YVggPiAxMCB8fCBkZWx0YVkgPiAxMCkgJiYgdGhpcy5sb25nUHJlc3NUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NUaW1lb3V0KTtcbiAgICAgIHRoaXMubG9uZ1ByZXNzVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBEZXRlY3Qgc3dpcGUgc3RhcnRcbiAgICBpZiAoIXRoaXMuaXNTd2lwaW5nICYmIChkZWx0YVggPiB0aGlzLm9wdGlvbnMuc3dpcGVUaHJlc2hvbGQgfHwgZGVsdGFZID4gdGhpcy5vcHRpb25zLnN3aXBlVGhyZXNob2xkKSkge1xuICAgICAgdGhpcy5pc1N3aXBpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnRTY3JvbGwpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoRW5kKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkZWx0YVggPSB0b3VjaC5jbGllbnRYIC0gdGhpcy5zdGFydFg7XG4gICAgY29uc3QgZGVsdGFZID0gdG91Y2guY2xpZW50WSAtIHRoaXMuc3RhcnRZO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSk7XG5cbiAgICAvLyBDbGVhciBsb25nIHByZXNzIHRpbWVyXG4gICAgaWYgKHRoaXMubG9uZ1ByZXNzVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzVGltZW91dCk7XG4gICAgICB0aGlzLmxvbmdQcmVzc1RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNMb25nUHJlc3MpIHtcbiAgICAgIC8vIExvbmcgcHJlc3MgYWxyZWFkeSBoYW5kbGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNTd2lwaW5nICYmIGRpc3RhbmNlID49IHRoaXMub3B0aW9ucy5zd2lwZVRocmVzaG9sZCkge1xuICAgICAgLy8gSGFuZGxlIHN3aXBlXG4gICAgICBjb25zdCB2ZWxvY2l0eSA9IGRpc3RhbmNlIC8gZHVyYXRpb247XG4gICAgICBcbiAgICAgIGlmICh2ZWxvY2l0eSA+PSB0aGlzLm9wdGlvbnMudmVsb2NpdHlUaHJlc2hvbGQpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5nZXRTd2lwZURpcmVjdGlvbihkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5vblN3aXBlKSB7XG4gICAgICAgICAgdGhpcy5vblN3aXBlKHtcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgIGRpc3RhbmNlLFxuICAgICAgICAgICAgdmVsb2NpdHksXG4gICAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlckhhcHRpY0ZlZWRiYWNrKCdsaWdodCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTd2lwaW5nICYmIGR1cmF0aW9uIDwgMjAwKSB7XG4gICAgICAvLyBIYW5kbGUgdGFwXG4gICAgICBpZiAodGhpcy5vblRhcCkge1xuICAgICAgICB0aGlzLm9uVGFwKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRvdWNoQ2FuY2VsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgdGhpcy5sb25nUHJlc3NUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwcml2YXRlIGdldFN3aXBlRGlyZWN0aW9uKGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcik6ICdsZWZ0JyB8ICdyaWdodCcgfCAndXAnIHwgJ2Rvd24nIHtcbiAgICBjb25zdCBhYnNEZWx0YVggPSBNYXRoLmFicyhkZWx0YVgpO1xuICAgIGNvbnN0IGFic0RlbHRhWSA9IE1hdGguYWJzKGRlbHRhWSk7XG5cbiAgICBpZiAoYWJzRGVsdGFYID4gYWJzRGVsdGFZKSB7XG4gICAgICByZXR1cm4gZGVsdGFYID4gMCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWx0YVkgPiAwID8gJ2Rvd24nIDogJ3VwJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaXNMb25nUHJlc3MgPSBmYWxzZTtcbiAgICB0aGlzLmlzU3dpcGluZyA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VySGFwdGljRmVlZGJhY2soaW50ZW5zaXR5OiAnbGlnaHQnIHwgJ21lZGl1bScgfCAnaGVhdnknKTogdm9pZCB7XG4gICAgaWYgKCd2aWJyYXRlJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgIGNvbnN0IHBhdHRlcm5zID0ge1xuICAgICAgICBsaWdodDogMTAsXG4gICAgICAgIG1lZGl1bTogMjAsXG4gICAgICAgIGhlYXZ5OiA1MFxuICAgICAgfTtcbiAgICAgIG5hdmlnYXRvci52aWJyYXRlKHBhdHRlcm5zW2ludGVuc2l0eV0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc1RpbWVvdXQpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIpO1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpIGFzIEV2ZW50TGlzdGVuZXIpO1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSBhcyBFdmVudExpc3RlbmVyKTtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLmhhbmRsZVRvdWNoQ2FuY2VsLmJpbmQodGhpcykgYXMgRXZlbnRMaXN0ZW5lcik7XG4gIH1cbn1cblxuLyoqXG4gKiBTaW1wbGUgc3dpcGUgZGV0ZWN0aW9uIGZvciBlbGVtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkU3dpcGVMaXN0ZW5lcihcbiAgZWxlbWVudDogRWxlbWVudCxcbiAgY2FsbGJhY2s6IChldmVudDogU3dpcGVFdmVudCkgPT4gdm9pZCxcbiAgb3B0aW9ucz86IEdlc3R1cmVPcHRpb25zXG4pOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgaGFuZGxlciA9IG5ldyBHZXN0dXJlSGFuZGxlcihlbGVtZW50LCBvcHRpb25zKTtcbiAgaGFuZGxlci5vblN3aXBlRGV0ZWN0ZWQoY2FsbGJhY2spO1xuICBcbiAgcmV0dXJuICgpID0+IGhhbmRsZXIuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIFNpbXBsZSBsb25nIHByZXNzIGRldGVjdGlvbiBmb3IgZWxlbWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExvbmdQcmVzc0xpc3RlbmVyKFxuICBlbGVtZW50OiBFbGVtZW50LFxuICBjYWxsYmFjazogKGV2ZW50OiBMb25nUHJlc3NFdmVudCkgPT4gdm9pZCxcbiAgb3B0aW9ucz86IEdlc3R1cmVPcHRpb25zXG4pOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgaGFuZGxlciA9IG5ldyBHZXN0dXJlSGFuZGxlcihlbGVtZW50LCBvcHRpb25zKTtcbiAgaGFuZGxlci5vbkxvbmdQcmVzc0RldGVjdGVkKGNhbGxiYWNrKTtcbiAgXG4gIHJldHVybiAoKSA9PiBoYW5kbGVyLmRlc3Ryb3koKTtcbn1cblxuLyoqXG4gKiBIYXB0aWMgZmVlZGJhY2sgdXRpbGl0aWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBIYXB0aWNGZWVkYmFjayB7XG4gIHByaXZhdGUgc3RhdGljIGlzU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAndmlicmF0ZScgaW4gbmF2aWdhdG9yO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZSgxMCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBtZWRpdW0oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoMjApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgaGVhdnkoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoWzUwLCA1MCwgNTBdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHN1Y2Nlc3MoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoWzEwLCAxMDAsIDEwXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBlcnJvcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZShbMTAwLCA1MCwgMTAwLCA1MCwgMTAwXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBzZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoNSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjdXN0b20ocGF0dGVybjogbnVtYmVyIHwgbnVtYmVyW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICBuYXZpZ2F0b3IudmlicmF0ZShwYXR0ZXJuKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUb3VjaCB0YXJnZXQgc2l6ZSBoZWxwZXJzXG4gKi9cbmV4cG9ydCBjb25zdCBUb3VjaFRhcmdldCA9IHtcbiAgLyoqXG4gICAqIE1pbmltdW0gdG91Y2ggdGFyZ2V0IHNpemUgKDQ0cHgpIGFzIHBlciBXQ0FHIGd1aWRlbGluZXNcbiAgICovXG4gIE1JTl9TSVpFOiA0NCxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBtZWV0cyBtaW5pbXVtIHRvdWNoIHRhcmdldCByZXF1aXJlbWVudHNcbiAgICovXG4gIG1lZXRzTWluaW11bVNpemUoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiByZWN0LndpZHRoID49IHRoaXMuTUlOX1NJWkUgJiYgcmVjdC5oZWlnaHQgPj0gdGhpcy5NSU5fU0laRTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkIHRvdWNoIHRhcmdldCBwYWRkaW5nIHRvIGFuIGVsZW1lbnQgaWYgbmVlZGVkXG4gICAqL1xuICBlbnN1cmVNaW5pbXVtU2l6ZShlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIFxuICAgIGlmIChyZWN0LndpZHRoIDwgdGhpcy5NSU5fU0laRSkge1xuICAgICAgY29uc3QgcGFkZGluZyA9ICh0aGlzLk1JTl9TSVpFIC0gcmVjdC53aWR0aCkgLyAyO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtwYWRkaW5nfXB4YDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlY3QuaGVpZ2h0IDwgdGhpcy5NSU5fU0laRSkge1xuICAgICAgY29uc3QgcGFkZGluZyA9ICh0aGlzLk1JTl9TSVpFIC0gcmVjdC5oZWlnaHQpIC8gMjtcbiAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7cGFkZGluZ31weGA7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdlc3R1cmUtZW5hYmxlZCBiYXNlIGNsYXNzIGZvciBMaXQgZWxlbWVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEdlc3R1cmVFbGVtZW50IGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICBwcml2YXRlIGdlc3R1cmVIYW5kbGVyPzogR2VzdHVyZUhhbmRsZXI7XG5cbiAgcHJvdGVjdGVkIGVuYWJsZUdlc3R1cmVzKGVsZW1lbnQ6IEVsZW1lbnQsIG9wdGlvbnM/OiBHZXN0dXJlT3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuZ2VzdHVyZUhhbmRsZXIgPSBuZXcgR2VzdHVyZUhhbmRsZXIoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgXG4gICAgdGhpcy5nZXN0dXJlSGFuZGxlci5vblN3aXBlRGV0ZWN0ZWQoKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdnZXN0dXJlLXN3aXBlJywgeyBkZXRhaWw6IGV2ZW50IH0pKTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmdlc3R1cmVIYW5kbGVyLm9uTG9uZ1ByZXNzRGV0ZWN0ZWQoKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdnZXN0dXJlLWxvbmdwcmVzcycsIHsgZGV0YWlsOiBldmVudCB9KSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5nZXN0dXJlSGFuZGxlci5vblRhcERldGVjdGVkKChldmVudCkgPT4ge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZ2VzdHVyZS10YXAnLCB7IGRldGFpbDogZXZlbnQgfSkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRpc2FibGVHZXN0dXJlcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nZXN0dXJlSGFuZGxlcikge1xuICAgICAgdGhpcy5nZXN0dXJlSGFuZGxlci5kZXN0cm95KCk7XG4gICAgICB0aGlzLmdlc3R1cmVIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/gestures.ts\n\n}");

/***/ }),

/***/ "./src/utils/icons.ts":
/*!****************************!*\
  !*** ./src/utils/icons.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENTITY_ICONS: () => (/* binding */ ENTITY_ICONS),\n/* harmony export */   getEntityIcon: () => (/* binding */ getEntityIcon),\n/* harmony export */   getEntityIconColor: () => (/* binding */ getEntityIconColor),\n/* harmony export */   getMiniIcon: () => (/* binding */ getMiniIcon)\n/* harmony export */ });\n/**\n * Entity type to icon mapping utility.\n * Maps entity types and domains to Material Design Icons.\n */\nconst ENTITY_ICONS = {\n    // Lights\n    'light': 'mdi:lightbulb',\n    'light.ceiling': 'mdi:ceiling-light',\n    'light.floor': 'mdi:floor-lamp',\n    'light.desk': 'mdi:desk-lamp',\n    'light.strip': 'mdi:led-strip-variant',\n    'light.spot': 'mdi:spotlight-beam',\n    // Climate\n    'climate': 'mdi:thermostat',\n    'temperature': 'mdi:thermometer',\n    'humidity': 'mdi:water-percent',\n    'air_quality': 'mdi:air-filter',\n    // Security\n    'lock': 'mdi:lock',\n    'door': 'mdi:door',\n    'window': 'mdi:window-closed',\n    'motion': 'mdi:motion-sensor',\n    'presence': 'mdi:home-account',\n    'camera': 'mdi:cctv',\n    'alarm': 'mdi:shield-home',\n    // Media\n    'media_player': 'mdi:television',\n    'speaker': 'mdi:speaker',\n    'remote': 'mdi:remote',\n    // Switches & Controls\n    'switch': 'mdi:light-switch',\n    'fan': 'mdi:fan',\n    'cover': 'mdi:window-shutter',\n    'blind': 'mdi:blinds',\n    'curtain': 'mdi:curtains',\n    // Sensors\n    'sensor': 'mdi:eye',\n    'binary_sensor': 'mdi:radiobox-marked',\n    'battery': 'mdi:battery',\n    'power': 'mdi:flash',\n    'energy': 'mdi:lightning-bolt',\n    // Other devices\n    'vacuum': 'mdi:robot-vacuum',\n    'person': 'mdi:account',\n    'device_tracker': 'mdi:cellphone',\n    'sun': 'mdi:weather-sunny',\n    'weather': 'mdi:weather-partly-cloudy',\n    // Default\n    'default': 'mdi:home-assistant'\n};\nfunction getEntityIcon(entityId, state) {\n    // Check custom icon first\n    if (state?.attributes?.icon) {\n        return state.attributes.icon;\n    }\n    // Check device class for more specific icons\n    const deviceClass = state?.attributes?.device_class;\n    if (deviceClass && ENTITY_ICONS[deviceClass]) {\n        return ENTITY_ICONS[deviceClass];\n    }\n    // Match by entity ID patterns\n    for (const [pattern, icon] of Object.entries(ENTITY_ICONS)) {\n        if (entityId.includes(pattern)) {\n            return icon;\n        }\n    }\n    // Domain fallback\n    const domain = entityId.split('.')[0];\n    return ENTITY_ICONS[domain] || ENTITY_ICONS.default;\n}\n/**\n * Get icon color based on entity state and domain.\n */\nfunction getEntityIconColor(entityId, state) {\n    const domain = entityId.split('.')[0];\n    const isOn = state?.state === 'on';\n    const isActive = ['playing', 'open', 'unlocked', 'home', 'detected'].includes(state?.state);\n    const isUnavailable = state?.state === 'unavailable';\n    if (isUnavailable) {\n        return 'var(--disabled-text-color)';\n    }\n    // Domain-specific colors when active\n    if (isOn || isActive) {\n        switch (domain) {\n            case 'light':\n                return state?.attributes?.rgb_color\n                    ? `rgb(${state.attributes.rgb_color.join(',')})`\n                    : 'var(--primary-color)';\n            case 'climate':\n                const mode = state?.state;\n                if (mode === 'heat')\n                    return '#ff6b00';\n                if (mode === 'cool')\n                    return '#0288d1';\n                if (mode === 'heat_cool' || mode === 'auto')\n                    return '#388e3c';\n                return 'var(--primary-color)';\n            case 'lock':\n                return state?.state === 'locked' ? '#4caf50' : '#f44336';\n            case 'alarm_control_panel':\n                if (state?.state === 'armed_away')\n                    return '#f44336';\n                if (state?.state === 'armed_home')\n                    return '#ff9800';\n                if (state?.state === 'disarmed')\n                    return '#4caf50';\n                return 'var(--primary-color)';\n            default:\n                return 'var(--primary-color)';\n        }\n    }\n    return 'var(--secondary-text-color)';\n}\n/**\n * Get a mini icon for entity summaries.\n */\nfunction getMiniIcon(entityType) {\n    const miniIcons = {\n        'lights': 'mdi:lightbulb',\n        'temperature': 'mdi:thermometer',\n        'humidity': 'mdi:water-percent',\n        'motion': 'mdi:motion-sensor',\n        'doors': 'mdi:door',\n        'windows': 'mdi:window-closed',\n        'media': 'mdi:television',\n        'climate': 'mdi:thermostat'\n    };\n    return miniIcons[entityType] || 'mdi:circle';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLEVBQUUsS0FBSyxLQUFLLFlBQVk7b0JBQUUsT0FBTyxTQUFTLENBQUM7Z0JBQ3BELElBQUksS0FBSyxFQUFFLEtBQUssS0FBSyxVQUFVO29CQUFFLE9BQU8sU0FBUyxDQUFDO2dCQUNsRCxPQUFPLHNCQUFzQixDQUFDO1lBQ2hDO2dCQUNFLE9BQU8sc0JBQXNCLENBQUM7UUFDbEMsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPLDZCQUE2QixDQUFDO0FBQ3ZDLENBQUM7QUFFRDs7R0FFRztBQUNJLFNBQVMsV0FBVyxDQUFDLFVBQWtCO0lBQzVDLE1BQU0sU0FBUyxHQUEyQjtRQUN4QyxRQUFRLEVBQUUsZUFBZTtRQUN6QixhQUFhLEVBQUUsaUJBQWlCO1FBQ2hDLFVBQVUsRUFBRSxtQkFBbUI7UUFDL0IsUUFBUSxFQUFFLG1CQUFtQjtRQUM3QixPQUFPLEVBQUUsVUFBVTtRQUNuQixTQUFTLEVBQUUsbUJBQW1CO1FBQzlCLE9BQU8sRUFBRSxnQkFBZ0I7UUFDekIsU0FBUyxFQUFFLGdCQUFnQjtLQUM1QixDQUFDO0lBRUYsT0FBTyxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksWUFBWSxDQUFDO0FBQy9DLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3V0aWxzL2ljb25zLnRzP2U3OGYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbnRpdHkgdHlwZSB0byBpY29uIG1hcHBpbmcgdXRpbGl0eS5cbiAqIE1hcHMgZW50aXR5IHR5cGVzIGFuZCBkb21haW5zIHRvIE1hdGVyaWFsIERlc2lnbiBJY29ucy5cbiAqL1xuXG5leHBvcnQgY29uc3QgRU5USVRZX0lDT05TOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAvLyBMaWdodHNcbiAgJ2xpZ2h0JzogJ21kaTpsaWdodGJ1bGInLFxuICAnbGlnaHQuY2VpbGluZyc6ICdtZGk6Y2VpbGluZy1saWdodCcsXG4gICdsaWdodC5mbG9vcic6ICdtZGk6Zmxvb3ItbGFtcCcsXG4gICdsaWdodC5kZXNrJzogJ21kaTpkZXNrLWxhbXAnLFxuICAnbGlnaHQuc3RyaXAnOiAnbWRpOmxlZC1zdHJpcC12YXJpYW50JyxcbiAgJ2xpZ2h0LnNwb3QnOiAnbWRpOnNwb3RsaWdodC1iZWFtJyxcbiAgXG4gIC8vIENsaW1hdGVcbiAgJ2NsaW1hdGUnOiAnbWRpOnRoZXJtb3N0YXQnLFxuICAndGVtcGVyYXR1cmUnOiAnbWRpOnRoZXJtb21ldGVyJyxcbiAgJ2h1bWlkaXR5JzogJ21kaTp3YXRlci1wZXJjZW50JyxcbiAgJ2Fpcl9xdWFsaXR5JzogJ21kaTphaXItZmlsdGVyJyxcbiAgXG4gIC8vIFNlY3VyaXR5XG4gICdsb2NrJzogJ21kaTpsb2NrJyxcbiAgJ2Rvb3InOiAnbWRpOmRvb3InLFxuICAnd2luZG93JzogJ21kaTp3aW5kb3ctY2xvc2VkJyxcbiAgJ21vdGlvbic6ICdtZGk6bW90aW9uLXNlbnNvcicsXG4gICdwcmVzZW5jZSc6ICdtZGk6aG9tZS1hY2NvdW50JyxcbiAgJ2NhbWVyYSc6ICdtZGk6Y2N0dicsXG4gICdhbGFybSc6ICdtZGk6c2hpZWxkLWhvbWUnLFxuICBcbiAgLy8gTWVkaWFcbiAgJ21lZGlhX3BsYXllcic6ICdtZGk6dGVsZXZpc2lvbicsXG4gICdzcGVha2VyJzogJ21kaTpzcGVha2VyJyxcbiAgJ3JlbW90ZSc6ICdtZGk6cmVtb3RlJyxcbiAgXG4gIC8vIFN3aXRjaGVzICYgQ29udHJvbHNcbiAgJ3N3aXRjaCc6ICdtZGk6bGlnaHQtc3dpdGNoJyxcbiAgJ2Zhbic6ICdtZGk6ZmFuJyxcbiAgJ2NvdmVyJzogJ21kaTp3aW5kb3ctc2h1dHRlcicsXG4gICdibGluZCc6ICdtZGk6YmxpbmRzJyxcbiAgJ2N1cnRhaW4nOiAnbWRpOmN1cnRhaW5zJyxcbiAgXG4gIC8vIFNlbnNvcnNcbiAgJ3NlbnNvcic6ICdtZGk6ZXllJyxcbiAgJ2JpbmFyeV9zZW5zb3InOiAnbWRpOnJhZGlvYm94LW1hcmtlZCcsXG4gICdiYXR0ZXJ5JzogJ21kaTpiYXR0ZXJ5JyxcbiAgJ3Bvd2VyJzogJ21kaTpmbGFzaCcsXG4gICdlbmVyZ3knOiAnbWRpOmxpZ2h0bmluZy1ib2x0JyxcbiAgXG4gIC8vIE90aGVyIGRldmljZXNcbiAgJ3ZhY3V1bSc6ICdtZGk6cm9ib3QtdmFjdXVtJyxcbiAgJ3BlcnNvbic6ICdtZGk6YWNjb3VudCcsXG4gICdkZXZpY2VfdHJhY2tlcic6ICdtZGk6Y2VsbHBob25lJyxcbiAgJ3N1bic6ICdtZGk6d2VhdGhlci1zdW5ueScsXG4gICd3ZWF0aGVyJzogJ21kaTp3ZWF0aGVyLXBhcnRseS1jbG91ZHknLFxuICBcbiAgLy8gRGVmYXVsdFxuICAnZGVmYXVsdCc6ICdtZGk6aG9tZS1hc3Npc3RhbnQnXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50aXR5SWNvbihlbnRpdHlJZDogc3RyaW5nLCBzdGF0ZT86IGFueSk6IHN0cmluZyB7XG4gIC8vIENoZWNrIGN1c3RvbSBpY29uIGZpcnN0XG4gIGlmIChzdGF0ZT8uYXR0cmlidXRlcz8uaWNvbikge1xuICAgIHJldHVybiBzdGF0ZS5hdHRyaWJ1dGVzLmljb247XG4gIH1cbiAgXG4gIC8vIENoZWNrIGRldmljZSBjbGFzcyBmb3IgbW9yZSBzcGVjaWZpYyBpY29uc1xuICBjb25zdCBkZXZpY2VDbGFzcyA9IHN0YXRlPy5hdHRyaWJ1dGVzPy5kZXZpY2VfY2xhc3M7XG4gIGlmIChkZXZpY2VDbGFzcyAmJiBFTlRJVFlfSUNPTlNbZGV2aWNlQ2xhc3NdKSB7XG4gICAgcmV0dXJuIEVOVElUWV9JQ09OU1tkZXZpY2VDbGFzc107XG4gIH1cbiAgXG4gIC8vIE1hdGNoIGJ5IGVudGl0eSBJRCBwYXR0ZXJuc1xuICBmb3IgKGNvbnN0IFtwYXR0ZXJuLCBpY29uXSBvZiBPYmplY3QuZW50cmllcyhFTlRJVFlfSUNPTlMpKSB7XG4gICAgaWYgKGVudGl0eUlkLmluY2x1ZGVzKHBhdHRlcm4pKSB7XG4gICAgICByZXR1cm4gaWNvbjtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIERvbWFpbiBmYWxsYmFja1xuICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICByZXR1cm4gRU5USVRZX0lDT05TW2RvbWFpbl0gfHwgRU5USVRZX0lDT05TLmRlZmF1bHQ7XG59XG5cbi8qKlxuICogR2V0IGljb24gY29sb3IgYmFzZWQgb24gZW50aXR5IHN0YXRlIGFuZCBkb21haW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnRpdHlJY29uQ29sb3IoZW50aXR5SWQ6IHN0cmluZywgc3RhdGU/OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICBjb25zdCBpc09uID0gc3RhdGU/LnN0YXRlID09PSAnb24nO1xuICBjb25zdCBpc0FjdGl2ZSA9IFsncGxheWluZycsICdvcGVuJywgJ3VubG9ja2VkJywgJ2hvbWUnLCAnZGV0ZWN0ZWQnXS5pbmNsdWRlcyhzdGF0ZT8uc3RhdGUpO1xuICBjb25zdCBpc1VuYXZhaWxhYmxlID0gc3RhdGU/LnN0YXRlID09PSAndW5hdmFpbGFibGUnO1xuICBcbiAgaWYgKGlzVW5hdmFpbGFibGUpIHtcbiAgICByZXR1cm4gJ3ZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpJztcbiAgfVxuICBcbiAgLy8gRG9tYWluLXNwZWNpZmljIGNvbG9ycyB3aGVuIGFjdGl2ZVxuICBpZiAoaXNPbiB8fCBpc0FjdGl2ZSkge1xuICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICBjYXNlICdsaWdodCc6XG4gICAgICAgIHJldHVybiBzdGF0ZT8uYXR0cmlidXRlcz8ucmdiX2NvbG9yIFxuICAgICAgICAgID8gYHJnYigke3N0YXRlLmF0dHJpYnV0ZXMucmdiX2NvbG9yLmpvaW4oJywnKX0pYCBcbiAgICAgICAgICA6ICd2YXIoLS1wcmltYXJ5LWNvbG9yKSc7XG4gICAgICBjYXNlICdjbGltYXRlJzpcbiAgICAgICAgY29uc3QgbW9kZSA9IHN0YXRlPy5zdGF0ZTtcbiAgICAgICAgaWYgKG1vZGUgPT09ICdoZWF0JykgcmV0dXJuICcjZmY2YjAwJztcbiAgICAgICAgaWYgKG1vZGUgPT09ICdjb29sJykgcmV0dXJuICcjMDI4OGQxJztcbiAgICAgICAgaWYgKG1vZGUgPT09ICdoZWF0X2Nvb2wnIHx8IG1vZGUgPT09ICdhdXRvJykgcmV0dXJuICcjMzg4ZTNjJztcbiAgICAgICAgcmV0dXJuICd2YXIoLS1wcmltYXJ5LWNvbG9yKSc7XG4gICAgICBjYXNlICdsb2NrJzpcbiAgICAgICAgcmV0dXJuIHN0YXRlPy5zdGF0ZSA9PT0gJ2xvY2tlZCcgPyAnIzRjYWY1MCcgOiAnI2Y0NDMzNic7XG4gICAgICBjYXNlICdhbGFybV9jb250cm9sX3BhbmVsJzpcbiAgICAgICAgaWYgKHN0YXRlPy5zdGF0ZSA9PT0gJ2FybWVkX2F3YXknKSByZXR1cm4gJyNmNDQzMzYnO1xuICAgICAgICBpZiAoc3RhdGU/LnN0YXRlID09PSAnYXJtZWRfaG9tZScpIHJldHVybiAnI2ZmOTgwMCc7XG4gICAgICAgIGlmIChzdGF0ZT8uc3RhdGUgPT09ICdkaXNhcm1lZCcpIHJldHVybiAnIzRjYWY1MCc7XG4gICAgICAgIHJldHVybiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICd2YXIoLS1wcmltYXJ5LWNvbG9yKSc7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gJ3ZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKSc7XG59XG5cbi8qKlxuICogR2V0IGEgbWluaSBpY29uIGZvciBlbnRpdHkgc3VtbWFyaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWluaUljb24oZW50aXR5VHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbWluaUljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdsaWdodHMnOiAnbWRpOmxpZ2h0YnVsYicsXG4gICAgJ3RlbXBlcmF0dXJlJzogJ21kaTp0aGVybW9tZXRlcicsXG4gICAgJ2h1bWlkaXR5JzogJ21kaTp3YXRlci1wZXJjZW50JyxcbiAgICAnbW90aW9uJzogJ21kaTptb3Rpb24tc2Vuc29yJyxcbiAgICAnZG9vcnMnOiAnbWRpOmRvb3InLFxuICAgICd3aW5kb3dzJzogJ21kaTp3aW5kb3ctY2xvc2VkJyxcbiAgICAnbWVkaWEnOiAnbWRpOnRlbGV2aXNpb24nLFxuICAgICdjbGltYXRlJzogJ21kaTp0aGVybW9zdGF0J1xuICB9O1xuICBcbiAgcmV0dXJuIG1pbmlJY29uc1tlbnRpdHlUeXBlXSB8fCAnbWRpOmNpcmNsZSc7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/icons.ts\n\n}");

/***/ }),

/***/ "./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   Logger: () => (/* binding */ Logger),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass Logger {\n    constructor() {\n        this.level = LogLevel.INFO;\n        this.prefix = '[Dashview V2]';\n        // Check if we're in development mode\n        if (true) {\n            this.level = LogLevel.DEBUG;\n        }\n    }\n    static getInstance() {\n        if (!Logger.instance) {\n            Logger.instance = new Logger();\n        }\n        return Logger.instance;\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n    debug(...args) {\n        if (this.level <= LogLevel.DEBUG) {\n            console.debug(this.prefix, ...args);\n        }\n    }\n    info(...args) {\n        if (this.level <= LogLevel.INFO) {\n            console.info(this.prefix, ...args);\n        }\n    }\n    warn(...args) {\n        if (this.level <= LogLevel.WARN) {\n            console.warn(this.prefix, ...args);\n        }\n    }\n    error(...args) {\n        if (this.level <= LogLevel.ERROR) {\n            console.error(this.prefix, ...args);\n        }\n    }\n}\nconst logger = Logger.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQVksUUFLWDtBQUxELFdBQVksUUFBUTtJQUNsQix5Q0FBUztJQUNULHVDQUFRO0lBQ1IsdUNBQVE7SUFDUix5Q0FBUztBQUNYLENBQUMsRUFMVyxRQUFRLEtBQVIsUUFBUSxRQUtuQjtBQUVNLE1BQU0sTUFBTTtJQUtqQjtRQUhRLFVBQUssR0FBYSxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQ2hDLFdBQU0sR0FBRyxlQUFlLENBQUM7UUFHL0IscUNBQXFDO1FBQ3JDLElBQUksSUFBc0MsRUFBRSxDQUFDO1lBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztRQUM5QixDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQyxXQUFXO1FBQ2hCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDckIsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBQ2pDLENBQUM7UUFDRCxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDekIsQ0FBQztJQUVELFFBQVEsQ0FBQyxLQUFlO1FBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLENBQUM7SUFFRCxLQUFLLENBQUMsR0FBRyxJQUFXO1FBQ2xCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDdEMsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLENBQUMsR0FBRyxJQUFXO1FBQ2pCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDaEMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLENBQUMsR0FBRyxJQUFXO1FBQ2pCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDaEMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztJQUNILENBQUM7SUFFRCxLQUFLLENBQUMsR0FBRyxJQUFXO1FBQ2xCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDdEMsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVNLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzPzhkNmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xuICBERUJVRyA9IDAsXG4gIElORk8gPSAxLFxuICBXQVJOID0gMixcbiAgRVJST1IgPSAzLFxufVxuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IExvZ2dlcjtcbiAgcHJpdmF0ZSBsZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xuICBwcml2YXRlIHByZWZpeCA9ICdbRGFzaHZpZXcgVjJdJztcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRldmVsb3BtZW50IG1vZGVcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIHRoaXMubGV2ZWwgPSBMb2dMZXZlbC5ERUJVRztcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogTG9nZ2VyIHtcbiAgICBpZiAoIUxvZ2dlci5pbnN0YW5jZSkge1xuICAgICAgTG9nZ2VyLmluc3RhbmNlID0gbmV3IExvZ2dlcigpO1xuICAgIH1cbiAgICByZXR1cm4gTG9nZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgc2V0TGV2ZWwobGV2ZWw6IExvZ0xldmVsKTogdm9pZCB7XG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICB9XG5cbiAgZGVidWcoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgY29uc29sZS5kZWJ1Zyh0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgaW5mbyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxldmVsIDw9IExvZ0xldmVsLklORk8pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyh0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgd2FybiguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgIGNvbnNvbGUud2Fybih0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgY29uc29sZS5lcnJvcih0aGlzLnByZWZpeCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/logger.ts\n\n}");

/***/ }),

/***/ "./src/widgets/climate-widget.ts":
/*!***************************************!*\
  !*** ./src/widgets/climate-widget.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClimateWidget: () => (/* binding */ ClimateWidget)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _core_widget_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/widget-base */ \"./src/core/widget-base.ts\");\n/* harmony import */ var _styles_animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/animations */ \"./src/styles/animations.ts\");\n/**\n * Climate widget for Dashview V2.\n * Controls HVAC systems, thermostats, and climate entities.\n */\n\n\n\n\n\nlet ClimateWidget = class ClimateWidget extends _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.hvacMode = 'off';\n        this.availableModes = [];\n        this.availablePresets = [];\n        this.isAdjusting = false;\n        this.showTempDial = true;\n    }\n    subscribedEntities() {\n        const entities = [];\n        // Primary climate entity\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (climateId) {\n            entities.push(climateId);\n        }\n        // Related humidity sensor if any\n        const humidityEntity = this.widgetConfig?.entities?.find(e => e.includes('humidity') && !e.includes('climate'));\n        if (humidityEntity) {\n            entities.push(humidityEntity);\n        }\n        return entities;\n    }\n    getDefaultConfig() {\n        return {\n            type: 'climate',\n            entities: [],\n            showHumidity: true,\n            showPresets: true,\n            temperatureStep: 0.5,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateClimateState();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateClimateState();\n    }\n    updateClimateState() {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        const climateState = this.entityStates.get(climateId);\n        if (!climateState)\n            return;\n        // Update temperature values\n        this.currentTemp = climateState.attributes.current_temperature;\n        this.hvacMode = climateState.state;\n        this.presetMode = climateState.attributes.preset_mode;\n        // Handle different temperature control modes\n        if (climateState.attributes.target_temp_low && climateState.attributes.target_temp_high) {\n            this.targetTempLow = climateState.attributes.target_temp_low;\n            this.targetTempHigh = climateState.attributes.target_temp_high;\n            this.targetTemp = undefined;\n        }\n        else {\n            this.targetTemp = climateState.attributes.temperature;\n            this.targetTempLow = undefined;\n            this.targetTempHigh = undefined;\n        }\n        // Available modes\n        this.availableModes = climateState.attributes.hvac_modes || [];\n        this.availablePresets = climateState.attributes.preset_modes || [];\n        // Check for humidity sensor\n        const humidityEntity = this.widgetConfig?.entities?.find(e => e.includes('humidity') && !e.includes('climate'));\n        if (humidityEntity) {\n            const humidityState = this.entityStates.get(humidityEntity);\n            if (humidityState && humidityState.state !== 'unavailable') {\n                this.humidity = parseFloat(humidityState.state);\n            }\n        }\n    }\n    render() {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        const title = this.widgetConfig?.title || 'Climate Control';\n        if (this.isLoading) {\n            return this.renderSkeleton();\n        }\n        if (this.error || !climateId) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-error\">\n          ${this.error || 'No climate entity configured'}\n        </div>\n      `;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card>\n        <div class=\"header\">\n          <h2>${title}</h2>\n          <div class=\"hvac-mode ${this.hvacMode}\">\n            ${this.hvacMode.toUpperCase()}\n          </div>\n        </div>\n\n        <div class=\"temperature-display\">\n          ${this.showTempDial ? this.renderTemperatureDial() : this.renderTemperatureDisplay()}\n        </div>\n\n        ${this.renderTemperatureControls()}\n        ${this.renderModeSelector()}\n        ${this.renderPresetSelector()}\n        ${this.renderHumidity()}\n      </ha-card>\n    `;\n    }\n    renderTemperatureDisplay() {\n        if (this.currentTemp === undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `<span class=\"temp-unavailable\">--</span>`;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"current-temp\">\n        <span class=\"temp-value\">${this.currentTemp.toFixed(1)}</span>\n        <span class=\"temp-unit\">C</span>\n      </div>\n      ${this.renderTargetTemp()}\n    `;\n    }\n    renderTemperatureDial() {\n        if (this.currentTemp === undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `<div class=\"temp-dial-unavailable\">Temperature Unavailable</div>`;\n        }\n        const minTemp = 10;\n        const maxTemp = 35;\n        const currentPercent = Math.max(0, Math.min(100, ((this.currentTemp - minTemp) / (maxTemp - minTemp)) * 100));\n        const targetPercent = this.targetTemp ? Math.max(0, Math.min(100, ((this.targetTemp - minTemp) / (maxTemp - minTemp)) * 100)) : currentPercent;\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"temp-dial-container\">\n        <div class=\"temp-dial\">\n          <svg viewBox=\"0 0 200 200\" class=\"dial-svg\">\n            <!-- Background circle -->\n            <circle cx=\"100\" cy=\"100\" r=\"80\" class=\"dial-bg\" />\n            <!-- Current temperature arc -->\n            <circle \n              cx=\"100\" \n              cy=\"100\" \n              r=\"80\" \n              class=\"dial-current\"\n              stroke-dasharray=\"${(currentPercent / 100) * 502.6} 502.6\"\n              transform=\"rotate(-90 100 100)\"\n            />\n            <!-- Target temperature indicator -->\n            ${this.targetTemp ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n              <circle \n                cx=\"100\" \n                cy=\"100\" \n                r=\"80\" \n                class=\"dial-target\"\n                stroke-dasharray=\"3 502.6\"\n                stroke-dashoffset=\"${-((targetPercent / 100) * 502.6)}\"\n                transform=\"rotate(-90 100 100)\"\n              />\n            ` : ''}\n          </svg>\n          <div class=\"dial-center\">\n            <div class=\"current-temp-dial\">\n              <span class=\"temp-value-dial\">${this.currentTemp.toFixed(1)}</span>\n              <span class=\"temp-unit-dial\">C</span>\n            </div>\n            ${this.targetTemp ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n              <div class=\"target-temp-dial\">\n                Target: ${this.targetTemp.toFixed(1)}C\n              </div>\n            ` : ''}\n          </div>\n        </div>\n        <div class=\"temp-trend\">\n          ${this.renderTemperatureTrend()}\n        </div>\n      </div>\n    `;\n    }\n    renderTemperatureTrend() {\n        // Placeholder for temperature trend mini-graph\n        // In a real implementation, this would show historical data\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"trend-indicator\">\n        <ha-icon icon=\"mdi:trending-up\" class=\"trend-icon\"></ha-icon>\n        <span class=\"trend-text\">Trending up</span>\n      </div>\n    `;\n    }\n    renderTargetTemp() {\n        if (this.hvacMode === 'off') {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        if (this.targetTempLow !== undefined && this.targetTempHigh !== undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"target-temp-range\">\n          <span class=\"target-label\">Target:</span>\n          <span class=\"target-value\">${this.targetTempLow.toFixed(1)} - ${this.targetTempHigh.toFixed(1)}C</span>\n        </div>\n      `;\n        }\n        if (this.targetTemp !== undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"target-temp\">\n          <span class=\"target-label\">Target:</span>\n          <span class=\"target-value\">${this.targetTemp.toFixed(1)}C</span>\n        </div>\n      `;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n    }\n    renderTemperatureControls() {\n        if (this.hvacMode === 'off' || this.hvacMode === 'fan_only') {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        const config = this.widgetConfig;\n        const step = config?.temperatureStep || 0.5;\n        if (this.targetTempLow !== undefined && this.targetTempHigh !== undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"temp-controls-dual\">\n          <div class=\"temp-control\">\n            <span class=\"control-label\">Cool to</span>\n            <div class=\"control-buttons\">\n              <ha-icon-button\n                icon=\"mdi:minus\"\n                @click=${() => this.adjustTargetTemp('low', -step)}\n              ></ha-icon-button>\n              <span class=\"control-value\">${this.targetTempLow.toFixed(1)}C</span>\n              <ha-icon-button\n                icon=\"mdi:plus\"\n                @click=${() => this.adjustTargetTemp('low', step)}\n              ></ha-icon-button>\n            </div>\n          </div>\n          <div class=\"temp-control\">\n            <span class=\"control-label\">Heat to</span>\n            <div class=\"control-buttons\">\n              <ha-icon-button\n                icon=\"mdi:minus\"\n                @click=${() => this.adjustTargetTemp('high', -step)}\n              ></ha-icon-button>\n              <span class=\"control-value\">${this.targetTempHigh.toFixed(1)}C</span>\n              <ha-icon-button\n                icon=\"mdi:plus\"\n                @click=${() => this.adjustTargetTemp('high', step)}\n              ></ha-icon-button>\n            </div>\n          </div>\n        </div>\n      `;\n        }\n        if (this.targetTemp !== undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"temp-controls\">\n          <ha-icon-button\n            icon=\"mdi:minus\"\n            @click=${() => this.adjustTargetTemp('single', -step)}\n          ></ha-icon-button>\n          <span class=\"control-value\">${this.targetTemp.toFixed(1)}C</span>\n          <ha-icon-button\n            icon=\"mdi:plus\"\n            @click=${() => this.adjustTargetTemp('single', step)}\n          ></ha-icon-button>\n        </div>\n      `;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n    }\n    renderModeSelector() {\n        if (this.availableModes.length <= 1) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        const modeIcons = {\n            'off': 'mdi:power',\n            'heat': 'mdi:fire',\n            'cool': 'mdi:snowflake',\n            'heat_cool': 'mdi:autorenew',\n            'auto': 'mdi:calendar-sync',\n            'dry': 'mdi:water-percent',\n            'fan_only': 'mdi:fan',\n        };\n        const modeColors = {\n            'off': 'var(--secondary-text-color)',\n            'heat': '#ff6b00',\n            'cool': '#0288d1',\n            'heat_cool': '#388e3c',\n            'auto': '#388e3c',\n            'dry': '#9c27b0',\n            'fan_only': '#607d8b',\n        };\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"mode-selector\">\n        ${this.availableModes.map(mode => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <button\n            class=\"mode-button touch-target ${mode === this.hvacMode ? 'active' : ''}\"\n            @click=${() => this.setHvacMode(mode)}\n            aria-label=\"Set ${mode.replace('_', ' ')} mode\"\n            style=\"--mode-color: ${modeColors[mode]}\"\n          >\n            <ha-icon icon=\"${modeIcons[mode]}\"></ha-icon>\n            <span>${mode.replace('_', ' ')}</span>\n          </button>\n        `)}\n      </div>\n    `;\n    }\n    renderPresetSelector() {\n        const config = this.widgetConfig;\n        if (!config?.showPresets || this.availablePresets.length === 0) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        const presetIcons = {\n            'eco': 'mdi:leaf',\n            'away': 'mdi:home-export-outline',\n            'boost': 'mdi:rocket-launch',\n            'comfort': 'mdi:sofa',\n            'home': 'mdi:home',\n            'sleep': 'mdi:sleep',\n            'activity': 'mdi:run'\n        };\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"preset-selector\">\n        <span class=\"preset-label\">Presets:</span>\n        <div class=\"preset-buttons\">\n          <button \n            class=\"preset-button touch-target ${!this.presetMode ? 'active' : ''}\"\n            @click=${() => this.setPresetMode(null)}\n            aria-label=\"No preset\"\n          >\n            <ha-icon icon=\"mdi:close\"></ha-icon>\n            <span>None</span>\n          </button>\n          ${this.availablePresets.map(preset => (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n            <button\n              class=\"preset-button touch-target ${preset === this.presetMode ? 'active' : ''}\"\n              @click=${() => this.setPresetMode(preset)}\n              aria-label=\"Set ${preset} preset\"\n            >\n              <ha-icon icon=\"${presetIcons[preset] || 'mdi:cog'}\"></ha-icon>\n              <span>${preset}</span>\n            </button>\n          `)}\n        </div>\n      </div>\n    `;\n    }\n    renderHumidity() {\n        const config = this.widgetConfig;\n        if (!config?.showHumidity || this.humidity === undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"humidity-display\">\n        <ha-icon icon=\"mdi:water-percent\"></ha-icon>\n        <span>Humidity: ${this.humidity.toFixed(0)}%</span>\n      </div>\n    `;\n    }\n    async adjustTargetTemp(type, change) {\n        if (this.isAdjusting)\n            return;\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        this.isAdjusting = true;\n        try {\n            const service_data = {};\n            if (type === 'single' && this.targetTemp !== undefined) {\n                service_data.temperature = Math.round((this.targetTemp + change) * 2) / 2;\n            }\n            else if (type === 'low' && this.targetTempLow !== undefined) {\n                service_data.target_temp_low = Math.round((this.targetTempLow + change) * 2) / 2;\n                service_data.target_temp_high = this.targetTempHigh;\n            }\n            else if (type === 'high' && this.targetTempHigh !== undefined) {\n                service_data.target_temp_low = this.targetTempLow;\n                service_data.target_temp_high = Math.round((this.targetTempHigh + change) * 2) / 2;\n            }\n            await this.hass.callService('climate', 'set_temperature', {\n                entity_id: climateId,\n                ...service_data\n            });\n        }\n        catch (error) {\n            console.error('Failed to adjust temperature:', error);\n        }\n        finally {\n            this.isAdjusting = false;\n        }\n    }\n    async setHvacMode(mode) {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        try {\n            await this.hass.callService('climate', 'set_hvac_mode', {\n                entity_id: climateId,\n                hvac_mode: mode\n            });\n        }\n        catch (error) {\n            console.error('Failed to set HVAC mode:', error);\n        }\n    }\n    async setPresetMode(preset) {\n        const climateId = this.climateEntityId || this.widgetConfig?.entities?.[0];\n        if (!climateId)\n            return;\n        try {\n            await this.hass.callService('climate', 'set_preset_mode', {\n                entity_id: climateId,\n                preset_mode: preset\n            });\n        }\n        catch (error) {\n            console.error('Failed to set preset mode:', error);\n        }\n    }\n    renderSkeleton() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"skeleton skeleton-text large\" style=\"width: 140px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"width: 80px; height: 28px;\"></div>\n        </div>\n        <div class=\"temperature-display\">\n          <div class=\"skeleton skeleton-card\" style=\"height: 200px; margin: 16px;\"></div>\n        </div>\n        <div class=\"mode-selector\">\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n          <div class=\"skeleton skeleton-button\" style=\"margin: 8px;\"></div>\n        </div>\n      </ha-card>\n    `;\n    }\n};\nClimateWidget.styles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n    ${_core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget.styles}\n    ${_styles_animations__WEBPACK_IMPORTED_MODULE_3__.skeletonStyles}\n    ${_styles_animations__WEBPACK_IMPORTED_MODULE_3__.touchStyles}\n      ha-card {\n        height: 100%;\n        min-height: 250px;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .hvac-mode {\n        padding: 4px 12px;\n        border-radius: 16px;\n        font-size: 0.8em;\n        font-weight: 500;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .hvac-mode.off {\n        background: var(--secondary-background-color);\n        color: var(--secondary-text-color);\n      }\n\n      .hvac-mode.heat {\n        background: rgba(255, 152, 0, 0.2);\n        color: #ff6b00;\n      }\n\n      .hvac-mode.cool {\n        background: rgba(33, 150, 243, 0.2);\n        color: #0288d1;\n      }\n\n      .hvac-mode.heat_cool,\n      .hvac-mode.auto {\n        background: rgba(76, 175, 80, 0.2);\n        color: #388e3c;\n      }\n\n      .temperature-display {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 16px;\n      }\n\n      .current-temp {\n        display: flex;\n        align-items: baseline;\n        gap: 4px;\n      }\n\n      .temp-value {\n        font-size: 3.5em;\n        font-weight: 300;\n        color: var(--primary-color);\n        line-height: 1;\n      }\n\n      .temp-unit {\n        font-size: 1.5em;\n        color: var(--secondary-text-color);\n      }\n\n      .temp-unavailable {\n        font-size: 3em;\n        color: var(--secondary-text-color);\n      }\n\n      .target-temp,\n      .target-temp-range {\n        margin-top: 8px;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .target-label {\n        opacity: 0.8;\n        margin-right: 4px;\n      }\n\n      .temp-controls {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 16px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .temp-controls-dual {\n        display: flex;\n        gap: 24px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .temp-control {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .control-label {\n        font-size: 0.85em;\n        color: var(--secondary-text-color);\n      }\n\n      .control-buttons {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .control-value {\n        font-size: 1.4em;\n        min-width: 60px;\n        text-align: center;\n      }\n\n      .mode-selector {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));\n        gap: 8px;\n        padding: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .mode-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 4px;\n        padding: 12px 8px;\n        border: 2px solid var(--divider-color);\n        border-radius: 12px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        font-size: 0.75em;\n        text-transform: capitalize;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      .mode-button:hover {\n        background: var(--secondary-background-color);\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .mode-button.active {\n        background: var(--mode-color, var(--primary-color));\n        color: white;\n        border-color: var(--mode-color, var(--primary-color));\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n      }\n\n      .mode-button:active {\n        transform: translateY(0) scale(0.95);\n      }\n\n      .mode-button ha-icon {\n        --mdc-icon-size: 24px;\n      }\n\n      .preset-selector {\n        padding: 12px 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .preset-label {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        margin-bottom: 8px;\n        display: block;\n      }\n\n      .preset-buttons {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n\n      .preset-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 2px;\n        padding: 8px 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        font-size: 0.7em;\n        text-transform: capitalize;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      .preset-button:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .preset-button.active {\n        background: var(--primary-color);\n        color: white;\n        border-color: var(--primary-color);\n      }\n\n      .preset-button ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .humidity-display {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 12px 16px;\n        border-top: 1px solid var(--divider-color);\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .humidity-display ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      ha-icon-button {\n        --mdc-icon-button-size: 48px;\n        --mdc-icon-size: 24px;\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      /* Temperature dial styles */\n      .temp-dial-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 16px;\n      }\n\n      .temp-dial {\n        position: relative;\n        width: 200px;\n        height: 200px;\n      }\n\n      .dial-svg {\n        width: 100%;\n        height: 100%;\n      }\n\n      .dial-bg {\n        fill: none;\n        stroke: var(--divider-color);\n        stroke-width: 8;\n      }\n\n      .dial-current {\n        fill: none;\n        stroke: var(--primary-color);\n        stroke-width: 8;\n        stroke-linecap: round;\n        transition: stroke-dasharray 350ms cubic-bezier(0.0, 0.0, 0.2, 1);\n      }\n\n      .dial-target {\n        fill: none;\n        stroke: var(--secondary-text-color);\n        stroke-width: 4;\n        stroke-linecap: round;\n      }\n\n      .dial-center {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        text-align: center;\n      }\n\n      .current-temp-dial {\n        display: flex;\n        align-items: baseline;\n        justify-content: center;\n        gap: 4px;\n      }\n\n      .temp-value-dial {\n        font-size: 2.5em;\n        font-weight: 300;\n        color: var(--primary-color);\n        line-height: 1;\n      }\n\n      .temp-unit-dial {\n        font-size: 1.2em;\n        color: var(--secondary-text-color);\n      }\n\n      .target-temp-dial {\n        margin-top: 8px;\n        color: var(--secondary-text-color);\n        font-size: 0.8em;\n      }\n\n      .temp-dial-unavailable {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 200px;\n        color: var(--secondary-text-color);\n        font-size: 1.1em;\n      }\n\n      .trend-indicator {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        color: var(--secondary-text-color);\n        font-size: 0.85em;\n      }\n\n      .trend-icon {\n        --mdc-icon-size: 16px;\n        color: var(--success-color, #4caf50);\n      }\n\n      /* Mobile optimizations */\n      @media (max-width: 768px) {\n        .temp-dial {\n          width: 160px;\n          height: 160px;\n        }\n\n        .temp-value-dial {\n          font-size: 2em;\n        }\n\n        .temp-unit-dial {\n          font-size: 1em;\n        }\n\n        .mode-selector {\n          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));\n        }\n\n        .preset-buttons {\n          justify-content: center;\n        }\n      }\n\n      /* Accessibility */\n      @media (prefers-reduced-motion: reduce) {\n        .mode-button:hover {\n          transform: none;\n        }\n\n        .mode-button:active {\n          transform: scale(0.98);\n        }\n\n        .dial-current {\n          transition: none;\n        }\n      }\n    `;\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", String)\n], ClimateWidget.prototype, \"climateEntityId\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Number)\n], ClimateWidget.prototype, \"currentTemp\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTemp\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTempLow\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Number)\n], ClimateWidget.prototype, \"targetTempHigh\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Number)\n], ClimateWidget.prototype, \"humidity\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", String)\n], ClimateWidget.prototype, \"hvacMode\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", String)\n], ClimateWidget.prototype, \"presetMode\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Array)\n], ClimateWidget.prototype, \"availableModes\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Array)\n], ClimateWidget.prototype, \"availablePresets\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Object)\n], ClimateWidget.prototype, \"isAdjusting\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)(\"design:type\", Object)\n], ClimateWidget.prototype, \"showTempDial\", void 0);\nClimateWidget = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.customElement)('dashview-climate-widget')\n], ClimateWidget);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDaEM7SUFBaEIsd0RBQUssRUFBRTs7dURBQTZDO0FBQ3BDO0lBQWhCLHdEQUFLLEVBQUU7O2tEQUE2QjtBQUNwQjtJQUFoQix3REFBSyxFQUFFOzttREFBNkI7QUFaMUIsYUFBYTtJQUR6QixnRUFBYSxDQUFDLHlCQUF5QixDQUFDO0dBQzVCLGFBQWEsQ0FvMkJ6QiIsInNvdXJjZXMiOlsid2VicGFjazovL0Rhc2h2aWV3VjIvLi9zcmMvd2lkZ2V0cy9jbGltYXRlLXdpZGdldC50cz8zYjAxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2xpbWF0ZSB3aWRnZXQgZm9yIERhc2h2aWV3IFYyLlxuICogQ29udHJvbHMgSFZBQyBzeXN0ZW1zLCB0aGVybW9zdGF0cywgYW5kIGNsaW1hdGUgZW50aXRpZXMuXG4gKi9cblxuaW1wb3J0IHsgaHRtbCwgY3NzLCBQcm9wZXJ0eVZhbHVlcywgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgRGFzaHZpZXdXaWRnZXQsIFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuaW1wb3J0IHsgc2tlbGV0b25TdHlsZXMsIHRvdWNoU3R5bGVzIH0gZnJvbSAnLi4vc3R5bGVzL2FuaW1hdGlvbnMnO1xuXG5pbnRlcmZhY2UgQ2xpbWF0ZVdpZGdldENvbmZpZyBleHRlbmRzIFdpZGdldENvbmZpZyB7XG4gIHR5cGU6ICdjbGltYXRlJztcbiAgY2xpbWF0ZUVudGl0eUlkOiBzdHJpbmc7XG4gIHNob3dIdW1pZGl0eT86IGJvb2xlYW47XG4gIHNob3dQcmVzZXRzPzogYm9vbGVhbjtcbiAgdGVtcGVyYXR1cmVTdGVwPzogbnVtYmVyO1xufVxuXG50eXBlIEh2YWNNb2RlID0gJ29mZicgfCAnaGVhdCcgfCAnY29vbCcgfCAnaGVhdF9jb29sJyB8ICdhdXRvJyB8ICdkcnknIHwgJ2Zhbl9vbmx5JztcbnR5cGUgUHJlc2V0TW9kZSA9ICdlY28nIHwgJ2F3YXknIHwgJ2Jvb3N0JyB8ICdjb21mb3J0JyB8ICdob21lJyB8ICdzbGVlcCcgfCAnYWN0aXZpdHknO1xuXG5AY3VzdG9tRWxlbWVudCgnZGFzaHZpZXctY2xpbWF0ZS13aWRnZXQnKVxuZXhwb3J0IGNsYXNzIENsaW1hdGVXaWRnZXQgZXh0ZW5kcyBEYXNodmlld1dpZGdldCB7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBjbGltYXRlRW50aXR5SWQ/OiBzdHJpbmc7XG4gIEBzdGF0ZSgpIHByaXZhdGUgY3VycmVudFRlbXA/OiBudW1iZXI7XG4gIEBzdGF0ZSgpIHByaXZhdGUgdGFyZ2V0VGVtcD86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSB0YXJnZXRUZW1wTG93PzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIHRhcmdldFRlbXBIaWdoPzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIGh1bWlkaXR5PzogbnVtYmVyO1xuICBAc3RhdGUoKSBwcml2YXRlIGh2YWNNb2RlOiBIdmFjTW9kZSA9ICdvZmYnO1xuICBAc3RhdGUoKSBwcml2YXRlIHByZXNldE1vZGU/OiBQcmVzZXRNb2RlO1xuICBAc3RhdGUoKSBwcml2YXRlIGF2YWlsYWJsZU1vZGVzOiBIdmFjTW9kZVtdID0gW107XG4gIEBzdGF0ZSgpIHByaXZhdGUgYXZhaWxhYmxlUHJlc2V0czogUHJlc2V0TW9kZVtdID0gW107XG4gIEBzdGF0ZSgpIHByaXZhdGUgaXNBZGp1c3RpbmcgPSBmYWxzZTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBzaG93VGVtcERpYWwgPSB0cnVlO1xuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGVudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIFByaW1hcnkgY2xpbWF0ZSBlbnRpdHlcbiAgICBjb25zdCBjbGltYXRlSWQgPSB0aGlzLmNsaW1hdGVFbnRpdHlJZCB8fCB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXM/LlswXTtcbiAgICBpZiAoY2xpbWF0ZUlkKSB7XG4gICAgICBlbnRpdGllcy5wdXNoKGNsaW1hdGVJZCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbGF0ZWQgaHVtaWRpdHkgc2Vuc29yIGlmIGFueVxuICAgIGNvbnN0IGh1bWlkaXR5RW50aXR5ID0gdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5maW5kKGUgPT4gXG4gICAgICBlLmluY2x1ZGVzKCdodW1pZGl0eScpICYmICFlLmluY2x1ZGVzKCdjbGltYXRlJylcbiAgICApO1xuICAgIGlmIChodW1pZGl0eUVudGl0eSkge1xuICAgICAgZW50aXRpZXMucHVzaChodW1pZGl0eUVudGl0eSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBlbnRpdGllcztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZWZhdWx0Q29uZmlnKCk6IFBhcnRpYWw8Q2xpbWF0ZVdpZGdldENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnY2xpbWF0ZScsXG4gICAgICBlbnRpdGllczogW10sXG4gICAgICBzaG93SHVtaWRpdHk6IHRydWUsXG4gICAgICBzaG93UHJlc2V0czogdHJ1ZSxcbiAgICAgIHRlbXBlcmF0dXJlU3RlcDogMC41LFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICB0aGlzLnVwZGF0ZUNsaW1hdGVTdGF0ZSgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uU3RhdGVDaGFuZ2VkKGVudGl0eUlkOiBzdHJpbmcsIG5ld1N0YXRlOiBhbnksIG9sZFN0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBzdXBlci5vblN0YXRlQ2hhbmdlZChlbnRpdHlJZCwgbmV3U3RhdGUsIG9sZFN0YXRlKTtcbiAgICB0aGlzLnVwZGF0ZUNsaW1hdGVTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDbGltYXRlU3RhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgY2xpbWF0ZUlkID0gdGhpcy5jbGltYXRlRW50aXR5SWQgfHwgdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5bMF07XG4gICAgaWYgKCFjbGltYXRlSWQpIHJldHVybjtcblxuICAgIGNvbnN0IGNsaW1hdGVTdGF0ZSA9IHRoaXMuZW50aXR5U3RhdGVzLmdldChjbGltYXRlSWQpO1xuICAgIGlmICghY2xpbWF0ZVN0YXRlKSByZXR1cm47XG5cbiAgICAvLyBVcGRhdGUgdGVtcGVyYXR1cmUgdmFsdWVzXG4gICAgdGhpcy5jdXJyZW50VGVtcCA9IGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLmN1cnJlbnRfdGVtcGVyYXR1cmU7XG4gICAgdGhpcy5odmFjTW9kZSA9IGNsaW1hdGVTdGF0ZS5zdGF0ZSBhcyBIdmFjTW9kZTtcbiAgICB0aGlzLnByZXNldE1vZGUgPSBjbGltYXRlU3RhdGUuYXR0cmlidXRlcy5wcmVzZXRfbW9kZSBhcyBQcmVzZXRNb2RlO1xuICAgIFxuICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdGVtcGVyYXR1cmUgY29udHJvbCBtb2Rlc1xuICAgIGlmIChjbGltYXRlU3RhdGUuYXR0cmlidXRlcy50YXJnZXRfdGVtcF9sb3cgJiYgY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfaGlnaCkge1xuICAgICAgdGhpcy50YXJnZXRUZW1wTG93ID0gY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93O1xuICAgICAgdGhpcy50YXJnZXRUZW1wSGlnaCA9IGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2hpZ2g7XG4gICAgICB0aGlzLnRhcmdldFRlbXAgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGFyZ2V0VGVtcCA9IGNsaW1hdGVTdGF0ZS5hdHRyaWJ1dGVzLnRlbXBlcmF0dXJlO1xuICAgICAgdGhpcy50YXJnZXRUZW1wTG93ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy50YXJnZXRUZW1wSGlnaCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBBdmFpbGFibGUgbW9kZXNcbiAgICB0aGlzLmF2YWlsYWJsZU1vZGVzID0gY2xpbWF0ZVN0YXRlLmF0dHJpYnV0ZXMuaHZhY19tb2RlcyB8fCBbXTtcbiAgICB0aGlzLmF2YWlsYWJsZVByZXNldHMgPSBjbGltYXRlU3RhdGUuYXR0cmlidXRlcy5wcmVzZXRfbW9kZXMgfHwgW107XG5cbiAgICAvLyBDaGVjayBmb3IgaHVtaWRpdHkgc2Vuc29yXG4gICAgY29uc3QgaHVtaWRpdHlFbnRpdHkgPSB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXM/LmZpbmQoZSA9PiBcbiAgICAgIGUuaW5jbHVkZXMoJ2h1bWlkaXR5JykgJiYgIWUuaW5jbHVkZXMoJ2NsaW1hdGUnKVxuICAgICk7XG4gICAgaWYgKGh1bWlkaXR5RW50aXR5KSB7XG4gICAgICBjb25zdCBodW1pZGl0eVN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGh1bWlkaXR5RW50aXR5KTtcbiAgICAgIGlmIChodW1pZGl0eVN0YXRlICYmIGh1bWlkaXR5U3RhdGUuc3RhdGUgIT09ICd1bmF2YWlsYWJsZScpIHtcbiAgICAgICAgdGhpcy5odW1pZGl0eSA9IHBhcnNlRmxvYXQoaHVtaWRpdHlTdGF0ZS5zdGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3QgY2xpbWF0ZUlkID0gdGhpcy5jbGltYXRlRW50aXR5SWQgfHwgdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzPy5bMF07XG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLndpZGdldENvbmZpZz8udGl0bGUgfHwgJ0NsaW1hdGUgQ29udHJvbCc7XG5cbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlclNrZWxldG9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXJyb3IgfHwgIWNsaW1hdGVJZCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtZXJyb3JcIj5cbiAgICAgICAgICAke3RoaXMuZXJyb3IgfHwgJ05vIGNsaW1hdGUgZW50aXR5IGNvbmZpZ3VyZWQnfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxoMj4ke3RpdGxlfTwvaDI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImh2YWMtbW9kZSAke3RoaXMuaHZhY01vZGV9XCI+XG4gICAgICAgICAgICAke3RoaXMuaHZhY01vZGUudG9VcHBlckNhc2UoKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRlbXBlcmF0dXJlLWRpc3BsYXlcIj5cbiAgICAgICAgICAke3RoaXMuc2hvd1RlbXBEaWFsID8gdGhpcy5yZW5kZXJUZW1wZXJhdHVyZURpYWwoKSA6IHRoaXMucmVuZGVyVGVtcGVyYXR1cmVEaXNwbGF5KCl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgICR7dGhpcy5yZW5kZXJUZW1wZXJhdHVyZUNvbnRyb2xzKCl9XG4gICAgICAgICR7dGhpcy5yZW5kZXJNb2RlU2VsZWN0b3IoKX1cbiAgICAgICAgJHt0aGlzLnJlbmRlclByZXNldFNlbGVjdG9yKCl9XG4gICAgICAgICR7dGhpcy5yZW5kZXJIdW1pZGl0eSgpfVxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRlbXBlcmF0dXJlRGlzcGxheSgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKHRoaXMuY3VycmVudFRlbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgPHNwYW4gY2xhc3M9XCJ0ZW1wLXVuYXZhaWxhYmxlXCI+LS08L3NwYW4+YDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LXRlbXBcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZW1wLXZhbHVlXCI+JHt0aGlzLmN1cnJlbnRUZW1wLnRvRml4ZWQoMSl9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInRlbXAtdW5pdFwiPsKwQzwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgJHt0aGlzLnJlbmRlclRhcmdldFRlbXAoKX1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUZW1wZXJhdHVyZURpYWwoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRUZW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJ0ZW1wLWRpYWwtdW5hdmFpbGFibGVcIj5UZW1wZXJhdHVyZSBVbmF2YWlsYWJsZTwvZGl2PmA7XG4gICAgfVxuXG4gICAgY29uc3QgbWluVGVtcCA9IDEwO1xuICAgIGNvbnN0IG1heFRlbXAgPSAzNTtcbiAgICBjb25zdCBjdXJyZW50UGVyY2VudCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgKCh0aGlzLmN1cnJlbnRUZW1wIC0gbWluVGVtcCkgLyAobWF4VGVtcCAtIG1pblRlbXApKSAqIDEwMCkpO1xuICAgIGNvbnN0IHRhcmdldFBlcmNlbnQgPSB0aGlzLnRhcmdldFRlbXAgPyBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsICgodGhpcy50YXJnZXRUZW1wIC0gbWluVGVtcCkgLyAobWF4VGVtcCAtIG1pblRlbXApKSAqIDEwMCkpIDogY3VycmVudFBlcmNlbnQ7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wLWRpYWwtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wLWRpYWxcIj5cbiAgICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAwIDIwMFwiIGNsYXNzPVwiZGlhbC1zdmdcIj5cbiAgICAgICAgICAgIDwhLS0gQmFja2dyb3VuZCBjaXJjbGUgLS0+XG4gICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTAwXCIgY3k9XCIxMDBcIiByPVwiODBcIiBjbGFzcz1cImRpYWwtYmdcIiAvPlxuICAgICAgICAgICAgPCEtLSBDdXJyZW50IHRlbXBlcmF0dXJlIGFyYyAtLT5cbiAgICAgICAgICAgIDxjaXJjbGUgXG4gICAgICAgICAgICAgIGN4PVwiMTAwXCIgXG4gICAgICAgICAgICAgIGN5PVwiMTAwXCIgXG4gICAgICAgICAgICAgIHI9XCI4MFwiIFxuICAgICAgICAgICAgICBjbGFzcz1cImRpYWwtY3VycmVudFwiXG4gICAgICAgICAgICAgIHN0cm9rZS1kYXNoYXJyYXk9XCIkeyhjdXJyZW50UGVyY2VudCAvIDEwMCkgKiA1MDIuNn0gNTAyLjZcIlxuICAgICAgICAgICAgICB0cmFuc2Zvcm09XCJyb3RhdGUoLTkwIDEwMCAxMDApXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8IS0tIFRhcmdldCB0ZW1wZXJhdHVyZSBpbmRpY2F0b3IgLS0+XG4gICAgICAgICAgICAke3RoaXMudGFyZ2V0VGVtcCA/IGh0bWxgXG4gICAgICAgICAgICAgIDxjaXJjbGUgXG4gICAgICAgICAgICAgICAgY3g9XCIxMDBcIiBcbiAgICAgICAgICAgICAgICBjeT1cIjEwMFwiIFxuICAgICAgICAgICAgICAgIHI9XCI4MFwiIFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZGlhbC10YXJnZXRcIlxuICAgICAgICAgICAgICAgIHN0cm9rZS1kYXNoYXJyYXk9XCIzIDUwMi42XCJcbiAgICAgICAgICAgICAgICBzdHJva2UtZGFzaG9mZnNldD1cIiR7LSgodGFyZ2V0UGVyY2VudCAvIDEwMCkgKiA1MDIuNil9XCJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm09XCJyb3RhdGUoLTkwIDEwMCAxMDApXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LXRlbXAtZGlhbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRlbXAtdmFsdWUtZGlhbFwiPiR7dGhpcy5jdXJyZW50VGVtcC50b0ZpeGVkKDEpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZW1wLXVuaXQtZGlhbFwiPsKwQzwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHt0aGlzLnRhcmdldFRlbXAgPyBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFyZ2V0LXRlbXAtZGlhbFwiPlxuICAgICAgICAgICAgICAgIFRhcmdldDogJHt0aGlzLnRhcmdldFRlbXAudG9GaXhlZCgxKX3CsENcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC10cmVuZFwiPlxuICAgICAgICAgICR7dGhpcy5yZW5kZXJUZW1wZXJhdHVyZVRyZW5kKCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGVtcGVyYXR1cmVUcmVuZCgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgLy8gUGxhY2Vob2xkZXIgZm9yIHRlbXBlcmF0dXJlIHRyZW5kIG1pbmktZ3JhcGhcbiAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgc2hvdyBoaXN0b3JpY2FsIGRhdGFcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ0cmVuZC1pbmRpY2F0b3JcIj5cbiAgICAgICAgPGhhLWljb24gaWNvbj1cIm1kaTp0cmVuZGluZy11cFwiIGNsYXNzPVwidHJlbmQtaWNvblwiPjwvaGEtaWNvbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cmVuZC10ZXh0XCI+VHJlbmRpbmcgdXA8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUYXJnZXRUZW1wKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAodGhpcy5odmFjTW9kZSA9PT0gJ29mZicpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGFyZ2V0VGVtcExvdyAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGFyZ2V0VGVtcEhpZ2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YXJnZXQtdGVtcC1yYW5nZVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGFyZ2V0LWxhYmVsXCI+VGFyZ2V0Ojwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhcmdldC12YWx1ZVwiPiR7dGhpcy50YXJnZXRUZW1wTG93LnRvRml4ZWQoMSl9IC0gJHt0aGlzLnRhcmdldFRlbXBIaWdoLnRvRml4ZWQoMSl9wrBDPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGFyZ2V0VGVtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhcmdldC10ZW1wXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YXJnZXQtbGFiZWxcIj5UYXJnZXQ6PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGFyZ2V0LXZhbHVlXCI+JHt0aGlzLnRhcmdldFRlbXAudG9GaXhlZCgxKX3CsEM8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUZW1wZXJhdHVyZUNvbnRyb2xzKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAodGhpcy5odmFjTW9kZSA9PT0gJ29mZicgfHwgdGhpcy5odmFjTW9kZSA9PT0gJ2Zhbl9vbmx5Jykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBDbGltYXRlV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHN0ZXAgPSBjb25maWc/LnRlbXBlcmF0dXJlU3RlcCB8fCAwLjU7XG5cbiAgICBpZiAodGhpcy50YXJnZXRUZW1wTG93ICE9PSB1bmRlZmluZWQgJiYgdGhpcy50YXJnZXRUZW1wSGlnaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRlbXAtY29udHJvbHMtZHVhbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wLWNvbnRyb2xcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udHJvbC1sYWJlbFwiPkNvb2wgdG88L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbC1idXR0b25zXCI+XG4gICAgICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgIGljb249XCJtZGk6bWludXNcIlxuICAgICAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuYWRqdXN0VGFyZ2V0VGVtcCgnbG93JywgLXN0ZXApfVxuICAgICAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250cm9sLXZhbHVlXCI+JHt0aGlzLnRhcmdldFRlbXBMb3cudG9GaXhlZCgxKX3CsEM8L3NwYW4+XG4gICAgICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgIGljb249XCJtZGk6cGx1c1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5hZGp1c3RUYXJnZXRUZW1wKCdsb3cnLCBzdGVwKX1cbiAgICAgICAgICAgICAgPjwvaGEtaWNvbi1idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC1jb250cm9sXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRyb2wtbGFiZWxcIj5IZWF0IHRvPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2wtYnV0dG9uc1wiPlxuICAgICAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICBpY29uPVwibWRpOm1pbnVzXCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmFkanVzdFRhcmdldFRlbXAoJ2hpZ2gnLCAtc3RlcCl9XG4gICAgICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRyb2wtdmFsdWVcIj4ke3RoaXMudGFyZ2V0VGVtcEhpZ2gudG9GaXhlZCgxKX3CsEM8L3NwYW4+XG4gICAgICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgIGljb249XCJtZGk6cGx1c1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5hZGp1c3RUYXJnZXRUZW1wKCdoaWdoJywgc3RlcCl9XG4gICAgICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YXJnZXRUZW1wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC1jb250cm9sc1wiPlxuICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgaWNvbj1cIm1kaTptaW51c1wiXG4gICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmFkanVzdFRhcmdldFRlbXAoJ3NpbmdsZScsIC1zdGVwKX1cbiAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRyb2wtdmFsdWVcIj4ke3RoaXMudGFyZ2V0VGVtcC50b0ZpeGVkKDEpfcKwQzwvc3Bhbj5cbiAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgIGljb249XCJtZGk6cGx1c1wiXG4gICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmFkanVzdFRhcmdldFRlbXAoJ3NpbmdsZScsIHN0ZXApfVxuICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTW9kZVNlbGVjdG9yKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAodGhpcy5hdmFpbGFibGVNb2Rlcy5sZW5ndGggPD0gMSkge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlSWNvbnM6IFJlY29yZDxIdmFjTW9kZSwgc3RyaW5nPiA9IHtcbiAgICAgICdvZmYnOiAnbWRpOnBvd2VyJyxcbiAgICAgICdoZWF0JzogJ21kaTpmaXJlJyxcbiAgICAgICdjb29sJzogJ21kaTpzbm93Zmxha2UnLFxuICAgICAgJ2hlYXRfY29vbCc6ICdtZGk6YXV0b3JlbmV3JyxcbiAgICAgICdhdXRvJzogJ21kaTpjYWxlbmRhci1zeW5jJyxcbiAgICAgICdkcnknOiAnbWRpOndhdGVyLXBlcmNlbnQnLFxuICAgICAgJ2Zhbl9vbmx5JzogJ21kaTpmYW4nLFxuICAgIH07XG5cbiAgICBjb25zdCBtb2RlQ29sb3JzOiBSZWNvcmQ8SHZhY01vZGUsIHN0cmluZz4gPSB7XG4gICAgICAnb2ZmJzogJ3ZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKScsXG4gICAgICAnaGVhdCc6ICcjZmY2YjAwJyxcbiAgICAgICdjb29sJzogJyMwMjg4ZDEnLFxuICAgICAgJ2hlYXRfY29vbCc6ICcjMzg4ZTNjJyxcbiAgICAgICdhdXRvJzogJyMzODhlM2MnLFxuICAgICAgJ2RyeSc6ICcjOWMyN2IwJyxcbiAgICAgICdmYW5fb25seSc6ICcjNjA3ZDhiJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwibW9kZS1zZWxlY3RvclwiPlxuICAgICAgICAke3RoaXMuYXZhaWxhYmxlTW9kZXMubWFwKG1vZGUgPT4gaHRtbGBcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cIm1vZGUtYnV0dG9uIHRvdWNoLXRhcmdldCAke21vZGUgPT09IHRoaXMuaHZhY01vZGUgPyAnYWN0aXZlJyA6ICcnfVwiXG4gICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLnNldEh2YWNNb2RlKG1vZGUpfVxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlNldCAke21vZGUucmVwbGFjZSgnXycsICcgJyl9IG1vZGVcIlxuICAgICAgICAgICAgc3R5bGU9XCItLW1vZGUtY29sb3I6ICR7bW9kZUNvbG9yc1ttb2RlXX1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxoYS1pY29uIGljb249XCIke21vZGVJY29uc1ttb2RlXX1cIj48L2hhLWljb24+XG4gICAgICAgICAgICA8c3Bhbj4ke21vZGUucmVwbGFjZSgnXycsICcgJyl9PC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBgKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByZXNldFNlbGVjdG9yKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBDbGltYXRlV2lkZ2V0Q29uZmlnO1xuICAgIGlmICghY29uZmlnPy5zaG93UHJlc2V0cyB8fCB0aGlzLmF2YWlsYWJsZVByZXNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXNldEljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2Vjbyc6ICdtZGk6bGVhZicsXG4gICAgICAnYXdheSc6ICdtZGk6aG9tZS1leHBvcnQtb3V0bGluZScsXG4gICAgICAnYm9vc3QnOiAnbWRpOnJvY2tldC1sYXVuY2gnLFxuICAgICAgJ2NvbWZvcnQnOiAnbWRpOnNvZmEnLFxuICAgICAgJ2hvbWUnOiAnbWRpOmhvbWUnLFxuICAgICAgJ3NsZWVwJzogJ21kaTpzbGVlcCcsXG4gICAgICAnYWN0aXZpdHknOiAnbWRpOnJ1bidcbiAgICB9O1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwicHJlc2V0LXNlbGVjdG9yXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicHJlc2V0LWxhYmVsXCI+UHJlc2V0czo8L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcmVzZXQtYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBjbGFzcz1cInByZXNldC1idXR0b24gdG91Y2gtdGFyZ2V0ICR7IXRoaXMucHJlc2V0TW9kZSA/ICdhY3RpdmUnIDogJyd9XCJcbiAgICAgICAgICAgIEBjbGljaz0keygpID0+IHRoaXMuc2V0UHJlc2V0TW9kZShudWxsKX1cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJObyBwcmVzZXRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6Y2xvc2VcIj48L2hhLWljb24+XG4gICAgICAgICAgICA8c3Bhbj5Ob25lPC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICR7dGhpcy5hdmFpbGFibGVQcmVzZXRzLm1hcChwcmVzZXQgPT4gaHRtbGBcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgY2xhc3M9XCJwcmVzZXQtYnV0dG9uIHRvdWNoLXRhcmdldCAke3ByZXNldCA9PT0gdGhpcy5wcmVzZXRNb2RlID8gJ2FjdGl2ZScgOiAnJ31cIlxuICAgICAgICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLnNldFByZXNldE1vZGUocHJlc2V0KX1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlNldCAke3ByZXNldH0gcHJlc2V0XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGhhLWljb24gaWNvbj1cIiR7cHJlc2V0SWNvbnNbcHJlc2V0XSB8fCAnbWRpOmNvZyd9XCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgICA8c3Bhbj4ke3ByZXNldH08L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICBgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIdW1pZGl0eSgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy53aWRnZXRDb25maWcgYXMgQ2xpbWF0ZVdpZGdldENvbmZpZztcbiAgICBpZiAoIWNvbmZpZz8uc2hvd0h1bWlkaXR5IHx8IHRoaXMuaHVtaWRpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJodW1pZGl0eS1kaXNwbGF5XCI+XG4gICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6d2F0ZXItcGVyY2VudFwiPjwvaGEtaWNvbj5cbiAgICAgICAgPHNwYW4+SHVtaWRpdHk6ICR7dGhpcy5odW1pZGl0eS50b0ZpeGVkKDApfSU8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhZGp1c3RUYXJnZXRUZW1wKHR5cGU6ICdzaW5nbGUnIHwgJ2xvdycgfCAnaGlnaCcsIGNoYW5nZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNBZGp1c3RpbmcpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjbGltYXRlSWQgPSB0aGlzLmNsaW1hdGVFbnRpdHlJZCB8fCB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXM/LlswXTtcbiAgICBpZiAoIWNsaW1hdGVJZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5pc0FkanVzdGluZyA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VydmljZV9kYXRhOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHR5cGUgPT09ICdzaW5nbGUnICYmIHRoaXMudGFyZ2V0VGVtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlcnZpY2VfZGF0YS50ZW1wZXJhdHVyZSA9IE1hdGgucm91bmQoKHRoaXMudGFyZ2V0VGVtcCArIGNoYW5nZSkgKiAyKSAvIDI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdsb3cnICYmIHRoaXMudGFyZ2V0VGVtcExvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlcnZpY2VfZGF0YS50YXJnZXRfdGVtcF9sb3cgPSBNYXRoLnJvdW5kKCh0aGlzLnRhcmdldFRlbXBMb3cgKyBjaGFuZ2UpICogMikgLyAyO1xuICAgICAgICBzZXJ2aWNlX2RhdGEudGFyZ2V0X3RlbXBfaGlnaCA9IHRoaXMudGFyZ2V0VGVtcEhpZ2g7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdoaWdoJyAmJiB0aGlzLnRhcmdldFRlbXBIaWdoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VydmljZV9kYXRhLnRhcmdldF90ZW1wX2xvdyA9IHRoaXMudGFyZ2V0VGVtcExvdztcbiAgICAgICAgc2VydmljZV9kYXRhLnRhcmdldF90ZW1wX2hpZ2ggPSBNYXRoLnJvdW5kKCh0aGlzLnRhcmdldFRlbXBIaWdoICsgY2hhbmdlKSAqIDIpIC8gMjtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKCdjbGltYXRlJywgJ3NldF90ZW1wZXJhdHVyZScsIHtcbiAgICAgICAgZW50aXR5X2lkOiBjbGltYXRlSWQsXG4gICAgICAgIC4uLnNlcnZpY2VfZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBhZGp1c3QgdGVtcGVyYXR1cmU6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzQWRqdXN0aW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZXRIdmFjTW9kZShtb2RlOiBIdmFjTW9kZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNsaW1hdGVJZCA9IHRoaXMuY2xpbWF0ZUVudGl0eUlkIHx8IHRoaXMud2lkZ2V0Q29uZmlnPy5lbnRpdGllcz8uWzBdO1xuICAgIGlmICghY2xpbWF0ZUlkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKCdjbGltYXRlJywgJ3NldF9odmFjX21vZGUnLCB7XG4gICAgICAgIGVudGl0eV9pZDogY2xpbWF0ZUlkLFxuICAgICAgICBodmFjX21vZGU6IG1vZGVcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2V0IEhWQUMgbW9kZTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZXRQcmVzZXRNb2RlKHByZXNldDogUHJlc2V0TW9kZSB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjbGltYXRlSWQgPSB0aGlzLmNsaW1hdGVFbnRpdHlJZCB8fCB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXM/LlswXTtcbiAgICBpZiAoIWNsaW1hdGVJZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnY2xpbWF0ZScsICdzZXRfcHJlc2V0X21vZGUnLCB7XG4gICAgICAgIGVudGl0eV9pZDogY2xpbWF0ZUlkLFxuICAgICAgICBwcmVzZXRfbW9kZTogcHJlc2V0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNldCBwcmVzZXQgbW9kZTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTa2VsZXRvbigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi10ZXh0IGxhcmdlXCIgc3R5bGU9XCJ3aWR0aDogMTQwcHg7XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLWJ1dHRvblwiIHN0eWxlPVwid2lkdGg6IDgwcHg7IGhlaWdodDogMjhweDtcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wZXJhdHVyZS1kaXNwbGF5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLWNhcmRcIiBzdHlsZT1cImhlaWdodDogMjAwcHg7IG1hcmdpbjogMTZweDtcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RlLXNlbGVjdG9yXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLWJ1dHRvblwiIHN0eWxlPVwibWFyZ2luOiA4cHg7XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLWJ1dHRvblwiIHN0eWxlPVwibWFyZ2luOiA4cHg7XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNrZWxldG9uIHNrZWxldG9uLWJ1dHRvblwiIHN0eWxlPVwibWFyZ2luOiA4cHg7XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgc3R5bGVzID0gY3NzYFxuICAgICR7RGFzaHZpZXdXaWRnZXQuc3R5bGVzfVxuICAgICR7c2tlbGV0b25TdHlsZXN9XG4gICAgJHt0b3VjaFN0eWxlc31cbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDI1MHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyIGgyIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuaHZhYy1tb2RlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07XG4gICAgICB9XG5cbiAgICAgIC5odmFjLW1vZGUub2ZmIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuaHZhYy1tb2RlLmhlYXQge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMTUyLCAwLCAwLjIpO1xuICAgICAgICBjb2xvcjogI2ZmNmIwMDtcbiAgICAgIH1cblxuICAgICAgLmh2YWMtbW9kZS5jb29sIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgzMywgMTUwLCAyNDMsIDAuMik7XG4gICAgICAgIGNvbG9yOiAjMDI4OGQxO1xuICAgICAgfVxuXG4gICAgICAuaHZhYy1tb2RlLmhlYXRfY29vbCxcbiAgICAgIC5odmFjLW1vZGUuYXV0byB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNzYsIDE3NSwgODAsIDAuMik7XG4gICAgICAgIGNvbG9yOiAjMzg4ZTNjO1xuICAgICAgfVxuXG4gICAgICAudGVtcGVyYXR1cmUtZGlzcGxheSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuY3VycmVudC10ZW1wIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDMuNWVtO1xuICAgICAgICBmb250LXdlaWdodDogMzAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAudGVtcC11bml0IHtcbiAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtdW5hdmFpbGFibGUge1xuICAgICAgICBmb250LXNpemU6IDNlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnRhcmdldC10ZW1wLFxuICAgICAgLnRhcmdldC10ZW1wLXJhbmdlIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAudGFyZ2V0LWxhYmVsIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtY29udHJvbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLWNvbnRyb2xzLWR1YWwge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDI0cHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtY29udHJvbCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS40ZW07XG4gICAgICAgIG1pbi13aWR0aDogNjBweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAubW9kZS1zZWxlY3RvciB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoODBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5tb2RlLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNhcmQtYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDE1MG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjc1ZW07XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RlLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAubW9kZS1idXR0b24uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbW9kZS1jb2xvciwgdmFyKC0tcHJpbWFyeS1jb2xvcikpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tbW9kZS1jb2xvciwgdmFyKC0tcHJpbWFyeS1jb2xvcikpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgIH1cblxuICAgICAgLm1vZGUtYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKSBzY2FsZSgwLjk1KTtcbiAgICAgIH1cblxuICAgICAgLm1vZGUtYnV0dG9uIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDI0cHg7XG4gICAgICB9XG5cbiAgICAgIC5wcmVzZXQtc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnByZXNldC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIC5wcmVzZXQtYnV0dG9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5wcmVzZXQtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAycHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC43ZW07XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICB9XG5cbiAgICAgIC5wcmVzZXQtYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAucHJlc2V0LWJ1dHRvbiBoYS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAxOHB4O1xuICAgICAgfVxuXG4gICAgICAuaHVtaWRpdHktZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5odW1pZGl0eS1kaXNwbGF5IGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDE4cHg7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24tYnV0dG9uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1idXR0b24tc2l6ZTogNDhweDtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFRlbXBlcmF0dXJlIGRpYWwgc3R5bGVzICovXG4gICAgICAudGVtcC1kaWFsLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtZGlhbCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZGlhbC1zdmcge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAuZGlhbC1iZyB7XG4gICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICAgIHN0cm9rZTogdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIHN0cm9rZS13aWR0aDogODtcbiAgICAgIH1cblxuICAgICAgLmRpYWwtY3VycmVudCB7XG4gICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICAgIHN0cm9rZTogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIHN0cm9rZS13aWR0aDogODtcbiAgICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgICAgICB0cmFuc2l0aW9uOiBzdHJva2UtZGFzaGFycmF5IDM1MG1zIGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKTtcbiAgICAgIH1cblxuICAgICAgLmRpYWwtdGFyZ2V0IHtcbiAgICAgICAgZmlsbDogbm9uZTtcbiAgICAgICAgc3Ryb2tlOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIHN0cm9rZS13aWR0aDogNDtcbiAgICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgICAgfVxuXG4gICAgICAuZGlhbC1jZW50ZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogNTAlO1xuICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5jdXJyZW50LXRlbXAtZGlhbCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAudGVtcC12YWx1ZS1kaWFsIHtcbiAgICAgICAgZm9udC1zaXplOiAyLjVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgIH1cblxuICAgICAgLnRlbXAtdW5pdC1kaWFsIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLnRhcmdldC10ZW1wLWRpYWwge1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICB9XG5cbiAgICAgIC50ZW1wLWRpYWwtdW5hdmFpbGFibGUge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgIH1cblxuICAgICAgLnRyZW5kLWluZGljYXRvciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLnRyZW5kLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zdWNjZXNzLWNvbG9yLCAjNGNhZjUwKTtcbiAgICAgIH1cblxuICAgICAgLyogTW9iaWxlIG9wdGltaXphdGlvbnMgKi9cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAudGVtcC1kaWFsIHtcbiAgICAgICAgICB3aWR0aDogMTYwcHg7XG4gICAgICAgICAgaGVpZ2h0OiAxNjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC50ZW1wLXZhbHVlLWRpYWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLnRlbXAtdW5pdC1kaWFsIHtcbiAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tb2RlLXNlbGVjdG9yIHtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDYwcHgsIDFmcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByZXNldC1idXR0b25zIHtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBBY2Nlc3NpYmlsaXR5ICovXG4gICAgICBAbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xuICAgICAgICAubW9kZS1idXR0b246aG92ZXIge1xuICAgICAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tb2RlLWJ1dHRvbjphY3RpdmUge1xuICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45OCk7XG4gICAgICAgIH1cblxuICAgICAgICAuZGlhbC1jdXJyZW50IHtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/widgets/climate-widget.ts\n\n}");

/***/ }),

/***/ "./src/widgets/device-group-widget.ts":
/*!********************************************!*\
  !*** ./src/widgets/device-group-widget.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeviceGroupWidget: () => (/* binding */ DeviceGroupWidget)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _core_widget_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/widget-base */ \"./src/core/widget-base.ts\");\n/**\n * Device group widget for Dashview V2.\n * Groups and displays devices by type (switches, sensors, etc).\n */\n\n\n\n\nlet DeviceGroupWidget = class DeviceGroupWidget extends _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.deviceType = 'switch';\n        this.expanded = false;\n        this.groupedEntities = [];\n        this.onlineCount = 0;\n        this.activeCount = 0;\n    }\n    subscribedEntities() {\n        // Subscribe to all entities when expanded, or just active ones when collapsed\n        const entities = this.widgetConfig?.entities || [];\n        if (this.expanded) {\n            return entities;\n        }\n        // When collapsed, only subscribe to active entities\n        return entities.filter(id => {\n            const state = this.entityStates.get(id);\n            return state && state.state !== 'unavailable' && state.state !== 'unknown';\n        });\n    }\n    getDefaultConfig() {\n        return {\n            type: 'device-group',\n            deviceType: 'switch',\n            entities: [],\n            showOffline: false,\n            showGroupControls: true,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateGroupedEntities();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateGroupedEntities();\n    }\n    updateGroupedEntities() {\n        const grouped = [];\n        let onlineCount = 0;\n        let activeCount = 0;\n        for (const [entityId, state] of this.entityStates) {\n            const isOnline = state.state !== 'unavailable' && state.state !== 'unknown';\n            const isToggleable = this.isToggleableEntity(entityId);\n            const isActive = isToggleable ? state.state === 'on' : isOnline;\n            if (isOnline)\n                onlineCount++;\n            if (isActive)\n                activeCount++;\n            grouped.push({\n                entityId,\n                name: state.attributes.friendly_name || entityId.split('.')[1].replace(/_/g, ' '),\n                state: state.state,\n                icon: state.attributes.icon || this.getDefaultIcon(entityId),\n                lastChanged: state.last_changed ? new Date(state.last_changed) : undefined,\n                isToggleable,\n                isOnline,\n            });\n        }\n        // Sort by online status, then by state, then by name\n        grouped.sort((a, b) => {\n            if (a.isOnline !== b.isOnline)\n                return b.isOnline ? 1 : -1;\n            if (a.state !== b.state) {\n                if (a.state === 'on')\n                    return -1;\n                if (b.state === 'on')\n                    return 1;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        this.groupedEntities = grouped;\n        this.onlineCount = onlineCount;\n        this.activeCount = activeCount;\n    }\n    isToggleableEntity(entityId) {\n        const domain = entityId.split('.')[0];\n        return ['switch', 'light', 'fan', 'input_boolean', 'cover'].includes(domain);\n    }\n    getDefaultIcon(entityId) {\n        const domain = entityId.split('.')[0];\n        const iconMap = {\n            'switch': 'mdi:toggle-switch',\n            'sensor': 'mdi:eye',\n            'binary_sensor': 'mdi:radiobox-blank',\n            'cover': 'mdi:window-shutter',\n            'fan': 'mdi:fan',\n            'light': 'mdi:lightbulb',\n        };\n        return iconMap[domain] || 'mdi:devices';\n    }\n    render() {\n        const title = this.groupName ||\n            this.widgetConfig?.title ||\n            `${this.deviceType.charAt(0).toUpperCase() + this.deviceType.slice(1)}s`;\n        if (this.isLoading) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-loading\">\n          Loading devices...\n        </div>\n      `;\n        }\n        if (this.error) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-error\">\n          ${this.error}\n        </div>\n      `;\n        }\n        const config = this.widgetConfig;\n        const showOffline = config?.showOffline ?? false;\n        const filteredEntities = showOffline ?\n            this.groupedEntities :\n            this.groupedEntities.filter(e => e.isOnline);\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card>\n        <div class=\"header\" @click=${this.toggleExpanded}>\n          <div class=\"header-content\">\n            <h2>${title}</h2>\n            <div class=\"device-count\">\n              ${this.activeCount}/${this.onlineCount}\n            </div>\n          </div>\n          <ha-icon\n            class=\"expand-icon ${this.expanded ? 'expanded' : ''}\"\n            icon=\"mdi:chevron-down\"\n          ></ha-icon>\n        </div>\n\n        ${this.expanded ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <div class=\"entities\">\n            ${filteredEntities.length === 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n              <div class=\"empty-state\">\n                No ${showOffline ? '' : 'online'} devices found\n              </div>\n            ` : filteredEntities.map(entity => this.renderEntity(entity))}\n          </div>\n        ` : ''}\n\n        ${this.renderActions()}\n      </ha-card>\n    `;\n    }\n    renderEntity(entity) {\n        const stateDisplay = this.getStateDisplay(entity);\n        const stateClass = entity.isOnline ? '' : 'offline';\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"entity-row ${stateClass}\">\n        <ha-icon \n          icon=\"${entity.icon}\"\n          class=\"entity-icon ${entity.state === 'on' ? 'active' : ''}\"\n        ></ha-icon>\n        <span class=\"entity-name\">${entity.name}</span>\n        ${entity.isToggleable && entity.isOnline ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <ha-switch\n            .checked=${entity.state === 'on'}\n            @change=${() => this.toggleEntity(entity.entityId)}\n          ></ha-switch>\n        ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <span class=\"entity-state\">${stateDisplay}</span>\n        `}\n      </div>\n    `;\n    }\n    getStateDisplay(entity) {\n        if (!entity.isOnline)\n            return 'Offline';\n        // For sensors, show the value with unit\n        if (entity.entityId.includes('sensor')) {\n            const state = this.entityStates.get(entity.entityId);\n            const unit = state?.attributes?.unit_of_measurement || '';\n            return `${entity.state}${unit ? ' ' + unit : ''}`;\n        }\n        // For binary sensors, show more descriptive text\n        if (entity.entityId.includes('binary_sensor')) {\n            return entity.state === 'on' ? 'Detected' : 'Clear';\n        }\n        return entity.state;\n    }\n    renderActions() {\n        const config = this.widgetConfig;\n        const showGroupControls = config?.showGroupControls ?? true;\n        if (!showGroupControls || !this.hasToggleableEntities()) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        }\n        const hasActiveDevices = this.groupedEntities.some(e => e.isToggleable && e.isOnline && e.state === 'on');\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"actions\">\n        ${hasActiveDevices ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <mwc-button @click=${this.turnAllOff}>\n            <ha-icon icon=\"mdi:power-off\"></ha-icon>\n            All Off\n          </mwc-button>\n        ` : ''}\n        <mwc-button @click=${this.turnAllOn}>\n          <ha-icon icon=\"mdi:power-on\"></ha-icon>\n          All On\n        </mwc-button>\n      </div>\n    `;\n    }\n    hasToggleableEntities() {\n        return this.groupedEntities.some(e => e.isToggleable && e.isOnline);\n    }\n    toggleExpanded() {\n        this.expanded = !this.expanded;\n        // Update subscriptions when expanding/collapsing\n        if (this.expanded) {\n            this.updateSubscriptions();\n        }\n    }\n    async turnAllOff() {\n        const toggleable = this.groupedEntities.filter(e => e.isToggleable && e.isOnline && e.state === 'on');\n        for (const entity of toggleable) {\n            await this.turnOff(entity.entityId);\n        }\n    }\n    async turnAllOn() {\n        const toggleable = this.groupedEntities.filter(e => e.isToggleable && e.isOnline && e.state === 'off');\n        for (const entity of toggleable) {\n            await this.turnOn(entity.entityId);\n        }\n    }\n};\nDeviceGroupWidget.styles = [\n    _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget.styles,\n    (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: linear-gradient(to bottom, rgba(var(--rgb-primary-color), 0.05), transparent);\n      }\n\n      .header-content {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .device-count {\n        background: var(--primary-color);\n        color: var(--text-primary-color, white);\n        padding: 2px 8px;\n        border-radius: 12px;\n        font-size: 0.8em;\n        font-weight: 500;\n      }\n\n      .expand-icon {\n        transition: transform 0.3s ease;\n        color: var(--secondary-text-color);\n      }\n\n      .expand-icon.expanded {\n        transform: rotate(180deg);\n      }\n\n      .entities {\n        flex: 1;\n        overflow-y: auto;\n        padding: 0 16px;\n        max-height: 400px;\n      }\n\n      .entity-row {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px 0;\n        border-bottom: 1px solid var(--divider-color);\n        transition: opacity 0.2s ease;\n      }\n\n      .entity-row:last-child {\n        border-bottom: none;\n      }\n\n      .entity-row.offline {\n        opacity: 0.5;\n      }\n\n      .entity-icon {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n        transition: color 0.2s ease;\n      }\n\n      .entity-icon.active {\n        color: var(--primary-color);\n      }\n\n      .entity-name {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .entity-state {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        min-width: 60px;\n        text-align: right;\n      }\n\n      .empty-state {\n        padding: 32px;\n        text-align: center;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      .actions {\n        padding: 8px 16px;\n        border-top: 1px solid var(--divider-color);\n        display: flex;\n        justify-content: flex-end;\n        gap: 8px;\n      }\n\n      .actions:empty {\n        display: none;\n      }\n\n      mwc-button {\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      mwc-button ha-icon {\n        margin-right: 4px;\n      }\n    `\n];\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", String)\n], DeviceGroupWidget.prototype, \"deviceType\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", String)\n], DeviceGroupWidget.prototype, \"groupName\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"expanded\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", Array)\n], DeviceGroupWidget.prototype, \"groupedEntities\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"onlineCount\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", Object)\n], DeviceGroupWidget.prototype, \"activeCount\", void 0);\nDeviceGroupWidget = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.customElement)('dashview-device-group-widget')\n], DeviceGroupWidget);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2lkZ2V0cy9kZXZpY2UtZ3JvdXAtd2lkZ2V0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztHQUdHOztBQUU2RDtBQUNHO0FBQ0E7QUFxQjVELElBQU0saUJBQWlCLEdBQXZCLE1BQU0saUJBQWtCLFNBQVEsNkRBQWM7SUFBOUM7O1FBQ3VCLGVBQVUsR0FBVyxRQUFRLENBQUM7UUFFekMsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixvQkFBZSxHQUFvQixFQUFFLENBQUM7UUFDdEMsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFDaEIsZ0JBQVcsR0FBRyxDQUFDLENBQUM7SUEwWG5DLENBQUM7SUF4WFcsa0JBQWtCO1FBQzFCLDhFQUE4RTtRQUM5RSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLFFBQVEsSUFBSSxFQUFFLENBQUM7UUFFbkQsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDbEIsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQztRQUVELG9EQUFvRDtRQUNwRCxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEMsT0FBTyxLQUFLLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxhQUFhLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUM7UUFDN0UsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRVMsZ0JBQWdCO1FBQ3hCLE9BQU87WUFDTCxJQUFJLEVBQUUsY0FBYztZQUNwQixVQUFVLEVBQUUsUUFBUTtZQUNwQixRQUFRLEVBQUUsRUFBRTtZQUNaLFdBQVcsRUFBRSxLQUFLO1lBQ2xCLGlCQUFpQixFQUFFLElBQUk7U0FDeEIsQ0FBQztJQUNKLENBQUM7SUFFUyxZQUFZLENBQUMsWUFBNEI7UUFDakQsS0FBSyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRVMsY0FBYyxDQUFDLFFBQWdCLEVBQUUsUUFBYSxFQUFFLFFBQWE7UUFDckUsS0FBSyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFTyxxQkFBcUI7UUFDM0IsTUFBTSxPQUFPLEdBQW9CLEVBQUUsQ0FBQztRQUNwQyxJQUFJLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDcEIsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRXBCLEtBQUssTUFBTSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbEQsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLEtBQUssS0FBSyxhQUFhLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUM7WUFDNUUsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUVoRSxJQUFJLFFBQVE7Z0JBQUUsV0FBVyxFQUFFLENBQUM7WUFDNUIsSUFBSSxRQUFRO2dCQUFFLFdBQVcsRUFBRSxDQUFDO1lBRTVCLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQ1gsUUFBUTtnQkFDUixJQUFJLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxhQUFhLElBQUksUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztnQkFDakYsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO2dCQUNsQixJQUFJLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7Z0JBQzVELFdBQVcsRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQzFFLFlBQVk7Z0JBQ1osUUFBUTthQUNULENBQUMsQ0FBQztRQUNMLENBQUM7UUFFRCxxREFBcUQ7UUFDckQsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNwQixJQUFJLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLFFBQVE7Z0JBQUUsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJO29CQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJO29CQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ2pDLENBQUM7WUFDRCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2pDLENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxRQUFnQjtRQUN6QyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFFTyxjQUFjLENBQUMsUUFBZ0I7UUFDckMsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxNQUFNLE9BQU8sR0FBMkI7WUFDdEMsUUFBUSxFQUFFLG1CQUFtQjtZQUM3QixRQUFRLEVBQUUsU0FBUztZQUNuQixlQUFlLEVBQUUsb0JBQW9CO1lBQ3JDLE9BQU8sRUFBRSxvQkFBb0I7WUFDN0IsS0FBSyxFQUFFLFNBQVM7WUFDaEIsT0FBTyxFQUFFLGVBQWU7U0FDekIsQ0FBQztRQUNGLE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLGFBQWEsQ0FBQztJQUMxQyxDQUFDO0lBRVMsTUFBTTtRQUNkLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTO1lBQ2QsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLO1lBQ3hCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUV2RixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuQixPQUFPLHlDQUFJOzs7O09BSVYsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNmLE9BQU8seUNBQUk7O1lBRUwsSUFBSSxDQUFDLEtBQUs7O09BRWYsQ0FBQztRQUNKLENBQUM7UUFFRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBdUMsQ0FBQztRQUM1RCxNQUFNLFdBQVcsR0FBRyxNQUFNLEVBQUUsV0FBVyxJQUFJLEtBQUssQ0FBQztRQUNqRCxNQUFNLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUUvQyxPQUFPLHlDQUFJOztxQ0FFc0IsSUFBSSxDQUFDLGNBQWM7O2tCQUV0QyxLQUFLOztnQkFFUCxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXOzs7O2lDQUluQixJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUU7Ozs7O1VBS3RELElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLHlDQUFJOztjQUVoQixnQkFBZ0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyx5Q0FBSTs7cUJBRTdCLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFROzthQUVuQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztTQUVoRSxDQUFDLENBQUMsQ0FBQyxFQUFFOztVQUVKLElBQUksQ0FBQyxhQUFhLEVBQUU7O0tBRXpCLENBQUM7SUFDSixDQUFDO0lBRU8sWUFBWSxDQUFDLE1BQXFCO1FBQ3hDLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbEQsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFFcEQsT0FBTyx5Q0FBSTsrQkFDZ0IsVUFBVTs7a0JBRXZCLE1BQU0sQ0FBQyxJQUFJOytCQUNFLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUU7O29DQUVoQyxNQUFNLENBQUMsSUFBSTtVQUNyQyxNQUFNLENBQUMsWUFBWSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLHlDQUFJOzt1QkFFaEMsTUFBTSxDQUFDLEtBQUssS0FBSyxJQUFJO3NCQUN0QixHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7O1NBRXJELENBQUMsQ0FBQyxDQUFDLHlDQUFJO3VDQUN1QixZQUFZO1NBQzFDOztLQUVKLENBQUM7SUFDSixDQUFDO0lBRU8sZUFBZSxDQUFDLE1BQXFCO1FBQzNDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUTtZQUFFLE9BQU8sU0FBUyxDQUFDO1FBRXZDLHdDQUF3QztRQUN4QyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7WUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3JELE1BQU0sSUFBSSxHQUFHLEtBQUssRUFBRSxVQUFVLEVBQUUsbUJBQW1CLElBQUksRUFBRSxDQUFDO1lBQzFELE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDcEQsQ0FBQztRQUVELGlEQUFpRDtRQUNqRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUM7WUFDOUMsT0FBTyxNQUFNLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDdEQsQ0FBQztRQUVELE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRU8sYUFBYTtRQUNuQixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBdUMsQ0FBQztRQUM1RCxNQUFNLGlCQUFpQixHQUFHLE1BQU0sRUFBRSxpQkFBaUIsSUFBSSxJQUFJLENBQUM7UUFFNUQsSUFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQztZQUN4RCxPQUFPLHlDQUFJLEdBQUUsQ0FBQztRQUNoQixDQUFDO1FBRUQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNyRCxDQUFDLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQ2pELENBQUM7UUFFRixPQUFPLHlDQUFJOztVQUVMLGdCQUFnQixDQUFDLENBQUMsQ0FBQyx5Q0FBSTsrQkFDRixJQUFJLENBQUMsVUFBVTs7OztTQUlyQyxDQUFDLENBQUMsQ0FBQyxFQUFFOzZCQUNlLElBQUksQ0FBQyxTQUFTOzs7OztLQUt0QyxDQUFDO0lBQ0osQ0FBQztJQUVPLHFCQUFxQjtRQUMzQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVPLGNBQWM7UUFDcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFFL0IsaURBQWlEO1FBQ2pELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzdCLENBQUM7SUFDSCxDQUFDO0lBRU8sS0FBSyxDQUFDLFVBQVU7UUFDdEIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDakQsQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUNqRCxDQUFDO1FBRUYsS0FBSyxNQUFNLE1BQU0sSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7SUFDSCxDQUFDO0lBRU8sS0FBSyxDQUFDLFNBQVM7UUFDckIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDakQsQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUNsRCxDQUFDO1FBRUYsS0FBSyxNQUFNLE1BQU0sSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDOztBQUVNLHdCQUFNLEdBQUc7SUFDZCw2REFBYyxDQUFDLE1BQU07SUFDckIsd0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0F5SEY7Q0FDRixDQUFDO0FBOVgwQjtJQUEzQiwyREFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDOztxREFBK0I7QUFDOUI7SUFBM0IsMkRBQVEsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQzs7b0RBQW9CO0FBQzlCO0lBQWhCLHdEQUFLLEVBQUU7O21EQUEwQjtBQUNqQjtJQUFoQix3REFBSyxFQUFFOzswREFBK0M7QUFDdEM7SUFBaEIsd0RBQUssRUFBRTs7c0RBQXlCO0FBQ2hCO0lBQWhCLHdEQUFLLEVBQUU7O3NEQUF5QjtBQU50QixpQkFBaUI7SUFEN0IsZ0VBQWEsQ0FBQyw4QkFBOEIsQ0FBQztHQUNqQyxpQkFBaUIsQ0FnWTdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRGFzaHZpZXdWMi8uL3NyYy93aWRnZXRzL2RldmljZS1ncm91cC13aWRnZXQudHM/NmQ0MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERldmljZSBncm91cCB3aWRnZXQgZm9yIERhc2h2aWV3IFYyLlxuICogR3JvdXBzIGFuZCBkaXNwbGF5cyBkZXZpY2VzIGJ5IHR5cGUgKHN3aXRjaGVzLCBzZW5zb3JzLCBldGMpLlxuICovXG5cbmltcG9ydCB7IGh0bWwsIGNzcywgUHJvcGVydHlWYWx1ZXMsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IERhc2h2aWV3V2lkZ2V0LCBXaWRnZXRDb25maWcgfSBmcm9tICcuLi9jb3JlL3dpZGdldC1iYXNlJztcblxuaW50ZXJmYWNlIERldmljZUdyb3VwV2lkZ2V0Q29uZmlnIGV4dGVuZHMgV2lkZ2V0Q29uZmlnIHtcbiAgdHlwZTogJ2RldmljZS1ncm91cCc7XG4gIGRldmljZVR5cGU6ICdzd2l0Y2gnIHwgJ3NlbnNvcicgfCAnYmluYXJ5X3NlbnNvcicgfCAnY292ZXInIHwgJ2Zhbic7XG4gIGdyb3VwTmFtZT86IHN0cmluZztcbiAgc2hvd09mZmxpbmU/OiBib29sZWFuO1xuICBzaG93R3JvdXBDb250cm9scz86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBHcm91cGVkRW50aXR5IHtcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdGF0ZTogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICBsYXN0Q2hhbmdlZD86IERhdGU7XG4gIGlzVG9nZ2xlYWJsZTogYm9vbGVhbjtcbiAgaXNPbmxpbmU6IGJvb2xlYW47XG59XG5cbkBjdXN0b21FbGVtZW50KCdkYXNodmlldy1kZXZpY2UtZ3JvdXAtd2lkZ2V0JylcbmV4cG9ydCBjbGFzcyBEZXZpY2VHcm91cFdpZGdldCBleHRlbmRzIERhc2h2aWV3V2lkZ2V0IHtcbiAgQHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pIGRldmljZVR5cGU6IHN0cmluZyA9ICdzd2l0Y2gnO1xuICBAcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSkgZ3JvdXBOYW1lPzogc3RyaW5nO1xuICBAc3RhdGUoKSBwcml2YXRlIGV4cGFuZGVkID0gZmFsc2U7XG4gIEBzdGF0ZSgpIHByaXZhdGUgZ3JvdXBlZEVudGl0aWVzOiBHcm91cGVkRW50aXR5W10gPSBbXTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBvbmxpbmVDb3VudCA9IDA7XG4gIEBzdGF0ZSgpIHByaXZhdGUgYWN0aXZlQ291bnQgPSAwO1xuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIC8vIFN1YnNjcmliZSB0byBhbGwgZW50aXRpZXMgd2hlbiBleHBhbmRlZCwgb3IganVzdCBhY3RpdmUgb25lcyB3aGVuIGNvbGxhcHNlZFxuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy53aWRnZXRDb25maWc/LmVudGl0aWVzIHx8IFtdO1xuICAgIFxuICAgIGlmICh0aGlzLmV4cGFuZGVkKSB7XG4gICAgICByZXR1cm4gZW50aXRpZXM7XG4gICAgfVxuICAgIFxuICAgIC8vIFdoZW4gY29sbGFwc2VkLCBvbmx5IHN1YnNjcmliZSB0byBhY3RpdmUgZW50aXRpZXNcbiAgICByZXR1cm4gZW50aXRpZXMuZmlsdGVyKGlkID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGlkKTtcbiAgICAgIHJldHVybiBzdGF0ZSAmJiBzdGF0ZS5zdGF0ZSAhPT0gJ3VuYXZhaWxhYmxlJyAmJiBzdGF0ZS5zdGF0ZSAhPT0gJ3Vua25vd24nO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERlZmF1bHRDb25maWcoKTogUGFydGlhbDxEZXZpY2VHcm91cFdpZGdldENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnZGV2aWNlLWdyb3VwJyxcbiAgICAgIGRldmljZVR5cGU6ICdzd2l0Y2gnLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgc2hvd09mZmxpbmU6IGZhbHNlLFxuICAgICAgc2hvd0dyb3VwQ29udHJvbHM6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMudXBkYXRlR3JvdXBlZEVudGl0aWVzKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25TdGF0ZUNoYW5nZWQoZW50aXR5SWQ6IHN0cmluZywgbmV3U3RhdGU6IGFueSwgb2xkU3RhdGU6IGFueSk6IHZvaWQge1xuICAgIHN1cGVyLm9uU3RhdGVDaGFuZ2VkKGVudGl0eUlkLCBuZXdTdGF0ZSwgb2xkU3RhdGUpO1xuICAgIHRoaXMudXBkYXRlR3JvdXBlZEVudGl0aWVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUdyb3VwZWRFbnRpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCBncm91cGVkOiBHcm91cGVkRW50aXR5W10gPSBbXTtcbiAgICBsZXQgb25saW5lQ291bnQgPSAwO1xuICAgIGxldCBhY3RpdmVDb3VudCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVdIG9mIHRoaXMuZW50aXR5U3RhdGVzKSB7XG4gICAgICBjb25zdCBpc09ubGluZSA9IHN0YXRlLnN0YXRlICE9PSAndW5hdmFpbGFibGUnICYmIHN0YXRlLnN0YXRlICE9PSAndW5rbm93bic7XG4gICAgICBjb25zdCBpc1RvZ2dsZWFibGUgPSB0aGlzLmlzVG9nZ2xlYWJsZUVudGl0eShlbnRpdHlJZCk7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IGlzVG9nZ2xlYWJsZSA/IHN0YXRlLnN0YXRlID09PSAnb24nIDogaXNPbmxpbmU7XG5cbiAgICAgIGlmIChpc09ubGluZSkgb25saW5lQ291bnQrKztcbiAgICAgIGlmIChpc0FjdGl2ZSkgYWN0aXZlQ291bnQrKztcblxuICAgICAgZ3JvdXBlZC5wdXNoKHtcbiAgICAgICAgZW50aXR5SWQsXG4gICAgICAgIG5hbWU6IHN0YXRlLmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZSB8fCBlbnRpdHlJZC5zcGxpdCgnLicpWzFdLnJlcGxhY2UoL18vZywgJyAnKSxcbiAgICAgICAgc3RhdGU6IHN0YXRlLnN0YXRlLFxuICAgICAgICBpY29uOiBzdGF0ZS5hdHRyaWJ1dGVzLmljb24gfHwgdGhpcy5nZXREZWZhdWx0SWNvbihlbnRpdHlJZCksXG4gICAgICAgIGxhc3RDaGFuZ2VkOiBzdGF0ZS5sYXN0X2NoYW5nZWQgPyBuZXcgRGF0ZShzdGF0ZS5sYXN0X2NoYW5nZWQpIDogdW5kZWZpbmVkLFxuICAgICAgICBpc1RvZ2dsZWFibGUsXG4gICAgICAgIGlzT25saW5lLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU29ydCBieSBvbmxpbmUgc3RhdHVzLCB0aGVuIGJ5IHN0YXRlLCB0aGVuIGJ5IG5hbWVcbiAgICBncm91cGVkLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhLmlzT25saW5lICE9PSBiLmlzT25saW5lKSByZXR1cm4gYi5pc09ubGluZSA/IDEgOiAtMTtcbiAgICAgIGlmIChhLnN0YXRlICE9PSBiLnN0YXRlKSB7XG4gICAgICAgIGlmIChhLnN0YXRlID09PSAnb24nKSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChiLnN0YXRlID09PSAnb24nKSByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5ncm91cGVkRW50aXRpZXMgPSBncm91cGVkO1xuICAgIHRoaXMub25saW5lQ291bnQgPSBvbmxpbmVDb3VudDtcbiAgICB0aGlzLmFjdGl2ZUNvdW50ID0gYWN0aXZlQ291bnQ7XG4gIH1cblxuICBwcml2YXRlIGlzVG9nZ2xlYWJsZUVudGl0eShlbnRpdHlJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZG9tYWluID0gZW50aXR5SWQuc3BsaXQoJy4nKVswXTtcbiAgICByZXR1cm4gWydzd2l0Y2gnLCAnbGlnaHQnLCAnZmFuJywgJ2lucHV0X2Jvb2xlYW4nLCAnY292ZXInXS5pbmNsdWRlcyhkb21haW4pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0SWNvbihlbnRpdHlJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgIGNvbnN0IGljb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnc3dpdGNoJzogJ21kaTp0b2dnbGUtc3dpdGNoJyxcbiAgICAgICdzZW5zb3InOiAnbWRpOmV5ZScsXG4gICAgICAnYmluYXJ5X3NlbnNvcic6ICdtZGk6cmFkaW9ib3gtYmxhbmsnLFxuICAgICAgJ2NvdmVyJzogJ21kaTp3aW5kb3ctc2h1dHRlcicsXG4gICAgICAnZmFuJzogJ21kaTpmYW4nLFxuICAgICAgJ2xpZ2h0JzogJ21kaTpsaWdodGJ1bGInLFxuICAgIH07XG4gICAgcmV0dXJuIGljb25NYXBbZG9tYWluXSB8fCAnbWRpOmRldmljZXMnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLmdyb3VwTmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0Q29uZmlnPy50aXRsZSB8fCBcbiAgICAgICAgICAgICAgICAgIGAke3RoaXMuZGV2aWNlVHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuZGV2aWNlVHlwZS5zbGljZSgxKX1zYDtcblxuICAgIGlmICh0aGlzLmlzTG9hZGluZykge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ3aWRnZXQtbG9hZGluZ1wiPlxuICAgICAgICAgIExvYWRpbmcgZGV2aWNlcy4uLlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWVycm9yXCI+XG4gICAgICAgICAgJHt0aGlzLmVycm9yfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy53aWRnZXRDb25maWcgYXMgRGV2aWNlR3JvdXBXaWRnZXRDb25maWc7XG4gICAgY29uc3Qgc2hvd09mZmxpbmUgPSBjb25maWc/LnNob3dPZmZsaW5lID8/IGZhbHNlO1xuICAgIGNvbnN0IGZpbHRlcmVkRW50aXRpZXMgPSBzaG93T2ZmbGluZSA/IFxuICAgICAgdGhpcy5ncm91cGVkRW50aXRpZXMgOiBcbiAgICAgIHRoaXMuZ3JvdXBlZEVudGl0aWVzLmZpbHRlcihlID0+IGUuaXNPbmxpbmUpO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiIEBjbGljaz0ke3RoaXMudG9nZ2xlRXhwYW5kZWR9PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItY29udGVudFwiPlxuICAgICAgICAgICAgPGgyPiR7dGl0bGV9PC9oMj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXZpY2UtY291bnRcIj5cbiAgICAgICAgICAgICAgJHt0aGlzLmFjdGl2ZUNvdW50fS8ke3RoaXMub25saW5lQ291bnR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgY2xhc3M9XCJleHBhbmQtaWNvbiAke3RoaXMuZXhwYW5kZWQgPyAnZXhwYW5kZWQnIDogJyd9XCJcbiAgICAgICAgICAgIGljb249XCJtZGk6Y2hldnJvbi1kb3duXCJcbiAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICAke3RoaXMuZXhwYW5kZWQgPyBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbnRpdGllc1wiPlxuICAgICAgICAgICAgJHtmaWx0ZXJlZEVudGl0aWVzLmxlbmd0aCA9PT0gMCA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS1zdGF0ZVwiPlxuICAgICAgICAgICAgICAgIE5vICR7c2hvd09mZmxpbmUgPyAnJyA6ICdvbmxpbmUnfSBkZXZpY2VzIGZvdW5kXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCA6IGZpbHRlcmVkRW50aXRpZXMubWFwKGVudGl0eSA9PiB0aGlzLnJlbmRlckVudGl0eShlbnRpdHkpKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCA6ICcnfVxuXG4gICAgICAgICR7dGhpcy5yZW5kZXJBY3Rpb25zKCl9XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRW50aXR5KGVudGl0eTogR3JvdXBlZEVudGl0eSk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBzdGF0ZURpc3BsYXkgPSB0aGlzLmdldFN0YXRlRGlzcGxheShlbnRpdHkpO1xuICAgIGNvbnN0IHN0YXRlQ2xhc3MgPSBlbnRpdHkuaXNPbmxpbmUgPyAnJyA6ICdvZmZsaW5lJztcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cImVudGl0eS1yb3cgJHtzdGF0ZUNsYXNzfVwiPlxuICAgICAgICA8aGEtaWNvbiBcbiAgICAgICAgICBpY29uPVwiJHtlbnRpdHkuaWNvbn1cIlxuICAgICAgICAgIGNsYXNzPVwiZW50aXR5LWljb24gJHtlbnRpdHkuc3RhdGUgPT09ICdvbicgPyAnYWN0aXZlJyA6ICcnfVwiXG4gICAgICAgID48L2hhLWljb24+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZW50aXR5LW5hbWVcIj4ke2VudGl0eS5uYW1lfTwvc3Bhbj5cbiAgICAgICAgJHtlbnRpdHkuaXNUb2dnbGVhYmxlICYmIGVudGl0eS5pc09ubGluZSA/IGh0bWxgXG4gICAgICAgICAgPGhhLXN3aXRjaFxuICAgICAgICAgICAgLmNoZWNrZWQ9JHtlbnRpdHkuc3RhdGUgPT09ICdvbid9XG4gICAgICAgICAgICBAY2hhbmdlPSR7KCkgPT4gdGhpcy50b2dnbGVFbnRpdHkoZW50aXR5LmVudGl0eUlkKX1cbiAgICAgICAgICA+PC9oYS1zd2l0Y2g+XG4gICAgICAgIGAgOiBodG1sYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZW50aXR5LXN0YXRlXCI+JHtzdGF0ZURpc3BsYXl9PC9zcGFuPlxuICAgICAgICBgfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3RhdGVEaXNwbGF5KGVudGl0eTogR3JvdXBlZEVudGl0eSk6IHN0cmluZyB7XG4gICAgaWYgKCFlbnRpdHkuaXNPbmxpbmUpIHJldHVybiAnT2ZmbGluZSc7XG4gICAgXG4gICAgLy8gRm9yIHNlbnNvcnMsIHNob3cgdGhlIHZhbHVlIHdpdGggdW5pdFxuICAgIGlmIChlbnRpdHkuZW50aXR5SWQuaW5jbHVkZXMoJ3NlbnNvcicpKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZW50aXR5U3RhdGVzLmdldChlbnRpdHkuZW50aXR5SWQpO1xuICAgICAgY29uc3QgdW5pdCA9IHN0YXRlPy5hdHRyaWJ1dGVzPy51bml0X29mX21lYXN1cmVtZW50IHx8ICcnO1xuICAgICAgcmV0dXJuIGAke2VudGl0eS5zdGF0ZX0ke3VuaXQgPyAnICcgKyB1bml0IDogJyd9YDtcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIGJpbmFyeSBzZW5zb3JzLCBzaG93IG1vcmUgZGVzY3JpcHRpdmUgdGV4dFxuICAgIGlmIChlbnRpdHkuZW50aXR5SWQuaW5jbHVkZXMoJ2JpbmFyeV9zZW5zb3InKSkge1xuICAgICAgcmV0dXJuIGVudGl0eS5zdGF0ZSA9PT0gJ29uJyA/ICdEZXRlY3RlZCcgOiAnQ2xlYXInO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZW50aXR5LnN0YXRlO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJBY3Rpb25zKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBEZXZpY2VHcm91cFdpZGdldENvbmZpZztcbiAgICBjb25zdCBzaG93R3JvdXBDb250cm9scyA9IGNvbmZpZz8uc2hvd0dyb3VwQ29udHJvbHMgPz8gdHJ1ZTtcbiAgICBcbiAgICBpZiAoIXNob3dHcm91cENvbnRyb2xzIHx8ICF0aGlzLmhhc1RvZ2dsZWFibGVFbnRpdGllcygpKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IGhhc0FjdGl2ZURldmljZXMgPSB0aGlzLmdyb3VwZWRFbnRpdGllcy5zb21lKGUgPT4gXG4gICAgICBlLmlzVG9nZ2xlYWJsZSAmJiBlLmlzT25saW5lICYmIGUuc3RhdGUgPT09ICdvbidcbiAgICApO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAke2hhc0FjdGl2ZURldmljZXMgPyBodG1sYFxuICAgICAgICAgIDxtd2MtYnV0dG9uIEBjbGljaz0ke3RoaXMudHVybkFsbE9mZn0+XG4gICAgICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOnBvd2VyLW9mZlwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAgIEFsbCBPZmZcbiAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPSR7dGhpcy50dXJuQWxsT259PlxuICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6cG93ZXItb25cIj48L2hhLWljb24+XG4gICAgICAgICAgQWxsIE9uXG4gICAgICAgIDwvbXdjLWJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGhhc1RvZ2dsZWFibGVFbnRpdGllcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5ncm91cGVkRW50aXRpZXMuc29tZShlID0+IGUuaXNUb2dnbGVhYmxlICYmIGUuaXNPbmxpbmUpO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVFeHBhbmRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLmV4cGFuZGVkID0gIXRoaXMuZXhwYW5kZWQ7XG4gICAgXG4gICAgLy8gVXBkYXRlIHN1YnNjcmlwdGlvbnMgd2hlbiBleHBhbmRpbmcvY29sbGFwc2luZ1xuICAgIGlmICh0aGlzLmV4cGFuZGVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHR1cm5BbGxPZmYoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdG9nZ2xlYWJsZSA9IHRoaXMuZ3JvdXBlZEVudGl0aWVzLmZpbHRlcihlID0+IFxuICAgICAgZS5pc1RvZ2dsZWFibGUgJiYgZS5pc09ubGluZSAmJiBlLnN0YXRlID09PSAnb24nXG4gICAgKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRvZ2dsZWFibGUpIHtcbiAgICAgIGF3YWl0IHRoaXMudHVybk9mZihlbnRpdHkuZW50aXR5SWQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHVybkFsbE9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHRvZ2dsZWFibGUgPSB0aGlzLmdyb3VwZWRFbnRpdGllcy5maWx0ZXIoZSA9PiBcbiAgICAgIGUuaXNUb2dnbGVhYmxlICYmIGUuaXNPbmxpbmUgJiYgZS5zdGF0ZSA9PT0gJ29mZidcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdG9nZ2xlYWJsZSkge1xuICAgICAgYXdhaXQgdGhpcy50dXJuT24oZW50aXR5LmVudGl0eUlkKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc3R5bGVzID0gW1xuICAgIERhc2h2aWV3V2lkZ2V0LnN0eWxlcyxcbiAgICBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYmEodmFyKC0tcmdiLXByaW1hcnktY29sb3IpLCAwLjA1KSwgdHJhbnNwYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyLWNvbnRlbnQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIgaDIge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5kZXZpY2UtY291bnQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgd2hpdGUpO1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZXhwYW5kLWljb24ge1xuICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuZXhwYW5kLWljb24uZXhwYW5kZWQge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpO1xuICAgICAgfVxuXG4gICAgICAuZW50aXRpZXMge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBwYWRkaW5nOiAwIDE2cHg7XG4gICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LXJvdyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAwO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LXJvdzpsYXN0LWNoaWxkIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1yb3cub2ZmbGluZSB7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyMHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjJzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktaWNvbi5hY3RpdmUge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktbmFtZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LXN0YXRlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgbWluLXdpZHRoOiA2MHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXN0YXRlIHtcbiAgICAgICAgcGFkZGluZzogMzJweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb25zIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb25zOmVtcHR5IHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgbXdjLWJ1dHRvbiB7XG4gICAgICAgIC0tbWRjLXRoZW1lLXByaW1hcnk6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgfVxuXG4gICAgICBtd2MtYnV0dG9uIGhhLWljb24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICAgIH1cbiAgICBgXG4gIF07XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/widgets/device-group-widget.ts\n\n}");

/***/ }),

/***/ "./src/widgets/quick-controls-widget.ts":
/*!**********************************************!*\
  !*** ./src/widgets/quick-controls-widget.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuickControlsWidget: () => (/* binding */ QuickControlsWidget)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _core_widget_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/widget-base */ \"./src/core/widget-base.ts\");\n/**\n * Quick controls widget for Dashview V2.\n * Provides fast access to frequently used controls and scenes.\n */\nvar _a;\n\n\n\n\nlet QuickControlsWidget = class QuickControlsWidget extends _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.controlStates = new Map();\n        this.executingControl = null;\n    }\n    subscribedEntities() {\n        const config = this.widgetConfig;\n        if (!config?.controls)\n            return [];\n        // Subscribe to all control entities\n        return config.controls\n            .map(control => control.entityId)\n            .filter(id => id && !id.startsWith('script.') && !id.startsWith('scene.'));\n    }\n    getDefaultConfig() {\n        return {\n            type: 'quick-controls',\n            controls: [],\n            columns: 4,\n            showLabels: true,\n            iconSize: 'medium',\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateControlStates();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateControlStates();\n    }\n    updateControlStates() {\n        const config = this.widgetConfig;\n        if (!config?.controls)\n            return;\n        const newStates = new Map();\n        for (const control of config.controls) {\n            const entityId = control.entityId;\n            if (!entityId)\n                continue;\n            const state = this.entityStates.get(entityId);\n            if (state) {\n                // For toggleable entities, track on/off state\n                const domain = entityId.split('.')[0];\n                if (['light', 'switch', 'fan', 'input_boolean'].includes(domain)) {\n                    newStates.set(entityId, state.state === 'on');\n                }\n            }\n        }\n        this.controlStates = newStates;\n    }\n    render() {\n        const config = this.widgetConfig;\n        const title = this.widgetConfig?.title || 'Quick Controls';\n        if (this.isLoading) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-loading\">\n          Loading controls...\n        </div>\n      `;\n        }\n        if (this.error || !config?.controls || config.controls.length === 0) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-error\">\n          ${this.error || 'No controls configured'}\n        </div>\n      `;\n        }\n        const columns = config.columns || 4;\n        const iconSize = config.iconSize || 'medium';\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card>\n        <div class=\"header\">\n          <h2>${title}</h2>\n        </div>\n\n        <div \n          class=\"controls-grid\"\n          style=\"grid-template-columns: repeat(${columns}, 1fr)\"\n        >\n          ${config.controls.map(control => this.renderControl(control, iconSize))}\n        </div>\n      </ha-card>\n    `;\n    }\n    renderControl(control, iconSize) {\n        const config = this.widgetConfig;\n        const showLabels = config?.showLabels ?? true;\n        const entityId = control.entityId;\n        const state = entityId ? this.entityStates.get(entityId) : null;\n        const isActive = this.controlStates.get(entityId) || false;\n        const isExecuting = this.executingControl === entityId;\n        // Determine icon\n        let icon = control.icon;\n        if (!icon && state) {\n            icon = state.attributes.icon || this.getDefaultIcon(entityId);\n        }\n        // Determine label\n        let label = control.label;\n        if (!label && state) {\n            label = state.attributes.friendly_name || entityId.split('.')[1].replace(/_/g, ' ');\n        }\n        // Determine color\n        let color = control.color || 'var(--primary-color)';\n        if (isActive && !control.color) {\n            color = this.getActiveColor(entityId);\n        }\n        const buttonClass = `control-button ${iconSize} ${isActive ? 'active' : ''} ${isExecuting ? 'executing' : ''}`;\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <button\n        class=\"${buttonClass}\"\n        style=\"--control-color: ${color}\"\n        @click=${() => this.handleControlClick(control)}\n        ?disabled=${isExecuting}\n      >\n        ${isExecuting ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <div class=\"spinner\"></div>\n        ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <ha-icon icon=\"${icon}\"></ha-icon>\n        `}\n        ${showLabels && label ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n          <span class=\"control-label\">${label}</span>\n        ` : ''}\n      </button>\n    `;\n    }\n    getDefaultIcon(entityId) {\n        const [domain, name] = entityId.split('.');\n        // Domain-based icons\n        const domainIcons = {\n            'light': 'mdi:lightbulb',\n            'switch': 'mdi:toggle-switch',\n            'fan': 'mdi:fan',\n            'scene': 'mdi:palette',\n            'script': 'mdi:script-text',\n            'automation': 'mdi:robot',\n            'input_boolean': 'mdi:toggle-switch-outline',\n        };\n        // Name-based icons\n        if (name.includes('morning'))\n            return 'mdi:weather-sunset-up';\n        if (name.includes('night') || name.includes('bedtime'))\n            return 'mdi:weather-night';\n        if (name.includes('away'))\n            return 'mdi:home-export-outline';\n        if (name.includes('home'))\n            return 'mdi:home';\n        if (name.includes('party'))\n            return 'mdi:party-popper';\n        if (name.includes('movie') || name.includes('tv'))\n            return 'mdi:television';\n        if (name.includes('dinner') || name.includes('dining'))\n            return 'mdi:silverware-fork-knife';\n        if (name.includes('reading'))\n            return 'mdi:book-open-page-variant';\n        return domainIcons[domain] || 'mdi:gesture-tap';\n    }\n    getActiveColor(entityId) {\n        const [domain] = entityId.split('.');\n        switch (domain) {\n            case 'light':\n                return 'var(--warning-color)';\n            case 'fan':\n                return 'var(--info-color)';\n            case 'switch':\n                return 'var(--success-color)';\n            default:\n                return 'var(--primary-color)';\n        }\n    }\n    async handleControlClick(control) {\n        if (this.executingControl)\n            return;\n        const entityId = control.entityId;\n        if (!entityId)\n            return;\n        // Handle confirmation if required\n        if (control.confirmAction) {\n            const label = control.label || entityId.split('.')[1].replace(/_/g, ' ');\n            if (!confirm(`Execute \"${label}\"?`)) {\n                return;\n            }\n        }\n        this.executingControl = entityId;\n        try {\n            // Custom service call\n            if (control.service) {\n                await this.hass.callService(control.service.domain, control.service.service, {\n                    entity_id: entityId,\n                    ...control.service.data\n                });\n            }\n            else {\n                // Default behavior based on entity type\n                const [domain] = entityId.split('.');\n                switch (domain) {\n                    case 'scene':\n                        await this.hass.callService('scene', 'turn_on', { entity_id: entityId });\n                        break;\n                    case 'script':\n                        await this.hass.callService('script', 'turn_on', { entity_id: entityId });\n                        break;\n                    case 'automation':\n                        await this.hass.callService('automation', 'trigger', { entity_id: entityId });\n                        break;\n                    case 'light':\n                    case 'switch':\n                    case 'fan':\n                    case 'input_boolean':\n                        await this.toggleEntity(entityId);\n                        break;\n                    default:\n                        console.warn(`Unknown entity domain: ${domain}`);\n                }\n            }\n            // Visual feedback for non-toggleable entities\n            if (['scene', 'script'].includes(entityId.split('.')[0])) {\n                // Keep spinner for a moment to show execution\n                setTimeout(() => {\n                    this.executingControl = null;\n                }, 1000);\n                return;\n            }\n        }\n        catch (error) {\n            console.error(`Failed to execute control ${entityId}:`, error);\n        }\n        this.executingControl = null;\n    }\n};\nQuickControlsWidget.styles = [\n    _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget.styles,\n    (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n      }\n\n      .controls-grid {\n        display: grid;\n        gap: 12px;\n        padding: 16px;\n        align-content: start;\n      }\n\n      .control-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 16px 8px;\n        border: 2px solid var(--divider-color);\n        border-radius: 12px;\n        background: var(--card-background-color);\n        cursor: pointer;\n        transition: all 0.2s ease;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .control-button:hover {\n        background: var(--secondary-background-color);\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .control-button:active {\n        transform: translateY(0);\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      }\n\n      .control-button.active {\n        background: var(--control-color);\n        color: var(--text-primary-color, white);\n        border-color: var(--control-color);\n      }\n\n      .control-button.active ha-icon {\n        color: var(--text-primary-color, white);\n      }\n\n      .control-button:disabled {\n        cursor: not-allowed;\n        opacity: 0.7;\n      }\n\n      .control-button.executing {\n        pointer-events: none;\n      }\n\n      /* Icon sizes */\n      .control-button.small {\n        padding: 12px 8px;\n      }\n\n      .control-button.small ha-icon {\n        --mdc-icon-size: 24px;\n      }\n\n      .control-button.medium ha-icon {\n        --mdc-icon-size: 32px;\n      }\n\n      .control-button.large {\n        padding: 20px 12px;\n      }\n\n      .control-button.large ha-icon {\n        --mdc-icon-size: 40px;\n      }\n\n      .control-label {\n        font-size: 0.75em;\n        text-align: center;\n        line-height: 1.2;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n      }\n\n      .control-button.large .control-label {\n        font-size: 0.85em;\n      }\n\n      /* Spinner animation */\n      .spinner {\n        width: 24px;\n        height: 24px;\n        border: 3px solid var(--divider-color);\n        border-top-color: var(--primary-color);\n        border-radius: 50%;\n        animation: spin 0.8s linear infinite;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Responsive adjustments */\n      @media (max-width: 480px) {\n        .controls-grid {\n          gap: 8px;\n          padding: 12px;\n        }\n\n        .control-button {\n          padding: 12px 6px;\n        }\n\n        .control-button.medium ha-icon {\n          --mdc-icon-size: 28px;\n        }\n\n        .control-label {\n          font-size: 0.7em;\n        }\n      }\n\n      /* Pulse animation for scenes/scripts */\n      @keyframes pulse {\n        0% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.6;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      .control-button.executing ha-icon {\n        animation: pulse 1s ease-in-out infinite;\n      }\n    `\n];\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", typeof (_a = typeof Map !== \"undefined\" && Map) === \"function\" ? _a : Object)\n], QuickControlsWidget.prototype, \"controlStates\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__metadata)(\"design:type\", Object)\n], QuickControlsWidget.prototype, \"executingControl\", void 0);\nQuickControlsWidget = (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.customElement)('dashview-quick-controls-widget')\n], QuickControlsWidget);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly4vc3JjL3dpZGdldHMvcXVpY2stY29udHJvbHMtd2lkZ2V0LnRzPzdmZjciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBRdWljayBjb250cm9scyB3aWRnZXQgZm9yIERhc2h2aWV3IFYyLlxuICogUHJvdmlkZXMgZmFzdCBhY2Nlc3MgdG8gZnJlcXVlbnRseSB1c2VkIGNvbnRyb2xzIGFuZCBzY2VuZXMuXG4gKi9cblxuaW1wb3J0IHsgaHRtbCwgY3NzLCBQcm9wZXJ0eVZhbHVlcywgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgRGFzaHZpZXdXaWRnZXQsIFdpZGdldENvbmZpZyB9IGZyb20gJy4uL2NvcmUvd2lkZ2V0LWJhc2UnO1xuXG5pbnRlcmZhY2UgUXVpY2tDb250cm9sQ29uZmlnIHtcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBjb25maXJtQWN0aW9uPzogYm9vbGVhbjtcbiAgc2VydmljZT86IHtcbiAgICBkb21haW46IHN0cmluZztcbiAgICBzZXJ2aWNlOiBzdHJpbmc7XG4gICAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH07XG59XG5cbmludGVyZmFjZSBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnIGV4dGVuZHMgV2lkZ2V0Q29uZmlnIHtcbiAgdHlwZTogJ3F1aWNrLWNvbnRyb2xzJztcbiAgY29udHJvbHM6IFF1aWNrQ29udHJvbENvbmZpZ1tdO1xuICBjb2x1bW5zPzogbnVtYmVyO1xuICBzaG93TGFiZWxzPzogYm9vbGVhbjtcbiAgaWNvblNpemU/OiAnc21hbGwnIHwgJ21lZGl1bScgfCAnbGFyZ2UnO1xufVxuXG5AY3VzdG9tRWxlbWVudCgnZGFzaHZpZXctcXVpY2stY29udHJvbHMtd2lkZ2V0JylcbmV4cG9ydCBjbGFzcyBRdWlja0NvbnRyb2xzV2lkZ2V0IGV4dGVuZHMgRGFzaHZpZXdXaWRnZXQge1xuICBAc3RhdGUoKSBwcml2YXRlIGNvbnRyb2xTdGF0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+ID0gbmV3IE1hcCgpO1xuICBAc3RhdGUoKSBwcml2YXRlIGV4ZWN1dGluZ0NvbnRyb2w6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMud2lkZ2V0Q29uZmlnIGFzIFF1aWNrQ29udHJvbHNXaWRnZXRDb25maWc7XG4gICAgaWYgKCFjb25maWc/LmNvbnRyb2xzKSByZXR1cm4gW107XG4gICAgXG4gICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBjb250cm9sIGVudGl0aWVzXG4gICAgcmV0dXJuIGNvbmZpZy5jb250cm9sc1xuICAgICAgLm1hcChjb250cm9sID0+IGNvbnRyb2wuZW50aXR5SWQpXG4gICAgICAuZmlsdGVyKGlkID0+IGlkICYmICFpZC5zdGFydHNXaXRoKCdzY3JpcHQuJykgJiYgIWlkLnN0YXJ0c1dpdGgoJ3NjZW5lLicpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZWZhdWx0Q29uZmlnKCk6IFBhcnRpYWw8UXVpY2tDb250cm9sc1dpZGdldENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAncXVpY2stY29udHJvbHMnLFxuICAgICAgY29udHJvbHM6IFtdLFxuICAgICAgY29sdW1uczogNCxcbiAgICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgICBpY29uU2l6ZTogJ21lZGl1bScsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMudXBkYXRlQ29udHJvbFN0YXRlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uU3RhdGVDaGFuZ2VkKGVudGl0eUlkOiBzdHJpbmcsIG5ld1N0YXRlOiBhbnksIG9sZFN0YXRlOiBhbnkpOiB2b2lkIHtcbiAgICBzdXBlci5vblN0YXRlQ2hhbmdlZChlbnRpdHlJZCwgbmV3U3RhdGUsIG9sZFN0YXRlKTtcbiAgICB0aGlzLnVwZGF0ZUNvbnRyb2xTdGF0ZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29udHJvbFN0YXRlcygpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGlmICghY29uZmlnPy5jb250cm9scykgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV3U3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBjb250cm9sIG9mIGNvbmZpZy5jb250cm9scykge1xuICAgICAgY29uc3QgZW50aXR5SWQgPSBjb250cm9sLmVudGl0eUlkO1xuICAgICAgaWYgKCFlbnRpdHlJZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGVudGl0eUlkKTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAvLyBGb3IgdG9nZ2xlYWJsZSBlbnRpdGllcywgdHJhY2sgb24vb2ZmIHN0YXRlXG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgICAgIGlmIChbJ2xpZ2h0JywgJ3N3aXRjaCcsICdmYW4nLCAnaW5wdXRfYm9vbGVhbiddLmluY2x1ZGVzKGRvbWFpbikpIHtcbiAgICAgICAgICBuZXdTdGF0ZXMuc2V0KGVudGl0eUlkLCBzdGF0ZS5zdGF0ZSA9PT0gJ29uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbnRyb2xTdGF0ZXMgPSBuZXdTdGF0ZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHRpdGxlID0gdGhpcy53aWRnZXRDb25maWc/LnRpdGxlIHx8ICdRdWljayBDb250cm9scyc7XG5cbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWxvYWRpbmdcIj5cbiAgICAgICAgICBMb2FkaW5nIGNvbnRyb2xzLi4uXG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvciB8fCAhY29uZmlnPy5jb250cm9scyB8fCBjb25maWcuY29udHJvbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIndpZGdldC1lcnJvclwiPlxuICAgICAgICAgICR7dGhpcy5lcnJvciB8fCAnTm8gY29udHJvbHMgY29uZmlndXJlZCd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBjb25zdCBjb2x1bW5zID0gY29uZmlnLmNvbHVtbnMgfHwgNDtcbiAgICBjb25zdCBpY29uU2l6ZSA9IGNvbmZpZy5pY29uU2l6ZSB8fCAnbWVkaXVtJztcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8aDI+JHt0aXRsZX08L2gyPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IFxuICAgICAgICAgIGNsYXNzPVwiY29udHJvbHMtZ3JpZFwiXG4gICAgICAgICAgc3R5bGU9XCJncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgke2NvbHVtbnN9LCAxZnIpXCJcbiAgICAgICAgPlxuICAgICAgICAgICR7Y29uZmlnLmNvbnRyb2xzLm1hcChjb250cm9sID0+IHRoaXMucmVuZGVyQ29udHJvbChjb250cm9sLCBpY29uU2l6ZSkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDb250cm9sKGNvbnRyb2w6IFF1aWNrQ29udHJvbENvbmZpZywgaWNvblNpemU6IHN0cmluZyk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLndpZGdldENvbmZpZyBhcyBRdWlja0NvbnRyb2xzV2lkZ2V0Q29uZmlnO1xuICAgIGNvbnN0IHNob3dMYWJlbHMgPSBjb25maWc/LnNob3dMYWJlbHMgPz8gdHJ1ZTtcbiAgICBcbiAgICBjb25zdCBlbnRpdHlJZCA9IGNvbnRyb2wuZW50aXR5SWQ7XG4gICAgY29uc3Qgc3RhdGUgPSBlbnRpdHlJZCA/IHRoaXMuZW50aXR5U3RhdGVzLmdldChlbnRpdHlJZCkgOiBudWxsO1xuICAgIGNvbnN0IGlzQWN0aXZlID0gdGhpcy5jb250cm9sU3RhdGVzLmdldChlbnRpdHlJZCkgfHwgZmFsc2U7XG4gICAgY29uc3QgaXNFeGVjdXRpbmcgPSB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPT09IGVudGl0eUlkO1xuICAgIFxuICAgIC8vIERldGVybWluZSBpY29uXG4gICAgbGV0IGljb24gPSBjb250cm9sLmljb247XG4gICAgaWYgKCFpY29uICYmIHN0YXRlKSB7XG4gICAgICBpY29uID0gc3RhdGUuYXR0cmlidXRlcy5pY29uIHx8IHRoaXMuZ2V0RGVmYXVsdEljb24oZW50aXR5SWQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgbGFiZWxcbiAgICBsZXQgbGFiZWwgPSBjb250cm9sLmxhYmVsO1xuICAgIGlmICghbGFiZWwgJiYgc3RhdGUpIHtcbiAgICAgIGxhYmVsID0gc3RhdGUuYXR0cmlidXRlcy5mcmllbmRseV9uYW1lIHx8IGVudGl0eUlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvXy9nLCAnICcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgY29sb3JcbiAgICBsZXQgY29sb3IgPSBjb250cm9sLmNvbG9yIHx8ICd2YXIoLS1wcmltYXJ5LWNvbG9yKSc7XG4gICAgaWYgKGlzQWN0aXZlICYmICFjb250cm9sLmNvbG9yKSB7XG4gICAgICBjb2xvciA9IHRoaXMuZ2V0QWN0aXZlQ29sb3IoZW50aXR5SWQpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gYGNvbnRyb2wtYnV0dG9uICR7aWNvblNpemV9ICR7aXNBY3RpdmUgPyAnYWN0aXZlJyA6ICcnfSAke2lzRXhlY3V0aW5nID8gJ2V4ZWN1dGluZycgOiAnJ31gO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzPVwiJHtidXR0b25DbGFzc31cIlxuICAgICAgICBzdHlsZT1cIi0tY29udHJvbC1jb2xvcjogJHtjb2xvcn1cIlxuICAgICAgICBAY2xpY2s9JHsoKSA9PiB0aGlzLmhhbmRsZUNvbnRyb2xDbGljayhjb250cm9sKX1cbiAgICAgICAgP2Rpc2FibGVkPSR7aXNFeGVjdXRpbmd9XG4gICAgICA+XG4gICAgICAgICR7aXNFeGVjdXRpbmcgPyBodG1sYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIGAgOiBodG1sYFxuICAgICAgICAgIDxoYS1pY29uIGljb249XCIke2ljb259XCI+PC9oYS1pY29uPlxuICAgICAgICBgfVxuICAgICAgICAke3Nob3dMYWJlbHMgJiYgbGFiZWwgPyBodG1sYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udHJvbC1sYWJlbFwiPiR7bGFiZWx9PC9zcGFuPlxuICAgICAgICBgIDogJyd9XG4gICAgICA8L2J1dHRvbj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0SWNvbihlbnRpdHlJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBbZG9tYWluLCBuYW1lXSA9IGVudGl0eUlkLnNwbGl0KCcuJyk7XG4gICAgXG4gICAgLy8gRG9tYWluLWJhc2VkIGljb25zXG4gICAgY29uc3QgZG9tYWluSWNvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnbGlnaHQnOiAnbWRpOmxpZ2h0YnVsYicsXG4gICAgICAnc3dpdGNoJzogJ21kaTp0b2dnbGUtc3dpdGNoJyxcbiAgICAgICdmYW4nOiAnbWRpOmZhbicsXG4gICAgICAnc2NlbmUnOiAnbWRpOnBhbGV0dGUnLFxuICAgICAgJ3NjcmlwdCc6ICdtZGk6c2NyaXB0LXRleHQnLFxuICAgICAgJ2F1dG9tYXRpb24nOiAnbWRpOnJvYm90JyxcbiAgICAgICdpbnB1dF9ib29sZWFuJzogJ21kaTp0b2dnbGUtc3dpdGNoLW91dGxpbmUnLFxuICAgIH07XG4gICAgXG4gICAgLy8gTmFtZS1iYXNlZCBpY29uc1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdtb3JuaW5nJykpIHJldHVybiAnbWRpOndlYXRoZXItc3Vuc2V0LXVwJztcbiAgICBpZiAobmFtZS5pbmNsdWRlcygnbmlnaHQnKSB8fCBuYW1lLmluY2x1ZGVzKCdiZWR0aW1lJykpIHJldHVybiAnbWRpOndlYXRoZXItbmlnaHQnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdhd2F5JykpIHJldHVybiAnbWRpOmhvbWUtZXhwb3J0LW91dGxpbmUnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdob21lJykpIHJldHVybiAnbWRpOmhvbWUnO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdwYXJ0eScpKSByZXR1cm4gJ21kaTpwYXJ0eS1wb3BwZXInO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdtb3ZpZScpIHx8IG5hbWUuaW5jbHVkZXMoJ3R2JykpIHJldHVybiAnbWRpOnRlbGV2aXNpb24nO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCdkaW5uZXInKSB8fCBuYW1lLmluY2x1ZGVzKCdkaW5pbmcnKSkgcmV0dXJuICdtZGk6c2lsdmVyd2FyZS1mb3JrLWtuaWZlJztcbiAgICBpZiAobmFtZS5pbmNsdWRlcygncmVhZGluZycpKSByZXR1cm4gJ21kaTpib29rLW9wZW4tcGFnZS12YXJpYW50JztcbiAgICBcbiAgICByZXR1cm4gZG9tYWluSWNvbnNbZG9tYWluXSB8fCAnbWRpOmdlc3R1cmUtdGFwJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWN0aXZlQ29sb3IoZW50aXR5SWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgW2RvbWFpbl0gPSBlbnRpdHlJZC5zcGxpdCgnLicpO1xuICAgIFxuICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICBjYXNlICdsaWdodCc6XG4gICAgICAgIHJldHVybiAndmFyKC0td2FybmluZy1jb2xvciknO1xuICAgICAgY2FzZSAnZmFuJzpcbiAgICAgICAgcmV0dXJuICd2YXIoLS1pbmZvLWNvbG9yKSc7XG4gICAgICBjYXNlICdzd2l0Y2gnOlxuICAgICAgICByZXR1cm4gJ3ZhcigtLXN1Y2Nlc3MtY29sb3IpJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAndmFyKC0tcHJpbWFyeS1jb2xvciknO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ29udHJvbENsaWNrKGNvbnRyb2w6IFF1aWNrQ29udHJvbENvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmV4ZWN1dGluZ0NvbnRyb2wpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBlbnRpdHlJZCA9IGNvbnRyb2wuZW50aXR5SWQ7XG4gICAgaWYgKCFlbnRpdHlJZCkgcmV0dXJuO1xuXG4gICAgLy8gSGFuZGxlIGNvbmZpcm1hdGlvbiBpZiByZXF1aXJlZFxuICAgIGlmIChjb250cm9sLmNvbmZpcm1BY3Rpb24pIHtcbiAgICAgIGNvbnN0IGxhYmVsID0gY29udHJvbC5sYWJlbCB8fCBlbnRpdHlJZC5zcGxpdCgnLicpWzFdLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgICAgIGlmICghY29uZmlybShgRXhlY3V0ZSBcIiR7bGFiZWx9XCI/YCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZXhlY3V0aW5nQ29udHJvbCA9IGVudGl0eUlkO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEN1c3RvbSBzZXJ2aWNlIGNhbGxcbiAgICAgIGlmIChjb250cm9sLnNlcnZpY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKFxuICAgICAgICAgIGNvbnRyb2wuc2VydmljZS5kb21haW4sXG4gICAgICAgICAgY29udHJvbC5zZXJ2aWNlLnNlcnZpY2UsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAgICAgICAgIC4uLmNvbnRyb2wuc2VydmljZS5kYXRhXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBiYXNlZCBvbiBlbnRpdHkgdHlwZVxuICAgICAgICBjb25zdCBbZG9tYWluXSA9IGVudGl0eUlkLnNwbGl0KCcuJyk7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKGRvbWFpbikge1xuICAgICAgICAgIGNhc2UgJ3NjZW5lJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnc2NlbmUnLCAndHVybl9vbicsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgY2FzZSAnc2NyaXB0JzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFzcy5jYWxsU2VydmljZSgnc2NyaXB0JywgJ3R1cm5fb24nLCB7IGVudGl0eV9pZDogZW50aXR5SWQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ2F1dG9tYXRpb24nOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYXNzLmNhbGxTZXJ2aWNlKCdhdXRvbWF0aW9uJywgJ3RyaWdnZXInLCB7IGVudGl0eV9pZDogZW50aXR5SWQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ2xpZ2h0JzpcbiAgICAgICAgICBjYXNlICdzd2l0Y2gnOlxuICAgICAgICAgIGNhc2UgJ2Zhbic6XG4gICAgICAgICAgY2FzZSAnaW5wdXRfYm9vbGVhbic6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZUVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFVua25vd24gZW50aXR5IGRvbWFpbjogJHtkb21haW59YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmlzdWFsIGZlZWRiYWNrIGZvciBub24tdG9nZ2xlYWJsZSBlbnRpdGllc1xuICAgICAgaWYgKFsnc2NlbmUnLCAnc2NyaXB0J10uaW5jbHVkZXMoZW50aXR5SWQuc3BsaXQoJy4nKVswXSkpIHtcbiAgICAgICAgLy8gS2VlcCBzcGlubmVyIGZvciBhIG1vbWVudCB0byBzaG93IGV4ZWN1dGlvblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPSBudWxsO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb250cm9sICR7ZW50aXR5SWR9OmAsIGVycm9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmV4ZWN1dGluZ0NvbnRyb2wgPSBudWxsO1xuICB9XG5cbiAgc3RhdGljIHN0eWxlcyA9IFtcbiAgICBEYXNodmlld1dpZGdldC5zdHlsZXMsXG4gICAgY3NzYFxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2xzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHggOHB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY2FyZC1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b246YWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29udHJvbC1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIHdoaXRlKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb250cm9sLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmFjdGl2ZSBoYS1pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgd2hpdGUpO1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b246ZGlzYWJsZWQge1xuICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5leGVjdXRpbmcge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLyogSWNvbiBzaXplcyAqL1xuICAgICAgLmNvbnRyb2wtYnV0dG9uLnNtYWxsIHtcbiAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5zbWFsbCBoYS1pY29uIHtcbiAgICAgICAgLS1tZGMtaWNvbi1zaXplOiAyNHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24ubWVkaXVtIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDMycHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWJ1dHRvbi5sYXJnZSB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHggMTJweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmxhcmdlIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDQwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250cm9sLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjc1ZW07XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRyb2wtYnV0dG9uLmxhcmdlIC5jb250cm9sLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC8qIFNwaW5uZXIgYW5pbWF0aW9uICovXG4gICAgICAuc3Bpbm5lciB7XG4gICAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBhbmltYXRpb246IHNwaW4gMC44cyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICB9XG5cbiAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgIHRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgfVxuXG4gICAgICAvKiBSZXNwb25zaXZlIGFkanVzdG1lbnRzICovXG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgLmNvbnRyb2xzLWdyaWQge1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udHJvbC1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbnRyb2wtYnV0dG9uLm1lZGl1bSBoYS1pY29uIHtcbiAgICAgICAgICAtLW1kYy1pY29uLXNpemU6IDI4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udHJvbC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjdlbTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBQdWxzZSBhbmltYXRpb24gZm9yIHNjZW5lcy9zY3JpcHRzICovXG4gICAgICBAa2V5ZnJhbWVzIHB1bHNlIHtcbiAgICAgICAgMCUge1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIH1cbiAgICAgICAgNTAlIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgIH1cbiAgICAgICAgMTAwJSB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuY29udHJvbC1idXR0b24uZXhlY3V0aW5nIGhhLWljb24ge1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGVhc2UtaW4tb3V0IGluZmluaXRlO1xuICAgICAgfVxuICAgIGBcbiAgXTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/widgets/quick-controls-widget.ts\n\n}");

/***/ }),

/***/ "./src/widgets/room-widget.ts":
/*!************************************!*\
  !*** ./src/widgets/room-widget.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoomWidget: () => (/* binding */ RoomWidget)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _core_widget_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/widget-base */ \"./src/core/widget-base.ts\");\n/* harmony import */ var _utils_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/icons */ \"./src/utils/icons.ts\");\n/* harmony import */ var _styles_animations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/animations */ \"./src/styles/animations.ts\");\n/**\n * Room widget for Dashview V2.\n * Displays all entities in a room with summary and controls.\n */\nvar _a, _b;\n\n\n\n\n\n\nlet RoomWidget = class RoomWidget extends _core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget {\n    constructor() {\n        super(...arguments);\n        this.expanded = false;\n        this.lightCount = 0;\n        this.lightsOn = 0;\n        this.groupedEntities = {};\n    }\n    subscribedEntities() {\n        // Subscribe to all entities when expanded, or just key entities when collapsed\n        if (this.expanded || this.entityStates.size < 10) {\n            return this.widgetConfig?.entities || [];\n        }\n        // When collapsed with many entities, only subscribe to key entities\n        const entities = this.widgetConfig?.entities || [];\n        return entities.filter(id => id.includes('motion') ||\n            id.includes('door') ||\n            id.includes('presence') ||\n            id.includes('temperature') ||\n            id.includes('humidity') ||\n            id.startsWith('light.'));\n    }\n    getDefaultConfig() {\n        return {\n            type: 'room',\n            entities: [],\n            showEmpty: false,\n        };\n    }\n    firstUpdated(changedProps) {\n        super.firstUpdated(changedProps);\n        this.updateSummary();\n    }\n    onStateChanged(entityId, newState, oldState) {\n        super.onStateChanged(entityId, newState, oldState);\n        this.updateSummary();\n    }\n    updateSummary() {\n        let lightCount = 0;\n        let lightsOn = 0;\n        let temperature;\n        let humidity;\n        let lastMotion;\n        // Group entities by type for better organization\n        this.groupedEntities = this.groupEntitiesByType();\n        for (const [entityId, state] of this.entityStates) {\n            if (entityId.startsWith('light.')) {\n                lightCount++;\n                if (state.state === 'on') {\n                    lightsOn++;\n                }\n            }\n            else if (entityId.includes('temperature') && state.state !== 'unavailable') {\n                const temp = parseFloat(state.state);\n                if (!isNaN(temp)) {\n                    temperature = temp;\n                }\n            }\n            else if (entityId.includes('humidity') && state.state !== 'unavailable') {\n                const hum = parseFloat(state.state);\n                if (!isNaN(hum)) {\n                    humidity = hum;\n                }\n            }\n            else if (entityId.includes('motion') || entityId.includes('presence')) {\n                if (state.state === 'on' && state.last_changed) {\n                    const motionTime = new Date(state.last_changed);\n                    if (!lastMotion || motionTime > lastMotion) {\n                        lastMotion = motionTime;\n                    }\n                }\n            }\n        }\n        this.lightCount = lightCount;\n        this.lightsOn = lightsOn;\n        this.temperature = temperature;\n        this.humidity = humidity;\n        this.lastMotion = lastMotion;\n    }\n    render() {\n        const roomName = this.areaName || this.widgetConfig?.title || 'Unknown Room';\n        if (this.isLoading) {\n            return this.renderSkeleton();\n        }\n        if (this.error) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <div class=\"widget-error\">\n          ${this.error}\n        </div>\n      `;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card role=\"region\" aria-label=\"${roomName} room controls\">\n        <div class=\"header touch-target\" @click=${this.toggleExpanded} @keydown=${this.handleHeaderKeydown}>\n          <h2>${roomName}</h2>\n          <div class=\"summary\">\n            ${this.renderSummary()}\n          </div>\n          <ha-icon\n            class=\"expand-icon ${this.expanded ? 'expanded' : ''}\"\n            icon=\"mdi:chevron-down\"\n            aria-label=\"${this.expanded ? 'Collapse' : 'Expand'} room details\"\n          ></ha-icon>\n        </div>\n        \n        <div class=\"content ${this.expanded ? 'expanded' : 'collapsed'}\">\n          ${this.renderExpanded()}\n        </div>\n        \n        <div class=\"actions\">\n          ${this.lightCount > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n            <mwc-button @click=${this.turnAllLightsOff} aria-label=\"Turn all lights off\">\n              <ha-icon icon=\"mdi:lightbulb-off\"></ha-icon>\n              All Off\n            </mwc-button>\n          ` : ''}\n        </div>\n      </ha-card>\n    `;\n    }\n    renderSummary() {\n        const summary = [];\n        // Light status\n        if (this.lightCount > 0) {\n            summary.push((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:lightbulb\"></ha-icon>\n          ${this.lightsOn}/${this.lightCount}\n        </span>\n      `);\n        }\n        // Temperature\n        if (this.temperature !== undefined) {\n            summary.push((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:thermometer\"></ha-icon>\n          ${this.temperature.toFixed(1)}\n        </span>\n      `);\n        }\n        // Humidity\n        if (this.humidity !== undefined) {\n            summary.push((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:water-percent\"></ha-icon>\n          ${this.humidity.toFixed(0)}%\n        </span>\n      `);\n        }\n        // Last motion\n        if (this.lastMotion) {\n            const minutesAgo = Math.floor((Date.now() - this.lastMotion.getTime()) / 60000);\n            const timeStr = minutesAgo < 1 ? 'now' :\n                minutesAgo < 60 ? `${minutesAgo}m ago` :\n                    `${Math.floor(minutesAgo / 60)}h ago`;\n            summary.push((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n        <span class=\"summary-item\">\n          <ha-icon icon=\"mdi:motion-sensor\"></ha-icon>\n          ${timeStr}\n        </span>\n      `);\n        }\n        return summary;\n    }\n    renderExpanded() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"entity-list\">\n        ${Object.entries(this.groupedEntities).map(([type, entities]) => this.renderEntityGroup(type, entities))}\n      </div>\n    `;\n    }\n    renderEntity(entityId) {\n        const state = this.entityStates.get(entityId);\n        if (!state)\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        const name = state.attributes.friendly_name || entityId;\n        const domain = entityId.split('.')[0];\n        const isToggleable = ['light', 'switch', 'fan', 'input_boolean'].includes(domain);\n        const icon = (0,_utils_icons__WEBPACK_IMPORTED_MODULE_3__.getEntityIcon)(entityId, state);\n        const iconColor = (0,_utils_icons__WEBPACK_IMPORTED_MODULE_3__.getEntityIconColor)(entityId, state);\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"entity-item touch-target\" @click=${isToggleable ? () => this.toggleEntity(entityId) : undefined}>\n        <ha-icon \n          class=\"entity-icon ${state.state} ${state.state === 'unavailable' ? 'unavailable' : ''}\"\n          icon=\"${icon}\"\n          style=\"color: ${iconColor}\"\n        ></ha-icon>\n        <span class=\"entity-name\">${name}</span>\n        <div class=\"entity-controls\">\n          ${isToggleable ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n            <ha-switch\n              .checked=${state.state === 'on'}\n              @change=${(e) => {\n            e.stopPropagation();\n            this.toggleEntity(entityId);\n        }}\n              aria-label=\"Toggle ${name}\"\n            ></ha-switch>\n          ` : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n            <span class=\"entity-state\">${state.state}</span>\n          `}\n        </div>\n      </div>\n    `;\n    }\n    getSortedEntities() {\n        const entities = Array.from(this.entityStates.keys());\n        // Sort by domain priority, then by name\n        const domainPriority = {\n            'light': 1,\n            'switch': 2,\n            'fan': 3,\n            'climate': 4,\n            'cover': 5,\n            'sensor': 6,\n            'binary_sensor': 7,\n        };\n        return entities.sort((a, b) => {\n            const domainA = a.split('.')[0];\n            const domainB = b.split('.')[0];\n            const priorityA = domainPriority[domainA] || 999;\n            const priorityB = domainPriority[domainB] || 999;\n            if (priorityA !== priorityB) {\n                return priorityA - priorityB;\n            }\n            return a.localeCompare(b);\n        });\n    }\n    toggleExpanded() {\n        this.expanded = !this.expanded;\n        // Update subscriptions when expanding/collapsing\n        if (this.expanded) {\n            this.updateSubscriptions();\n        }\n    }\n    handleHeaderKeydown(event) {\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            this.toggleExpanded();\n        }\n    }\n    groupEntitiesByType() {\n        const groups = {};\n        for (const entityId of this.entityStates.keys()) {\n            const domain = entityId.split('.')[0];\n            // Group by domain with friendly names\n            const groupName = this.getDomainGroupName(domain);\n            if (!groups[groupName]) {\n                groups[groupName] = [];\n            }\n            groups[groupName].push(entityId);\n        }\n        // Sort entities within each group\n        for (const [groupName, entities] of Object.entries(groups)) {\n            groups[groupName] = entities.sort((a, b) => {\n                const stateA = this.entityStates.get(a);\n                const stateB = this.entityStates.get(b);\n                const nameA = stateA?.attributes?.friendly_name || a;\n                const nameB = stateB?.attributes?.friendly_name || b;\n                return nameA.localeCompare(nameB);\n            });\n        }\n        return groups;\n    }\n    getDomainGroupName(domain) {\n        const domainNames = {\n            'light': 'Lights',\n            'switch': 'Switches',\n            'fan': 'Fans',\n            'climate': 'Climate',\n            'cover': 'Covers',\n            'lock': 'Locks',\n            'sensor': 'Sensors',\n            'binary_sensor': 'Binary Sensors',\n            'media_player': 'Media',\n            'camera': 'Cameras',\n            'alarm_control_panel': 'Security'\n        };\n        return domainNames[domain] || domain.charAt(0).toUpperCase() + domain.slice(1);\n    }\n    renderEntityGroup(type, entities) {\n        if (entities.length === 0)\n            return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) ``;\n        const typeIcons = {\n            'Lights': 'mdi:lightbulb',\n            'Switches': 'mdi:light-switch',\n            'Sensors': 'mdi:eye',\n            'Climate': 'mdi:thermostat',\n            'Media': 'mdi:television',\n            'Covers': 'mdi:window-shutter',\n            'Locks': 'mdi:lock',\n            'Fans': 'mdi:fan',\n            'Cameras': 'mdi:cctv',\n            'Security': 'mdi:shield-home'\n        };\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <div class=\"entity-group\">\n        <div class=\"entity-group-header\">\n          <ha-icon icon=${typeIcons[type] || 'mdi:home'}></ha-icon>\n          <span>${type}</span>\n          <span class=\"count\">(${entities.length})</span>\n        </div>\n        ${entities.map(entity => this.renderEntity(entity))}\n      </div>\n    `;\n    }\n    renderSkeleton() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"skeleton skeleton-text large\" style=\"width: 120px;\"></div>\n          <div class=\"summary\">\n            <div class=\"skeleton skeleton-text\" style=\"width: 40px;\"></div>\n            <div class=\"skeleton skeleton-text\" style=\"width: 50px;\"></div>\n            <div class=\"skeleton skeleton-text\" style=\"width: 45px;\"></div>\n          </div>\n          <div class=\"skeleton skeleton-icon\"></div>\n        </div>\n      </ha-card>\n    `;\n    }\n    async turnAllLightsOff() {\n        const lights = Array.from(this.entityStates.keys()).filter(id => id.startsWith('light.') && this.entityStates.get(id)?.state === 'on');\n        for (const light of lights) {\n            await this.turnOff(light);\n        }\n    }\n};\nRoomWidget.styles = (0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `\n    ${_core_widget_base__WEBPACK_IMPORTED_MODULE_2__.DashviewWidget.styles}\n    ${_styles_animations__WEBPACK_IMPORTED_MODULE_4__.skeletonStyles}\n    ${_styles_animations__WEBPACK_IMPORTED_MODULE_4__.touchStyles}\n      ha-card {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header {\n        padding: 16px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        border-radius: 8px;\n        -webkit-tap-highlight-color: transparent;\n        transition: background 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n      }\n\n      .header:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .header:focus {\n        outline: 2px solid var(--primary-color);\n        outline-offset: 2px;\n      }\n\n      .header h2 {\n        margin: 0;\n        font-size: 1.2em;\n        font-weight: 500;\n        flex: 1;\n      }\n\n      .summary {\n        display: flex;\n        gap: 16px;\n        align-items: center;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n      }\n\n      .summary-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n\n      .summary-item ha-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      .expand-icon {\n        transition: transform 250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        --mdc-icon-size: 24px;\n      }\n\n      .expand-icon.expanded {\n        transform: rotate(180deg);\n      }\n\n      /* Enhanced content with smooth animations */\n      .content {\n        overflow: hidden;\n        transition: max-height 250ms cubic-bezier(0.0, 0.0, 0.2, 1);\n      }\n\n      .content.collapsed {\n        max-height: 0;\n      }\n\n      .content.expanded {\n        max-height: 600px;\n      }\n\n      .entity-list {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n        max-height: 400px;\n        overflow-y: auto;\n        scrollbar-width: thin;\n        padding: 0 16px 16px;\n      }\n\n      .entity-group {\n        margin-bottom: 16px;\n      }\n\n      .entity-group:last-child {\n        margin-bottom: 0;\n      }\n\n      .entity-group-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 0;\n        font-weight: 500;\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        border-bottom: 1px solid var(--divider-color);\n        margin-bottom: 8px;\n      }\n\n      .entity-group-header ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .count {\n        opacity: 0.7;\n        font-size: 0.85em;\n      }\n\n      .entity-item {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px;\n        border-radius: 8px;\n        transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        min-height: 44px;\n        cursor: pointer;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      .entity-item:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .entity-item:active {\n        transform: scale(0.98);\n      }\n\n      .entity-icon {\n        --mdc-icon-size: 24px;\n        transition: color 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n        flex-shrink: 0;\n      }\n\n      .entity-icon.unavailable {\n        color: var(--disabled-text-color);\n      }\n\n      .entity-name {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 0.95em;\n      }\n\n      .entity-controls {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n      }\n\n      .entity-state {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        text-align: right;\n        min-width: 60px;\n      }\n\n      .actions {\n        padding: 8px 16px;\n        border-top: 1px solid var(--divider-color);\n        display: flex;\n        justify-content: flex-end;\n        gap: 8px;\n      }\n\n      .actions:empty {\n        display: none;\n      }\n\n      mwc-button {\n        --mdc-theme-primary: var(--primary-color);\n        min-height: 44px;\n      }\n\n      mwc-button ha-icon {\n        margin-right: 4px;\n      }\n\n      /* Mobile optimizations */\n      @media (max-width: 768px) {\n        .header {\n          padding: 12px;\n        }\n\n        .summary {\n          gap: 12px;\n          font-size: 0.85em;\n        }\n\n        .entity-item {\n          padding: 10px 12px;\n        }\n\n        .entity-name {\n          font-size: 0.9em;\n        }\n      }\n\n      /* Accessibility enhancements */\n      @media (prefers-reduced-motion: reduce) {\n        .header,\n        .expand-icon,\n        .entity-item,\n        .entity-icon,\n        .content {\n          transition: none;\n        }\n\n        .entity-item:active {\n          transform: none;\n        }\n      }\n\n      /* Focus indicators */\n      .entity-item:focus,\n      ha-switch:focus {\n        outline: 2px solid var(--primary-color);\n        outline-offset: 2px;\n      }\n    `;\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", String)\n], RoomWidget.prototype, \"areaId\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String }),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", String)\n], RoomWidget.prototype, \"areaName\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], RoomWidget.prototype, \"expanded\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], RoomWidget.prototype, \"lightCount\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Object)\n], RoomWidget.prototype, \"lightsOn\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Number)\n], RoomWidget.prototype, \"temperature\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", Number)\n], RoomWidget.prototype, \"humidity\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", typeof (_a = typeof Date !== \"undefined\" && Date) === \"function\" ? _a : Object)\n], RoomWidget.prototype, \"lastMotion\", void 0);\n(0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.state)(),\n    (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__metadata)(\"design:type\", typeof (_b = typeof Record !== \"undefined\" && Record) === \"function\" ? _b : Object)\n], RoomWidget.prototype, \"groupedEntities\", void 0);\nRoomWidget = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.customElement)('dashview-room-widget')\n], RoomWidget);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBbU9aLENBQUM7QUE1bEJ3QjtJQUEzQiwyREFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDOzswQ0FBaUI7QUFDaEI7SUFBM0IsMkRBQVEsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQzs7NENBQW1CO0FBQzdCO0lBQWhCLHdEQUFLLEVBQUU7OzRDQUEwQjtBQUNqQjtJQUFoQix3REFBSyxFQUFFOzs4Q0FBd0I7QUFDZjtJQUFoQix3REFBSyxFQUFFOzs0Q0FBc0I7QUFDYjtJQUFoQix3REFBSyxFQUFFOzsrQ0FBOEI7QUFDckI7SUFBaEIsd0RBQUssRUFBRTs7NENBQTJCO0FBQ2xCO0lBQWhCLHdEQUFLLEVBQUU7eUZBQXNCLElBQUksb0JBQUosSUFBSTs4Q0FBQztBQUNsQjtJQUFoQix3REFBSyxFQUFFO3lGQUEwQixNQUFNLG9CQUFOLE1BQU07bURBQXdCO0FBVHJELFVBQVU7SUFEdEIsZ0VBQWEsQ0FBQyxzQkFBc0IsQ0FBQztHQUN6QixVQUFVLENBOGxCdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EYXNodmlld1YyLy4vc3JjL3dpZGdldHMvcm9vbS13aWRnZXQudHM/YTAxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJvb20gd2lkZ2V0IGZvciBEYXNodmlldyBWMi5cbiAqIERpc3BsYXlzIGFsbCBlbnRpdGllcyBpbiBhIHJvb20gd2l0aCBzdW1tYXJ5IGFuZCBjb250cm9scy5cbiAqL1xuXG5pbXBvcnQgeyBodG1sLCBjc3MsIFByb3BlcnR5VmFsdWVzLCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBEYXNodmlld1dpZGdldCwgV2lkZ2V0Q29uZmlnIH0gZnJvbSAnLi4vY29yZS93aWRnZXQtYmFzZSc7XG5pbXBvcnQgeyBnZXRFbnRpdHlJY29uLCBnZXRFbnRpdHlJY29uQ29sb3IgfSBmcm9tICcuLi91dGlscy9pY29ucyc7XG5pbXBvcnQgeyBza2VsZXRvblN0eWxlcywgdG91Y2hTdHlsZXMgfSBmcm9tICcuLi9zdHlsZXMvYW5pbWF0aW9ucyc7XG5cbmludGVyZmFjZSBSb29tV2lkZ2V0Q29uZmlnIGV4dGVuZHMgV2lkZ2V0Q29uZmlnIHtcbiAgdHlwZTogJ3Jvb20nO1xuICBhcmVhSWQ/OiBzdHJpbmc7XG4gIGFyZWFOYW1lPzogc3RyaW5nO1xuICBzaG93RW1wdHk/OiBib29sZWFuO1xufVxuXG5AY3VzdG9tRWxlbWVudCgnZGFzaHZpZXctcm9vbS13aWRnZXQnKVxuZXhwb3J0IGNsYXNzIFJvb21XaWRnZXQgZXh0ZW5kcyBEYXNodmlld1dpZGdldCB7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBhcmVhSWQ/OiBzdHJpbmc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KSBhcmVhTmFtZT86IHN0cmluZztcbiAgQHN0YXRlKCkgcHJpdmF0ZSBleHBhbmRlZCA9IGZhbHNlO1xuICBAc3RhdGUoKSBwcml2YXRlIGxpZ2h0Q291bnQgPSAwO1xuICBAc3RhdGUoKSBwcml2YXRlIGxpZ2h0c09uID0gMDtcbiAgQHN0YXRlKCkgcHJpdmF0ZSB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBodW1pZGl0eT86IG51bWJlcjtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBsYXN0TW90aW9uPzogRGF0ZTtcbiAgQHN0YXRlKCkgcHJpdmF0ZSBncm91cGVkRW50aXRpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9O1xuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIC8vIFN1YnNjcmliZSB0byBhbGwgZW50aXRpZXMgd2hlbiBleHBhbmRlZCwgb3IganVzdCBrZXkgZW50aXRpZXMgd2hlbiBjb2xsYXBzZWRcbiAgICBpZiAodGhpcy5leHBhbmRlZCB8fCB0aGlzLmVudGl0eVN0YXRlcy5zaXplIDwgMTApIHtcbiAgICAgIHJldHVybiB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXMgfHwgW107XG4gICAgfVxuICAgIFxuICAgIC8vIFdoZW4gY29sbGFwc2VkIHdpdGggbWFueSBlbnRpdGllcywgb25seSBzdWJzY3JpYmUgdG8ga2V5IGVudGl0aWVzXG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLndpZGdldENvbmZpZz8uZW50aXRpZXMgfHwgW107XG4gICAgcmV0dXJuIGVudGl0aWVzLmZpbHRlcihpZCA9PiBcbiAgICAgIGlkLmluY2x1ZGVzKCdtb3Rpb24nKSB8fCBcbiAgICAgIGlkLmluY2x1ZGVzKCdkb29yJykgfHwgXG4gICAgICBpZC5pbmNsdWRlcygncHJlc2VuY2UnKSB8fFxuICAgICAgaWQuaW5jbHVkZXMoJ3RlbXBlcmF0dXJlJykgfHxcbiAgICAgIGlkLmluY2x1ZGVzKCdodW1pZGl0eScpIHx8XG4gICAgICBpZC5zdGFydHNXaXRoKCdsaWdodC4nKVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdENvbmZpZygpOiBQYXJ0aWFsPFJvb21XaWRnZXRDb25maWc+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3Jvb20nLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgc2hvd0VtcHR5OiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb25TdGF0ZUNoYW5nZWQoZW50aXR5SWQ6IHN0cmluZywgbmV3U3RhdGU6IGFueSwgb2xkU3RhdGU6IGFueSk6IHZvaWQge1xuICAgIHN1cGVyLm9uU3RhdGVDaGFuZ2VkKGVudGl0eUlkLCBuZXdTdGF0ZSwgb2xkU3RhdGUpO1xuICAgIHRoaXMudXBkYXRlU3VtbWFyeSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdW1tYXJ5KCk6IHZvaWQge1xuICAgIGxldCBsaWdodENvdW50ID0gMDtcbiAgICBsZXQgbGlnaHRzT24gPSAwO1xuICAgIGxldCB0ZW1wZXJhdHVyZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGxldCBodW1pZGl0eTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGxldCBsYXN0TW90aW9uOiBEYXRlIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gR3JvdXAgZW50aXRpZXMgYnkgdHlwZSBmb3IgYmV0dGVyIG9yZ2FuaXphdGlvblxuICAgIHRoaXMuZ3JvdXBlZEVudGl0aWVzID0gdGhpcy5ncm91cEVudGl0aWVzQnlUeXBlKCk7XG5cbiAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVdIG9mIHRoaXMuZW50aXR5U3RhdGVzKSB7XG4gICAgICBpZiAoZW50aXR5SWQuc3RhcnRzV2l0aCgnbGlnaHQuJykpIHtcbiAgICAgICAgbGlnaHRDb3VudCsrO1xuICAgICAgICBpZiAoc3RhdGUuc3RhdGUgPT09ICdvbicpIHtcbiAgICAgICAgICBsaWdodHNPbisrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUlkLmluY2x1ZGVzKCd0ZW1wZXJhdHVyZScpICYmIHN0YXRlLnN0YXRlICE9PSAndW5hdmFpbGFibGUnKSB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBwYXJzZUZsb2F0KHN0YXRlLnN0YXRlKTtcbiAgICAgICAgaWYgKCFpc05hTih0ZW1wKSkge1xuICAgICAgICAgIHRlbXBlcmF0dXJlID0gdGVtcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRpdHlJZC5pbmNsdWRlcygnaHVtaWRpdHknKSAmJiBzdGF0ZS5zdGF0ZSAhPT0gJ3VuYXZhaWxhYmxlJykge1xuICAgICAgICBjb25zdCBodW0gPSBwYXJzZUZsb2F0KHN0YXRlLnN0YXRlKTtcbiAgICAgICAgaWYgKCFpc05hTihodW0pKSB7XG4gICAgICAgICAgaHVtaWRpdHkgPSBodW07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5SWQuaW5jbHVkZXMoJ21vdGlvbicpIHx8IGVudGl0eUlkLmluY2x1ZGVzKCdwcmVzZW5jZScpKSB7XG4gICAgICAgIGlmIChzdGF0ZS5zdGF0ZSA9PT0gJ29uJyAmJiBzdGF0ZS5sYXN0X2NoYW5nZWQpIHtcbiAgICAgICAgICBjb25zdCBtb3Rpb25UaW1lID0gbmV3IERhdGUoc3RhdGUubGFzdF9jaGFuZ2VkKTtcbiAgICAgICAgICBpZiAoIWxhc3RNb3Rpb24gfHwgbW90aW9uVGltZSA+IGxhc3RNb3Rpb24pIHtcbiAgICAgICAgICAgIGxhc3RNb3Rpb24gPSBtb3Rpb25UaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubGlnaHRDb3VudCA9IGxpZ2h0Q291bnQ7XG4gICAgdGhpcy5saWdodHNPbiA9IGxpZ2h0c09uO1xuICAgIHRoaXMudGVtcGVyYXR1cmUgPSB0ZW1wZXJhdHVyZTtcbiAgICB0aGlzLmh1bWlkaXR5ID0gaHVtaWRpdHk7XG4gICAgdGhpcy5sYXN0TW90aW9uID0gbGFzdE1vdGlvbjtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IHJvb21OYW1lID0gdGhpcy5hcmVhTmFtZSB8fCB0aGlzLndpZGdldENvbmZpZz8udGl0bGUgfHwgJ1Vua25vd24gUm9vbSc7XG5cbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlclNrZWxldG9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2lkZ2V0LWVycm9yXCI+XG4gICAgICAgICAgJHt0aGlzLmVycm9yfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCByb2xlPVwicmVnaW9uXCIgYXJpYS1sYWJlbD1cIiR7cm9vbU5hbWV9IHJvb20gY29udHJvbHNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlciB0b3VjaC10YXJnZXRcIiBAY2xpY2s9JHt0aGlzLnRvZ2dsZUV4cGFuZGVkfSBAa2V5ZG93bj0ke3RoaXMuaGFuZGxlSGVhZGVyS2V5ZG93bn0+XG4gICAgICAgICAgPGgyPiR7cm9vbU5hbWV9PC9oMj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VtbWFyeVwiPlxuICAgICAgICAgICAgJHt0aGlzLnJlbmRlclN1bW1hcnkoKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgY2xhc3M9XCJleHBhbmQtaWNvbiAke3RoaXMuZXhwYW5kZWQgPyAnZXhwYW5kZWQnIDogJyd9XCJcbiAgICAgICAgICAgIGljb249XCJtZGk6Y2hldnJvbi1kb3duXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCIke3RoaXMuZXhwYW5kZWQgPyAnQ29sbGFwc2UnIDogJ0V4cGFuZCd9IHJvb20gZGV0YWlsc1wiXG4gICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudCAke3RoaXMuZXhwYW5kZWQgPyAnZXhwYW5kZWQnIDogJ2NvbGxhcHNlZCd9XCI+XG4gICAgICAgICAgJHt0aGlzLnJlbmRlckV4cGFuZGVkKCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgICAgICAke3RoaXMubGlnaHRDb3VudCA+IDAgPyBodG1sYFxuICAgICAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPSR7dGhpcy50dXJuQWxsTGlnaHRzT2ZmfSBhcmlhLWxhYmVsPVwiVHVybiBhbGwgbGlnaHRzIG9mZlwiPlxuICAgICAgICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOmxpZ2h0YnVsYi1vZmZcIj48L2hhLWljb24+XG4gICAgICAgICAgICAgIEFsbCBPZmZcbiAgICAgICAgICAgIDwvbXdjLWJ1dHRvbj5cbiAgICAgICAgICBgIDogJyd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN1bW1hcnkoKTogVGVtcGxhdGVSZXN1bHRbXSB7XG4gICAgY29uc3Qgc3VtbWFyeTogVGVtcGxhdGVSZXN1bHRbXSA9IFtdO1xuXG4gICAgLy8gTGlnaHQgc3RhdHVzXG4gICAgaWYgKHRoaXMubGlnaHRDb3VudCA+IDApIHtcbiAgICAgIHN1bW1hcnkucHVzaChodG1sYFxuICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktaXRlbVwiPlxuICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6bGlnaHRidWxiXCI+PC9oYS1pY29uPlxuICAgICAgICAgICR7dGhpcy5saWdodHNPbn0vJHt0aGlzLmxpZ2h0Q291bnR9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIGApO1xuICAgIH1cblxuICAgIC8vIFRlbXBlcmF0dXJlXG4gICAgaWYgKHRoaXMudGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3VtbWFyeS5wdXNoKGh0bWxgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3VtbWFyeS1pdGVtXCI+XG4gICAgICAgICAgPGhhLWljb24gaWNvbj1cIm1kaTp0aGVybW9tZXRlclwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAke3RoaXMudGVtcGVyYXR1cmUudG9GaXhlZCgxKX3CsFxuICAgICAgICA8L3NwYW4+XG4gICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBIdW1pZGl0eVxuICAgIGlmICh0aGlzLmh1bWlkaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN1bW1hcnkucHVzaChodG1sYFxuICAgICAgICA8c3BhbiBjbGFzcz1cInN1bW1hcnktaXRlbVwiPlxuICAgICAgICAgIDxoYS1pY29uIGljb249XCJtZGk6d2F0ZXItcGVyY2VudFwiPjwvaGEtaWNvbj5cbiAgICAgICAgICAke3RoaXMuaHVtaWRpdHkudG9GaXhlZCgwKX0lXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIGApO1xuICAgIH1cblxuICAgIC8vIExhc3QgbW90aW9uXG4gICAgaWYgKHRoaXMubGFzdE1vdGlvbikge1xuICAgICAgY29uc3QgbWludXRlc0FnbyA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aGlzLmxhc3RNb3Rpb24uZ2V0VGltZSgpKSAvIDYwMDAwKTtcbiAgICAgIGNvbnN0IHRpbWVTdHIgPSBtaW51dGVzQWdvIDwgMSA/ICdub3cnIDogXG4gICAgICAgICAgICAgICAgICAgICAgbWludXRlc0FnbyA8IDYwID8gYCR7bWludXRlc0Fnb31tIGFnb2AgOlxuICAgICAgICAgICAgICAgICAgICAgIGAke01hdGguZmxvb3IobWludXRlc0FnbyAvIDYwKX1oIGFnb2A7XG4gICAgICBzdW1tYXJ5LnB1c2goaHRtbGBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzdW1tYXJ5LWl0ZW1cIj5cbiAgICAgICAgICA8aGEtaWNvbiBpY29uPVwibWRpOm1vdGlvbi1zZW5zb3JcIj48L2hhLWljb24+XG4gICAgICAgICAgJHt0aW1lU3RyfVxuICAgICAgICA8L3NwYW4+XG4gICAgICBgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VtbWFyeTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRXhwYW5kZWQoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cImVudGl0eS1saXN0XCI+XG4gICAgICAgICR7T2JqZWN0LmVudHJpZXModGhpcy5ncm91cGVkRW50aXRpZXMpLm1hcCgoW3R5cGUsIGVudGl0aWVzXSkgPT4gXG4gICAgICAgICAgdGhpcy5yZW5kZXJFbnRpdHlHcm91cCh0eXBlLCBlbnRpdGllcylcbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVudGl0eShlbnRpdHlJZDogc3RyaW5nKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGVudGl0eUlkKTtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm4gaHRtbGBgO1xuXG4gICAgY29uc3QgbmFtZSA9IHN0YXRlLmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZSB8fCBlbnRpdHlJZDtcbiAgICBjb25zdCBkb21haW4gPSBlbnRpdHlJZC5zcGxpdCgnLicpWzBdO1xuICAgIGNvbnN0IGlzVG9nZ2xlYWJsZSA9IFsnbGlnaHQnLCAnc3dpdGNoJywgJ2ZhbicsICdpbnB1dF9ib29sZWFuJ10uaW5jbHVkZXMoZG9tYWluKTtcbiAgICBjb25zdCBpY29uID0gZ2V0RW50aXR5SWNvbihlbnRpdHlJZCwgc3RhdGUpO1xuICAgIGNvbnN0IGljb25Db2xvciA9IGdldEVudGl0eUljb25Db2xvcihlbnRpdHlJZCwgc3RhdGUpO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW50aXR5LWl0ZW0gdG91Y2gtdGFyZ2V0XCIgQGNsaWNrPSR7aXNUb2dnbGVhYmxlID8gKCkgPT4gdGhpcy50b2dnbGVFbnRpdHkoZW50aXR5SWQpIDogdW5kZWZpbmVkfT5cbiAgICAgICAgPGhhLWljb24gXG4gICAgICAgICAgY2xhc3M9XCJlbnRpdHktaWNvbiAke3N0YXRlLnN0YXRlfSAke3N0YXRlLnN0YXRlID09PSAndW5hdmFpbGFibGUnID8gJ3VuYXZhaWxhYmxlJyA6ICcnfVwiXG4gICAgICAgICAgaWNvbj1cIiR7aWNvbn1cIlxuICAgICAgICAgIHN0eWxlPVwiY29sb3I6ICR7aWNvbkNvbG9yfVwiXG4gICAgICAgID48L2hhLWljb24+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZW50aXR5LW5hbWVcIj4ke25hbWV9PC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW50aXR5LWNvbnRyb2xzXCI+XG4gICAgICAgICAgJHtpc1RvZ2dsZWFibGUgPyBodG1sYFxuICAgICAgICAgICAgPGhhLXN3aXRjaFxuICAgICAgICAgICAgICAuY2hlY2tlZD0ke3N0YXRlLnN0YXRlID09PSAnb24nfVxuICAgICAgICAgICAgICBAY2hhbmdlPSR7KGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJUb2dnbGUgJHtuYW1lfVwiXG4gICAgICAgICAgICA+PC9oYS1zd2l0Y2g+XG4gICAgICAgICAgYCA6IGh0bWxgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVudGl0eS1zdGF0ZVwiPiR7c3RhdGUuc3RhdGV9PC9zcGFuPlxuICAgICAgICAgIGB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U29ydGVkRW50aXRpZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gQXJyYXkuZnJvbSh0aGlzLmVudGl0eVN0YXRlcy5rZXlzKCkpO1xuICAgIFxuICAgIC8vIFNvcnQgYnkgZG9tYWluIHByaW9yaXR5LCB0aGVuIGJ5IG5hbWVcbiAgICBjb25zdCBkb21haW5Qcmlvcml0eTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcbiAgICAgICdsaWdodCc6IDEsXG4gICAgICAnc3dpdGNoJzogMixcbiAgICAgICdmYW4nOiAzLFxuICAgICAgJ2NsaW1hdGUnOiA0LFxuICAgICAgJ2NvdmVyJzogNSxcbiAgICAgICdzZW5zb3InOiA2LFxuICAgICAgJ2JpbmFyeV9zZW5zb3InOiA3LFxuICAgIH07XG5cbiAgICByZXR1cm4gZW50aXRpZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZG9tYWluQSA9IGEuc3BsaXQoJy4nKVswXTtcbiAgICAgIGNvbnN0IGRvbWFpbkIgPSBiLnNwbGl0KCcuJylbMF07XG4gICAgICBjb25zdCBwcmlvcml0eUEgPSBkb21haW5Qcmlvcml0eVtkb21haW5BXSB8fCA5OTk7XG4gICAgICBjb25zdCBwcmlvcml0eUIgPSBkb21haW5Qcmlvcml0eVtkb21haW5CXSB8fCA5OTk7XG4gICAgICBcbiAgICAgIGlmIChwcmlvcml0eUEgIT09IHByaW9yaXR5Qikge1xuICAgICAgICByZXR1cm4gcHJpb3JpdHlBIC0gcHJpb3JpdHlCO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVFeHBhbmRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLmV4cGFuZGVkID0gIXRoaXMuZXhwYW5kZWQ7XG4gICAgXG4gICAgLy8gVXBkYXRlIHN1YnNjcmlwdGlvbnMgd2hlbiBleHBhbmRpbmcvY29sbGFwc2luZ1xuICAgIGlmICh0aGlzLmV4cGFuZGVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUhlYWRlcktleWRvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInIHx8IGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy50b2dnbGVFeHBhbmRlZCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ3JvdXBFbnRpdGllc0J5VHlwZSgpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGdyb3VwczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG4gICAgXG4gICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiB0aGlzLmVudGl0eVN0YXRlcy5rZXlzKCkpIHtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IGVudGl0eUlkLnNwbGl0KCcuJylbMF07XG4gICAgICBcbiAgICAgIC8vIEdyb3VwIGJ5IGRvbWFpbiB3aXRoIGZyaWVuZGx5IG5hbWVzXG4gICAgICBjb25zdCBncm91cE5hbWUgPSB0aGlzLmdldERvbWFpbkdyb3VwTmFtZShkb21haW4pO1xuICAgICAgaWYgKCFncm91cHNbZ3JvdXBOYW1lXSkge1xuICAgICAgICBncm91cHNbZ3JvdXBOYW1lXSA9IFtdO1xuICAgICAgfVxuICAgICAgZ3JvdXBzW2dyb3VwTmFtZV0ucHVzaChlbnRpdHlJZCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNvcnQgZW50aXRpZXMgd2l0aGluIGVhY2ggZ3JvdXBcbiAgICBmb3IgKGNvbnN0IFtncm91cE5hbWUsIGVudGl0aWVzXSBvZiBPYmplY3QuZW50cmllcyhncm91cHMpKSB7XG4gICAgICBncm91cHNbZ3JvdXBOYW1lXSA9IGVudGl0aWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGVBID0gdGhpcy5lbnRpdHlTdGF0ZXMuZ2V0KGEpO1xuICAgICAgICBjb25zdCBzdGF0ZUIgPSB0aGlzLmVudGl0eVN0YXRlcy5nZXQoYik7XG4gICAgICAgIGNvbnN0IG5hbWVBID0gc3RhdGVBPy5hdHRyaWJ1dGVzPy5mcmllbmRseV9uYW1lIHx8IGE7XG4gICAgICAgIGNvbnN0IG5hbWVCID0gc3RhdGVCPy5hdHRyaWJ1dGVzPy5mcmllbmRseV9uYW1lIHx8IGI7XG4gICAgICAgIHJldHVybiBuYW1lQS5sb2NhbGVDb21wYXJlKG5hbWVCKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ3JvdXBzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREb21haW5Hcm91cE5hbWUoZG9tYWluOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRvbWFpbk5hbWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2xpZ2h0JzogJ0xpZ2h0cycsXG4gICAgICAnc3dpdGNoJzogJ1N3aXRjaGVzJyxcbiAgICAgICdmYW4nOiAnRmFucycsXG4gICAgICAnY2xpbWF0ZSc6ICdDbGltYXRlJyxcbiAgICAgICdjb3Zlcic6ICdDb3ZlcnMnLFxuICAgICAgJ2xvY2snOiAnTG9ja3MnLFxuICAgICAgJ3NlbnNvcic6ICdTZW5zb3JzJyxcbiAgICAgICdiaW5hcnlfc2Vuc29yJzogJ0JpbmFyeSBTZW5zb3JzJyxcbiAgICAgICdtZWRpYV9wbGF5ZXInOiAnTWVkaWEnLFxuICAgICAgJ2NhbWVyYSc6ICdDYW1lcmFzJyxcbiAgICAgICdhbGFybV9jb250cm9sX3BhbmVsJzogJ1NlY3VyaXR5J1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGRvbWFpbk5hbWVzW2RvbWFpbl0gfHwgZG9tYWluLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZG9tYWluLnNsaWNlKDEpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHlHcm91cCh0eXBlOiBzdHJpbmcsIGVudGl0aWVzOiBzdHJpbmdbXSk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoZW50aXRpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gaHRtbGBgO1xuICAgIFxuICAgIGNvbnN0IHR5cGVJY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdMaWdodHMnOiAnbWRpOmxpZ2h0YnVsYicsXG4gICAgICAnU3dpdGNoZXMnOiAnbWRpOmxpZ2h0LXN3aXRjaCcsXG4gICAgICAnU2Vuc29ycyc6ICdtZGk6ZXllJyxcbiAgICAgICdDbGltYXRlJzogJ21kaTp0aGVybW9zdGF0JyxcbiAgICAgICdNZWRpYSc6ICdtZGk6dGVsZXZpc2lvbicsXG4gICAgICAnQ292ZXJzJzogJ21kaTp3aW5kb3ctc2h1dHRlcicsXG4gICAgICAnTG9ja3MnOiAnbWRpOmxvY2snLFxuICAgICAgJ0ZhbnMnOiAnbWRpOmZhbicsXG4gICAgICAnQ2FtZXJhcyc6ICdtZGk6Y2N0dicsXG4gICAgICAnU2VjdXJpdHknOiAnbWRpOnNoaWVsZC1ob21lJ1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW50aXR5LWdyb3VwXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbnRpdHktZ3JvdXAtaGVhZGVyXCI+XG4gICAgICAgICAgPGhhLWljb24gaWNvbj0ke3R5cGVJY29uc1t0eXBlXSB8fCAnbWRpOmhvbWUnfT48L2hhLWljb24+XG4gICAgICAgICAgPHNwYW4+JHt0eXBlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvdW50XCI+KCR7ZW50aXRpZXMubGVuZ3RofSk8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICAke2VudGl0aWVzLm1hcChlbnRpdHkgPT4gdGhpcy5yZW5kZXJFbnRpdHkoZW50aXR5KSl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTa2VsZXRvbigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi10ZXh0IGxhcmdlXCIgc3R5bGU9XCJ3aWR0aDogMTIwcHg7XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInN1bW1hcnlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi10ZXh0XCIgc3R5bGU9XCJ3aWR0aDogNDBweDtcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi10ZXh0XCIgc3R5bGU9XCJ3aWR0aDogNTBweDtcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJza2VsZXRvbiBza2VsZXRvbi10ZXh0XCIgc3R5bGU9XCJ3aWR0aDogNDVweDtcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24taWNvblwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0dXJuQWxsTGlnaHRzT2ZmKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGxpZ2h0cyA9IEFycmF5LmZyb20odGhpcy5lbnRpdHlTdGF0ZXMua2V5cygpKS5maWx0ZXIoaWQgPT4gXG4gICAgICBpZC5zdGFydHNXaXRoKCdsaWdodC4nKSAmJiB0aGlzLmVudGl0eVN0YXRlcy5nZXQoaWQpPy5zdGF0ZSA9PT0gJ29uJ1xuICAgICk7XG5cbiAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIGxpZ2h0cykge1xuICAgICAgYXdhaXQgdGhpcy50dXJuT2ZmKGxpZ2h0KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc3R5bGVzID0gY3NzYFxuICAgICR7RGFzaHZpZXdXaWRnZXQuc3R5bGVzfVxuICAgICR7c2tlbGV0b25TdHlsZXN9XG4gICAgJHt0b3VjaFN0eWxlc31cbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMTUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICAgICAgfVxuXG4gICAgICAuaGVhZGVyIGgyIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAuc3VtbWFyeSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLnN1bW1hcnktaXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuc3VtbWFyeS1pdGVtIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5leHBhbmQtaWNvbiB7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMjRweDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1pY29uLmV4cGFuZGVkIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTtcbiAgICAgIH1cblxuICAgICAgLyogRW5oYW5jZWQgY29udGVudCB3aXRoIHNtb290aCBhbmltYXRpb25zICovXG4gICAgICAuY29udGVudCB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRyYW5zaXRpb246IG1heC1oZWlnaHQgMjUwbXMgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC5jb2xsYXBzZWQge1xuICAgICAgICBtYXgtaGVpZ2h0OiAwO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC5leHBhbmRlZCB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDYwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWxpc3Qge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDJweDtcbiAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHNjcm9sbGJhci13aWR0aDogdGhpbjtcbiAgICAgICAgcGFkZGluZzogMCAxNnB4IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktZ3JvdXAge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWdyb3VwOmxhc3QtY2hpbGQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LWdyb3VwLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktZ3JvdXAtaGVhZGVyIGhhLWljb24ge1xuICAgICAgICAtLW1kYy1pY29uLXNpemU6IDE4cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb3VudCB7XG4gICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktaXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMTUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktaXRlbTpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pdGVtOmFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45OCk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktaWNvbiB7XG4gICAgICAgIC0tbWRjLWljb24tc2l6ZTogMjRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogY29sb3IgMTUwbXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1pY29uLnVuYXZhaWxhYmxlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuZW50aXR5LW5hbWUge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgZm9udC1zaXplOiAwLjk1ZW07XG4gICAgICB9XG5cbiAgICAgIC5lbnRpdHktY29udHJvbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIH1cblxuICAgICAgLmVudGl0eS1zdGF0ZSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgICBtaW4td2lkdGg6IDYwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb25zIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb25zOmVtcHR5IHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgbXdjLWJ1dHRvbiB7XG4gICAgICAgIC0tbWRjLXRoZW1lLXByaW1hcnk6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgfVxuXG4gICAgICBtd2MtYnV0dG9uIGhhLWljb24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICAgIH1cblxuICAgICAgLyogTW9iaWxlIG9wdGltaXphdGlvbnMgKi9cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAuaGVhZGVyIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnN1bW1hcnkge1xuICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5lbnRpdHktaXRlbSB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmVudGl0eS1uYW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIEFjY2Vzc2liaWxpdHkgZW5oYW5jZW1lbnRzICovXG4gICAgICBAbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSkge1xuICAgICAgICAuaGVhZGVyLFxuICAgICAgICAuZXhwYW5kLWljb24sXG4gICAgICAgIC5lbnRpdHktaXRlbSxcbiAgICAgICAgLmVudGl0eS1pY29uLFxuICAgICAgICAuY29udGVudCB7XG4gICAgICAgICAgdHJhbnNpdGlvbjogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5lbnRpdHktaXRlbTphY3RpdmUge1xuICAgICAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBGb2N1cyBpbmRpY2F0b3JzICovXG4gICAgICAuZW50aXR5LWl0ZW06Zm9jdXMsXG4gICAgICBoYS1zd2l0Y2g6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gICAgICB9XG4gICAgYDtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/widgets/room-widget.ts\n\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"dashview-v2-panel": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkDashviewV2"] = self["webpackChunkDashviewV2"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendor-lit","vendor"], () => (__webpack_require__("./src/index.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});